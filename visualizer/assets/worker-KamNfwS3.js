(function(){"use strict";var Oe={},ae={};ae.byteLength=ht,ae.toByteArray=pt,ae.fromByteArray=xt;for(var P=[],k=[],at=typeof Uint8Array<"u"?Uint8Array:Array,ge="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Q=0,lt=ge.length;Q<lt;++Q)P[Q]=ge[Q],k[ge.charCodeAt(Q)]=Q;k[45]=62,k[95]=63;function Pe(r){var n=r.length;if(n%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var o=r.indexOf("=");o===-1&&(o=n);var c=o===n?0:4-o%4;return[o,c]}function ht(r){var n=Pe(r),o=n[0],c=n[1];return(o+c)*3/4-c}function dt(r,n,o){return(n+o)*3/4-o}function pt(r){var n,o=Pe(r),c=o[0],l=o[1],h=new at(dt(r,c,l)),w=0,g=l>0?c-4:c,m;for(m=0;m<g;m+=4)n=k[r.charCodeAt(m)]<<18|k[r.charCodeAt(m+1)]<<12|k[r.charCodeAt(m+2)]<<6|k[r.charCodeAt(m+3)],h[w++]=n>>16&255,h[w++]=n>>8&255,h[w++]=n&255;return l===2&&(n=k[r.charCodeAt(m)]<<2|k[r.charCodeAt(m+1)]>>4,h[w++]=n&255),l===1&&(n=k[r.charCodeAt(m)]<<10|k[r.charCodeAt(m+1)]<<4|k[r.charCodeAt(m+2)]>>2,h[w++]=n>>8&255,h[w++]=n&255),h}function wt(r){return P[r>>18&63]+P[r>>12&63]+P[r>>6&63]+P[r&63]}function yt(r,n,o){for(var c,l=[],h=n;h<o;h+=3)c=(r[h]<<16&16711680)+(r[h+1]<<8&65280)+(r[h+2]&255),l.push(wt(c));return l.join("")}function xt(r){for(var n,o=r.length,c=o%3,l=[],h=16383,w=0,g=o-c;w<g;w+=h)l.push(yt(r,w,w+h>g?g:w+h));return c===1?(n=r[o-1],l.push(P[n>>2]+P[n<<4&63]+"==")):c===2&&(n=(r[o-2]<<8)+r[o-1],l.push(P[n>>10]+P[n>>4&63]+P[n<<2&63]+"=")),l.join("")}var me={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */me.read=function(r,n,o,c,l){var h,w,g=l*8-c-1,m=(1<<g)-1,F=m>>1,s=-7,U=o?l-1:0,O=o?-1:1,R=r[n+U];for(U+=O,h=R&(1<<-s)-1,R>>=-s,s+=g;s>0;h=h*256+r[n+U],U+=O,s-=8);for(w=h&(1<<-s)-1,h>>=-s,s+=c;s>0;w=w*256+r[n+U],U+=O,s-=8);if(h===0)h=1-F;else{if(h===m)return w?NaN:(R?-1:1)*(1/0);w=w+Math.pow(2,c),h=h-F}return(R?-1:1)*w*Math.pow(2,h-c)},me.write=function(r,n,o,c,l,h){var w,g,m,F=h*8-l-1,s=(1<<F)-1,U=s>>1,O=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,R=c?0:h-1,z=c?1:-1,fe=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(g=isNaN(n)?1:0,w=s):(w=Math.floor(Math.log(n)/Math.LN2),n*(m=Math.pow(2,-w))<1&&(w--,m*=2),w+U>=1?n+=O/m:n+=O*Math.pow(2,1-U),n*m>=2&&(w++,m/=2),w+U>=s?(g=0,w=s):w+U>=1?(g=(n*m-1)*Math.pow(2,l),w=w+U):(g=n*Math.pow(2,U-1)*Math.pow(2,l),w=0));l>=8;r[o+R]=g&255,R+=z,g/=256,l-=8);for(w=w<<l|g,F+=l;F>0;r[o+R]=w&255,R+=z,w/=256,F-=8);r[o+R-z]|=fe*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const n=ae,o=me,c=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=s,r.SlowBuffer=Lr,r.INSPECT_MAX_BYTES=50;const l=2147483647;r.kMaxLength=l;const{Uint8Array:h,ArrayBuffer:w,SharedArrayBuffer:g}=globalThis;s.TYPED_ARRAY_SUPPORT=m(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function m(){try{const i=new h(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,h.prototype),Object.setPrototypeOf(i,e),i.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function F(i){if(i>l)throw new RangeError('The value "'+i+'" is invalid for option "size"');const e=new h(i);return Object.setPrototypeOf(e,s.prototype),e}function s(i,e,t){if(typeof i=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return z(i)}return U(i,e,t)}s.poolSize=8192;function U(i,e,t){if(typeof i=="string")return fe(i,e);if(w.isView(i))return Mr(i);if(i==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i);if(j(i,w)||i&&j(i.buffer,w)||typeof g<"u"&&(j(i,g)||i&&j(i.buffer,g)))return Ce(i,e,t);if(typeof i=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const u=i.valueOf&&i.valueOf();if(u!=null&&u!==i)return s.from(u,e,t);const f=Dr(i);if(f)return f;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof i[Symbol.toPrimitive]=="function")return s.from(i[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i)}s.from=function(i,e,t){return U(i,e,t)},Object.setPrototypeOf(s.prototype,h.prototype),Object.setPrototypeOf(s,h);function O(i){if(typeof i!="number")throw new TypeError('"size" argument must be of type number');if(i<0)throw new RangeError('The value "'+i+'" is invalid for option "size"')}function R(i,e,t){return O(i),i<=0?F(i):e!==void 0?typeof t=="string"?F(i).fill(e,t):F(i).fill(e):F(i)}s.alloc=function(i,e,t){return R(i,e,t)};function z(i){return O(i),F(i<0?0:ke(i)|0)}s.allocUnsafe=function(i){return z(i)},s.allocUnsafeSlow=function(i){return z(i)};function fe(i,e){if((typeof e!="string"||e==="")&&(e="utf8"),!s.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const t=Ze(i,e)|0;let u=F(t);const f=u.write(i,e);return f!==t&&(u=u.slice(0,f)),u}function $e(i){const e=i.length<0?0:ke(i.length)|0,t=F(e);for(let u=0;u<e;u+=1)t[u]=i[u]&255;return t}function Mr(i){if(j(i,h)){const e=new h(i);return Ce(e.buffer,e.byteOffset,e.byteLength)}return $e(i)}function Ce(i,e,t){if(e<0||i.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(i.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let u;return e===void 0&&t===void 0?u=new h(i):t===void 0?u=new h(i,e):u=new h(i,e,t),Object.setPrototypeOf(u,s.prototype),u}function Dr(i){if(s.isBuffer(i)){const e=ke(i.length)|0,t=F(e);return t.length===0||i.copy(t,0,0,e),t}if(i.length!==void 0)return typeof i.length!="number"||Le(i.length)?F(0):$e(i);if(i.type==="Buffer"&&Array.isArray(i.data))return $e(i.data)}function ke(i){if(i>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return i|0}function Lr(i){return+i!=i&&(i=0),s.alloc(+i)}s.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==s.prototype},s.compare=function(e,t){if(j(e,h)&&(e=s.from(e,e.offset,e.byteLength)),j(t,h)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let u=e.length,f=t.length;for(let a=0,d=Math.min(u,f);a<d;++a)if(e[a]!==t[a]){u=e[a],f=t[a];break}return u<f?-1:f<u?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return s.alloc(0);let u;if(t===void 0)for(t=0,u=0;u<e.length;++u)t+=e[u].length;const f=s.allocUnsafe(t);let a=0;for(u=0;u<e.length;++u){let d=e[u];if(j(d,h))a+d.length>f.length?(s.isBuffer(d)||(d=s.from(d)),d.copy(f,a)):h.prototype.set.call(f,d,a);else if(s.isBuffer(d))d.copy(f,a);else throw new TypeError('"list" argument must be an Array of Buffers');a+=d.length}return f};function Ze(i,e){if(s.isBuffer(i))return i.length;if(w.isView(i)||j(i,w))return i.byteLength;if(typeof i!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof i);const t=i.length,u=arguments.length>2&&arguments[2]===!0;if(!u&&t===0)return 0;let f=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return De(i).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return st(i).length;default:if(f)return u?-1:De(i).length;e=(""+e).toLowerCase(),f=!0}}s.byteLength=Ze;function Or(i,e,t){let u=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(i||(i="utf8");;)switch(i){case"hex":return Hr(this,e,t);case"utf8":case"utf-8":return et(this,e,t);case"ascii":return Xr(this,e,t);case"latin1":case"binary":return Yr(this,e,t);case"base64":return Wr(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Jr(this,e,t);default:if(u)throw new TypeError("Unknown encoding: "+i);i=(i+"").toLowerCase(),u=!0}}s.prototype._isBuffer=!0;function Z(i,e,t){const u=i[e];i[e]=i[t],i[t]=u}s.prototype.swap16=function(){const e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)Z(this,t,t+1);return this},s.prototype.swap32=function(){const e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)Z(this,t,t+3),Z(this,t+1,t+2);return this},s.prototype.swap64=function(){const e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)Z(this,t,t+7),Z(this,t+1,t+6),Z(this,t+2,t+5),Z(this,t+3,t+4);return this},s.prototype.toString=function(){const e=this.length;return e===0?"":arguments.length===0?et(this,0,e):Or.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:s.compare(this,e)===0},s.prototype.inspect=function(){let e="";const t=r.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},c&&(s.prototype[c]=s.prototype.inspect),s.prototype.compare=function(e,t,u,f,a){if(j(e,h)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),u===void 0&&(u=e?e.length:0),f===void 0&&(f=0),a===void 0&&(a=this.length),t<0||u>e.length||f<0||a>this.length)throw new RangeError("out of range index");if(f>=a&&t>=u)return 0;if(f>=a)return-1;if(t>=u)return 1;if(t>>>=0,u>>>=0,f>>>=0,a>>>=0,this===e)return 0;let d=a-f,B=u-t;const A=Math.min(d,B),b=this.slice(f,a),_=e.slice(t,u);for(let T=0;T<A;++T)if(b[T]!==_[T]){d=b[T],B=_[T];break}return d<B?-1:B<d?1:0};function Qe(i,e,t,u,f){if(i.length===0)return-1;if(typeof t=="string"?(u=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,Le(t)&&(t=f?0:i.length-1),t<0&&(t=i.length+t),t>=i.length){if(f)return-1;t=i.length-1}else if(t<0)if(f)t=0;else return-1;if(typeof e=="string"&&(e=s.from(e,u)),s.isBuffer(e))return e.length===0?-1:ve(i,e,t,u,f);if(typeof e=="number")return e=e&255,typeof h.prototype.indexOf=="function"?f?h.prototype.indexOf.call(i,e,t):h.prototype.lastIndexOf.call(i,e,t):ve(i,[e],t,u,f);throw new TypeError("val must be string, number or Buffer")}function ve(i,e,t,u,f){let a=1,d=i.length,B=e.length;if(u!==void 0&&(u=String(u).toLowerCase(),u==="ucs2"||u==="ucs-2"||u==="utf16le"||u==="utf-16le")){if(i.length<2||e.length<2)return-1;a=2,d/=2,B/=2,t/=2}function A(_,T){return a===1?_[T]:_.readUInt16BE(T*a)}let b;if(f){let _=-1;for(b=t;b<d;b++)if(A(i,b)===A(e,_===-1?0:b-_)){if(_===-1&&(_=b),b-_+1===B)return _*a}else _!==-1&&(b-=b-_),_=-1}else for(t+B>d&&(t=d-B),b=t;b>=0;b--){let _=!0;for(let T=0;T<B;T++)if(A(i,b+T)!==A(e,T)){_=!1;break}if(_)return b}return-1}s.prototype.includes=function(e,t,u){return this.indexOf(e,t,u)!==-1},s.prototype.indexOf=function(e,t,u){return Qe(this,e,t,u,!0)},s.prototype.lastIndexOf=function(e,t,u){return Qe(this,e,t,u,!1)};function Pr(i,e,t,u){t=Number(t)||0;const f=i.length-t;u?(u=Number(u),u>f&&(u=f)):u=f;const a=e.length;u>a/2&&(u=a/2);let d;for(d=0;d<u;++d){const B=parseInt(e.substr(d*2,2),16);if(Le(B))return d;i[t+d]=B}return d}function Gr(i,e,t,u){return xe(De(e,i.length-t),i,t,u)}function zr(i,e,t,u){return xe(vr(e),i,t,u)}function jr(i,e,t,u){return xe(st(e),i,t,u)}function Vr(i,e,t,u){return xe(en(e,i.length-t),i,t,u)}s.prototype.write=function(e,t,u,f){if(t===void 0)f="utf8",u=this.length,t=0;else if(u===void 0&&typeof t=="string")f=t,u=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(u)?(u=u>>>0,f===void 0&&(f="utf8")):(f=u,u=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const a=this.length-t;if((u===void 0||u>a)&&(u=a),e.length>0&&(u<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");f||(f="utf8");let d=!1;for(;;)switch(f){case"hex":return Pr(this,e,t,u);case"utf8":case"utf-8":return Gr(this,e,t,u);case"ascii":case"latin1":case"binary":return zr(this,e,t,u);case"base64":return jr(this,e,t,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Vr(this,e,t,u);default:if(d)throw new TypeError("Unknown encoding: "+f);f=(""+f).toLowerCase(),d=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Wr(i,e,t){return e===0&&t===i.length?n.fromByteArray(i):n.fromByteArray(i.slice(e,t))}function et(i,e,t){t=Math.min(i.length,t);const u=[];let f=e;for(;f<t;){const a=i[f];let d=null,B=a>239?4:a>223?3:a>191?2:1;if(f+B<=t){let A,b,_,T;switch(B){case 1:a<128&&(d=a);break;case 2:A=i[f+1],(A&192)===128&&(T=(a&31)<<6|A&63,T>127&&(d=T));break;case 3:A=i[f+1],b=i[f+2],(A&192)===128&&(b&192)===128&&(T=(a&15)<<12|(A&63)<<6|b&63,T>2047&&(T<55296||T>57343)&&(d=T));break;case 4:A=i[f+1],b=i[f+2],_=i[f+3],(A&192)===128&&(b&192)===128&&(_&192)===128&&(T=(a&15)<<18|(A&63)<<12|(b&63)<<6|_&63,T>65535&&T<1114112&&(d=T))}}d===null?(d=65533,B=1):d>65535&&(d-=65536,u.push(d>>>10&1023|55296),d=56320|d&1023),u.push(d),f+=B}return qr(u)}const tt=4096;function qr(i){const e=i.length;if(e<=tt)return String.fromCharCode.apply(String,i);let t="",u=0;for(;u<e;)t+=String.fromCharCode.apply(String,i.slice(u,u+=tt));return t}function Xr(i,e,t){let u="";t=Math.min(i.length,t);for(let f=e;f<t;++f)u+=String.fromCharCode(i[f]&127);return u}function Yr(i,e,t){let u="";t=Math.min(i.length,t);for(let f=e;f<t;++f)u+=String.fromCharCode(i[f]);return u}function Hr(i,e,t){const u=i.length;(!e||e<0)&&(e=0),(!t||t<0||t>u)&&(t=u);let f="";for(let a=e;a<t;++a)f+=tn[i[a]];return f}function Jr(i,e,t){const u=i.slice(e,t);let f="";for(let a=0;a<u.length-1;a+=2)f+=String.fromCharCode(u[a]+u[a+1]*256);return f}s.prototype.slice=function(e,t){const u=this.length;e=~~e,t=t===void 0?u:~~t,e<0?(e+=u,e<0&&(e=0)):e>u&&(e=u),t<0?(t+=u,t<0&&(t=0)):t>u&&(t=u),t<e&&(t=e);const f=this.subarray(e,t);return Object.setPrototypeOf(f,s.prototype),f};function S(i,e,t){if(i%1!==0||i<0)throw new RangeError("offset is not uint");if(i+e>t)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(e,t,u){e=e>>>0,t=t>>>0,u||S(e,t,this.length);let f=this[e],a=1,d=0;for(;++d<t&&(a*=256);)f+=this[e+d]*a;return f},s.prototype.readUintBE=s.prototype.readUIntBE=function(e,t,u){e=e>>>0,t=t>>>0,u||S(e,t,this.length);let f=this[e+--t],a=1;for(;t>0&&(a*=256);)f+=this[e+--t]*a;return f},s.prototype.readUint8=s.prototype.readUInt8=function(e,t){return e=e>>>0,t||S(e,1,this.length),this[e]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||S(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||S(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||S(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||S(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readBigUInt64LE=q(function(e){e=e>>>0,ne(e,"offset");const t=this[e],u=this[e+7];(t===void 0||u===void 0)&&se(e,this.length-8);const f=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,a=this[++e]+this[++e]*2**8+this[++e]*2**16+u*2**24;return BigInt(f)+(BigInt(a)<<BigInt(32))}),s.prototype.readBigUInt64BE=q(function(e){e=e>>>0,ne(e,"offset");const t=this[e],u=this[e+7];(t===void 0||u===void 0)&&se(e,this.length-8);const f=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],a=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+u;return(BigInt(f)<<BigInt(32))+BigInt(a)}),s.prototype.readIntLE=function(e,t,u){e=e>>>0,t=t>>>0,u||S(e,t,this.length);let f=this[e],a=1,d=0;for(;++d<t&&(a*=256);)f+=this[e+d]*a;return a*=128,f>=a&&(f-=Math.pow(2,8*t)),f},s.prototype.readIntBE=function(e,t,u){e=e>>>0,t=t>>>0,u||S(e,t,this.length);let f=t,a=1,d=this[e+--f];for(;f>0&&(a*=256);)d+=this[e+--f]*a;return a*=128,d>=a&&(d-=Math.pow(2,8*t)),d},s.prototype.readInt8=function(e,t){return e=e>>>0,t||S(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]},s.prototype.readInt16LE=function(e,t){e=e>>>0,t||S(e,2,this.length);const u=this[e]|this[e+1]<<8;return u&32768?u|4294901760:u},s.prototype.readInt16BE=function(e,t){e=e>>>0,t||S(e,2,this.length);const u=this[e+1]|this[e]<<8;return u&32768?u|4294901760:u},s.prototype.readInt32LE=function(e,t){return e=e>>>0,t||S(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return e=e>>>0,t||S(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readBigInt64LE=q(function(e){e=e>>>0,ne(e,"offset");const t=this[e],u=this[e+7];(t===void 0||u===void 0)&&se(e,this.length-8);const f=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(u<<24);return(BigInt(f)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)}),s.prototype.readBigInt64BE=q(function(e){e=e>>>0,ne(e,"offset");const t=this[e],u=this[e+7];(t===void 0||u===void 0)&&se(e,this.length-8);const f=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(f)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+u)}),s.prototype.readFloatLE=function(e,t){return e=e>>>0,t||S(e,4,this.length),o.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return e=e>>>0,t||S(e,4,this.length),o.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||S(e,8,this.length),o.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||S(e,8,this.length),o.read(this,e,!1,52,8)};function $(i,e,t,u,f,a){if(!s.isBuffer(i))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>f||e<a)throw new RangeError('"value" argument is out of bounds');if(t+u>i.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(e,t,u,f){if(e=+e,t=t>>>0,u=u>>>0,!f){const B=Math.pow(2,8*u)-1;$(this,e,t,u,B,0)}let a=1,d=0;for(this[t]=e&255;++d<u&&(a*=256);)this[t+d]=e/a&255;return t+u},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(e,t,u,f){if(e=+e,t=t>>>0,u=u>>>0,!f){const B=Math.pow(2,8*u)-1;$(this,e,t,u,B,0)}let a=u-1,d=1;for(this[t+a]=e&255;--a>=0&&(d*=256);)this[t+a]=e/d&255;return t+u},s.prototype.writeUint8=s.prototype.writeUInt8=function(e,t,u){return e=+e,t=t>>>0,u||$(this,e,t,1,255,0),this[t]=e&255,t+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(e,t,u){return e=+e,t=t>>>0,u||$(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(e,t,u){return e=+e,t=t>>>0,u||$(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(e,t,u){return e=+e,t=t>>>0,u||$(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(e,t,u){return e=+e,t=t>>>0,u||$(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function rt(i,e,t,u,f){ft(e,u,f,i,t,7);let a=Number(e&BigInt(4294967295));i[t++]=a,a=a>>8,i[t++]=a,a=a>>8,i[t++]=a,a=a>>8,i[t++]=a;let d=Number(e>>BigInt(32)&BigInt(4294967295));return i[t++]=d,d=d>>8,i[t++]=d,d=d>>8,i[t++]=d,d=d>>8,i[t++]=d,t}function nt(i,e,t,u,f){ft(e,u,f,i,t,7);let a=Number(e&BigInt(4294967295));i[t+7]=a,a=a>>8,i[t+6]=a,a=a>>8,i[t+5]=a,a=a>>8,i[t+4]=a;let d=Number(e>>BigInt(32)&BigInt(4294967295));return i[t+3]=d,d=d>>8,i[t+2]=d,d=d>>8,i[t+1]=d,d=d>>8,i[t]=d,t+8}s.prototype.writeBigUInt64LE=q(function(e,t=0){return rt(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=q(function(e,t=0){return nt(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(e,t,u,f){if(e=+e,t=t>>>0,!f){const A=Math.pow(2,8*u-1);$(this,e,t,u,A-1,-A)}let a=0,d=1,B=0;for(this[t]=e&255;++a<u&&(d*=256);)e<0&&B===0&&this[t+a-1]!==0&&(B=1),this[t+a]=(e/d>>0)-B&255;return t+u},s.prototype.writeIntBE=function(e,t,u,f){if(e=+e,t=t>>>0,!f){const A=Math.pow(2,8*u-1);$(this,e,t,u,A-1,-A)}let a=u-1,d=1,B=0;for(this[t+a]=e&255;--a>=0&&(d*=256);)e<0&&B===0&&this[t+a+1]!==0&&(B=1),this[t+a]=(e/d>>0)-B&255;return t+u},s.prototype.writeInt8=function(e,t,u){return e=+e,t=t>>>0,u||$(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1},s.prototype.writeInt16LE=function(e,t,u){return e=+e,t=t>>>0,u||$(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2},s.prototype.writeInt16BE=function(e,t,u){return e=+e,t=t>>>0,u||$(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2},s.prototype.writeInt32LE=function(e,t,u){return e=+e,t=t>>>0,u||$(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},s.prototype.writeInt32BE=function(e,t,u){return e=+e,t=t>>>0,u||$(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4},s.prototype.writeBigInt64LE=q(function(e,t=0){return rt(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=q(function(e,t=0){return nt(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function it(i,e,t,u,f,a){if(t+u>i.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function ot(i,e,t,u,f){return e=+e,t=t>>>0,f||it(i,e,t,4),o.write(i,e,t,u,23,4),t+4}s.prototype.writeFloatLE=function(e,t,u){return ot(this,e,t,!0,u)},s.prototype.writeFloatBE=function(e,t,u){return ot(this,e,t,!1,u)};function ut(i,e,t,u,f){return e=+e,t=t>>>0,f||it(i,e,t,8),o.write(i,e,t,u,52,8),t+8}s.prototype.writeDoubleLE=function(e,t,u){return ut(this,e,t,!0,u)},s.prototype.writeDoubleBE=function(e,t,u){return ut(this,e,t,!1,u)},s.prototype.copy=function(e,t,u,f){if(!s.isBuffer(e))throw new TypeError("argument should be a Buffer");if(u||(u=0),!f&&f!==0&&(f=this.length),t>=e.length&&(t=e.length),t||(t=0),f>0&&f<u&&(f=u),f===u||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(u<0||u>=this.length)throw new RangeError("Index out of range");if(f<0)throw new RangeError("sourceEnd out of bounds");f>this.length&&(f=this.length),e.length-t<f-u&&(f=e.length-t+u);const a=f-u;return this===e&&typeof h.prototype.copyWithin=="function"?this.copyWithin(t,u,f):h.prototype.set.call(e,this.subarray(u,f),t),a},s.prototype.fill=function(e,t,u,f){if(typeof e=="string"){if(typeof t=="string"?(f=t,t=0,u=this.length):typeof u=="string"&&(f=u,u=this.length),f!==void 0&&typeof f!="string")throw new TypeError("encoding must be a string");if(typeof f=="string"&&!s.isEncoding(f))throw new TypeError("Unknown encoding: "+f);if(e.length===1){const d=e.charCodeAt(0);(f==="utf8"&&d<128||f==="latin1")&&(e=d)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<u)throw new RangeError("Out of range index");if(u<=t)return this;t=t>>>0,u=u===void 0?this.length:u>>>0,e||(e=0);let a;if(typeof e=="number")for(a=t;a<u;++a)this[a]=e;else{const d=s.isBuffer(e)?e:s.from(e,f),B=d.length;if(B===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<u-t;++a)this[a+t]=d[a%B]}return this};const re={};function Me(i,e,t){re[i]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${i}]`,this.stack,delete this.name}get code(){return i}set code(f){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:f,writable:!0})}toString(){return`${this.name} [${i}]: ${this.message}`}}}Me("ERR_BUFFER_OUT_OF_BOUNDS",function(i){return i?`${i} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Me("ERR_INVALID_ARG_TYPE",function(i,e){return`The "${i}" argument must be of type number. Received type ${typeof e}`},TypeError),Me("ERR_OUT_OF_RANGE",function(i,e,t){let u=`The value of "${i}" is out of range.`,f=t;return Number.isInteger(t)&&Math.abs(t)>2**32?f=ct(String(t)):typeof t=="bigint"&&(f=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(f=ct(f)),f+="n"),u+=` It must be ${e}. Received ${f}`,u},RangeError);function ct(i){let e="",t=i.length;const u=i[0]==="-"?1:0;for(;t>=u+4;t-=3)e=`_${i.slice(t-3,t)}${e}`;return`${i.slice(0,t)}${e}`}function Kr(i,e,t){ne(e,"offset"),(i[e]===void 0||i[e+t]===void 0)&&se(e,i.length-(t+1))}function ft(i,e,t,u,f,a){if(i>t||i<e){const d=typeof e=="bigint"?"n":"";let B;throw e===0||e===BigInt(0)?B=`>= 0${d} and < 2${d} ** ${(a+1)*8}${d}`:B=`>= -(2${d} ** ${(a+1)*8-1}${d}) and < 2 ** ${(a+1)*8-1}${d}`,new re.ERR_OUT_OF_RANGE("value",B,i)}Kr(u,f,a)}function ne(i,e){if(typeof i!="number")throw new re.ERR_INVALID_ARG_TYPE(e,"number",i)}function se(i,e,t){throw Math.floor(i)!==i?(ne(i,t),new re.ERR_OUT_OF_RANGE("offset","an integer",i)):e<0?new re.ERR_BUFFER_OUT_OF_BOUNDS:new re.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${e}`,i)}const Zr=/[^+/0-9A-Za-z-_]/g;function Qr(i){if(i=i.split("=")[0],i=i.trim().replace(Zr,""),i.length<2)return"";for(;i.length%4!==0;)i=i+"=";return i}function De(i,e){e=e||1/0;let t;const u=i.length;let f=null;const a=[];for(let d=0;d<u;++d){if(t=i.charCodeAt(d),t>55295&&t<57344){if(!f){if(t>56319){(e-=3)>-1&&a.push(239,191,189);continue}else if(d+1===u){(e-=3)>-1&&a.push(239,191,189);continue}f=t;continue}if(t<56320){(e-=3)>-1&&a.push(239,191,189),f=t;continue}t=(f-55296<<10|t-56320)+65536}else f&&(e-=3)>-1&&a.push(239,191,189);if(f=null,t<128){if((e-=1)<0)break;a.push(t)}else if(t<2048){if((e-=2)<0)break;a.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;a.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;a.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return a}function vr(i){const e=[];for(let t=0;t<i.length;++t)e.push(i.charCodeAt(t)&255);return e}function en(i,e){let t,u,f;const a=[];for(let d=0;d<i.length&&!((e-=2)<0);++d)t=i.charCodeAt(d),u=t>>8,f=t%256,a.push(f),a.push(u);return a}function st(i){return n.toByteArray(Qr(i))}function xe(i,e,t,u){let f;for(f=0;f<u&&!(f+t>=e.length||f>=i.length);++f)e[f+t]=i[f];return f}function j(i,e){return i instanceof e||i!=null&&i.constructor!=null&&i.constructor.name!=null&&i.constructor.name===e.name}function Le(i){return i!==i}const tn=(function(){const i="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){const u=t*16;for(let f=0;f<16;++f)e[u+f]=i[t]+i[f]}return e})();function q(i){return typeof BigInt>"u"?rn:i}function rn(){throw new Error("BigInt not supported")}})(Oe);const Ge=Oe.Buffer,gt=["string","number","bigint","symbol"],mt=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function Bt(r){if(r===null)return"null";if(r===void 0)return"undefined";if(r===!0||r===!1)return"boolean";const n=typeof r;if(gt.includes(n))return n;if(n==="function")return"Function";if(Array.isArray(r))return"Array";if(Et(r))return"Buffer";const o=It(r);return o||"Object"}function Et(r){return r&&r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer.call(null,r)}function It(r){const n=Object.prototype.toString.call(r).slice(8,-1);if(mt.includes(n))return n}class p{constructor(n,o,c){this.major=n,this.majorEncoded=n<<5,this.name=o,this.terminal=c}toString(){return`Type[${this.major}].${this.name}`}compare(n){return this.major<n.major?-1:this.major>n.major?1:0}}p.uint=new p(0,"uint",!0),p.negint=new p(1,"negint",!0),p.bytes=new p(2,"bytes",!0),p.string=new p(3,"string",!0),p.array=new p(4,"array",!1),p.map=new p(5,"map",!1),p.tag=new p(6,"tag",!1),p.float=new p(7,"float",!0),p.false=new p(7,"false",!0),p.true=new p(7,"true",!0),p.null=new p(7,"null",!0),p.undefined=new p(7,"undefined",!0),p.break=new p(7,"break",!0);class x{constructor(n,o,c){this.type=n,this.value=o,this.encodedLength=c,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const le=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",Ft=new TextDecoder,Tt=new TextEncoder;function Be(r){return le&&globalThis.Buffer.isBuffer(r)}const bt=le?(r,n,o)=>o-n>64?globalThis.Buffer.from(r.subarray(n,o)).toString("utf8"):Ve(r,n,o):(r,n,o)=>o-n>64?Ft.decode(r.subarray(n,o)):Ve(r,n,o),At=le?r=>r.length>64?globalThis.Buffer.from(r):je(r):r=>r.length>64?Tt.encode(r):je(r),ze=le?(r,n,o)=>Be(r)?new Uint8Array(r.subarray(n,o)):r.slice(n,o):(r,n,o)=>r.slice(n,o);function _t(r,n){if(Be(r)&&Be(n))return r.compare(n);for(let o=0;o<r.length;o++)if(r[o]!==n[o])return r[o]<n[o]?-1:1;return 0}function je(r){const n=[];let o=0;for(let c=0;c<r.length;c++){let l=r.charCodeAt(c);l<128?n[o++]=l:l<2048?(n[o++]=l>>6|192,n[o++]=l&63|128):(l&64512)===55296&&c+1<r.length&&(r.charCodeAt(c+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++c)&1023),n[o++]=l>>18|240,n[o++]=l>>12&63|128,n[o++]=l>>6&63|128,n[o++]=l&63|128):(n[o++]=l>>12|224,n[o++]=l>>6&63|128,n[o++]=l&63|128)}return n}function Ve(r,n,o){const c=[];for(;n<o;){const l=r[n];let h=null,w=l>239?4:l>223?3:l>191?2:1;if(n+w<=o){let g,m,F,s;switch(w){case 1:l<128&&(h=l);break;case 2:g=r[n+1],(g&192)===128&&(s=(l&31)<<6|g&63,s>127&&(h=s));break;case 3:g=r[n+1],m=r[n+2],(g&192)===128&&(m&192)===128&&(s=(l&15)<<12|(g&63)<<6|m&63,s>2047&&(s<55296||s>57343)&&(h=s));break;case 4:g=r[n+1],m=r[n+2],F=r[n+3],(g&192)===128&&(m&192)===128&&(F&192)===128&&(s=(l&15)<<18|(g&63)<<12|(m&63)<<6|F&63,s>65535&&s<1114112&&(h=s))}}h===null?(h=65533,w=1):h>65535&&(h-=65536,c.push(h>>>10&1023|55296),h=56320|h&1023),c.push(h),n+=w}return Ut(c)}const We=4096;function Ut(r){const n=r.length;if(n<=We)return String.fromCharCode.apply(String,r);let o="",c=0;for(;c<n;)o+=String.fromCharCode.apply(String,r.slice(c,c+=We));return o}const E="CBOR decode error:",qe="CBOR encode error:";function v(r,n,o){if(r.length-n<o)throw new Error(`${E} not enough data for type`)}const N=[24,256,65536,4294967296,BigInt("18446744073709551616")];function X(r,n,o){v(r,n,1);const c=r[n];if(o.strict===!0&&c<N[0])throw new Error(`${E} integer encoded in more bytes than necessary (strict decode)`);return c}function Y(r,n,o){v(r,n,2);const c=r[n]<<8|r[n+1];if(o.strict===!0&&c<N[1])throw new Error(`${E} integer encoded in more bytes than necessary (strict decode)`);return c}function H(r,n,o){v(r,n,4);const c=r[n]*16777216+(r[n+1]<<16)+(r[n+2]<<8)+r[n+3];if(o.strict===!0&&c<N[2])throw new Error(`${E} integer encoded in more bytes than necessary (strict decode)`);return c}function J(r,n,o){v(r,n,8);const c=r[n]*16777216+(r[n+1]<<16)+(r[n+2]<<8)+r[n+3],l=r[n+4]*16777216+(r[n+5]<<16)+(r[n+6]<<8)+r[n+7],h=(BigInt(c)<<BigInt(32))+BigInt(l);if(o.strict===!0&&h<N[3])throw new Error(`${E} integer encoded in more bytes than necessary (strict decode)`);if(h<=Number.MAX_SAFE_INTEGER)return Number(h);if(o.allowBigInt===!0)return h;throw new Error(`${E} integers outside of the safe integer range are not supported`)}function St(r,n,o,c){return new x(p.uint,X(r,n+1,c),2)}function Nt(r,n,o,c){return new x(p.uint,Y(r,n+1,c),3)}function Rt(r,n,o,c){return new x(p.uint,H(r,n+1,c),5)}function $t(r,n,o,c){return new x(p.uint,J(r,n+1,c),9)}function K(r,n){return M(r,0,n.value)}function M(r,n,o){if(o<N[0]){const c=Number(o);r.push([n|c])}else if(o<N[1]){const c=Number(o);r.push([n|24,c])}else if(o<N[2]){const c=Number(o);r.push([n|25,c>>>8,c&255])}else if(o<N[3]){const c=Number(o);r.push([n|26,c>>>24&255,c>>>16&255,c>>>8&255,c&255])}else{const c=BigInt(o);if(c<N[4]){const l=[n|27,0,0,0,0,0,0,0];let h=Number(c&BigInt(4294967295)),w=Number(c>>BigInt(32)&BigInt(4294967295));l[8]=h&255,h=h>>8,l[7]=h&255,h=h>>8,l[6]=h&255,h=h>>8,l[5]=h&255,l[4]=w&255,w=w>>8,l[3]=w&255,w=w>>8,l[2]=w&255,w=w>>8,l[1]=w&255,r.push(l)}else throw new Error(`${E} encountered BigInt larger than allowable range`)}}K.encodedSize=function(n){return M.encodedSize(n.value)},M.encodedSize=function(n){return n<N[0]?1:n<N[1]?2:n<N[2]?3:n<N[3]?5:9},K.compareTokens=function(n,o){return n.value<o.value?-1:n.value>o.value?1:0};function Ct(r,n,o,c){return new x(p.negint,-1-X(r,n+1,c),2)}function kt(r,n,o,c){return new x(p.negint,-1-Y(r,n+1,c),3)}function Mt(r,n,o,c){return new x(p.negint,-1-H(r,n+1,c),5)}const Ee=BigInt(-1),Xe=BigInt(1);function Dt(r,n,o,c){const l=J(r,n+1,c);if(typeof l!="bigint"){const h=-1-l;if(h>=Number.MIN_SAFE_INTEGER)return new x(p.negint,h,9)}if(c.allowBigInt!==!0)throw new Error(`${E} integers outside of the safe integer range are not supported`);return new x(p.negint,Ee-BigInt(l),9)}function Ie(r,n){const o=n.value,c=typeof o=="bigint"?o*Ee-Xe:o*-1-1;M(r,n.type.majorEncoded,c)}Ie.encodedSize=function(n){const o=n.value,c=typeof o=="bigint"?o*Ee-Xe:o*-1-1;return c<N[0]?1:c<N[1]?2:c<N[2]?3:c<N[3]?5:9},Ie.compareTokens=function(n,o){return n.value<o.value?1:n.value>o.value?-1:0};function ie(r,n,o,c){v(r,n,o+c);const l=ze(r,n+o,n+o+c);return new x(p.bytes,l,o+c)}function Lt(r,n,o,c){return ie(r,n,1,o)}function Ot(r,n,o,c){return ie(r,n,2,X(r,n+1,c))}function Pt(r,n,o,c){return ie(r,n,3,Y(r,n+1,c))}function Gt(r,n,o,c){return ie(r,n,5,H(r,n+1,c))}function zt(r,n,o,c){const l=J(r,n+1,c);if(typeof l=="bigint")throw new Error(`${E} 64-bit integer bytes lengths not supported`);return ie(r,n,9,l)}function he(r){return r.encodedBytes===void 0&&(r.encodedBytes=r.type===p.string?At(r.value):r.value),r.encodedBytes}function de(r,n){const o=he(n);M(r,n.type.majorEncoded,o.length),r.push(o)}de.encodedSize=function(n){const o=he(n);return M.encodedSize(o.length)+o.length},de.compareTokens=function(n,o){return jt(he(n),he(o))};function jt(r,n){return r.length<n.length?-1:r.length>n.length?1:_t(r,n)}function oe(r,n,o,c,l){const h=o+c;v(r,n,h);const w=new x(p.string,bt(r,n+o,n+h),h);return l.retainStringBytes===!0&&(w.byteValue=ze(r,n+o,n+h)),w}function Vt(r,n,o,c){return oe(r,n,1,o,c)}function Wt(r,n,o,c){return oe(r,n,2,X(r,n+1,c),c)}function qt(r,n,o,c){return oe(r,n,3,Y(r,n+1,c),c)}function Xt(r,n,o,c){return oe(r,n,5,H(r,n+1,c),c)}function Yt(r,n,o,c){const l=J(r,n+1,c);if(typeof l=="bigint")throw new Error(`${E} 64-bit integer string lengths not supported`);return oe(r,n,9,l,c)}const Ht=de;function ee(r,n,o,c){return new x(p.array,c,o)}function Jt(r,n,o,c){return ee(r,n,1,o)}function Kt(r,n,o,c){return ee(r,n,2,X(r,n+1,c))}function Zt(r,n,o,c){return ee(r,n,3,Y(r,n+1,c))}function Qt(r,n,o,c){return ee(r,n,5,H(r,n+1,c))}function vt(r,n,o,c){const l=J(r,n+1,c);if(typeof l=="bigint")throw new Error(`${E} 64-bit integer array lengths not supported`);return ee(r,n,9,l)}function er(r,n,o,c){if(c.allowIndefinite===!1)throw new Error(`${E} indefinite length items not allowed`);return ee(r,n,1,1/0)}function Fe(r,n){M(r,p.array.majorEncoded,n.value)}Fe.compareTokens=K.compareTokens,Fe.encodedSize=function(n){return M.encodedSize(n.value)};function te(r,n,o,c){return new x(p.map,c,o)}function tr(r,n,o,c){return te(r,n,1,o)}function rr(r,n,o,c){return te(r,n,2,X(r,n+1,c))}function nr(r,n,o,c){return te(r,n,3,Y(r,n+1,c))}function ir(r,n,o,c){return te(r,n,5,H(r,n+1,c))}function or(r,n,o,c){const l=J(r,n+1,c);if(typeof l=="bigint")throw new Error(`${E} 64-bit integer map lengths not supported`);return te(r,n,9,l)}function ur(r,n,o,c){if(c.allowIndefinite===!1)throw new Error(`${E} indefinite length items not allowed`);return te(r,n,1,1/0)}function Te(r,n){M(r,p.map.majorEncoded,n.value)}Te.compareTokens=K.compareTokens,Te.encodedSize=function(n){return M.encodedSize(n.value)};function cr(r,n,o,c){return new x(p.tag,o,1)}function fr(r,n,o,c){return new x(p.tag,X(r,n+1,c),2)}function sr(r,n,o,c){return new x(p.tag,Y(r,n+1,c),3)}function ar(r,n,o,c){return new x(p.tag,H(r,n+1,c),5)}function lr(r,n,o,c){return new x(p.tag,J(r,n+1,c),9)}function be(r,n){M(r,p.tag.majorEncoded,n.value)}be.compareTokens=K.compareTokens,be.encodedSize=function(n){return M.encodedSize(n.value)};const hr=20,dr=21,pr=22,wr=23;function yr(r,n,o,c){if(c.allowUndefined===!1)throw new Error(`${E} undefined values are not supported`);return c.coerceUndefinedToNull===!0?new x(p.null,null,1):new x(p.undefined,void 0,1)}function xr(r,n,o,c){if(c.allowIndefinite===!1)throw new Error(`${E} indefinite length items not allowed`);return new x(p.break,void 0,1)}function Ae(r,n,o){if(o){if(o.allowNaN===!1&&Number.isNaN(r))throw new Error(`${E} NaN values are not supported`);if(o.allowInfinity===!1&&(r===1/0||r===-1/0))throw new Error(`${E} Infinity values are not supported`)}return new x(p.float,r,n)}function gr(r,n,o,c){return Ae(Ue(r,n+1),3,c)}function mr(r,n,o,c){return Ae(Se(r,n+1),5,c)}function Br(r,n,o,c){return Ae(Ke(r,n+1),9,c)}function _e(r,n,o){const c=n.value;if(c===!1)r.push([p.float.majorEncoded|hr]);else if(c===!0)r.push([p.float.majorEncoded|dr]);else if(c===null)r.push([p.float.majorEncoded|pr]);else if(c===void 0)r.push([p.float.majorEncoded|wr]);else{let l,h=!1;(!o||o.float64!==!0)&&(He(c),l=Ue(L,1),c===l||Number.isNaN(c)?(L[0]=249,r.push(L.slice(0,3)),h=!0):(Je(c),l=Se(L,1),c===l&&(L[0]=250,r.push(L.slice(0,5)),h=!0))),h||(Er(c),l=Ke(L,1),L[0]=251,r.push(L.slice(0,9)))}}_e.encodedSize=function(n,o){const c=n.value;if(c===!1||c===!0||c===null||c===void 0)return 1;if(!o||o.float64!==!0){He(c);let l=Ue(L,1);if(c===l||Number.isNaN(c))return 3;if(Je(c),l=Se(L,1),c===l)return 5}return 9};const Ye=new ArrayBuffer(9),D=new DataView(Ye,1),L=new Uint8Array(Ye,0);function He(r){if(r===1/0)D.setUint16(0,31744,!1);else if(r===-1/0)D.setUint16(0,64512,!1);else if(Number.isNaN(r))D.setUint16(0,32256,!1);else{D.setFloat32(0,r);const n=D.getUint32(0),o=(n&2139095040)>>23,c=n&8388607;if(o===255)D.setUint16(0,31744,!1);else if(o===0)D.setUint16(0,(r&2147483648)>>16|c>>13,!1);else{const l=o-127;l<-24?D.setUint16(0,0):l<-14?D.setUint16(0,(n&2147483648)>>16|1<<24+l,!1):D.setUint16(0,(n&2147483648)>>16|l+15<<10|c>>13,!1)}}}function Ue(r,n){if(r.length-n<2)throw new Error(`${E} not enough data for float16`);const o=(r[n]<<8)+r[n+1];if(o===31744)return 1/0;if(o===64512)return-1/0;if(o===32256)return NaN;const c=o>>10&31,l=o&1023;let h;return c===0?h=l*2**-24:c!==31?h=(l+1024)*2**(c-25):h=l===0?1/0:NaN,o&32768?-h:h}function Je(r){D.setFloat32(0,r,!1)}function Se(r,n){if(r.length-n<4)throw new Error(`${E} not enough data for float32`);const o=(r.byteOffset||0)+n;return new DataView(r.buffer,o,4).getFloat32(0,!1)}function Er(r){D.setFloat64(0,r,!1)}function Ke(r,n){if(r.length-n<8)throw new Error(`${E} not enough data for float64`);const o=(r.byteOffset||0)+n;return new DataView(r.buffer,o,8).getFloat64(0,!1)}_e.compareTokens=K.compareTokens;function I(r,n,o){throw new Error(`${E} encountered invalid minor (${o}) for major ${r[n]>>>5}`)}function pe(r){return()=>{throw new Error(`${E} ${r}`)}}const y=[];for(let r=0;r<=23;r++)y[r]=I;y[24]=St,y[25]=Nt,y[26]=Rt,y[27]=$t,y[28]=I,y[29]=I,y[30]=I,y[31]=I;for(let r=32;r<=55;r++)y[r]=I;y[56]=Ct,y[57]=kt,y[58]=Mt,y[59]=Dt,y[60]=I,y[61]=I,y[62]=I,y[63]=I;for(let r=64;r<=87;r++)y[r]=Lt;y[88]=Ot,y[89]=Pt,y[90]=Gt,y[91]=zt,y[92]=I,y[93]=I,y[94]=I,y[95]=pe("indefinite length bytes/strings are not supported");for(let r=96;r<=119;r++)y[r]=Vt;y[120]=Wt,y[121]=qt,y[122]=Xt,y[123]=Yt,y[124]=I,y[125]=I,y[126]=I,y[127]=pe("indefinite length bytes/strings are not supported");for(let r=128;r<=151;r++)y[r]=Jt;y[152]=Kt,y[153]=Zt,y[154]=Qt,y[155]=vt,y[156]=I,y[157]=I,y[158]=I,y[159]=er;for(let r=160;r<=183;r++)y[r]=tr;y[184]=rr,y[185]=nr,y[186]=ir,y[187]=or,y[188]=I,y[189]=I,y[190]=I,y[191]=ur;for(let r=192;r<=215;r++)y[r]=cr;y[216]=fr,y[217]=sr,y[218]=ar,y[219]=lr,y[220]=I,y[221]=I,y[222]=I,y[223]=I;for(let r=224;r<=243;r++)y[r]=pe("simple values are not supported");y[244]=I,y[245]=I,y[246]=I,y[247]=yr,y[248]=pe("simple values are not supported"),y[249]=gr,y[250]=mr,y[251]=Br,y[252]=I,y[253]=I,y[254]=I,y[255]=xr;const G=[];for(let r=0;r<24;r++)G[r]=new x(p.uint,r,1);for(let r=-1;r>=-24;r--)G[31-r]=new x(p.negint,r,1);G[64]=new x(p.bytes,new Uint8Array(0),1),G[96]=new x(p.string,"",1),G[128]=new x(p.array,0,1),G[160]=new x(p.map,0,1),G[244]=new x(p.false,!1,1),G[245]=new x(p.true,!0,1),G[246]=new x(p.null,null,1);function Ir(){const r=[];return r[p.uint.major]=K,r[p.negint.major]=Ie,r[p.bytes.major]=de,r[p.string.major]=Ht,r[p.array.major]=Fe,r[p.map.major]=Te,r[p.tag.major]=be,r[p.float.major]=_e,r}Ir();class we{constructor(n,o){this.obj=n,this.parent=o}includes(n){let o=this;do if(o.obj===n)return!0;while(o=o.parent);return!1}static createCheck(n,o){if(n&&n.includes(o))throw new Error(`${qe} object contains circular references`);return new we(o,n)}}const V={null:new x(p.null,null),undefined:new x(p.undefined,void 0),true:new x(p.true,!0),false:new x(p.false,!1),emptyArray:new x(p.array,0),emptyMap:new x(p.map,0)},W={number(r,n,o,c){return!Number.isInteger(r)||!Number.isSafeInteger(r)?new x(p.float,r):r>=0?new x(p.uint,r):new x(p.negint,r)},bigint(r,n,o,c){return r>=BigInt(0)?new x(p.uint,r):new x(p.negint,r)},Uint8Array(r,n,o,c){return new x(p.bytes,r)},string(r,n,o,c){return new x(p.string,r)},boolean(r,n,o,c){return r?V.true:V.false},null(r,n,o,c){return V.null},undefined(r,n,o,c){return V.undefined},ArrayBuffer(r,n,o,c){return new x(p.bytes,new Uint8Array(r))},DataView(r,n,o,c){return new x(p.bytes,new Uint8Array(r.buffer,r.byteOffset,r.byteLength))},Array(r,n,o,c){if(!r.length)return o.addBreakTokens===!0?[V.emptyArray,new x(p.break)]:V.emptyArray;c=we.createCheck(c,r);const l=[];let h=0;for(const w of r)l[h++]=Ne(w,o,c);return o.addBreakTokens?[new x(p.array,r.length),l,new x(p.break)]:[new x(p.array,r.length),l]},Object(r,n,o,c){const l=n!=="Object",h=l?r.keys():Object.keys(r),w=l?r.size:h.length;if(!w)return o.addBreakTokens===!0?[V.emptyMap,new x(p.break)]:V.emptyMap;c=we.createCheck(c,r);const g=[];let m=0;for(const F of h)g[m++]=[Ne(F,o,c),Ne(l?r.get(F):r[F],o,c)];return Fr(g,o),o.addBreakTokens?[new x(p.map,w),g,new x(p.break)]:[new x(p.map,w),g]}};W.Map=W.Object,W.Buffer=W.Uint8Array;for(const r of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))W[`${r}Array`]=W.DataView;function Ne(r,n={},o){const c=Bt(r),l=n&&n.typeEncoders&&n.typeEncoders[c]||W[c];if(typeof l=="function"){const w=l(r,c,n,o);if(w!=null)return w}const h=W[c];if(!h)throw new Error(`${qe} unsupported type: ${c}`);return h(r,c,n,o)}function Fr(r,n){n.mapSorter&&r.sort(n.mapSorter)}const Tr={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class br{constructor(n,o={}){this._pos=0,this.data=n,this.options=o}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){const n=this.data[this._pos];let o=G[n];if(o===void 0){const c=y[n];if(!c)throw new Error(`${E} no decoder for major type ${n>>>5} (byte 0x${n.toString(16).padStart(2,"0")})`);const l=n&31;o=c(this.data,this._pos,l,this.options)}return this._pos+=o.encodedLength,o}}const ue=Symbol.for("DONE"),ye=Symbol.for("BREAK");function Ar(r,n,o){const c=[];for(let l=0;l<r.value;l++){const h=ce(n,o);if(h===ye){if(r.value===1/0)break;throw new Error(`${E} got unexpected break to lengthed array`)}if(h===ue)throw new Error(`${E} found array but not enough entries (got ${l}, expected ${r.value})`);c[l]=h}return c}function _r(r,n,o){const c=o.useMaps===!0,l=c?void 0:{},h=c?new Map:void 0;for(let w=0;w<r.value;w++){const g=ce(n,o);if(g===ye){if(r.value===1/0)break;throw new Error(`${E} got unexpected break to lengthed map`)}if(g===ue)throw new Error(`${E} found map but not enough entries (got ${w} [no key], expected ${r.value})`);if(c!==!0&&typeof g!="string")throw new Error(`${E} non-string keys not supported (got ${typeof g})`);if(o.rejectDuplicateMapKeys===!0&&(c&&h.has(g)||!c&&g in l))throw new Error(`${E} found repeat map key "${g}"`);const m=ce(n,o);if(m===ue)throw new Error(`${E} found map but not enough entries (got ${w} [no value], expected ${r.value})`);c?h.set(g,m):l[g]=m}return c?h:l}function ce(r,n){if(r.done())return ue;const o=r.next();if(o.type===p.break)return ye;if(o.type.terminal)return o.value;if(o.type===p.array)return Ar(o,r,n);if(o.type===p.map)return _r(o,r,n);if(o.type===p.tag){if(n.tags&&typeof n.tags[o.value]=="function"){const c=ce(r,n);return n.tags[o.value](c)}throw new Error(`${E} tag not supported (${o.value})`)}throw new Error("unsupported")}function Ur(r,n){if(!(r instanceof Uint8Array))throw new Error(`${E} data to decode must be a Uint8Array`);n=Object.assign({},Tr,n);const o=n.tokenizer||new br(r,n),c=ce(o,n);if(c===ue)throw new Error(`${E} did not find any content to decode`);if(c===ye)throw new Error(`${E} got unexpected break`);return[c,r.subarray(o.pos())]}var C=(r=>(r.TransactionGenerated="TXGenerated",r.TransactionReceived="TXReceived",r.TransactionSent="TXSent",r.EBGenerated="EBGenerated",r.EBReceived="EBReceived",r.EBSent="EBSent",r.VTBundleGenerated="VTBundleGenerated",r.VTBundleReceived="VTBundleReceived",r.VTBundleSent="VTBundleSent",r.RBGenerated="RBGenerated",r.RBReceived="RBReceived",r.RBSent="RBSent",r))(C||{});const Sr=async(r,n)=>{const o=await fetch(r,{signal:n});if(!o.body)throw new Error("body not streamed");let c=o.body;r.endsWith(".gz")&&(r=r.substring(0,r.length-3),o.headers.get("Content-Encoding")!=="gzip"&&(c=c.pipeThrough(new DecompressionStream("gzip"))));const l=r.endsWith(".cbor")?Rr():Nr();return c.pipeThrough(l)},Nr=()=>{let r="";const n=new TextDecoder;return new TransformStream({transform(o,c){r+=n.decode(o);for(let l=r.indexOf(`
`);l!=-1;l=r.indexOf(`
`)){if(l){const h=JSON.parse(r.substring(0,l));c.enqueue(h)}r=r.substring(l+1)}}})},Rr=()=>{let r=null;return new TransformStream({transform(n,o){for(r=r?Ge.concat([r,n]):Ge.from(n);r!=null;)try{const[c,l]=Ur(r);r=l,o.enqueue(c)}catch(c){if(c.message.startsWith("CBOR decode error:"))break;throw c}}})},$r=new Set([C.EBGenerated,C.EBSent,C.EBReceived,C.RBGenerated,C.RBSent,C.RBReceived,C.VTBundleGenerated,C.VTBundleSent,C.VTBundleReceived]),Cr=new Set([C.TransactionGenerated,C.TransactionSent,C.TransactionReceived]),kr=async(r,n,o=!1)=>{const c=new Set($r);o&&Cr.forEach(R=>c.add(R));let l=0,h=0,w=0;const g=performance.now();let m=performance.now();const F=[],s=o?1e4:1e3,U=()=>{F.length>0&&(postMessage({type:"TIMELINE_EVENTS",tracePath:n,events:F.splice(0)}),w++)};for await(const R of r){l++;const{message:z}=R;if(z.type!=="__unknown"&&c.has(z.type)&&(h++,F.push(R),F.length>=s)){U();const fe=performance.now();console.log(`Worker progress: ${l} events, ${h} filtered, ${w} messages sent, batch ${(fe-m).toFixed(2)}ms`),m=performance.now()}}U();const O=performance.now()-g;console.log(`Worker completed: ${l} events processed, ${h} filtered, ${w} batches sent in ${O.toFixed(0)}ms`),postMessage({type:"DONE",tracePath:n})};let Re=new AbortController;onmessage=r=>{Re.abort();const n=r.data;n.type==="STOP"||!n.tracePath||(Re=new AbortController,Sr(n.tracePath,Re.signal).then(o=>kr(o,n.tracePath,n.includeTransactions)).catch(o=>{if(o.name!=="AbortError")throw o}))}})();
