/*! For license information please see worker-Cyy8PdQo.js.LICENSE.txt */
!function(){"use strict";for(var t={},e={byteLength:function(t){var e=u(t),n=e[0],r=e[1];return 3*(n+r)/4-r},toByteArray:function(t){var e,n,i=u(t),s=i[0],f=i[1],a=new o(function(t,e,n){return 3*(e+n)/4-n}(0,s,f)),c=0,l=f>0?s-4:s;for(n=0;n<l;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],a[c++]=e>>16&255,a[c++]=e>>8&255,a[c++]=255&e;return 2===f&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,a[c++]=255&e),1===f&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,a[c++]=e>>8&255,a[c++]=255&e),a},fromByteArray:function(t){for(var e,r=t.length,o=r%3,i=[],s=16383,u=0,f=r-o;u<f;u+=s)i.push(a(t,u,u+s>f?f:u+s));return 1===o?(e=t[r-1],i.push(n[e>>2]+n[e<<4&63]+"==")):2===o&&(e=(t[r-2]<<8)+t[r-1],i.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"=")),i.join("")}},n=[],r=[],o=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)n[s]=i[s],r[i.charCodeAt(s)]=s;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function f(t){return n[t>>18&63]+n[t>>12&63]+n[t>>6&63]+n[63&t]}function a(t,e,n){for(var r,o=[],i=e;i<n;i+=3)r=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(255&t[i+2]),o.push(f(r));return o.join("")}r[45]=62,r[95]=63;var c={read:function(t,e,n,r,o){var i,s,u=8*o-r-1,f=(1<<u)-1,a=f>>1,c=-7,l=n?o-1:0,h=n?-1:1,p=t[e+l];for(l+=h,i=p&(1<<-c)-1,p>>=-c,c+=u;c>0;i=256*i+t[e+l],l+=h,c-=8);for(s=i&(1<<-c)-1,i>>=-c,c+=r;c>0;s=256*s+t[e+l],l+=h,c-=8);if(0===i)i=1-a;else{if(i===f)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),i-=a}return(p?-1:1)*s*Math.pow(2,i-r)},write:function(t,e,n,r,o,i){var s,u,f,a=8*i-o-1,c=(1<<a)-1,l=c>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,d=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-s))<1&&(s--,f*=2),(e+=s+l>=1?h/f:h*Math.pow(2,1-l))*f>=2&&(s++,f/=2),s+l>=c?(u=0,s=c):s+l>=1?(u=(e*f-1)*Math.pow(2,o),s+=l):(u=e*Math.pow(2,l-1)*Math.pow(2,o),s=0));o>=8;t[n+p]=255&u,p+=d,u/=256,o-=8);for(s=s<<o|u,a+=o;a>0;t[n+p]=255&s,p+=d,s/=256,a-=8);t[n+p-d]|=128*g}};!function(t){const n=e,r=c,o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=function(t){return+t!=t&&(t=0),l.alloc(+t)},t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i;const{Uint8Array:s,ArrayBuffer:u,SharedArrayBuffer:f}=globalThis;function a(t){if(t>i)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new s(t);return Object.setPrototypeOf(e,l.prototype),e}function l(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return d(t)}return h(t,e,n)}function h(t,e,n){if("string"==typeof t)return function(t,e){if(("string"!=typeof e||""===e)&&(e="utf8"),!l.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const n=0|b(t,e);let r=a(n);const o=r.write(t,e);return o!==n&&(r=r.slice(0,o)),r}(t,e);if(u.isView(t))return function(t){if(Z(t,s)){const e=new s(t);return y(e.buffer,e.byteOffset,e.byteLength)}return g(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Z(t,u)||t&&Z(t.buffer,u)||typeof f<"u"&&(Z(t,f)||t&&Z(t.buffer,f)))return y(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return l.from(r,e,n);const o=function(t){if(l.isBuffer(t)){const e=0|w(t.length),n=a(e);return 0===n.length||t.copy(n,0,0,e),n}if(void 0!==t.length)return"number"!=typeof t.length||Q(t.length)?a(0):g(t);if("Buffer"===t.type&&Array.isArray(t.data))return g(t.data)}(t);if(o)return o;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return l.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function p(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function d(t){return p(t),a(t<0?0:0|w(t))}function g(t){const e=t.length<0?0:0|w(t.length),n=a(e);for(let r=0;r<e;r+=1)n[r]=255&t[r];return n}function y(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===e&&void 0===n?new s(t):void 0===n?new s(t,e):new s(t,e,n),Object.setPrototypeOf(r,l.prototype),r}function w(t){if(t>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|t}function b(t,e){if(l.isBuffer(t))return t.length;if(u.isView(t)||Z(t,u))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let o=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return J(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return K(t).length;default:if(o)return r?-1:J(t).length;e=(""+e).toLowerCase(),o=!0}}function m(t,e,n){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0)||(n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,e,n);case"utf8":case"utf-8":return $(this,e,n);case"ascii":return N(this,e,n);case"latin1":case"binary":return k(this,e,n);case"base64":return U(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function B(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function E(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),Q(n=+n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=l.from(e,r)),l.isBuffer(e))return 0===e.length?-1:v(t,e,n,r,o);if("number"==typeof e)return e&=255,"function"==typeof s.prototype.indexOf?o?s.prototype.indexOf.call(t,e,n):s.prototype.lastIndexOf.call(t,e,n):v(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function v(t,e,n,r,o){let i,s=1,u=t.length,f=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,u/=2,f/=2,n/=2}function a(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(o){let r=-1;for(i=n;i<u;i++)if(a(t,i)===a(e,-1===r?0:i-r)){if(-1===r&&(r=i),i-r+1===f)return r*s}else-1!==r&&(i-=i-r),r=-1}else for(n+f>u&&(n=u-f),i=n;i>=0;i--){let n=!0;for(let r=0;r<f;r++)if(a(t,i+r)!==a(e,r)){n=!1;break}if(n)return i}return-1}function I(t,e,n,r){n=Number(n)||0;const o=t.length-n;r?(r=Number(r))>o&&(r=o):r=o;const i=e.length;let s;for(r>i/2&&(r=i/2),s=0;s<r;++s){const r=parseInt(e.substr(2*s,2),16);if(Q(r))return s;t[n+s]=r}return s}function T(t,e,n,r){return H(J(e,t.length-n),t,n,r)}function A(t,e,n,r){return H(function(t){const e=[];for(let n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function S(t,e,n,r){return H(K(e),t,n,r)}function R(t,e,n,r){return H(function(t,e){let n,r,o;const i=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(e,t.length-n),t,n,r)}function U(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function $(t,e,n){n=Math.min(t.length,n);const r=[];let o=e;for(;o<n;){const e=t[o];let i=null,s=e>239?4:e>223?3:e>191?2:1;if(o+s<=n){let n,r,u,f;switch(s){case 1:e<128&&(i=e);break;case 2:n=t[o+1],128==(192&n)&&(f=(31&e)<<6|63&n,f>127&&(i=f));break;case 3:n=t[o+1],r=t[o+2],128==(192&n)&&128==(192&r)&&(f=(15&e)<<12|(63&n)<<6|63&r,f>2047&&(f<55296||f>57343)&&(i=f));break;case 4:n=t[o+1],r=t[o+2],u=t[o+3],128==(192&n)&&128==(192&r)&&128==(192&u)&&(f=(15&e)<<18|(63&n)<<12|(63&r)<<6|63&u,f>65535&&f<1114112&&(i=f))}}null===i?(i=65533,s=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|1023&i),r.push(i),o+=s}return function(t){const e=t.length;if(e<=O)return String.fromCharCode.apply(String,t);let n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=O));return n}(r)}l.TYPED_ARRAY_SUPPORT=function(){try{const t=new s(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,s.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch{return!1}}(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(t,e,n){return h(t,e,n)},Object.setPrototypeOf(l.prototype,s.prototype),Object.setPrototypeOf(l,s),l.alloc=function(t,e,n){return function(t,e,n){return p(t),t<=0?a(t):void 0!==e?"string"==typeof n?a(t).fill(e,n):a(t).fill(e):a(t)}(t,e,n)},l.allocUnsafe=function(t){return d(t)},l.allocUnsafeSlow=function(t){return d(t)},l.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==l.prototype},l.compare=function(t,e){if(Z(t,s)&&(t=l.from(t,t.offset,t.byteLength)),Z(e,s)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,r=e.length;for(let o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);let n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;const r=l.allocUnsafe(e);let o=0;for(n=0;n<t.length;++n){let e=t[n];if(Z(e,s))o+e.length>r.length?(l.isBuffer(e)||(e=l.from(e)),e.copy(r,o)):s.prototype.set.call(r,e,o);else{if(!l.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(r,o)}o+=e.length}return r},l.byteLength=b,l.prototype._isBuffer=!0,l.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)B(this,e,e+1);return this},l.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)B(this,e,e+3),B(this,e+1,e+2);return this},l.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)B(this,e,e+7),B(this,e+1,e+6),B(this,e+2,e+5),B(this,e+3,e+4);return this},l.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?$(this,0,t):m.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){let e="";const n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},o&&(l.prototype[o]=l.prototype.inspect),l.prototype.compare=function(t,e,n,r,o){if(Z(t,s)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(this===t)return 0;let i=(o>>>=0)-(r>>>=0),u=(n>>>=0)-(e>>>=0);const f=Math.min(i,u),a=this.slice(r,o),c=t.slice(e,n);for(let s=0;s<f;++s)if(a[s]!==c[s]){i=a[s],u=c[s];break}return i<u?-1:u<i?1:0},l.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},l.prototype.indexOf=function(t,e,n){return E(this,t,e,n,!0)},l.prototype.lastIndexOf=function(t,e,n){return E(this,t,e,n,!1)},l.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let i=!1;for(;;)switch(r){case"hex":return I(this,t,e,n);case"utf8":case"utf-8":return T(this,t,e,n);case"ascii":case"latin1":case"binary":return A(this,t,e,n);case"base64":return S(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const O=4096;function N(t,e,n){let r="";n=Math.min(t.length,n);for(let o=e;o<n;++o)r+=String.fromCharCode(127&t[o]);return r}function k(t,e,n){let r="";n=Math.min(t.length,n);for(let o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function x(t,e,n){const r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);let o="";for(let i=e;i<n;++i)o+=tt[t[i]];return o}function _(t,e,n){const r=t.slice(e,n);let o="";for(let i=0;i<r.length-1;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function j(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function C(t,e,n,r,o,i){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function M(t,e,n,r,o){W(e,r,o,t,n,7);let i=Number(e&BigInt(4294967295));t[n++]=i,i>>=8,t[n++]=i,i>>=8,t[n++]=i,i>>=8,t[n++]=i;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,n}function L(t,e,n,r,o){W(e,r,o,t,n,7);let i=Number(e&BigInt(4294967295));t[n+7]=i,i>>=8,t[n+6]=i,i>>=8,t[n+5]=i,i>>=8,t[n+4]=i;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[n+3]=s,s>>=8,t[n+2]=s,s>>=8,t[n+1]=s,s>>=8,t[n]=s,n+8}function P(t,e,n,r,o,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function z(t,e,n,o,i){return e=+e,n>>>=0,i||P(t,0,n,4),r.write(t,e,n,o,23,4),n+4}function F(t,e,n,o,i){return e=+e,n>>>=0,i||P(t,0,n,8),r.write(t,e,n,o,52,8),n+8}l.prototype.slice=function(t,e){const n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);const r=this.subarray(t,e);return Object.setPrototypeOf(r,l.prototype),r},l.prototype.readUintLE=l.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||j(t,e,this.length);let r=this[t],o=1,i=0;for(;++i<e&&(o*=256);)r+=this[t+i]*o;return r},l.prototype.readUintBE=l.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||j(t,e,this.length);let r=this[t+--e],o=1;for(;e>0&&(o*=256);)r+=this[t+--e]*o;return r},l.prototype.readUint8=l.prototype.readUInt8=function(t,e){return t>>>=0,e||j(t,1,this.length),this[t]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(t,e){return t>>>=0,e||j(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(t,e){return t>>>=0,e||j(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(t,e){return t>>>=0,e||j(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(t,e){return t>>>=0,e||j(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readBigUInt64LE=et((function(t){Y(t>>>=0,"offset");const e=this[t],n=this[t+7];(void 0===e||void 0===n)&&X(t,this.length-8);const r=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,o=this[++t]+256*this[++t]+65536*this[++t]+n*2**24;return BigInt(r)+(BigInt(o)<<BigInt(32))})),l.prototype.readBigUInt64BE=et((function(t){Y(t>>>=0,"offset");const e=this[t],n=this[t+7];(void 0===e||void 0===n)&&X(t,this.length-8);const r=e*2**24+65536*this[++t]+256*this[++t]+this[++t],o=this[++t]*2**24+65536*this[++t]+256*this[++t]+n;return(BigInt(r)<<BigInt(32))+BigInt(o)})),l.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||j(t,e,this.length);let r=this[t],o=1,i=0;for(;++i<e&&(o*=256);)r+=this[t+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*e)),r},l.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||j(t,e,this.length);let r=e,o=1,i=this[t+--r];for(;r>0&&(o*=256);)i+=this[t+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i},l.prototype.readInt8=function(t,e){return t>>>=0,e||j(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){t>>>=0,e||j(t,2,this.length);const n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(t,e){t>>>=0,e||j(t,2,this.length);const n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(t,e){return t>>>=0,e||j(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return t>>>=0,e||j(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readBigInt64LE=et((function(t){Y(t>>>=0,"offset");const e=this[t],n=this[t+7];(void 0===e||void 0===n)&&X(t,this.length-8);const r=this[t+4]+256*this[t+5]+65536*this[t+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),l.prototype.readBigInt64BE=et((function(t){Y(t>>>=0,"offset");const e=this[t],n=this[t+7];(void 0===e||void 0===n)&&X(t,this.length-8);const r=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+n)})),l.prototype.readFloatLE=function(t,e){return t>>>=0,e||j(t,4,this.length),r.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return t>>>=0,e||j(t,4,this.length),r.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return t>>>=0,e||j(t,8,this.length),r.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return t>>>=0,e||j(t,8,this.length),r.read(this,t,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){C(this,t,e,n,Math.pow(2,8*n)-1,0)}let o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){C(this,t,e,n,Math.pow(2,8*n)-1,0)}let o=n-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+n},l.prototype.writeUint8=l.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||C(this,t,e,1,255,0),this[e]=255&t,e+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||C(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||C(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||C(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||C(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},l.prototype.writeBigUInt64LE=et((function(t,e=0){return M(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeBigUInt64BE=et((function(t,e=0){return L(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);C(this,t,e,n,r-1,-r)}let o=0,i=1,s=0;for(this[e]=255&t;++o<n&&(i*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/i|0)-s&255;return e+n},l.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);C(this,t,e,n,r-1,-r)}let o=n-1,i=1,s=0;for(this[e+o]=255&t;--o>=0&&(i*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/i|0)-s&255;return e+n},l.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||C(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||C(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},l.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||C(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},l.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||C(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},l.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||C(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},l.prototype.writeBigInt64LE=et((function(t,e=0){return M(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeBigInt64BE=et((function(t,e=0){return L(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeFloatLE=function(t,e,n){return z(this,t,e,!0,n)},l.prototype.writeFloatBE=function(t,e,n){return z(this,t,e,!1,n)},l.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},l.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},l.prototype.copy=function(t,e,n,r){if(!l.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),!r&&0!==r&&(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n||0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);const o=r-n;return this===t&&"function"==typeof s.prototype.copyWithin?this.copyWithin(e,n,r):s.prototype.set.call(t,this.subarray(n,r),e),o},l.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){const e=t.charCodeAt(0);("utf8"===r&&e<128||"latin1"===r)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;let o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{const i=l.isBuffer(t)?t:l.from(t,r),s=i.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<n-e;++o)this[o+e]=i[o%s]}return this};const G={};function D(t,e,n){G[t]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function V(t){let e="",n=t.length;const r="-"===t[0]?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function W(t,e,n,r,o,i){if(t>n||t<e){const n="bigint"==typeof e?"n":"";let r;throw r=0===e||e===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(i+1)}${n}`:`>= -(2${n} ** ${8*(i+1)-1}${n}) and < 2 ** ${8*(i+1)-1}${n}`,new G.ERR_OUT_OF_RANGE("value",r,t)}!function(t,e,n){Y(e,"offset"),(void 0===t[e]||void 0===t[e+n])&&X(e,t.length-(n+1))}(r,o,i)}function Y(t,e){if("number"!=typeof t)throw new G.ERR_INVALID_ARG_TYPE(e,"number",t)}function X(t,e,n){throw Math.floor(t)!==t?(Y(t,n),new G.ERR_OUT_OF_RANGE("offset","an integer",t)):e<0?new G.ERR_BUFFER_OUT_OF_BOUNDS:new G.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${e}`,t)}D("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),D("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),D("ERR_OUT_OF_RANGE",(function(t,e,n){let r=`The value of "${t}" is out of range.`,o=n;return Number.isInteger(n)&&Math.abs(n)>2**32?o=V(String(n)):"bigint"==typeof n&&(o=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(o=V(o)),o+="n"),r+=` It must be ${e}. Received ${o}`,r}),RangeError);const q=/[^+/0-9A-Za-z-_]/g;function J(t,e){let n;e=e||1/0;const r=t.length;let o=null;const i=[];for(let s=0;s<r;++s){if(n=t.charCodeAt(s),n>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function K(t){return n.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(q,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function H(t,e,n,r){let o;for(o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}function Z(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function Q(t){return t!=t}const tt=function(){const t="0123456789abcdef",e=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let o=0;o<16;++o)e[r+o]=t[n]+t[o]}return e}();function et(t){return typeof BigInt>"u"?nt:t}function nt(){throw new Error("BigInt not supported")}}(t);const l=t.Buffer,h=["string","number","bigint","symbol"],p=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function d(t){if(null===t)return"null";if(void 0===t)return"undefined";if(!0===t||!1===t)return"boolean";const e=typeof t;if(h.includes(e))return e;if("function"===e)return"Function";if(Array.isArray(t))return"Array";if(function(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}(t))return"Buffer";const n=function(t){const e=Object.prototype.toString.call(t).slice(8,-1);if(p.includes(e))return e}(t);return n||"Object"}class g{constructor(t,e,n){this.major=t,this.majorEncoded=t<<5,this.name=e,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(t){return this.major<t.major?-1:this.major>t.major?1:0}}g.uint=new g(0,"uint",!0),g.negint=new g(1,"negint",!0),g.bytes=new g(2,"bytes",!0),g.string=new g(3,"string",!0),g.array=new g(4,"array",!1),g.map=new g(5,"map",!1),g.tag=new g(6,"tag",!1),g.float=new g(7,"float",!0),g.false=new g(7,"false",!0),g.true=new g(7,"true",!0),g.null=new g(7,"null",!0),g.undefined=new g(7,"undefined",!0),g.break=new g(7,"break",!0);class y{constructor(t,e,n){this.type=t,this.value=e,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const w=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&"function"==typeof globalThis.Buffer.isBuffer,b=new TextDecoder,m=new TextEncoder;function B(t){return w&&globalThis.Buffer.isBuffer(t)}const E=w?(t,e,n)=>n-e>64?globalThis.Buffer.from(t.subarray(e,n)).toString("utf8"):A(t,e,n):(t,e,n)=>n-e>64?b.decode(t.subarray(e,n)):A(t,e,n),v=w?t=>t.length>64?globalThis.Buffer.from(t):T(t):t=>t.length>64?m.encode(t):T(t),I=w?(t,e,n)=>B(t)?new Uint8Array(t.subarray(e,n)):t.slice(e,n):(t,e,n)=>t.slice(e,n);function T(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let o=t.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):55296==(64512&o)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(o=65536+((1023&o)<<10)+(1023&t.charCodeAt(++r)),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e}function A(t,e,n){const r=[];for(;e<n;){const o=t[e];let i=null,s=o>239?4:o>223?3:o>191?2:1;if(e+s<=n){let n,r,u,f;switch(s){case 1:o<128&&(i=o);break;case 2:n=t[e+1],128==(192&n)&&(f=(31&o)<<6|63&n,f>127&&(i=f));break;case 3:n=t[e+1],r=t[e+2],128==(192&n)&&128==(192&r)&&(f=(15&o)<<12|(63&n)<<6|63&r,f>2047&&(f<55296||f>57343)&&(i=f));break;case 4:n=t[e+1],r=t[e+2],u=t[e+3],128==(192&n)&&128==(192&r)&&128==(192&u)&&(f=(15&o)<<18|(63&n)<<12|(63&r)<<6|63&u,f>65535&&f<1114112&&(i=f))}}null===i?(i=65533,s=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|1023&i),r.push(i),e+=s}return function(t){const e=t.length;if(e<=S)return String.fromCharCode.apply(String,t);let n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=S));return n}(r)}const S=4096;const R="CBOR decode error:",U="CBOR encode error:";function $(t,e,n){if(t.length-e<n)throw new Error(`${R} not enough data for type`)}const O=[24,256,65536,4294967296,BigInt("18446744073709551616")];function N(t,e,n){$(t,e,1);const r=t[e];if(!0===n.strict&&r<O[0])throw new Error(`${R} integer encoded in more bytes than necessary (strict decode)`);return r}function k(t,e,n){$(t,e,2);const r=t[e]<<8|t[e+1];if(!0===n.strict&&r<O[1])throw new Error(`${R} integer encoded in more bytes than necessary (strict decode)`);return r}function x(t,e,n){$(t,e,4);const r=16777216*t[e]+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(!0===n.strict&&r<O[2])throw new Error(`${R} integer encoded in more bytes than necessary (strict decode)`);return r}function _(t,e,n){$(t,e,8);const r=16777216*t[e]+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],o=16777216*t[e+4]+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],i=(BigInt(r)<<BigInt(32))+BigInt(o);if(!0===n.strict&&i<O[3])throw new Error(`${R} integer encoded in more bytes than necessary (strict decode)`);if(i<=Number.MAX_SAFE_INTEGER)return Number(i);if(!0===n.allowBigInt)return i;throw new Error(`${R} integers outside of the safe integer range are not supported`)}function j(t,e){return C(t,0,e.value)}function C(t,e,n){if(n<O[0]){const r=Number(n);t.push([e|r])}else if(n<O[1]){const r=Number(n);t.push([24|e,r])}else if(n<O[2]){const r=Number(n);t.push([25|e,r>>>8,255&r])}else if(n<O[3]){const r=Number(n);t.push([26|e,r>>>24&255,r>>>16&255,r>>>8&255,255&r])}else{const r=BigInt(n);if(!(r<O[4]))throw new Error(`${R} encountered BigInt larger than allowable range`);{const n=[27|e,0,0,0,0,0,0,0];let o=Number(r&BigInt(4294967295)),i=Number(r>>BigInt(32)&BigInt(4294967295));n[8]=255&o,o>>=8,n[7]=255&o,o>>=8,n[6]=255&o,o>>=8,n[5]=255&o,n[4]=255&i,i>>=8,n[3]=255&i,i>>=8,n[2]=255&i,i>>=8,n[1]=255&i,t.push(n)}}}j.encodedSize=function(t){return C.encodedSize(t.value)},C.encodedSize=function(t){return t<O[0]?1:t<O[1]?2:t<O[2]?3:t<O[3]?5:9},j.compareTokens=function(t,e){return t.value<e.value?-1:t.value>e.value?1:0};const M=BigInt(-1),L=BigInt(1);function P(t,e){const n=e.value,r="bigint"==typeof n?n*M-L:-1*n-1;C(t,e.type.majorEncoded,r)}function z(t,e,n,r){$(t,e,n+r);const o=I(t,e+n,e+n+r);return new y(g.bytes,o,n+r)}function F(t,e,n,r){return z(t,e,1,n)}function G(t){return void 0===t.encodedBytes&&(t.encodedBytes=t.type===g.string?v(t.value):t.value),t.encodedBytes}function D(t,e){const n=G(e);C(t,e.type.majorEncoded,n.length),t.push(n)}function V(t,e,n,r,o){const i=n+r;$(t,e,i);const s=new y(g.string,E(t,e+n,e+i),i);return!0===o.retainStringBytes&&(s.byteValue=I(t,e+n,e+i)),s}function W(t,e,n,r){return V(t,e,1,n,r)}P.encodedSize=function(t){const e=t.value,n="bigint"==typeof e?e*M-L:-1*e-1;return n<O[0]?1:n<O[1]?2:n<O[2]?3:n<O[3]?5:9},P.compareTokens=function(t,e){return t.value<e.value?1:t.value>e.value?-1:0},D.encodedSize=function(t){const e=G(t);return C.encodedSize(e.length)+e.length},D.compareTokens=function(t,e){return function(t,e){return t.length<e.length?-1:t.length>e.length?1:function(t,e){if(B(t)&&B(e))return t.compare(e);for(let n=0;n<t.length;n++)if(t[n]!==e[n])return t[n]<e[n]?-1:1;return 0}(t,e)}(G(t),G(e))};const Y=D;function X(t,e,n,r){return new y(g.array,r,n)}function q(t,e,n,r){return X(0,0,1,n)}function J(t,e){C(t,g.array.majorEncoded,e.value)}function K(t,e,n,r){return new y(g.map,r,n)}function H(t,e,n,r){return K(0,0,1,n)}function Z(t,e){C(t,g.map.majorEncoded,e.value)}function Q(t,e,n,r){return new y(g.tag,n,1)}function tt(t,e){C(t,g.tag.majorEncoded,e.value)}J.compareTokens=j.compareTokens,J.encodedSize=function(t){return C.encodedSize(t.value)},Z.compareTokens=j.compareTokens,Z.encodedSize=function(t){return C.encodedSize(t.value)},tt.compareTokens=j.compareTokens,tt.encodedSize=function(t){return C.encodedSize(t.value)};function et(t,e,n){if(n){if(!1===n.allowNaN&&Number.isNaN(t))throw new Error(`${R} NaN values are not supported`);if(!1===n.allowInfinity&&(t===1/0||t===-1/0))throw new Error(`${R} Infinity values are not supported`)}return new y(g.float,t,e)}function nt(t,e,n){const r=e.value;if(!1===r)t.push([20|g.float.majorEncoded]);else if(!0===r)t.push([21|g.float.majorEncoded]);else if(null===r)t.push([22|g.float.majorEncoded]);else if(void 0===r)t.push([23|g.float.majorEncoded]);else{let e,o=!1;(!n||!0!==n.float64)&&(st(r),e=ut(it,1),r===e||Number.isNaN(r)?(it[0]=249,t.push(it.slice(0,3)),o=!0):(ft(r),e=at(it,1),r===e&&(it[0]=250,t.push(it.slice(0,5)),o=!0))),o||(function(t){ot.setFloat64(0,t,!1)}(r),e=ct(it,1),it[0]=251,t.push(it.slice(0,9)))}}nt.encodedSize=function(t,e){const n=t.value;if(!1===n||!0===n||null==n)return 1;if(!e||!0!==e.float64){st(n);let t=ut(it,1);if(n===t||Number.isNaN(n))return 3;if(ft(n),t=at(it,1),n===t)return 5}return 9};const rt=new ArrayBuffer(9),ot=new DataView(rt,1),it=new Uint8Array(rt,0);function st(t){if(t===1/0)ot.setUint16(0,31744,!1);else if(t===-1/0)ot.setUint16(0,64512,!1);else if(Number.isNaN(t))ot.setUint16(0,32256,!1);else{ot.setFloat32(0,t);const e=ot.getUint32(0),n=(2139095040&e)>>23,r=8388607&e;if(255===n)ot.setUint16(0,31744,!1);else if(0===n)ot.setUint16(0,(2147483648&t)>>16|r>>13,!1);else{const t=n-127;t<-24?ot.setUint16(0,0):t<-14?ot.setUint16(0,(2147483648&e)>>16|1<<24+t,!1):ot.setUint16(0,(2147483648&e)>>16|t+15<<10|r>>13,!1)}}}function ut(t,e){if(t.length-e<2)throw new Error(`${R} not enough data for float16`);const n=(t[e]<<8)+t[e+1];if(31744===n)return 1/0;if(64512===n)return-1/0;if(32256===n)return NaN;const r=n>>10&31,o=1023&n;let i;return i=0===r?o*2**-24:31!==r?(o+1024)*2**(r-25):0===o?1/0:NaN,32768&n?-i:i}function ft(t){ot.setFloat32(0,t,!1)}function at(t,e){if(t.length-e<4)throw new Error(`${R} not enough data for float32`);const n=(t.byteOffset||0)+e;return new DataView(t.buffer,n,4).getFloat32(0,!1)}function ct(t,e){if(t.length-e<8)throw new Error(`${R} not enough data for float64`);const n=(t.byteOffset||0)+e;return new DataView(t.buffer,n,8).getFloat64(0,!1)}function lt(t,e,n){throw new Error(`${R} encountered invalid minor (${n}) for major ${t[e]>>>5}`)}function ht(t){return()=>{throw new Error(`${R} ${t}`)}}nt.compareTokens=j.compareTokens;const pt=[];for(let Mt=0;Mt<=23;Mt++)pt[Mt]=lt;pt[24]=function(t,e,n,r){return new y(g.uint,N(t,e+1,r),2)},pt[25]=function(t,e,n,r){return new y(g.uint,k(t,e+1,r),3)},pt[26]=function(t,e,n,r){return new y(g.uint,x(t,e+1,r),5)},pt[27]=function(t,e,n,r){return new y(g.uint,_(t,e+1,r),9)},pt[28]=lt,pt[29]=lt,pt[30]=lt,pt[31]=lt;for(let Mt=32;Mt<=55;Mt++)pt[Mt]=lt;pt[56]=function(t,e,n,r){return new y(g.negint,-1-N(t,e+1,r),2)},pt[57]=function(t,e,n,r){return new y(g.negint,-1-k(t,e+1,r),3)},pt[58]=function(t,e,n,r){return new y(g.negint,-1-x(t,e+1,r),5)},pt[59]=function(t,e,n,r){const o=_(t,e+1,r);if("bigint"!=typeof o){const t=-1-o;if(t>=Number.MIN_SAFE_INTEGER)return new y(g.negint,t,9)}if(!0!==r.allowBigInt)throw new Error(`${R} integers outside of the safe integer range are not supported`);return new y(g.negint,M-BigInt(o),9)},pt[60]=lt,pt[61]=lt,pt[62]=lt,pt[63]=lt;for(let Mt=64;Mt<=87;Mt++)pt[Mt]=F;pt[88]=function(t,e,n,r){return z(t,e,2,N(t,e+1,r))},pt[89]=function(t,e,n,r){return z(t,e,3,k(t,e+1,r))},pt[90]=function(t,e,n,r){return z(t,e,5,x(t,e+1,r))},pt[91]=function(t,e,n,r){const o=_(t,e+1,r);if("bigint"==typeof o)throw new Error(`${R} 64-bit integer bytes lengths not supported`);return z(t,e,9,o)},pt[92]=lt,pt[93]=lt,pt[94]=lt,pt[95]=ht("indefinite length bytes/strings are not supported");for(let Mt=96;Mt<=119;Mt++)pt[Mt]=W;pt[120]=function(t,e,n,r){return V(t,e,2,N(t,e+1,r),r)},pt[121]=function(t,e,n,r){return V(t,e,3,k(t,e+1,r),r)},pt[122]=function(t,e,n,r){return V(t,e,5,x(t,e+1,r),r)},pt[123]=function(t,e,n,r){const o=_(t,e+1,r);if("bigint"==typeof o)throw new Error(`${R} 64-bit integer string lengths not supported`);return V(t,e,9,o,r)},pt[124]=lt,pt[125]=lt,pt[126]=lt,pt[127]=ht("indefinite length bytes/strings are not supported");for(let Mt=128;Mt<=151;Mt++)pt[Mt]=q;pt[152]=function(t,e,n,r){return X(0,0,2,N(t,e+1,r))},pt[153]=function(t,e,n,r){return X(0,0,3,k(t,e+1,r))},pt[154]=function(t,e,n,r){return X(0,0,5,x(t,e+1,r))},pt[155]=function(t,e,n,r){const o=_(t,e+1,r);if("bigint"==typeof o)throw new Error(`${R} 64-bit integer array lengths not supported`);return X(0,0,9,o)},pt[156]=lt,pt[157]=lt,pt[158]=lt,pt[159]=function(t,e,n,r){if(!1===r.allowIndefinite)throw new Error(`${R} indefinite length items not allowed`);return X(0,0,1,1/0)};for(let Mt=160;Mt<=183;Mt++)pt[Mt]=H;pt[184]=function(t,e,n,r){return K(0,0,2,N(t,e+1,r))},pt[185]=function(t,e,n,r){return K(0,0,3,k(t,e+1,r))},pt[186]=function(t,e,n,r){return K(0,0,5,x(t,e+1,r))},pt[187]=function(t,e,n,r){const o=_(t,e+1,r);if("bigint"==typeof o)throw new Error(`${R} 64-bit integer map lengths not supported`);return K(0,0,9,o)},pt[188]=lt,pt[189]=lt,pt[190]=lt,pt[191]=function(t,e,n,r){if(!1===r.allowIndefinite)throw new Error(`${R} indefinite length items not allowed`);return K(0,0,1,1/0)};for(let Mt=192;Mt<=215;Mt++)pt[Mt]=Q;pt[216]=function(t,e,n,r){return new y(g.tag,N(t,e+1,r),2)},pt[217]=function(t,e,n,r){return new y(g.tag,k(t,e+1,r),3)},pt[218]=function(t,e,n,r){return new y(g.tag,x(t,e+1,r),5)},pt[219]=function(t,e,n,r){return new y(g.tag,_(t,e+1,r),9)},pt[220]=lt,pt[221]=lt,pt[222]=lt,pt[223]=lt;for(let Mt=224;Mt<=243;Mt++)pt[Mt]=ht("simple values are not supported");pt[244]=lt,pt[245]=lt,pt[246]=lt,pt[247]=function(t,e,n,r){if(!1===r.allowUndefined)throw new Error(`${R} undefined values are not supported`);return!0===r.coerceUndefinedToNull?new y(g.null,null,1):new y(g.undefined,void 0,1)},pt[248]=ht("simple values are not supported"),pt[249]=function(t,e,n,r){return et(ut(t,e+1),3,r)},pt[250]=function(t,e,n,r){return et(at(t,e+1),5,r)},pt[251]=function(t,e,n,r){return et(ct(t,e+1),9,r)},pt[252]=lt,pt[253]=lt,pt[254]=lt,pt[255]=function(t,e,n,r){if(!1===r.allowIndefinite)throw new Error(`${R} indefinite length items not allowed`);return new y(g.break,void 0,1)};const dt=[];for(let Mt=0;Mt<24;Mt++)dt[Mt]=new y(g.uint,Mt,1);for(let Mt=-1;Mt>=-24;Mt--)dt[31-Mt]=new y(g.negint,Mt,1);dt[64]=new y(g.bytes,new Uint8Array(0),1),dt[96]=new y(g.string,"",1),dt[128]=new y(g.array,0,1),dt[160]=new y(g.map,0,1),dt[244]=new y(g.false,!1,1),dt[245]=new y(g.true,!0,1),dt[246]=new y(g.null,null,1),function(){const t=[];t[g.uint.major]=j,t[g.negint.major]=P,t[g.bytes.major]=D,t[g.string.major]=Y,t[g.array.major]=J,t[g.map.major]=Z,t[g.tag.major]=tt,t[g.float.major]=nt}();class gt{constructor(t,e){this.obj=t,this.parent=e}includes(t){let e=this;do{if(e.obj===t)return!0}while(e=e.parent);return!1}static createCheck(t,e){if(t&&t.includes(e))throw new Error(`${U} object contains circular references`);return new gt(e,t)}}const yt={null:new y(g.null,null),undefined:new y(g.undefined,void 0),true:new y(g.true,!0),false:new y(g.false,!1),emptyArray:new y(g.array,0),emptyMap:new y(g.map,0)},wt={number:(t,e,n,r)=>Number.isInteger(t)&&Number.isSafeInteger(t)?new y(t>=0?g.uint:g.negint,t):new y(g.float,t),bigint:(t,e,n,r)=>t>=BigInt(0)?new y(g.uint,t):new y(g.negint,t),Uint8Array:(t,e,n,r)=>new y(g.bytes,t),string:(t,e,n,r)=>new y(g.string,t),boolean:(t,e,n,r)=>t?yt.true:yt.false,null:(t,e,n,r)=>yt.null,undefined:(t,e,n,r)=>yt.undefined,ArrayBuffer:(t,e,n,r)=>new y(g.bytes,new Uint8Array(t)),DataView:(t,e,n,r)=>new y(g.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),Array(t,e,n,r){if(!t.length)return!0===n.addBreakTokens?[yt.emptyArray,new y(g.break)]:yt.emptyArray;r=gt.createCheck(r,t);const o=[];let i=0;for(const s of t)o[i++]=bt(s,n,r);return n.addBreakTokens?[new y(g.array,t.length),o,new y(g.break)]:[new y(g.array,t.length),o]},Object(t,e,n,r){const o="Object"!==e,i=o?t.keys():Object.keys(t),s=o?t.size:i.length;if(!s)return!0===n.addBreakTokens?[yt.emptyMap,new y(g.break)]:yt.emptyMap;r=gt.createCheck(r,t);const u=[];let f=0;for(const a of i)u[f++]=[bt(a,n,r),bt(o?t.get(a):t[a],n,r)];return function(t,e){e.mapSorter&&t.sort(e.mapSorter)}(u,n),n.addBreakTokens?[new y(g.map,s),u,new y(g.break)]:[new y(g.map,s),u]}};wt.Map=wt.Object,wt.Buffer=wt.Uint8Array;for(const Mt of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))wt[`${Mt}Array`]=wt.DataView;function bt(t,e={},n){const r=d(t),o=e&&e.typeEncoders&&e.typeEncoders[r]||wt[r];if("function"==typeof o){const i=o(t,r,e,n);if(null!=i)return i}const i=wt[r];if(!i)throw new Error(`${U} unsupported type: ${r}`);return i(t,r,e,n)}const mt={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class Bt{constructor(t,e={}){this._pos=0,this.data=t,this.options=e}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){const t=this.data[this._pos];let e=dt[t];if(void 0===e){const n=pt[t];if(!n)throw new Error(`${R} no decoder for major type ${t>>>5} (byte 0x${t.toString(16).padStart(2,"0")})`);const r=31&t;e=n(this.data,this._pos,r,this.options)}return this._pos+=e.encodedLength,e}}const Et=Symbol.for("DONE"),vt=Symbol.for("BREAK");function It(t,e){if(t.done())return Et;const n=t.next();if(n.type===g.break)return vt;if(n.type.terminal)return n.value;if(n.type===g.array)return function(t,e,n){const r=[];for(let o=0;o<t.value;o++){const i=It(e,n);if(i===vt){if(t.value===1/0)break;throw new Error(`${R} got unexpected break to lengthed array`)}if(i===Et)throw new Error(`${R} found array but not enough entries (got ${o}, expected ${t.value})`);r[o]=i}return r}(n,t,e);if(n.type===g.map)return function(t,e,n){const r=!0===n.useMaps,o=r?void 0:{},i=r?new Map:void 0;for(let s=0;s<t.value;s++){const u=It(e,n);if(u===vt){if(t.value===1/0)break;throw new Error(`${R} got unexpected break to lengthed map`)}if(u===Et)throw new Error(`${R} found map but not enough entries (got ${s} [no key], expected ${t.value})`);if(!0!==r&&"string"!=typeof u)throw new Error(`${R} non-string keys not supported (got ${typeof u})`);if(!0===n.rejectDuplicateMapKeys&&(r&&i.has(u)||!r&&u in o))throw new Error(`${R} found repeat map key "${u}"`);const f=It(e,n);if(f===Et)throw new Error(`${R} found map but not enough entries (got ${s} [no value], expected ${t.value})`);r?i.set(u,f):o[u]=f}return r?i:o}(n,t,e);if(n.type===g.tag){if(e.tags&&"function"==typeof e.tags[n.value]){const r=It(t,e);return e.tags[n.value](r)}throw new Error(`${R} tag not supported (${n.value})`)}throw new Error("unsupported")}function Tt(t,e){if(!(t instanceof Uint8Array))throw new Error(`${R} data to decode must be a Uint8Array`);const n=(e=Object.assign({},mt,e)).tokenizer||new Bt(t,e),r=It(n,e);if(r===Et)throw new Error(`${R} did not find any content to decode`);if(r===vt)throw new Error(`${R} got unexpected break`);return[r,t.subarray(n.pos())]}var At,St=((At=St||{}).TransactionGenerated="TXGenerated",At.TransactionReceived="TXReceived",At.TransactionSent="TXSent",At.IBGenerated="IBGenerated",At.IBReceived="IBReceived",At.IBSent="IBSent",At.RBGenerated="RBGenerated",At.RBReceived="RBReceived",At.RBSent="RBSent",At.EBGenerated="EBGenerated",At.EBReceived="EBReceived",At.EBSent="EBSent",At.VTBundleGenerated="VTBundleGenerated",At.VTBundleReceived="VTBundleReceived",At.VTBundleSent="VTBundleSent",At);const Rt=(t,e,n,r,o,i)=>{const s=Ot(t,n);s.generated[r]=(s.generated[r]??0)+1,e.bytes.set(`${r}-${o}`,i)},Ut=(t,e,n,r,o)=>{const i=Ot(t,n),s=e.bytes.get(`${r}-${o}`)??0;i.sent[r]||(i.sent[r]={count:0,bytes:0}),i.sent[r].count+=1,i.sent[r].bytes+=s,i.bytesSent+=s},$t=(t,e,n,r,o)=>{const i=Ot(t,n),s=e.bytes.get(`${r}-${o}`)??0;i.received[r]||(i.received[r]={count:0,bytes:0}),i.received[r].count+=1,i.received[r].bytes+=s,i.bytesReceived+=s},Ot=(t,e)=>{let n=t.nodes.get(e);if(n)return n;const r={bytesSent:0,bytesReceived:0,generated:{},sent:{},received:{}};return t.nodes.set(e,r),r},Nt=(t,e)=>{const n=t.ebs.get(e),r=n.ibs.map((e=>{const n=t.ibs.get(e);for(const o of n.txs)t.praosTxs.has(o)||t.leiosTxs.add(o);const r=n.txs.map((e=>t.txs[e]));return{id:e,slot:n.slot,pipeline:n.pipeline,headerBytes:n.headerBytes,txs:r}})),o=n.ebs.map((e=>Nt(t,e)));return{id:e,slot:n.slot,pipeline:n.pipeline,bytes:n.bytes,ibs:r,ebs:o}},kt=(t,e,n)=>{const{message:r}=t;if(r.type===St.TransactionGenerated)Rt(e,n,r.publisher,"tx",r.id,r.size_bytes),n.txs.push({id:Number(r.id),bytes:r.size_bytes});else if(r.type===St.TransactionSent)Ut(e,n,r.sender,"tx",r.id);else if(r.type===St.TransactionReceived)$t(e,n,r.recipient,"tx",r.id);else if(r.type===St.IBGenerated){const t=r.transactions.reduce(((t,e)=>t+(n.bytes.get(`tx-${e}`)??0)),r.header_bytes);Rt(e,n,r.producer,"ib",r.id,t),n.ibs.set(r.id,{slot:r.slot,pipeline:r.pipeline,headerBytes:r.header_bytes,txs:r.transactions})}else if(r.type===St.IBSent)Ut(e,n,r.sender,"ib",r.id);else if(r.type===St.IBReceived)$t(e,n,r.recipient,"ib",r.id);else if(r.type===St.RBGenerated){let t=r.transactions.reduce(((t,e)=>t+(n.bytes.get(`tx-${e}`)??0)),r.header_bytes);const o={slot:r.slot,headerBytes:r.header_bytes,txs:r.transactions.map((t=>n.txs[t])),cert:null};for(const e of r.transactions)n.praosTxs.add(e);if(null!=r.endorsement){t+=r.endorsement.size_bytes;const e=r.endorsement.eb.id;o.cert={bytes:r.endorsement.size_bytes,eb:Nt(n,e)}}Rt(e,n,r.producer,"pb",r.id,t),e.global.praosTxOnChain=n.praosTxs.size,e.global.leiosTxOnChain=n.leiosTxs.size,e.blocks.push(o)}else r.type===St.RBSent?Ut(e,n,r.sender,"pb",r.id):r.type===St.RBReceived?$t(e,n,r.recipient,"pb",r.id):r.type===St.EBGenerated?(Rt(e,n,r.producer,"eb",r.id,r.size_bytes),n.ebs.set(r.id,{slot:r.slot,pipeline:r.pipeline,bytes:r.size_bytes,ibs:r.input_blocks.map((t=>t.id)),ebs:r.endorser_blocks.map((t=>t.id))})):r.type===St.EBSent?Ut(e,n,r.sender,"eb",r.id):r.type===St.EBReceived?$t(e,n,r.recipient,"eb",r.id):r.type===St.VTBundleGenerated?Rt(e,n,r.producer,"votes",r.id,r.size_bytes):r.type===St.VTBundleSent?Ut(e,n,r.sender,"votes",r.id):r.type===St.VTBundleReceived&&$t(e,n,r.recipient,"votes",r.id)},xt=async(t,e)=>{const n=await fetch(t,{signal:e});if(!n.body)throw new Error("body not streamed");t.endsWith(".gz")&&(t=t.substring(0,t.length-3));const r=t.endsWith(".cbor")?jt():_t();return n.body.pipeThrough(r)},_t=()=>{let t="";const e=new TextDecoder;return new TransformStream({transform(n,r){t+=e.decode(n);for(let e=t.indexOf("\n");-1!=e;e=t.indexOf("\n")){if(e){const n=JSON.parse(t.substring(0,e));r.enqueue(n)}t=t.substring(e+1)}}})},jt=()=>{let t=null;return new TransformStream({transform(e,n){for(t=t?l.concat([t,e]):l.from(e);null!=t;)try{const[e,r]=Tt(t);t=r,n.enqueue(e)}catch(r){if(r.message.startsWith("CBOR decode error:"))break;throw r}}})};let Ct=new AbortController;onmessage=t=>{Ct.abort();const e=t.data;"STOP"===e.type||!e.tracePath||(Ct=new AbortController,e.aggregated?xt(e.tracePath,Ct.signal).then((t=>(async(t,e,n)=>{let r=0;for await(const o of t){const t=new Map;for(const[e,n]of Object.entries(o.nodes))t.set(e,n);o.nodes=t;const i=1e3*(o.progress-r);r=o.progress,await new Promise((t=>setTimeout(t,i/n))),postMessage({type:"EVENT",tracePath:e,aggregatedData:o})}postMessage({type:"DONE",tracePath:e})})(t,e.tracePath,e.speedMultiplier))).catch((t=>{if("AbortError"!==t.name)throw t})):xt(e.tracePath,Ct.signal).then((t=>(async(t,e,n)=>{const r={progress:0,nodes:new Map,global:{praosTxOnChain:0,leiosTxOnChain:0},blocks:[],lastNodesUpdated:[]},o={txs:[],leiosTxs:new Set,praosTxs:new Set,ibs:new Map,ebs:new Map,bytes:new Map},i=new Set;let s=0;for await(const{time_s:u,message:f}of t)f.type.endsWith("Received")&&"recipient"in f&&i.add(f.recipient),f.type.endsWith("Sent")&&"sender"in f&&i.add(f.sender),f.type.endsWith("Generated")&&"id"in f&&i.add(f.id),kt({message:f},r,o),r.progress=u,s++,s===n&&(postMessage({type:"EVENT",tracePath:e,aggregatedData:{...r,lastNodesUpdated:[...i.values()]}}),i.clear(),s=0);s&&postMessage({type:"EVENT",tracePath:e,aggregatedData:{...r,lastNodesUpdated:[...i.values()]}}),postMessage({type:"DONE",tracePath:e})})(t,e.tracePath,e.batchSize))).catch((t=>{if("AbortError"!==t.name)throw t})))}}();