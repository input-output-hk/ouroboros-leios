<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Leios.Simplified.Deterministic</title><link rel="stylesheet" href="Agda.css">
             <link rel="stylesheet" href="agda.css">
             <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&display=swap" rel="stylesheet"></head><body>
             <div class="agda-header">
               <div class="agda-header-left">
                 <a href="/formal-spec/">Back</a>
                 <button class="search-button" onclick="toggleSearch()">
                   <svg viewBox="0 0 24 24" width="24" height="24">
                     <path fill="currentColor" d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                   </svg>
                   Search...
                 </button>
               </div>
               <div class="agda-header-right">
                 <a href="https://github.com/input-output-hk/ouroboros-leios-formal-spec" class="github-link" target="_blank" rel="noopener noreferrer" title="View on GitHub">
                   <svg viewBox="0 0 24 24" width="24" height="24">
                     <path fill="currentColor" d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                   </svg>
                 </a>
                 <button class="theme-toggle" onclick="toggleTheme()" title="Toggle theme">
                   <span class="light-icon">
                     <svg viewBox="0 0 24 24" width="24" height="24">
                       <path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path>
                     </svg>
                   </span>
                   <span class="dark-icon">
                     <svg viewBox="0 0 24 24" width="24" height="24">
                       <path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path>
                     </svg>
                   </span>
                 </button>
               </div>
             </div>
             <div class="search-overlay">
               <div class="search-modal">
                 <div class="search-container">
                   <input type="text" class="search-input" placeholder="Search modules..." />
                   <div class="search-results"></div>
                 </div>
               </div>
             </div>
             <div class="agda-container">
               <nav class="agda-sidebar">
                 <h3>Modules</h3>
                 
                     <h4>Leios</h4>
                     <ul>
                       <li><a href="/agda_html/Leios.Abstract.html" >Abstract</a></li>
<li><a href="/agda_html/Leios.Base.html" >Base</a></li>
<li><a href="/agda_html/Leios.Blocks.html" >Blocks</a></li>
<li><a href="/agda_html/Leios.Config.html" >Config</a></li>
<li><a href="/agda_html/Leios.Defaults.html" >Defaults</a></li>
<li><a href="/agda_html/Leios.FFD.html" >FFD</a></li>
<li><a href="/agda_html/Leios.Foreign.BaseTypes.html" >Foreign.BaseTypes</a></li>
<li><a href="/agda_html/Leios.Foreign.HsTypes.html" >Foreign.HsTypes</a></li>
<li><a href="/agda_html/Leios.Foreign.Types.html" >Foreign.Types</a></li>
<li><a href="/agda_html/Leios.Foreign.Util.html" >Foreign.Util</a></li>
<li><a href="/agda_html/Leios.KeyRegistration.html" >KeyRegistration</a></li>
<li><a href="/agda_html/Leios.Network.html" >Network</a></li>
<li><a href="/agda_html/Leios.Prelude.html" >Prelude</a></li>
<li><a href="/agda_html/Leios.Protocol.html" >Protocol</a></li>
<li><a href="/agda_html/Leios.Short.html" >Short</a></li>
<li><a href="/agda_html/Leios.Short.Decidable.html" >Short.Decidable</a></li>
<li><a href="/agda_html/Leios.Short.Trace.Verifier.html" >Short.Trace.Verifier</a></li>
<li><a href="/agda_html/Leios.Short.Trace.Verifier.Test.html" >Short.Trace.Verifier.Test</a></li>
<li><a href="/agda_html/Leios.Simplified.html" >Simplified</a></li>
<li><a href="/agda_html/Leios.Simplified.Deterministic.html" class="active">Simplified.Deterministic</a></li>
<li><a href="/agda_html/Leios.SpecStructure.html" >SpecStructure</a></li>
<li><a href="/agda_html/Leios.Traces.html" >Traces</a></li>
<li><a href="/agda_html/Leios.Voting.html" >Voting</a></li>
<li><a href="/agda_html/Leios.VRF.html" >VRF</a></li>
                     </ul>
                   
               </nav>
               <main class="agda-content">
             <script src="agda.js"></script><pre class="Agda"><div class="line"><a id="1" class="Comment">--{-# OPTIONS --safe #-}</a></div>
<div class="line"><a id="26" class="Symbol">{-#</a> <a id="30" class="Keyword">OPTIONS</a> <a id="38" class="Pragma">--allow-unsolved-metas</a> <a id="61" class="Symbol">#-}</a></div>
<div class="line"></div>
<div class="line"><a id="66" class="Comment">--------------------------------------------------------------------------------</a></div>
<div class="line"><a id="147" class="Comment">-- Deterministic variant of simple Leios</a></div>
<div class="line"><a id="188" class="Comment">--------------------------------------------------------------------------------</a></div>
<div class="line"></div>
<div class="line"><a id="270" class="Keyword">open</a> <a id="275" class="Keyword">import</a> <a id="282" href="/agda_html/Leios.Prelude.html" class="Module">Leios.Prelude</a> <a id="296" class="Keyword">hiding</a> <a id="303" class="Symbol">(</a><a id="304" href="/agda_html/Function.Base.html#704" class="Function">id</a><a id="306" class="Symbol">)</a></div>
<div class="line"><a id="308" class="Keyword">open</a> <a id="313" class="Keyword">import</a> <a id="320" href="/agda_html/Prelude.Init.html" class="Module">Prelude.Init</a> <a id="333" class="Keyword">using</a> <a id="339" class="Symbol">(</a><a id="340" href="/agda_html/Prelude.Init.html#5110" class="Function">∃₂-syntax</a><a id="349" class="Symbol">)</a></div>
<div class="line"><a id="351" class="Keyword">open</a> <a id="356" class="Keyword">import</a> <a id="363" href="/agda_html/Leios.FFD.html" class="Module">Leios.FFD</a></div>
<div class="line"></div>
<div class="line"><a id="374" class="Keyword">import</a> <a id="381" href="/agda_html/Data.List.html" class="Module">Data.List</a> <a id="391" class="Symbol">as</a> <a id="394" class="Module">L</a></div>
<div class="line"><a id="396" class="Keyword">open</a> <a id="401" class="Keyword">import</a> <a id="408" href="/agda_html/Data.List.Relation.Unary.Any.html" class="Module">Data.List.Relation.Unary.Any</a> <a id="437" class="Keyword">using</a> <a id="443" class="Symbol">(</a><a id="444" href="/agda_html/Data.List.Relation.Unary.Any.html#1211" class="InductiveConstructor">here</a><a id="448" class="Symbol">)</a></div>
<div class="line"></div>
<div class="line"><a id="451" class="Keyword">open</a> <a id="456" class="Keyword">import</a> <a id="463" href="/agda_html/Leios.SpecStructure.html" class="Module">Leios.SpecStructure</a></div>
<div class="line"></div>
<div class="line"><a id="484" class="Keyword">module</a> <a id="491" href="/agda_html/Leios.Simplified.Deterministic.html" class="Module">Leios.Simplified.Deterministic</a> <a id="522" class="Symbol">(</a><a id="523" href="/agda_html/Leios.Simplified.Deterministic.html#523" class="Bound">⋯</a> <a id="525" class="Symbol">:</a> <a id="527" href="/agda_html/Leios.SpecStructure.html#286" class="Record">SpecStructure</a> <a id="541" class="Number">2</a><a id="542" class="Symbol">)</a> <a id="544" class="Symbol">(</a><a id="545" class="Keyword">let</a> <a id="549" class="Keyword">open</a> <a id="554" href="/agda_html/Leios.SpecStructure.html#286" class="Module">SpecStructure</a> <a id="568" href="/agda_html/Leios.Simplified.Deterministic.html#523" class="Bound">⋯</a><a id="569" class="Symbol">)</a> <a id="571" class="Symbol">(</a><a id="572" href="/agda_html/Leios.Simplified.Deterministic.html#572" class="Bound">Λ</a> <a id="574" href="/agda_html/Leios.Simplified.Deterministic.html#574" class="Bound">μ</a> <a id="576" class="Symbol">:</a> <a id="578" href="/agda_html/Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="579" class="Symbol">)</a> <a id="581" class="Keyword">where</a></div>
<div class="line"></div>
<div class="line"><a id="588" class="Keyword">import</a> <a id="595" href="/agda_html/Leios.Simplified.html" class="Module">Leios.Simplified</a></div>
<div class="line"><a id="612" class="Keyword">open</a> <a id="617" class="Keyword">import</a> <a id="624" href="/agda_html/Leios.Simplified.html" class="Module">Leios.Simplified</a> <a id="641" href="/agda_html/Leios.Simplified.Deterministic.html#523" class="Bound">⋯</a> <a id="643" href="/agda_html/Leios.Simplified.Deterministic.html#572" class="Bound">Λ</a> <a id="645" href="/agda_html/Leios.Simplified.Deterministic.html#574" class="Bound">μ</a> <a id="647" class="Keyword">hiding</a> <a id="654" class="Symbol">(</a><a id="655" href="/agda_html/Leios.Simplified.html#5007" class="Datatype Operator">_-⟦_/_⟧⇀_</a><a id="664" class="Symbol">)</a></div>
<div class="line"><a id="666" class="Keyword">module</a> <a id="ND"></a><a id="673" href="/agda_html/Leios.Simplified.Deterministic.html#673" class="Module">ND</a> <a id="676" class="Symbol">=</a> <a id="678" href="/agda_html/Leios.Simplified.html" class="Module">Leios.Simplified</a> <a id="695" href="/agda_html/Leios.Simplified.Deterministic.html#523" class="Bound">⋯</a> <a id="697" href="/agda_html/Leios.Simplified.Deterministic.html#572" class="Bound">Λ</a> <a id="699" href="/agda_html/Leios.Simplified.Deterministic.html#574" class="Bound">μ</a></div>
<div class="line"></div>
<div class="line"><a id="702" class="Keyword">open</a> <a id="707" class="Keyword">import</a> <a id="714" href="/agda_html/Class.Computational.html" class="Module">Class.Computational</a></div>
<div class="line"><a id="734" class="Keyword">open</a> <a id="739" class="Keyword">import</a> <a id="746" href="/agda_html/Class.Computational22.html" class="Module">Class.Computational22</a></div>
<div class="line"><a id="768" class="Keyword">open</a> <a id="773" class="Keyword">import</a> <a id="780" href="/agda_html/StateMachine.html" class="Module">StateMachine</a></div>
<div class="line"></div>
<div class="line"><a id="794" class="Keyword">open</a> <a id="799" href="/agda_html/Leios.Base.html#389" class="Module">BaseAbstract</a> <a id="812" href="/agda_html/Leios.SpecStructure.html#835" class="Field">B&#39;</a> <a id="815" class="Keyword">using</a> <a id="821" class="Symbol">(</a><a id="822" href="/agda_html/Leios.Base.html#424" class="Field">Cert</a><a id="826" class="Symbol">;</a> <a id="828" href="/agda_html/Leios.Base.html#490" class="Field">V-chkCerts</a><a id="838" class="Symbol">;</a> <a id="840" href="/agda_html/Leios.Base.html#444" class="Field">VTy</a><a id="843" class="Symbol">;</a> <a id="845" href="/agda_html/Leios.Base.html#463" class="Field">initSlot</a><a id="853" class="Symbol">)</a></div>
<div class="line"><a id="855" class="Keyword">open</a> <a id="860" href="/agda_html/Leios.Blocks.html#4246" class="Module">GenFFD</a></div>
<div class="line"></div>
<div class="line"><a id="868" class="Keyword">open</a> <a id="873" href="/agda_html/Leios.SpecStructure.html#1203" class="Module">FFD</a> <a id="877" class="Keyword">hiding</a> <a id="884" class="Symbol">(</a><a id="885" href="/agda_html/Leios.FFD.html#562" class="Function Operator">_-⟦_/_⟧⇀_</a><a id="894" class="Symbol">)</a></div>
<div class="line"></div>
<div class="line"><a id="897" class="Keyword">private</a> <a id="905" class="Keyword">variable</a> <a id="914" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="916" href="/agda_html/Leios.Simplified.Deterministic.html#916" class="Generalizable">s&#39;</a> <a id="919" href="/agda_html/Leios.Simplified.Deterministic.html#919" class="Generalizable">s0</a> <a id="922" href="/agda_html/Leios.Simplified.Deterministic.html#922" class="Generalizable">s1</a> <a id="925" href="/agda_html/Leios.Simplified.Deterministic.html#925" class="Generalizable">s2</a> <a id="928" href="/agda_html/Leios.Simplified.Deterministic.html#928" class="Generalizable">s3</a> <a id="931" href="/agda_html/Leios.Simplified.Deterministic.html#931" class="Generalizable">s4</a> <a id="934" href="/agda_html/Leios.Simplified.Deterministic.html#934" class="Generalizable">s5</a> <a id="937" class="Symbol">:</a> <a id="939" href="/agda_html/Leios.Protocol.html#959" class="Record">LeiosState</a></div>
<div class="line">                 <a id="967" href="/agda_html/Leios.Simplified.Deterministic.html#967" class="Generalizable">i</a>      <a id="974" class="Symbol">:</a> <a id="976" href="/agda_html/Leios.Protocol.html#708" class="Datatype">LeiosInput</a></div>
<div class="line">                 <a id="1004" href="/agda_html/Leios.Simplified.Deterministic.html#1004" class="Generalizable">o</a>      <a id="1011" class="Symbol">:</a> <a id="1013" href="/agda_html/Leios.Protocol.html#866" class="Datatype">LeiosOutput</a></div>
<div class="line">                 <a id="1042" href="/agda_html/Leios.Simplified.Deterministic.html#1042" class="Generalizable">ffds&#39;</a>  <a id="1049" class="Symbol">:</a> <a id="1051" href="/agda_html/Leios.FFD.html#508" class="Function">FFD.State</a></div>
<div class="line">                 <a id="1078" href="/agda_html/Leios.Simplified.Deterministic.html#1078" class="Generalizable">π</a>      <a id="1085" class="Symbol">:</a> <a id="1087" href="/agda_html/Leios.Abstract.html#245" class="Function">VrfPf</a></div>
<div class="line">                 <a id="1110" href="/agda_html/Leios.Simplified.Deterministic.html#1110" class="Generalizable">bs&#39;</a>    <a id="1117" class="Symbol">:</a> <a id="1119" href="/agda_html/Leios.Base.html#847" class="Function">B.State</a></div>
<div class="line">                 <a id="1144" href="/agda_html/Leios.Simplified.Deterministic.html#1144" class="Generalizable">ks</a> <a id="1147" href="/agda_html/Leios.Simplified.Deterministic.html#1147" class="Generalizable">ks&#39;</a> <a id="1151" class="Symbol">:</a> <a id="1153" href="/agda_html/Leios.KeyRegistration.html#453" class="Function">K.State</a></div>
<div class="line">                 <a id="1178" href="/agda_html/Leios.Simplified.Deterministic.html#1178" class="Generalizable">msgs</a>   <a id="1185" class="Symbol">:</a> <a id="1187" href="/agda_html/Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="1192" class="Symbol">(</a><a id="1193" href="/agda_html/Leios.FFD.html#117" class="Field">FFDAbstract.Header</a> <a id="1212" href="/agda_html/Leios.Blocks.html#5294" class="Function">ffdAbstract</a> <a id="1224" href="/agda_html/Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="1226" href="/agda_html/Leios.FFD.html#124" class="Field">FFDAbstract.Body</a> <a id="1243" href="/agda_html/Leios.Blocks.html#5294" class="Function">ffdAbstract</a><a id="1254" class="Symbol">)</a></div>
<div class="line">                 <a id="1273" href="/agda_html/Leios.Simplified.Deterministic.html#1273" class="Generalizable">eb</a>     <a id="1280" class="Symbol">:</a> <a id="1282" href="/agda_html/Leios.Blocks.html#2804" class="Function">EndorserBlock</a></div>
<div class="line">                 <a id="1313" href="/agda_html/Leios.Simplified.Deterministic.html#1313" class="Generalizable">rbs</a>    <a id="1320" class="Symbol">:</a> <a id="1322" href="/agda_html/Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="1327" href="/agda_html/Leios.Base.html#316" class="Function">RankingBlock</a></div>
<div class="line">                 <a id="1357" href="/agda_html/Leios.Simplified.Deterministic.html#1357" class="Generalizable">txs</a>    <a id="1364" class="Symbol">:</a> <a id="1366" href="/agda_html/Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="1371" href="/agda_html/Leios.Abstract.html#124" class="Function">Tx</a></div>
<div class="line">                 <a id="1391" href="/agda_html/Leios.Simplified.Deterministic.html#1391" class="Generalizable">V</a>      <a id="1398" class="Symbol">:</a> <a id="1400" href="/agda_html/Leios.Base.html#444" class="Function">VTy</a></div>
<div class="line">                 <a id="1421" href="/agda_html/Leios.Simplified.Deterministic.html#1421" class="Generalizable">SD</a>     <a id="1428" class="Symbol">:</a> <a id="1430" href="/agda_html/Leios.Base.html#266" class="Function">StakeDistr</a></div>
<div class="line">                 <a id="1458" href="/agda_html/Leios.Simplified.Deterministic.html#1458" class="Generalizable">pks</a>    <a id="1465" class="Symbol">:</a> <a id="1467" href="/agda_html/Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="1472" href="/agda_html/Leios.VRF.html#480" class="Function">PubKey</a></div>
<div class="line"></div>
<div class="line"><a id="lemma"></a><a id="1480" href="/agda_html/Leios.Simplified.Deterministic.html#1480" class="Function">lemma</a> <a id="1486" class="Symbol">:</a> <a id="1488" class="Symbol">∀</a> <a id="1490" class="Symbol">{</a><a id="1491" href="/agda_html/Leios.Simplified.Deterministic.html#1491" class="Bound">u</a><a id="1492" class="Symbol">}</a> <a id="1494" class="Symbol">→</a> <a id="1496" href="/agda_html/Leios.Simplified.Deterministic.html#1491" class="Bound">u</a> <a id="1498" href="/agda_html/Class.IsSet.html#458" class="Function Operator">∈</a> <a id="1500" href="/agda_html/Leios.Protocol.html#1354" class="Field">LeiosState.Upkeep</a> <a id="1518" class="Symbol">(</a><a id="1519" href="/agda_html/Leios.Protocol.html#2208" class="Function">addUpkeep</a> <a id="1529" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="1531" href="/agda_html/Leios.Simplified.Deterministic.html#1491" class="Bound">u</a><a id="1532" class="Symbol">)</a></div>
<div class="line"><a id="1534" href="/agda_html/Leios.Simplified.Deterministic.html#1480" class="Function">lemma</a> <a id="1540" class="Symbol">=</a> <a id="1542" href="/agda_html/Function.Bundles.html#4810" class="Field">to</a> <a id="1545" href="/agda_html/Axiom.Set.html#9013" class="Function">∈-∪</a> <a id="1549" class="Symbol">(</a><a id="1550" href="/agda_html/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="1555" class="Symbol">(</a><a id="1556" href="/agda_html/Function.Bundles.html#4810" class="Field">to</a> <a id="1559" href="/agda_html/Axiom.Set.html#6243" class="Function">∈-singleton</a> <a id="1571" href="/agda_html/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="1575" class="Symbol">))</a></div>
<div class="line">  <a id="1580" class="Keyword">where</a> <a id="1586" class="Keyword">open</a> <a id="1591" href="/agda_html/Function.Bundles.html#4752" class="Module">Equivalence</a></div>
<div class="line"></div>
<div class="line"><a id="addUpkeep⇒¬needsUpkeep"></a><a id="1604" href="/agda_html/Leios.Simplified.Deterministic.html#1604" class="Function">addUpkeep⇒¬needsUpkeep</a> <a id="1627" class="Symbol">:</a> <a id="1629" class="Symbol">∀</a> <a id="1631" class="Symbol">{</a><a id="1632" href="/agda_html/Leios.Simplified.Deterministic.html#1632" class="Bound">u</a><a id="1633" class="Symbol">}</a> <a id="1635" class="Symbol">→</a> <a id="1637" href="/agda_html/Relation.Nullary.Negation.Core.html#658" class="Function Operator">¬</a> <a id="1639" href="/agda_html/Leios.Protocol.html#2023" class="Function">LeiosState.needsUpkeep</a> <a id="1662" class="Symbol">(</a><a id="1663" href="/agda_html/Leios.Protocol.html#2208" class="Function">addUpkeep</a> <a id="1673" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="1675" href="/agda_html/Leios.Simplified.Deterministic.html#1632" class="Bound">u</a><a id="1676" class="Symbol">)</a> <a id="1678" href="/agda_html/Leios.Simplified.Deterministic.html#1632" class="Bound">u</a></div>
<div class="line"><a id="1680" href="/agda_html/Leios.Simplified.Deterministic.html#1604" class="Function">addUpkeep⇒¬needsUpkeep</a> <a id="1703" class="Symbol">{</a><a id="1704" class="Argument">s</a> <a id="1706" class="Symbol">=</a> <a id="1708" href="/agda_html/Leios.Simplified.Deterministic.html#1708" class="Bound">s</a><a id="1709" class="Symbol">}</a> <a id="1711" class="Symbol">=</a> <a id="1713" class="Symbol">λ</a> <a id="1715" href="/agda_html/Leios.Simplified.Deterministic.html#1715" class="Bound">x</a> <a id="1717" class="Symbol">→</a> <a id="1719" href="/agda_html/Leios.Simplified.Deterministic.html#1715" class="Bound">x</a> <a id="1721" class="Symbol">(</a><a id="1722" href="/agda_html/Leios.Simplified.Deterministic.html#1480" class="Function">lemma</a> <a id="1728" class="Symbol">{</a><a id="1729" class="Argument">s</a> <a id="1731" class="Symbol">=</a> <a id="1733" href="/agda_html/Leios.Simplified.Deterministic.html#1708" class="Bound">s</a><a id="1734" class="Symbol">})</a></div>
<div class="line"></div>
<div class="line"><a id="1738" class="Keyword">data</a> <a id="_⊢_"></a><a id="1743" href="/agda_html/Leios.Simplified.Deterministic.html#1743" class="Datatype Operator">_⊢_</a> <a id="1747" class="Symbol">:</a> <a id="1749" href="/agda_html/Leios.Protocol.html#708" class="Datatype">LeiosInput</a> <a id="1760" class="Symbol">→</a> <a id="1762" href="/agda_html/Leios.Protocol.html#959" class="Record">LeiosState</a> <a id="1773" class="Symbol">→</a> <a id="1775" href="/agda_html/Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1780" class="Keyword">where</a></div>
<div class="line">  <a id="_⊢_.Init"></a><a id="1788" href="/agda_html/Leios.Simplified.Deterministic.html#1788" class="InductiveConstructor">Init</a> <a id="1793" class="Symbol">:</a></div>
<div class="line">       <a id="1802" href="/agda_html/Prelude.InferenceRules.html#56074" class="Function Operator">∙</a> <a id="1804" href="/agda_html/Leios.Simplified.Deterministic.html#1144" class="Generalizable">ks</a> <a id="1807" href="/agda_html/Leios.KeyRegistration.html#476" class="Function Operator">K.-⟦</a> <a id="1812" href="/agda_html/Leios.KeyRegistration.html#302" class="InductiveConstructor">K.INIT</a> <a id="1819" href="/agda_html/Leios.SpecStructure.html#766" class="Field">pk-IB</a> <a id="1825" href="/agda_html/Leios.SpecStructure.html#772" class="Field">pk-EB</a> <a id="1831" href="/agda_html/Leios.SpecStructure.html#778" class="Field">pk-VT</a> <a id="1837" href="/agda_html/Leios.KeyRegistration.html#476" class="Function Operator">/</a> <a id="1839" href="/agda_html/Leios.KeyRegistration.html#374" class="InductiveConstructor">K.PUBKEYS</a> <a id="1849" href="/agda_html/Leios.Simplified.Deterministic.html#1458" class="Generalizable">pks</a> <a id="1853" href="/agda_html/Leios.KeyRegistration.html#476" class="Function Operator">⟧⇀</a> <a id="1856" href="/agda_html/Leios.Simplified.Deterministic.html#1147" class="Generalizable">ks&#39;</a></div>
<div class="line">       <a id="1867" href="/agda_html/Prelude.InferenceRules.html#56005" class="Function Operator">∙</a> <a id="1869" href="/agda_html/Leios.SpecStructure.html#904" class="Field">initBaseState</a> <a id="1883" href="/agda_html/Leios.Base.html#870" class="Function Operator">B.-⟦</a> <a id="1888" href="/agda_html/Leios.Base.html#576" class="InductiveConstructor">B.INIT</a> <a id="1895" class="Symbol">(</a><a id="1896" href="/agda_html/Leios.Base.html#490" class="Function">V-chkCerts</a> <a id="1907" href="/agda_html/Leios.Simplified.Deterministic.html#1458" class="Generalizable">pks</a><a id="1910" class="Symbol">)</a> <a id="1912" href="/agda_html/Leios.Base.html#870" class="Function Operator">/</a> <a id="1914" href="/agda_html/Leios.Base.html#710" class="InductiveConstructor">B.STAKE</a> <a id="1922" href="/agda_html/Leios.Simplified.Deterministic.html#1421" class="Generalizable">SD</a> <a id="1925" href="/agda_html/Leios.Base.html#870" class="Function Operator">⟧⇀</a> <a id="1928" href="/agda_html/Leios.Simplified.Deterministic.html#1110" class="Generalizable">bs&#39;</a></div>
<div class="line">       <a id="1939" href="/agda_html/Prelude.InferenceRules.html#11981" class="Function Operator">────────────────────────────────────────────────────────────────</a></div>
<div class="line">       <a id="2011" href="/agda_html/Leios.Protocol.html#734" class="InductiveConstructor">INIT</a> <a id="2016" href="/agda_html/Leios.Simplified.Deterministic.html#1391" class="Generalizable">V</a> <a id="2018" href="/agda_html/Leios.Simplified.Deterministic.html#1743" class="Datatype Operator">⊢</a> <a id="2020" href="/agda_html/Leios.Protocol.html#2378" class="Function">initLeiosState</a> <a id="2035" href="/agda_html/Leios.Simplified.Deterministic.html#1391" class="Generalizable">V</a> <a id="2037" href="/agda_html/Leios.Simplified.Deterministic.html#1421" class="Generalizable">SD</a> <a id="2040" href="/agda_html/Leios.Simplified.Deterministic.html#1110" class="Generalizable">bs&#39;</a> <a id="2044" href="/agda_html/Leios.Simplified.Deterministic.html#1458" class="Generalizable">pks</a></div>
<div class="line"></div>
<div class="line"><a id="2049" class="Keyword">data</a> <a id="_-⟦Base⟧⇀_"></a><a id="2054" href="/agda_html/Leios.Simplified.Deterministic.html#2054" class="Datatype Operator">_-⟦Base⟧⇀_</a> <a id="2065" class="Symbol">:</a> <a id="2067" href="/agda_html/Leios.Protocol.html#959" class="Record">LeiosState</a> <a id="2078" class="Symbol">→</a> <a id="2080" href="/agda_html/Leios.Protocol.html#959" class="Record">LeiosState</a> <a id="2091" class="Symbol">→</a> <a id="2093" href="/agda_html/Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2098" class="Keyword">where</a></div>
<div class="line"></div>
<div class="line">  <a id="_-⟦Base⟧⇀_.Base₂a"></a><a id="2107" href="/agda_html/Leios.Simplified.Deterministic.html#2107" class="InductiveConstructor">Base₂a</a>  <a id="2115" class="Symbol">:</a> <a id="2117" class="Symbol">∀</a> <a id="2119" class="Symbol">{</a><a id="2120" href="/agda_html/Leios.Simplified.Deterministic.html#2120" class="Bound">ebs</a><a id="2123" class="Symbol">}</a> <a id="2125" class="Symbol">→</a> <a id="2127" class="Keyword">let</a> <a id="2131" class="Keyword">open</a> <a id="2136" href="/agda_html/Leios.Protocol.html#959" class="Module">LeiosState</a> <a id="2147" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="2149" class="Keyword">renaming</a> <a id="2158" class="Symbol">(</a><a id="2159" href="/agda_html/Leios.Protocol.html#1389" class="Field">BaseState</a> <a id="2169" class="Symbol">to</a> <a id="2172" class="Field">bs</a><a id="2174" class="Symbol">)</a> <a id="2176" class="Keyword">in</a></div>
<div class="line">          <a id="2189" href="/agda_html/Prelude.InferenceRules.html#56074" class="Function Operator">∙</a> <a id="2191" href="/agda_html/Leios.Simplified.Deterministic.html#1273" class="Generalizable">eb</a> <a id="2194" href="/agda_html/Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2196" href="/agda_html/Leios.Simplified.Deterministic.html#2120" class="Bound">ebs</a> <a id="2200" href="/agda_html/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2202" href="/agda_html/Leios.Prelude.html#1171" class="Function">filter</a> <a id="2209" class="Symbol">(λ</a> <a id="2212" href="/agda_html/Leios.Simplified.Deterministic.html#2212" class="Bound">eb</a> <a id="2215" class="Symbol">→</a> <a id="2217" href="/agda_html/Leios.Simplified.html#853" class="Function">isVote2Certified</a> <a id="2234" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="2236" href="/agda_html/Leios.Simplified.Deterministic.html#2212" class="Bound">eb</a> <a id="2239" href="/agda_html/Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2241" href="/agda_html/Leios.Simplified.Deterministic.html#2212" class="Bound">eb</a> <a id="2244" href="/agda_html/Leios.Blocks.html#527" class="Function Operator">∈ᴮ</a> <a id="2247" href="/agda_html/Leios.Prelude.html#1001" class="Function">slice</a> <a id="2253" href="/agda_html/Leios.Abstract.html#628" class="Function">L</a> <a id="2255" href="/agda_html/Leios.Protocol.html#1260" class="Function">slot</a> <a id="2260" class="Number">2</a><a id="2261" class="Symbol">)</a> <a id="2263" href="/agda_html/Leios.Protocol.html#1180" class="Function">EBs</a></div>
<div class="line">          <a id="2277" href="/agda_html/Prelude.InferenceRules.html#56005" class="Function Operator">∙</a> <a id="2279" href="/agda_html/Leios.Simplified.Deterministic.html#2172" class="Function">bs</a> <a id="2282" href="/agda_html/Leios.Base.html#870" class="Function Operator">B.-⟦</a> <a id="2287" href="/agda_html/Leios.Base.html#627" class="InductiveConstructor">B.SUBMIT</a> <a id="2296" class="Symbol">(</a><a id="2297" href="/agda_html/Data.These.Base.html#595" class="InductiveConstructor">this</a> <a id="2302" href="/agda_html/Leios.Simplified.Deterministic.html#1273" class="Generalizable">eb</a><a id="2304" class="Symbol">)</a> <a id="2306" href="/agda_html/Leios.Base.html#870" class="Function Operator">/</a> <a id="2308" href="/agda_html/Leios.Base.html#742" class="InductiveConstructor">B.EMPTY</a> <a id="2316" href="/agda_html/Leios.Base.html#870" class="Function Operator">⟧⇀</a> <a id="2319" href="/agda_html/Leios.Simplified.Deterministic.html#1110" class="Generalizable">bs&#39;</a></div>
<div class="line">          <a id="2333" href="/agda_html/Prelude.InferenceRules.html#11470" class="Function Operator">───────────────────────────────────────────────────────────────────────</a></div>
<div class="line">          <a id="2415" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="2417" href="/agda_html/Leios.Simplified.Deterministic.html#2054" class="Datatype Operator">-⟦Base⟧⇀</a> <a id="2426" href="/agda_html/Leios.Protocol.html#2208" class="Function">addUpkeep</a> <a id="2436" class="Keyword">record</a> <a id="2443" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="2445" class="Symbol">{</a> <a id="2447" href="/agda_html/Leios.Protocol.html#1389" class="Field">BaseState</a> <a id="2457" class="Symbol">=</a> <a id="2459" href="/agda_html/Leios.Simplified.Deterministic.html#1110" class="Generalizable">bs&#39;</a> <a id="2463" class="Symbol">}</a> <a id="2465" href="/agda_html/Leios.Simplified.html#330" class="InductiveConstructor">Base</a></div>
<div class="line"></div>
<div class="line">  <a id="_-⟦Base⟧⇀_.Base₂b"></a><a id="2473" href="/agda_html/Leios.Simplified.Deterministic.html#2473" class="InductiveConstructor">Base₂b</a>  <a id="2481" class="Symbol">:</a> <a id="2483" class="Keyword">let</a> <a id="2487" class="Keyword">open</a> <a id="2492" href="/agda_html/Leios.Protocol.html#959" class="Module">LeiosState</a> <a id="2503" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="2505" class="Keyword">renaming</a> <a id="2514" class="Symbol">(</a><a id="2515" href="/agda_html/Leios.Protocol.html#1389" class="Field">BaseState</a> <a id="2525" class="Symbol">to</a> <a id="2528" class="Field">bs</a><a id="2530" class="Symbol">)</a> <a id="2532" class="Keyword">in</a></div>
<div class="line">          <a id="2545" href="/agda_html/Prelude.InferenceRules.html#56074" class="Function Operator">∙</a> <a id="2547" href="/agda_html/Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="2550" href="/agda_html/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2552" href="/agda_html/Leios.Prelude.html#1171" class="Function">filter</a> <a id="2559" class="Symbol">(λ</a> <a id="2562" href="/agda_html/Leios.Simplified.Deterministic.html#2562" class="Bound">eb</a> <a id="2565" class="Symbol">→</a> <a id="2567" href="/agda_html/Leios.Simplified.html#853" class="Function">isVote2Certified</a> <a id="2584" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="2586" href="/agda_html/Leios.Simplified.Deterministic.html#2562" class="Bound">eb</a> <a id="2589" href="/agda_html/Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2591" href="/agda_html/Leios.Simplified.Deterministic.html#2562" class="Bound">eb</a> <a id="2594" href="/agda_html/Leios.Blocks.html#527" class="Function Operator">∈ᴮ</a> <a id="2597" href="/agda_html/Leios.Prelude.html#1001" class="Function">slice</a> <a id="2603" href="/agda_html/Leios.Abstract.html#628" class="Function">L</a> <a id="2605" href="/agda_html/Leios.Protocol.html#1260" class="Function">slot</a> <a id="2610" class="Number">2</a><a id="2611" class="Symbol">)</a> <a id="2613" href="/agda_html/Leios.Protocol.html#1180" class="Function">EBs</a></div>
<div class="line">          <a id="2627" href="/agda_html/Prelude.InferenceRules.html#56005" class="Function Operator">∙</a> <a id="2629" href="/agda_html/Leios.Simplified.Deterministic.html#2528" class="Function">bs</a> <a id="2632" href="/agda_html/Leios.Base.html#870" class="Function Operator">B.-⟦</a> <a id="2637" href="/agda_html/Leios.Base.html#627" class="InductiveConstructor">B.SUBMIT</a> <a id="2646" class="Symbol">(</a><a id="2647" href="/agda_html/Data.These.Base.html#623" class="InductiveConstructor">that</a> <a id="2652" href="/agda_html/Leios.Protocol.html#1112" class="Function">ToPropose</a><a id="2661" class="Symbol">)</a> <a id="2663" href="/agda_html/Leios.Base.html#870" class="Function Operator">/</a> <a id="2665" href="/agda_html/Leios.Base.html#742" class="InductiveConstructor">B.EMPTY</a> <a id="2673" href="/agda_html/Leios.Base.html#870" class="Function Operator">⟧⇀</a> <a id="2676" href="/agda_html/Leios.Simplified.Deterministic.html#1110" class="Generalizable">bs&#39;</a></div>
<div class="line">          <a id="2690" href="/agda_html/Prelude.InferenceRules.html#11470" class="Function Operator">───────────────────────────────────────────────────────────────────────</a></div>
<div class="line">          <a id="2772" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="2774" href="/agda_html/Leios.Simplified.Deterministic.html#2054" class="Datatype Operator">-⟦Base⟧⇀</a> <a id="2783" href="/agda_html/Leios.Protocol.html#2208" class="Function">addUpkeep</a> <a id="2793" class="Keyword">record</a> <a id="2800" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="2802" class="Symbol">{</a> <a id="2804" href="/agda_html/Leios.Protocol.html#1389" class="Field">BaseState</a> <a id="2814" class="Symbol">=</a> <a id="2816" href="/agda_html/Leios.Simplified.Deterministic.html#1110" class="Generalizable">bs&#39;</a> <a id="2820" class="Symbol">}</a> <a id="2822" href="/agda_html/Leios.Simplified.html#330" class="InductiveConstructor">Base</a></div>
<div class="line"></div>
<div class="line"><a id="Base⇒ND"></a><a id="2828" href="/agda_html/Leios.Simplified.Deterministic.html#2828" class="Function">Base⇒ND</a> <a id="2836" class="Symbol">:</a> <a id="2838" href="/agda_html/Leios.Protocol.html#2023" class="Function">LeiosState.needsUpkeep</a> <a id="2861" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="2863" href="/agda_html/Leios.Simplified.html#330" class="InductiveConstructor">Base</a> <a id="2868" class="Symbol">→</a> <a id="2870" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="2872" href="/agda_html/Leios.Simplified.Deterministic.html#2054" class="Datatype Operator">-⟦Base⟧⇀</a> <a id="2881" href="/agda_html/Leios.Simplified.Deterministic.html#916" class="Generalizable">s&#39;</a> <a id="2884" class="Symbol">→</a> <a id="2886" href="/agda_html/Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="2891" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="2893" href="/agda_html/Leios.Simplified.html#5007" class="Datatype Operator">ND.-⟦</a> <a id="2899" href="/agda_html/Leios.Protocol.html#814" class="InductiveConstructor">SLOT</a> <a id="2904" href="/agda_html/Leios.Simplified.html#5007" class="Datatype Operator">/</a> <a id="2906" href="/agda_html/Leios.Protocol.html#928" class="InductiveConstructor">EMPTY</a> <a id="2912" href="/agda_html/Leios.Simplified.html#5007" class="Datatype Operator">⟧⇀</a> <a id="2915" href="/agda_html/Leios.Simplified.Deterministic.html#916" class="Generalizable">s&#39;</a></div>
<div class="line"><a id="2918" href="/agda_html/Leios.Simplified.Deterministic.html#2828" class="Function">Base⇒ND</a> <a id="2926" href="/agda_html/Leios.Simplified.Deterministic.html#2926" class="Bound">u</a> <a id="2928" class="Symbol">(</a><a id="2929" href="/agda_html/Leios.Simplified.Deterministic.html#2107" class="InductiveConstructor">Base₂a</a> <a id="2936" href="/agda_html/Leios.Simplified.Deterministic.html#2936" class="Bound">x₁</a> <a id="2939" href="/agda_html/Leios.Simplified.Deterministic.html#2939" class="Bound">x₂</a><a id="2941" class="Symbol">)</a> <a id="2943" class="Symbol">=</a> <a id="2945" href="/agda_html/Leios.Simplified.html#6468" class="InductiveConstructor">Base₂a</a> <a id="2952" href="/agda_html/Leios.Simplified.Deterministic.html#2926" class="Bound">u</a> <a id="2954" class="Symbol">(</a><a id="2955" href="/agda_html/Relation.Binary.PropositionalEquality.Core.html#1989" class="Function">subst</a> <a id="2961" class="Symbol">(_</a> <a id="2964" href="/agda_html/Class.IsSet.html#458" class="Function Operator">∈_</a><a id="2966" class="Symbol">)</a> <a id="2968" href="/agda_html/Leios.Simplified.Deterministic.html#2936" class="Bound">x₁</a> <a id="2971" class="Symbol">(</a><a id="2972" href="/agda_html/Function.Bundles.html#4810" class="Field">Equivalence.to</a> <a id="2987" href="/agda_html/Axiom.Set.html#5776" class="Function">∈-fromList</a> <a id="2998" class="Symbol">(</a><a id="2999" href="/agda_html/Data.List.Relation.Unary.Any.html#1211" class="InductiveConstructor">here</a> <a id="3004" href="/agda_html/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="3008" class="Symbol">)))</a> <a id="3012" href="/agda_html/Leios.Simplified.Deterministic.html#2939" class="Bound">x₂</a></div>
<div class="line"><a id="3015" href="/agda_html/Leios.Simplified.Deterministic.html#2828" class="Function">Base⇒ND</a> <a id="3023" href="/agda_html/Leios.Simplified.Deterministic.html#3023" class="Bound">u</a> <a id="3025" class="Symbol">(</a><a id="3026" href="/agda_html/Leios.Simplified.Deterministic.html#2473" class="InductiveConstructor">Base₂b</a> <a id="3033" href="/agda_html/Leios.Simplified.Deterministic.html#3033" class="Bound">x₁</a> <a id="3036" href="/agda_html/Leios.Simplified.Deterministic.html#3036" class="Bound">x₂</a><a id="3038" class="Symbol">)</a> <a id="3040" class="Symbol">=</a> <a id="3042" href="/agda_html/Leios.Simplified.html#6862" class="InductiveConstructor">Base₂b</a> <a id="3049" href="/agda_html/Leios.Simplified.Deterministic.html#3023" class="Bound">u</a> <a id="3051" href="/agda_html/Leios.Simplified.Deterministic.html#3033" class="Bound">x₁</a> <a id="3054" href="/agda_html/Leios.Simplified.Deterministic.html#3036" class="Bound">x₂</a></div>
<div class="line"></div>
<div class="line"><a id="Base-Upkeep"></a><a id="3058" href="/agda_html/Leios.Simplified.Deterministic.html#3058" class="Function">Base-Upkeep</a> <a id="3070" class="Symbol">:</a> <a id="3072" class="Symbol">∀</a> <a id="3074" class="Symbol">{</a><a id="3075" href="/agda_html/Leios.Simplified.Deterministic.html#3075" class="Bound">u</a><a id="3076" class="Symbol">}</a> <a id="3078" class="Symbol">→</a> <a id="3080" href="/agda_html/Leios.Simplified.Deterministic.html#3075" class="Bound">u</a> <a id="3082" href="/agda_html/Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="3084" href="/agda_html/Leios.Simplified.html#330" class="InductiveConstructor">Base</a> <a id="3089" class="Symbol">→</a> <a id="3091" href="/agda_html/Leios.Protocol.html#2023" class="Function">LeiosState.needsUpkeep</a> <a id="3114" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="3116" href="/agda_html/Leios.Simplified.Deterministic.html#3075" class="Bound">u</a> <a id="3118" class="Symbol">→</a> <a id="3120" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="3122" href="/agda_html/Leios.Simplified.Deterministic.html#2054" class="Datatype Operator">-⟦Base⟧⇀</a> <a id="3131" href="/agda_html/Leios.Simplified.Deterministic.html#916" class="Generalizable">s&#39;</a></div>
<div class="line">                  <a id="3152" class="Symbol">→</a> <a id="3154" href="/agda_html/Leios.Protocol.html#2023" class="Function">LeiosState.needsUpkeep</a> <a id="3177" href="/agda_html/Leios.Simplified.Deterministic.html#916" class="Generalizable">s&#39;</a> <a id="3180" href="/agda_html/Leios.Simplified.Deterministic.html#3075" class="Bound">u</a></div>
<div class="line"><a id="3182" href="/agda_html/Leios.Simplified.Deterministic.html#3058" class="Function">Base-Upkeep</a> <a id="3194" href="/agda_html/Leios.Simplified.Deterministic.html#3194" class="Bound">u≢Base</a> <a id="3201" href="/agda_html/Leios.Simplified.Deterministic.html#3201" class="Bound">h</a> <a id="3203" class="Symbol">(</a><a id="3204" href="/agda_html/Leios.Simplified.Deterministic.html#2107" class="InductiveConstructor">Base₂a</a> <a id="3211" class="Symbol">_</a> <a id="3213" class="Symbol">_)</a> <a id="3216" href="/agda_html/Leios.Simplified.Deterministic.html#3216" class="Bound">u∈su</a> <a id="3221" class="Symbol">=</a> <a id="3223" href="/agda_html/Function.Base.html#4042" class="Function Operator">case</a> <a id="3228" href="/agda_html/Function.Bundles.html#4834" class="Field">Equivalence.from</a> <a id="3245" href="/agda_html/Axiom.Set.html#9013" class="Function">∈-∪</a> <a id="3249" href="/agda_html/Leios.Simplified.Deterministic.html#3216" class="Bound">u∈su</a> <a id="3254" href="/agda_html/Function.Base.html#4042" class="Function Operator">of</a> <a id="3257" class="Symbol">λ</a> <a id="3259" class="Keyword">where</a></div>
<div class="line">  <a id="3267" class="Symbol">(</a><a id="3268" href="/agda_html/Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="3273" href="/agda_html/Leios.Simplified.Deterministic.html#3273" class="Bound">x</a><a id="3274" class="Symbol">)</a> <a id="3276" class="Symbol">→</a> <a id="3278" href="/agda_html/Leios.Simplified.Deterministic.html#3201" class="Bound">h</a> <a id="3280" href="/agda_html/Leios.Simplified.Deterministic.html#3273" class="Bound">x</a></div>
<div class="line">  <a id="3284" class="Symbol">(</a><a id="3285" href="/agda_html/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="3290" href="/agda_html/Leios.Simplified.Deterministic.html#3290" class="Bound">y</a><a id="3291" class="Symbol">)</a> <a id="3293" class="Symbol">→</a> <a id="3295" href="/agda_html/Leios.Simplified.Deterministic.html#3194" class="Bound">u≢Base</a> <a id="3302" class="Symbol">(</a><a id="3303" href="/agda_html/Function.Bundles.html#4834" class="Field">Equivalence.from</a> <a id="3320" href="/agda_html/Axiom.Set.html#6243" class="Function">∈-singleton</a> <a id="3332" href="/agda_html/Leios.Simplified.Deterministic.html#3290" class="Bound">y</a><a id="3333" class="Symbol">)</a></div>
<div class="line"><a id="3335" href="/agda_html/Leios.Simplified.Deterministic.html#3058" class="Function">Base-Upkeep</a> <a id="3347" href="/agda_html/Leios.Simplified.Deterministic.html#3347" class="Bound">u≢Base</a> <a id="3354" href="/agda_html/Leios.Simplified.Deterministic.html#3354" class="Bound">h</a> <a id="3356" class="Symbol">(</a><a id="3357" href="/agda_html/Leios.Simplified.Deterministic.html#2473" class="InductiveConstructor">Base₂b</a> <a id="3364" class="Symbol">_</a> <a id="3366" class="Symbol">_)</a> <a id="3369" href="/agda_html/Leios.Simplified.Deterministic.html#3369" class="Bound">u∈su</a> <a id="3374" class="Symbol">=</a> <a id="3376" href="/agda_html/Function.Base.html#4042" class="Function Operator">case</a> <a id="3381" href="/agda_html/Function.Bundles.html#4834" class="Field">Equivalence.from</a> <a id="3398" href="/agda_html/Axiom.Set.html#9013" class="Function">∈-∪</a> <a id="3402" href="/agda_html/Leios.Simplified.Deterministic.html#3369" class="Bound">u∈su</a> <a id="3407" href="/agda_html/Function.Base.html#4042" class="Function Operator">of</a> <a id="3410" class="Symbol">λ</a> <a id="3412" class="Keyword">where</a></div>
<div class="line">  <a id="3420" class="Symbol">(</a><a id="3421" href="/agda_html/Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="3426" href="/agda_html/Leios.Simplified.Deterministic.html#3426" class="Bound">x</a><a id="3427" class="Symbol">)</a> <a id="3429" class="Symbol">→</a> <a id="3431" href="/agda_html/Leios.Simplified.Deterministic.html#3354" class="Bound">h</a> <a id="3433" href="/agda_html/Leios.Simplified.Deterministic.html#3426" class="Bound">x</a></div>
<div class="line">  <a id="3437" class="Symbol">(</a><a id="3438" href="/agda_html/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="3443" href="/agda_html/Leios.Simplified.Deterministic.html#3443" class="Bound">y</a><a id="3444" class="Symbol">)</a> <a id="3446" class="Symbol">→</a> <a id="3448" href="/agda_html/Leios.Simplified.Deterministic.html#3347" class="Bound">u≢Base</a> <a id="3455" class="Symbol">(</a><a id="3456" href="/agda_html/Function.Bundles.html#4834" class="Field">Equivalence.from</a> <a id="3473" href="/agda_html/Axiom.Set.html#6243" class="Function">∈-singleton</a> <a id="3485" href="/agda_html/Leios.Simplified.Deterministic.html#3443" class="Bound">y</a><a id="3486" class="Symbol">)</a></div>
<div class="line"></div>
<div class="line"><a id="3489" class="Keyword">opaque</a></div>
<div class="line">  <a id="Base-total"></a><a id="3498" href="/agda_html/Leios.Simplified.Deterministic.html#3498" class="Function">Base-total</a> <a id="3509" class="Symbol">:</a> <a id="3511" href="/agda_html/Data.Product.Base.html#1371" class="Function">∃[</a> <a id="3514" href="/agda_html/Leios.Simplified.Deterministic.html#3514" class="Bound">s&#39;</a> <a id="3517" href="/agda_html/Data.Product.Base.html#1371" class="Function">]</a> <a id="3519" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="3521" href="/agda_html/Leios.Simplified.Deterministic.html#2054" class="Datatype Operator">-⟦Base⟧⇀</a> <a id="3530" href="/agda_html/Leios.Simplified.Deterministic.html#3514" class="Bound">s&#39;</a></div>
<div class="line">  <a id="3535" href="/agda_html/Leios.Simplified.Deterministic.html#3498" class="Function">Base-total</a> <a id="3546" class="Symbol">{</a><a id="3547" class="Argument">s</a> <a id="3549" class="Symbol">=</a> <a id="3551" href="/agda_html/Leios.Simplified.Deterministic.html#3551" class="Bound">s</a><a id="3552" class="Symbol">}</a> <a id="3554" class="Keyword">with</a></div>
<div class="line">    <a id="3563" class="Symbol">(</a><a id="3564" class="Keyword">let</a> <a id="3568" class="Keyword">open</a> <a id="3573" href="/agda_html/Leios.Protocol.html#959" class="Module">LeiosState</a> <a id="3584" href="/agda_html/Leios.Simplified.Deterministic.html#3551" class="Bound">s</a> <a id="3586" class="Keyword">in</a> <a id="3589" href="/agda_html/Leios.Prelude.html#1171" class="Function">filter</a> <a id="3596" class="Symbol">(λ</a> <a id="3599" href="/agda_html/Leios.Simplified.Deterministic.html#3599" class="Bound">eb</a> <a id="3602" class="Symbol">→</a> <a id="3604" href="/agda_html/Leios.Simplified.html#853" class="Function">isVote2Certified</a> <a id="3621" href="/agda_html/Leios.Simplified.Deterministic.html#3551" class="Bound">s</a> <a id="3623" href="/agda_html/Leios.Simplified.Deterministic.html#3599" class="Bound">eb</a> <a id="3626" href="/agda_html/Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3628" href="/agda_html/Leios.Simplified.Deterministic.html#3599" class="Bound">eb</a> <a id="3631" href="/agda_html/Leios.Blocks.html#527" class="Function Operator">∈ᴮ</a> <a id="3634" href="/agda_html/Leios.Prelude.html#1001" class="Function">slice</a> <a id="3640" href="/agda_html/Leios.Abstract.html#628" class="Function">L</a> <a id="3642" href="/agda_html/Leios.Protocol.html#1260" class="Field">slot</a> <a id="3647" class="Number">2</a><a id="3648" class="Symbol">)</a> <a id="3650" href="/agda_html/Leios.Protocol.html#1180" class="Field">EBs</a><a id="3653" class="Symbol">)</a></div>
<div class="line">    <a id="3659" class="Keyword">in</a> <a id="3662" class="Argument">eq</a></div>
<div class="line">  <a id="3667" class="Symbol">...</a> <a id="3671" class="Symbol">|</a> <a id="3673" href="/agda_html/Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>    <a id="3679" class="Symbol">=</a> <a id="3681" href="/agda_html/Data.Product.Base.html#1932" class="Function Operator">-,</a> <a id="3684" href="/agda_html/Leios.Simplified.Deterministic.html#2473" class="InductiveConstructor">Base₂b</a> <a id="3691" class="Symbol">(</a><a id="3692" href="/agda_html/Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a> <a id="3696" href="/agda_html/Leios.Simplified.Deterministic.html#3662" class="Bound">eq</a><a id="3698" class="Symbol">)</a> <a id="3700" class="Symbol">(</a><a id="3701" href="/agda_html/Data.Product.Base.html#650" class="Field">proj₂</a> <a id="3707" href="/agda_html/Leios.Base.html#1039" class="Function">B.SUBMIT-total</a><a id="3721" class="Symbol">)</a></div>
<div class="line">  <a id="3725" class="Symbol">...</a> <a id="3729" class="Symbol">|</a> <a id="3731" href="/agda_html/Leios.Simplified.Deterministic.html#3731" class="Bound">x</a> <a id="3733" href="/agda_html/Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="3735" href="/agda_html/Leios.Simplified.Deterministic.html#3735" class="Bound">l</a> <a id="3737" class="Symbol">=</a> <a id="3739" href="/agda_html/Data.Product.Base.html#1932" class="Function Operator">-,</a> <a id="3742" href="/agda_html/Leios.Simplified.Deterministic.html#2107" class="InductiveConstructor">Base₂a</a> <a id="3749" class="Symbol">(</a><a id="3750" href="/agda_html/Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a> <a id="3754" href="/agda_html/Leios.Simplified.Deterministic.html#3662" class="Bound">eq</a><a id="3756" class="Symbol">)</a> <a id="3758" class="Symbol">(</a><a id="3759" href="/agda_html/Data.Product.Base.html#650" class="Field">proj₂</a> <a id="3765" href="/agda_html/Leios.Base.html#1039" class="Function">B.SUBMIT-total</a><a id="3779" class="Symbol">)</a></div>
<div class="line"></div>
<div class="line">  <a id="Base-total&#39;"></a><a id="3784" href="/agda_html/Leios.Simplified.Deterministic.html#3784" class="Function">Base-total&#39;</a> <a id="3796" class="Symbol">:</a> <a id="3798" class="Symbol">⦃</a> <a id="3800" href="/agda_html/Leios.Simplified.Deterministic.html#3800" class="Bound">Computational-B</a> <a id="3816" class="Symbol">:</a> <a id="3818" href="/agda_html/Class.Computational22.html#445" class="Record">Computational22</a> <a id="3834" href="/agda_html/Leios.Base.html#870" class="Function Operator">B._-⟦_/_⟧⇀_</a> <a id="3846" href="/agda_html/Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="3853" class="Symbol">⦄</a></div>
<div class="line">              <a id="3869" class="Symbol">→</a> <a id="3871" href="/agda_html/Data.Product.Base.html#1371" class="Function">∃[</a> <a id="3874" href="/agda_html/Leios.Simplified.Deterministic.html#3874" class="Bound">bs</a> <a id="3877" href="/agda_html/Data.Product.Base.html#1371" class="Function">]</a> <a id="3879" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="3881" href="/agda_html/Leios.Simplified.Deterministic.html#2054" class="Datatype Operator">-⟦Base⟧⇀</a> <a id="3890" href="/agda_html/Leios.Protocol.html#2208" class="Function">addUpkeep</a> <a id="3900" class="Keyword">record</a> <a id="3907" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="3909" class="Symbol">{</a> <a id="3911" class="Field">BaseState</a> <a id="3921" class="Symbol">=</a> <a id="3923" href="/agda_html/Leios.Simplified.Deterministic.html#3874" class="Bound">bs</a> <a id="3926" class="Symbol">}</a> <a id="3928" href="/agda_html/Leios.Simplified.html#330" class="InductiveConstructor">Base</a></div>
<div class="line">  <a id="3935" href="/agda_html/Leios.Simplified.Deterministic.html#3784" class="Function">Base-total&#39;</a> <a id="3947" class="Symbol">{</a><a id="3948" class="Argument">s</a> <a id="3950" class="Symbol">=</a> <a id="3952" href="/agda_html/Leios.Simplified.Deterministic.html#3952" class="Bound">s</a><a id="3953" class="Symbol">}</a> <a id="3955" class="Symbol">=</a> <a id="3957" class="Keyword">let</a> <a id="3961" class="Keyword">open</a> <a id="3966" href="/agda_html/Leios.Protocol.html#959" class="Module">LeiosState</a> <a id="3977" href="/agda_html/Leios.Simplified.Deterministic.html#3952" class="Bound">s</a> <a id="3979" class="Keyword">in</a></div>
<div class="line">    <a id="3986" href="/agda_html/Function.Base.html#4042" class="Function Operator">case</a> <a id="3991" href="/agda_html/Data.Product.Base.html#1371" class="Function">∃[</a> <a id="3994" href="/agda_html/Leios.Simplified.Deterministic.html#3994" class="Bound">ebs</a> <a id="3998" href="/agda_html/Data.Product.Base.html#1371" class="Function">]</a> <a id="4000" href="/agda_html/Leios.Simplified.Deterministic.html#3994" class="Bound">ebs</a> <a id="4004" href="/agda_html/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="4006" href="/agda_html/Leios.Prelude.html#1171" class="Function">filter</a> <a id="4013" class="Symbol">(λ</a> <a id="4016" href="/agda_html/Leios.Simplified.Deterministic.html#4016" class="Bound">eb</a> <a id="4019" class="Symbol">→</a> <a id="4021" href="/agda_html/Leios.Simplified.html#853" class="Function">isVote2Certified</a> <a id="4038" href="/agda_html/Leios.Simplified.Deterministic.html#3952" class="Bound">s</a> <a id="4040" href="/agda_html/Leios.Simplified.Deterministic.html#4016" class="Bound">eb</a> <a id="4043" href="/agda_html/Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="4045" href="/agda_html/Leios.Simplified.Deterministic.html#4016" class="Bound">eb</a> <a id="4048" href="/agda_html/Leios.Blocks.html#527" class="Function Operator">∈ᴮ</a> <a id="4051" href="/agda_html/Leios.Prelude.html#1001" class="Function">slice</a> <a id="4057" href="/agda_html/Leios.Abstract.html#628" class="Function">L</a> <a id="4059" href="/agda_html/Leios.Protocol.html#1260" class="Function">slot</a> <a id="4064" class="Number">2</a><a id="4065" class="Symbol">)</a> <a id="4067" href="/agda_html/Leios.Protocol.html#1180" class="Function">EBs</a> <a id="4071" href="/agda_html/Function.Base.html#4486" class="Function Operator">∋</a> <a id="4073" href="/agda_html/Data.Product.Base.html#1932" class="Function Operator">-,</a> <a id="4076" href="/agda_html/Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a></div>
<div class="line">      <a id="4087" href="/agda_html/Function.Base.html#4042" class="Function Operator">of</a> <a id="4090" class="Symbol">λ</a> <a id="4092" class="Keyword">where</a></div>
<div class="line">        <a id="4106" class="Symbol">(</a><a id="4107" href="/agda_html/Leios.Simplified.Deterministic.html#4107" class="Bound">eb</a> <a id="4110" href="/agda_html/Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="4112" class="Symbol">_</a> <a id="4114" href="/agda_html/Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4116" href="/agda_html/Leios.Simplified.Deterministic.html#4116" class="Bound">eq</a><a id="4118" class="Symbol">)</a> <a id="4120" class="Symbol">→</a> <a id="4122" href="/agda_html/Data.Product.Base.html#1932" class="Function Operator">-,</a> <a id="4125" href="/agda_html/Leios.Simplified.Deterministic.html#2107" class="InductiveConstructor">Base₂a</a> <a id="4132" href="/agda_html/Leios.Simplified.Deterministic.html#4116" class="Bound">eq</a> <a id="4135" class="Symbol">(</a><a id="4136" href="/agda_html/Data.Product.Base.html#650" class="Field">proj₂</a> <a id="4142" href="/agda_html/Leios.Base.html#1039" class="Function">B.SUBMIT-total</a><a id="4156" class="Symbol">)</a></div>
<div class="line">        <a id="4166" class="Symbol">(</a><a id="4167" href="/agda_html/Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>     <a id="4174" href="/agda_html/Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4176" href="/agda_html/Leios.Simplified.Deterministic.html#4176" class="Bound">eq</a><a id="4178" class="Symbol">)</a> <a id="4180" class="Symbol">→</a> <a id="4182" href="/agda_html/Data.Product.Base.html#1932" class="Function Operator">-,</a> <a id="4185" href="/agda_html/Leios.Simplified.Deterministic.html#2473" class="InductiveConstructor">Base₂b</a> <a id="4192" href="/agda_html/Leios.Simplified.Deterministic.html#4176" class="Bound">eq</a> <a id="4195" class="Symbol">(</a><a id="4196" href="/agda_html/Data.Product.Base.html#650" class="Field">proj₂</a> <a id="4202" href="/agda_html/Leios.Base.html#1039" class="Function">B.SUBMIT-total</a><a id="4216" class="Symbol">)</a></div>
<div class="line"></div>
<div class="line"><a id="4219" class="Keyword">data</a> <a id="_-⟦IB-Role⟧⇀_"></a><a id="4224" href="/agda_html/Leios.Simplified.Deterministic.html#4224" class="Datatype Operator">_-⟦IB-Role⟧⇀_</a> <a id="4238" class="Symbol">:</a> <a id="4240" href="/agda_html/Leios.Protocol.html#959" class="Record">LeiosState</a> <a id="4251" class="Symbol">→</a> <a id="4253" href="/agda_html/Leios.Protocol.html#959" class="Record">LeiosState</a> <a id="4264" class="Symbol">→</a> <a id="4266" href="/agda_html/Agda.Primitive.html#388" class="Primitive">Type</a> <a id="4271" class="Keyword">where</a></div>
<div class="line"></div>
<div class="line">  <a id="_-⟦IB-Role⟧⇀_.IB-Role"></a><a id="4280" href="/agda_html/Leios.Simplified.Deterministic.html#4280" class="InductiveConstructor">IB-Role</a> <a id="4288" class="Symbol">:</a> <a id="4290" class="Keyword">let</a> <a id="4294" class="Keyword">open</a> <a id="4299" href="/agda_html/Leios.Protocol.html#959" class="Module">LeiosState</a> <a id="4310" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="4312" class="Keyword">renaming</a> <a id="4321" class="Symbol">(</a><a id="4322" href="/agda_html/Leios.Protocol.html#1050" class="Field">FFDState</a> <a id="4331" class="Symbol">to</a> <a id="4334" class="Field">ffds</a><a id="4338" class="Symbol">)</a></div>
<div class="line">                <a id="4356" href="/agda_html/Leios.Simplified.Deterministic.html#4356" class="Bound">b</a> <a id="4358" class="Symbol">=</a> <a id="4360" href="/agda_html/Leios.Blocks.html#4449" class="InductiveConstructor">ibBody</a> <a id="4367" class="Symbol">(</a><a id="4368" class="Keyword">record</a> <a id="4375" class="Symbol">{</a> <a id="4377" href="/agda_html/Leios.Blocks.html#1083" class="Field">txs</a> <a id="4381" class="Symbol">=</a> <a id="4383" href="/agda_html/Leios.Protocol.html#1112" class="Function">ToPropose</a> <a id="4393" class="Symbol">})</a></div>
<div class="line">                <a id="4412" href="/agda_html/Leios.Simplified.Deterministic.html#4412" class="Bound">h</a> <a id="4414" class="Symbol">=</a> <a id="4416" href="/agda_html/Leios.Blocks.html#4318" class="InductiveConstructor">ibHeader</a> <a id="4425" class="Symbol">(</a><a id="4426" href="/agda_html/Leios.Blocks.html#1898" class="Function">mkIBHeader</a> <a id="4437" href="/agda_html/Leios.Protocol.html#1260" class="Function">slot</a> <a id="4442" href="/agda_html/Leios.SpecStructure.html#601" class="Field">id</a> <a id="4445" href="/agda_html/Leios.Simplified.Deterministic.html#1078" class="Generalizable">π</a> <a id="4447" href="/agda_html/Leios.SpecStructure.html#730" class="Field">sk-IB</a> <a id="4453" href="/agda_html/Leios.Protocol.html#1112" class="Function">ToPropose</a><a id="4462" class="Symbol">)</a></div>
<div class="line">          <a id="4474" class="Keyword">in</a></div>
<div class="line">          <a id="4487" href="/agda_html/Prelude.InferenceRules.html#56074" class="Function Operator">∙</a> <a id="4489" href="/agda_html/Leios.VRF.html#814" class="Function">canProduceIB</a> <a id="4502" href="/agda_html/Leios.Protocol.html#1260" class="Function">slot</a> <a id="4507" href="/agda_html/Leios.SpecStructure.html#730" class="Field">sk-IB</a> <a id="4513" class="Symbol">(</a><a id="4514" href="/agda_html/Leios.Protocol.html#2995" class="Function">stake</a> <a id="4520" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a><a id="4521" class="Symbol">)</a> <a id="4523" href="/agda_html/Leios.Simplified.Deterministic.html#1078" class="Generalizable">π</a></div>
<div class="line">          <a id="4535" href="/agda_html/Prelude.InferenceRules.html#56005" class="Function Operator">∙</a> <a id="4537" href="/agda_html/Leios.Simplified.Deterministic.html#4334" class="Function">ffds</a> <a id="4542" href="/agda_html/Leios.FFD.html#562" class="Function Operator">FFD.-⟦</a> <a id="4549" href="/agda_html/Leios.FFD.html#311" class="InductiveConstructor">Send</a> <a id="4554" href="/agda_html/Leios.Simplified.Deterministic.html#4412" class="Bound">h</a> <a id="4556" class="Symbol">(</a><a id="4557" href="/agda_html/Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="4562" href="/agda_html/Leios.Simplified.Deterministic.html#4356" class="Bound">b</a><a id="4563" class="Symbol">)</a> <a id="4565" href="/agda_html/Leios.FFD.html#562" class="Function Operator">/</a> <a id="4567" href="/agda_html/Leios.FFD.html#397" class="InductiveConstructor">SendRes</a> <a id="4575" href="/agda_html/Leios.FFD.html#562" class="Function Operator">⟧⇀</a> <a id="4578" href="/agda_html/Leios.Simplified.Deterministic.html#1042" class="Generalizable">ffds&#39;</a></div>
<div class="line">          <a id="4594" href="/agda_html/Prelude.InferenceRules.html#11695" class="Function Operator">────────────────────────────────────────────────────────────────────</a></div>
<div class="line">          <a id="4673" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="4675" href="/agda_html/Leios.Simplified.Deterministic.html#4224" class="Datatype Operator">-⟦IB-Role⟧⇀</a> <a id="4687" href="/agda_html/Leios.Protocol.html#2208" class="Function">addUpkeep</a> <a id="4697" class="Keyword">record</a> <a id="4704" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="4706" class="Symbol">{</a> <a id="4708" href="/agda_html/Leios.Protocol.html#1050" class="Field">FFDState</a> <a id="4717" class="Symbol">=</a> <a id="4719" href="/agda_html/Leios.Simplified.Deterministic.html#1042" class="Generalizable">ffds&#39;</a> <a id="4725" class="Symbol">}</a> <a id="4727" href="/agda_html/Leios.Simplified.html#335" class="InductiveConstructor">IB-Role</a></div>
<div class="line"></div>
<div class="line">  <a id="_-⟦IB-Role⟧⇀_.No-IB-Role"></a><a id="4738" href="/agda_html/Leios.Simplified.Deterministic.html#4738" class="InductiveConstructor">No-IB-Role</a> <a id="4749" class="Symbol">:</a> <a id="4751" class="Keyword">let</a> <a id="4755" class="Keyword">open</a> <a id="4760" href="/agda_html/Leios.Protocol.html#959" class="Module">LeiosState</a> <a id="4771" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="4773" class="Keyword">in</a></div>
<div class="line">          <a id="4786" href="/agda_html/Prelude.InferenceRules.html#56074" class="Function Operator">∙</a> <a id="4788" class="Symbol">(∀</a> <a id="4791" href="/agda_html/Leios.Simplified.Deterministic.html#4791" class="Bound">π</a> <a id="4793" class="Symbol">→</a> <a id="4795" href="/agda_html/Relation.Nullary.Negation.Core.html#658" class="Function Operator">¬</a> <a id="4797" href="/agda_html/Leios.VRF.html#814" class="Function">canProduceIB</a> <a id="4810" href="/agda_html/Leios.Protocol.html#1260" class="Function">slot</a> <a id="4815" href="/agda_html/Leios.SpecStructure.html#730" class="Field">sk-IB</a> <a id="4821" class="Symbol">(</a><a id="4822" href="/agda_html/Leios.Protocol.html#2995" class="Function">stake</a> <a id="4828" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a><a id="4829" class="Symbol">)</a> <a id="4831" href="/agda_html/Leios.Simplified.Deterministic.html#4791" class="Bound">π</a><a id="4832" class="Symbol">)</a></div>
<div class="line">          <a id="4844" href="/agda_html/Prelude.InferenceRules.html#13361" class="Function Operator">────────────────────────────────────────</a></div>
<div class="line">          <a id="4895" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="4897" href="/agda_html/Leios.Simplified.Deterministic.html#4224" class="Datatype Operator">-⟦IB-Role⟧⇀</a> <a id="4909" href="/agda_html/Leios.Protocol.html#2208" class="Function">addUpkeep</a> <a id="4919" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="4921" href="/agda_html/Leios.Simplified.html#335" class="InductiveConstructor">IB-Role</a></div>
<div class="line"></div>
<div class="line"><a id="IB-Role⇒ND"></a><a id="4930" href="/agda_html/Leios.Simplified.Deterministic.html#4930" class="Function">IB-Role⇒ND</a> <a id="4941" class="Symbol">:</a> <a id="4943" href="/agda_html/Leios.Protocol.html#2023" class="Function">LeiosState.needsUpkeep</a> <a id="4966" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="4968" class="InductiveConstructor">IB-Role</a> <a id="4976" class="Symbol">→</a> <a id="4978" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="4980" href="/agda_html/Leios.Simplified.Deterministic.html#4224" class="Datatype Operator">-⟦IB-Role⟧⇀</a> <a id="4992" href="/agda_html/Leios.Simplified.Deterministic.html#916" class="Generalizable">s&#39;</a> <a id="4995" class="Symbol">→</a> <a id="4997" href="/agda_html/Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="5002" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="5004" href="/agda_html/Leios.Simplified.html#5007" class="Datatype Operator">ND.-⟦</a> <a id="5010" href="/agda_html/Leios.Protocol.html#814" class="InductiveConstructor">SLOT</a> <a id="5015" href="/agda_html/Leios.Simplified.html#5007" class="Datatype Operator">/</a> <a id="5017" href="/agda_html/Leios.Protocol.html#928" class="InductiveConstructor">EMPTY</a> <a id="5023" href="/agda_html/Leios.Simplified.html#5007" class="Datatype Operator">⟧⇀</a> <a id="5026" href="/agda_html/Leios.Simplified.Deterministic.html#916" class="Generalizable">s&#39;</a></div>
<div class="line"><a id="5029" href="/agda_html/Leios.Simplified.Deterministic.html#4930" class="Function">IB-Role⇒ND</a> <a id="5040" href="/agda_html/Leios.Simplified.Deterministic.html#5040" class="Bound">u</a> <a id="5042" class="Symbol">(</a><a id="5043" href="/agda_html/Leios.Simplified.Deterministic.html#4280" class="InductiveConstructor">IB-Role</a> <a id="5051" href="/agda_html/Leios.Simplified.Deterministic.html#5051" class="Bound">x₁</a> <a id="5054" href="/agda_html/Leios.Simplified.Deterministic.html#5054" class="Bound">x₂</a><a id="5056" class="Symbol">)</a> <a id="5058" class="Symbol">=</a> <a id="5060" href="/agda_html/Leios.Simplified.html#7284" class="InductiveConstructor">Roles</a> <a id="5066" class="Symbol">(</a><a id="5067" href="/agda_html/Leios.Simplified.html#1931" class="InductiveConstructor">IB-Role</a> <a id="5075" href="/agda_html/Leios.Simplified.Deterministic.html#5040" class="Bound">u</a> <a id="5077" href="/agda_html/Leios.Simplified.Deterministic.html#5051" class="Bound">x₁</a> <a id="5080" href="/agda_html/Leios.Simplified.Deterministic.html#5054" class="Bound">x₂</a><a id="5082" class="Symbol">)</a></div>
<div class="line"><a id="5084" href="/agda_html/Leios.Simplified.Deterministic.html#4930" class="Function">IB-Role⇒ND</a> <a id="5095" href="/agda_html/Leios.Simplified.Deterministic.html#5095" class="Bound">u</a> <a id="5097" class="Symbol">(</a><a id="5098" href="/agda_html/Leios.Simplified.Deterministic.html#4738" class="InductiveConstructor">No-IB-Role</a> <a id="5109" href="/agda_html/Leios.Simplified.Deterministic.html#5109" class="Bound">x₁</a><a id="5111" class="Symbol">)</a> <a id="5113" class="Symbol">=</a> <a id="5115" href="/agda_html/Leios.Simplified.html#7284" class="InductiveConstructor">Roles</a> <a id="5121" class="Symbol">(</a><a id="5122" href="/agda_html/Leios.Simplified.html#4140" class="InductiveConstructor">No-IB-Role</a> <a id="5133" href="/agda_html/Leios.Simplified.Deterministic.html#5095" class="Bound">u</a> <a id="5135" href="/agda_html/Leios.Simplified.Deterministic.html#5109" class="Bound">x₁</a><a id="5137" class="Symbol">)</a></div>
<div class="line"></div>
<div class="line"><a id="IB-Role-Upkeep"></a><a id="5140" href="/agda_html/Leios.Simplified.Deterministic.html#5140" class="Function">IB-Role-Upkeep</a> <a id="5155" class="Symbol">:</a> <a id="5157" class="Symbol">∀</a> <a id="5159" class="Symbol">{</a><a id="5160" href="/agda_html/Leios.Simplified.Deterministic.html#5160" class="Bound">u</a><a id="5161" class="Symbol">}</a> <a id="5163" class="Symbol">→</a> <a id="5165" href="/agda_html/Leios.Simplified.Deterministic.html#5160" class="Bound">u</a> <a id="5167" href="/agda_html/Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="5169" class="InductiveConstructor">IB-Role</a> <a id="5177" class="Symbol">→</a> <a id="5179" href="/agda_html/Leios.Protocol.html#2023" class="Function">LeiosState.needsUpkeep</a> <a id="5202" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="5204" href="/agda_html/Leios.Simplified.Deterministic.html#5160" class="Bound">u</a> <a id="5206" class="Symbol">→</a> <a id="5208" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="5210" href="/agda_html/Leios.Simplified.Deterministic.html#4224" class="Datatype Operator">-⟦IB-Role⟧⇀</a> <a id="5222" href="/agda_html/Leios.Simplified.Deterministic.html#916" class="Generalizable">s&#39;</a></div>
<div class="line">                  <a id="5243" class="Symbol">→</a> <a id="5245" href="/agda_html/Leios.Protocol.html#2023" class="Function">LeiosState.needsUpkeep</a> <a id="5268" href="/agda_html/Leios.Simplified.Deterministic.html#916" class="Generalizable">s&#39;</a> <a id="5271" href="/agda_html/Leios.Simplified.Deterministic.html#5160" class="Bound">u</a></div>
<div class="line"><a id="5273" href="/agda_html/Leios.Simplified.Deterministic.html#5140" class="Function">IB-Role-Upkeep</a> <a id="5288" href="/agda_html/Leios.Simplified.Deterministic.html#5288" class="Bound">u≢IB-Role</a> <a id="5298" href="/agda_html/Leios.Simplified.Deterministic.html#5298" class="Bound">h</a> <a id="5300" class="Symbol">(</a><a id="5301" href="/agda_html/Leios.Simplified.Deterministic.html#4280" class="InductiveConstructor">IB-Role</a> <a id="5309" class="Symbol">_</a> <a id="5311" class="Symbol">_)</a> <a id="5314" href="/agda_html/Leios.Simplified.Deterministic.html#5314" class="Bound">u∈su</a> <a id="5319" class="Symbol">=</a> <a id="5321" href="/agda_html/Function.Base.html#4042" class="Function Operator">case</a> <a id="5326" href="/agda_html/Function.Bundles.html#4834" class="Field">Equivalence.from</a> <a id="5343" href="/agda_html/Axiom.Set.html#9013" class="Function">∈-∪</a> <a id="5347" href="/agda_html/Leios.Simplified.Deterministic.html#5314" class="Bound">u∈su</a> <a id="5352" href="/agda_html/Function.Base.html#4042" class="Function Operator">of</a> <a id="5355" class="Symbol">λ</a> <a id="5357" class="Keyword">where</a></div>
<div class="line">  <a id="5365" class="Symbol">(</a><a id="5366" href="/agda_html/Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="5371" href="/agda_html/Leios.Simplified.Deterministic.html#5371" class="Bound">x</a><a id="5372" class="Symbol">)</a> <a id="5374" class="Symbol">→</a> <a id="5376" href="/agda_html/Leios.Simplified.Deterministic.html#5298" class="Bound">h</a> <a id="5378" href="/agda_html/Leios.Simplified.Deterministic.html#5371" class="Bound">x</a></div>
<div class="line">  <a id="5382" class="Symbol">(</a><a id="5383" href="/agda_html/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="5388" href="/agda_html/Leios.Simplified.Deterministic.html#5388" class="Bound">y</a><a id="5389" class="Symbol">)</a> <a id="5391" class="Symbol">→</a> <a id="5393" href="/agda_html/Leios.Simplified.Deterministic.html#5288" class="Bound">u≢IB-Role</a> <a id="5403" class="Symbol">(</a><a id="5404" href="/agda_html/Function.Bundles.html#4834" class="Field">Equivalence.from</a> <a id="5421" href="/agda_html/Axiom.Set.html#6243" class="Function">∈-singleton</a> <a id="5433" href="/agda_html/Leios.Simplified.Deterministic.html#5388" class="Bound">y</a><a id="5434" class="Symbol">)</a></div>
<div class="line"><a id="5436" href="/agda_html/Leios.Simplified.Deterministic.html#5140" class="Function">IB-Role-Upkeep</a> <a id="5451" href="/agda_html/Leios.Simplified.Deterministic.html#5451" class="Bound">u≢IB-Role</a> <a id="5461" href="/agda_html/Leios.Simplified.Deterministic.html#5461" class="Bound">h</a> <a id="5463" class="Symbol">(</a><a id="5464" href="/agda_html/Leios.Simplified.Deterministic.html#4738" class="InductiveConstructor">No-IB-Role</a> <a id="5475" class="Symbol">_)</a> <a id="5478" href="/agda_html/Leios.Simplified.Deterministic.html#5478" class="Bound">u∈su</a> <a id="5483" class="Symbol">=</a> <a id="5485" href="/agda_html/Function.Base.html#4042" class="Function Operator">case</a> <a id="5490" href="/agda_html/Function.Bundles.html#4834" class="Field">Equivalence.from</a> <a id="5507" href="/agda_html/Axiom.Set.html#9013" class="Function">∈-∪</a> <a id="5511" href="/agda_html/Leios.Simplified.Deterministic.html#5478" class="Bound">u∈su</a> <a id="5516" href="/agda_html/Function.Base.html#4042" class="Function Operator">of</a> <a id="5519" class="Symbol">λ</a> <a id="5521" class="Keyword">where</a></div>
<div class="line">  <a id="5529" class="Symbol">(</a><a id="5530" href="/agda_html/Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="5535" href="/agda_html/Leios.Simplified.Deterministic.html#5535" class="Bound">x</a><a id="5536" class="Symbol">)</a> <a id="5538" class="Symbol">→</a> <a id="5540" href="/agda_html/Leios.Simplified.Deterministic.html#5461" class="Bound">h</a> <a id="5542" href="/agda_html/Leios.Simplified.Deterministic.html#5535" class="Bound">x</a></div>
<div class="line">  <a id="5546" class="Symbol">(</a><a id="5547" href="/agda_html/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="5552" href="/agda_html/Leios.Simplified.Deterministic.html#5552" class="Bound">y</a><a id="5553" class="Symbol">)</a> <a id="5555" class="Symbol">→</a> <a id="5557" href="/agda_html/Leios.Simplified.Deterministic.html#5451" class="Bound">u≢IB-Role</a> <a id="5567" class="Symbol">(</a><a id="5568" href="/agda_html/Function.Bundles.html#4834" class="Field">Equivalence.from</a> <a id="5585" href="/agda_html/Axiom.Set.html#6243" class="Function">∈-singleton</a> <a id="5597" href="/agda_html/Leios.Simplified.Deterministic.html#5552" class="Bound">y</a><a id="5598" class="Symbol">)</a></div>
<div class="line"></div>
<div class="line"><a id="5601" class="Keyword">opaque</a></div>
<div class="line">  <a id="IB-Role-total"></a><a id="5610" href="/agda_html/Leios.Simplified.Deterministic.html#5610" class="Function">IB-Role-total</a> <a id="5624" class="Symbol">:</a> <a id="5626" href="/agda_html/Data.Product.Base.html#1371" class="Function">∃[</a> <a id="5629" href="/agda_html/Leios.Simplified.Deterministic.html#5629" class="Bound">s&#39;</a> <a id="5632" href="/agda_html/Data.Product.Base.html#1371" class="Function">]</a> <a id="5634" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="5636" href="/agda_html/Leios.Simplified.Deterministic.html#4224" class="Datatype Operator">-⟦IB-Role⟧⇀</a> <a id="5648" href="/agda_html/Leios.Simplified.Deterministic.html#5629" class="Bound">s&#39;</a></div>
<div class="line">  <a id="5653" href="/agda_html/Leios.Simplified.Deterministic.html#5610" class="Function">IB-Role-total</a> <a id="5667" class="Symbol">{</a><a id="5668" class="Argument">s</a> <a id="5670" class="Symbol">=</a> <a id="5672" href="/agda_html/Leios.Simplified.Deterministic.html#5672" class="Bound">s</a><a id="5673" class="Symbol">}</a> <a id="5675" class="Symbol">=</a> <a id="5677" class="Keyword">let</a> <a id="5681" class="Keyword">open</a> <a id="5686" href="/agda_html/Leios.Protocol.html#959" class="Module">LeiosState</a> <a id="5697" href="/agda_html/Leios.Simplified.Deterministic.html#5672" class="Bound">s</a> <a id="5699" class="Keyword">in</a> <a id="5702" href="/agda_html/Function.Base.html#4042" class="Function Operator">case</a> <a id="5707" href="/agda_html/Leios.VRF.html#961" class="Function">Dec-canProduceIB</a> <a id="5724" href="/agda_html/Function.Base.html#4042" class="Function Operator">of</a> <a id="5727" class="Symbol">λ</a> <a id="5729" class="Keyword">where</a></div>
<div class="line">    <a id="5739" class="Symbol">(</a><a id="5740" href="/agda_html/Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="5745" class="Symbol">(</a><a id="5746" href="/agda_html/Leios.Simplified.Deterministic.html#5746" class="Bound">π</a> <a id="5748" href="/agda_html/Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5750" href="/agda_html/Leios.Simplified.Deterministic.html#5750" class="Bound">pf</a><a id="5752" class="Symbol">))</a> <a id="5755" class="Symbol">→</a> <a id="5757" href="/agda_html/Data.Product.Base.html#1932" class="Function Operator">-,</a> <a id="5760" href="/agda_html/Leios.Simplified.Deterministic.html#4280" class="InductiveConstructor">IB-Role</a>    <a id="5771" href="/agda_html/Leios.Simplified.Deterministic.html#5750" class="Bound">pf</a> <a id="5774" class="Symbol">(</a><a id="5775" href="/agda_html/Data.Product.Base.html#650" class="Field">proj₂</a> <a id="5781" href="/agda_html/Leios.FFD.html#731" class="Function">FFD.Send-total</a><a id="5795" class="Symbol">)</a></div>
<div class="line">    <a id="5801" class="Symbol">(</a><a id="5802" href="/agda_html/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="5807" href="/agda_html/Leios.Simplified.Deterministic.html#5807" class="Bound">pf</a><a id="5809" class="Symbol">)</a>       <a id="5817" class="Symbol">→</a> <a id="5819" href="/agda_html/Data.Product.Base.html#1932" class="Function Operator">-,</a> <a id="5822" href="/agda_html/Leios.Simplified.Deterministic.html#4738" class="InductiveConstructor">No-IB-Role</a> <a id="5833" href="/agda_html/Leios.Simplified.Deterministic.html#5807" class="Bound">pf</a></div>
<div class="line"></div>
<div class="line">  <a id="IB-Role-total&#39;"></a><a id="5839" href="/agda_html/Leios.Simplified.Deterministic.html#5839" class="Function">IB-Role-total&#39;</a> <a id="5854" class="Symbol">:</a> <a id="5856" href="/agda_html/Data.Product.Base.html#1371" class="Function">∃[</a> <a id="5859" href="/agda_html/Leios.Simplified.Deterministic.html#5859" class="Bound">ffds</a> <a id="5864" href="/agda_html/Data.Product.Base.html#1371" class="Function">]</a> <a id="5866" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="5868" href="/agda_html/Leios.Simplified.Deterministic.html#4224" class="Datatype Operator">-⟦IB-Role⟧⇀</a> <a id="5880" href="/agda_html/Leios.Protocol.html#2208" class="Function">addUpkeep</a> <a id="5890" class="Keyword">record</a> <a id="5897" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="5899" class="Symbol">{</a> <a id="5901" class="Field">FFDState</a> <a id="5910" class="Symbol">=</a> <a id="5912" href="/agda_html/Leios.Simplified.Deterministic.html#5859" class="Bound">ffds</a> <a id="5917" class="Symbol">}</a> <a id="5919" class="InductiveConstructor">IB-Role</a></div>
<div class="line">  <a id="5929" href="/agda_html/Leios.Simplified.Deterministic.html#5839" class="Function">IB-Role-total&#39;</a> <a id="5944" class="Symbol">{</a><a id="5945" class="Argument">s</a> <a id="5947" class="Symbol">=</a> <a id="5949" href="/agda_html/Leios.Simplified.Deterministic.html#5949" class="Bound">s</a><a id="5950" class="Symbol">}</a> <a id="5952" class="Symbol">=</a> <a id="5954" class="Keyword">let</a> <a id="5958" class="Keyword">open</a> <a id="5963" href="/agda_html/Leios.Protocol.html#959" class="Module">LeiosState</a> <a id="5974" href="/agda_html/Leios.Simplified.Deterministic.html#5949" class="Bound">s</a> <a id="5976" class="Keyword">in</a> <a id="5979" href="/agda_html/Function.Base.html#4042" class="Function Operator">case</a> <a id="5984" href="/agda_html/Leios.VRF.html#961" class="Function">Dec-canProduceIB</a> <a id="6001" href="/agda_html/Function.Base.html#4042" class="Function Operator">of</a> <a id="6004" class="Symbol">λ</a> <a id="6006" class="Keyword">where</a></div>
<div class="line">    <a id="6016" class="Symbol">(</a><a id="6017" href="/agda_html/Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="6022" class="Symbol">(</a><a id="6023" href="/agda_html/Leios.Simplified.Deterministic.html#6023" class="Bound">π</a> <a id="6025" href="/agda_html/Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6027" href="/agda_html/Leios.Simplified.Deterministic.html#6027" class="Bound">pf</a><a id="6029" class="Symbol">))</a> <a id="6032" class="Symbol">→</a> <a id="6034" href="/agda_html/Data.Product.Base.html#1932" class="Function Operator">-,</a> <a id="6037" href="/agda_html/Leios.Simplified.Deterministic.html#4280" class="InductiveConstructor">IB-Role</a>    <a id="6048" href="/agda_html/Leios.Simplified.Deterministic.html#6027" class="Bound">pf</a> <a id="6051" class="Symbol">(</a><a id="6052" href="/agda_html/Data.Product.Base.html#650" class="Field">proj₂</a> <a id="6058" href="/agda_html/Leios.FFD.html#731" class="Function">FFD.Send-total</a><a id="6072" class="Symbol">)</a></div>
<div class="line">    <a id="6078" class="Symbol">(</a><a id="6079" href="/agda_html/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="6084" href="/agda_html/Leios.Simplified.Deterministic.html#6084" class="Bound">pf</a><a id="6086" class="Symbol">)</a>       <a id="6094" class="Symbol">→</a> <a id="6096" href="/agda_html/Data.Product.Base.html#1932" class="Function Operator">-,</a> <a id="6099" href="/agda_html/Leios.Simplified.Deterministic.html#4738" class="InductiveConstructor">No-IB-Role</a> <a id="6110" href="/agda_html/Leios.Simplified.Deterministic.html#6084" class="Bound">pf</a></div>
<div class="line"></div>
<div class="line"><a id="6114" class="Keyword">data</a> <a id="_-⟦EB-Role⟧⇀_"></a><a id="6119" href="/agda_html/Leios.Simplified.Deterministic.html#6119" class="Datatype Operator">_-⟦EB-Role⟧⇀_</a> <a id="6133" class="Symbol">:</a> <a id="6135" href="/agda_html/Leios.Protocol.html#959" class="Record">LeiosState</a> <a id="6146" class="Symbol">→</a> <a id="6148" href="/agda_html/Leios.Protocol.html#959" class="Record">LeiosState</a> <a id="6159" class="Symbol">→</a> <a id="6161" href="/agda_html/Agda.Primitive.html#388" class="Primitive">Type</a> <a id="6166" class="Keyword">where</a></div>
<div class="line"></div>
<div class="line">  <a id="_-⟦EB-Role⟧⇀_.EB-Role"></a><a id="6175" href="/agda_html/Leios.Simplified.Deterministic.html#6175" class="InductiveConstructor">EB-Role</a> <a id="6183" class="Symbol">:</a> <a id="6185" class="Keyword">let</a> <a id="6189" class="Keyword">open</a> <a id="6194" href="/agda_html/Leios.Protocol.html#959" class="Module">LeiosState</a> <a id="6205" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="6207" class="Keyword">renaming</a> <a id="6216" class="Symbol">(</a><a id="6217" href="/agda_html/Leios.Protocol.html#1050" class="Field">FFDState</a> <a id="6226" class="Symbol">to</a> <a id="6229" class="Field">ffds</a><a id="6233" class="Symbol">)</a></div>
<div class="line">                <a id="6251" href="/agda_html/Leios.Simplified.Deterministic.html#6251" class="Bound">LI</a> <a id="6254" class="Symbol">=</a> <a id="6256" href="/agda_html/abstract-set-theory.Prelude.html#1824" class="Function">map</a> <a id="6260" href="/agda_html/Leios.Blocks.html#2304" class="Function">getIBRef</a> <a id="6269" href="/agda_html/Function.Base.html#1974" class="Function Operator">$</a> <a id="6271" href="/agda_html/Leios.Prelude.html#1171" class="Function">filter</a> <a id="6278" class="Symbol">(</a><a id="6279" href="/agda_html/Leios.Blocks.html#527" class="Function Operator">_∈ᴮ</a> <a id="6283" href="/agda_html/Leios.Prelude.html#1001" class="Function">slice</a> <a id="6289" href="/agda_html/Leios.Abstract.html#628" class="Function">L</a> <a id="6291" href="/agda_html/Leios.Protocol.html#1260" class="Function">slot</a> <a id="6296" class="Symbol">(</a><a id="6297" href="/agda_html/Leios.Simplified.Deterministic.html#572" class="Bound">Λ</a> <a id="6299" href="/agda_html/Class.HasAdd.Core.html#136" class="Field Operator">+</a> <a id="6301" class="Number">1</a><a id="6302" class="Symbol">))</a> <a id="6305" href="/agda_html/Leios.Protocol.html#1142" class="Function">IBs</a></div>
<div class="line">                <a id="6325" href="/agda_html/Leios.Simplified.Deterministic.html#6325" class="Bound">LE</a> <a id="6328" class="Symbol">=</a> <a id="6330" href="/agda_html/abstract-set-theory.Prelude.html#1824" class="Function">map</a> <a id="6334" href="/agda_html/Leios.Blocks.html#3791" class="Function">getEBRef</a> <a id="6343" href="/agda_html/Function.Base.html#1974" class="Function Operator">$</a> <a id="6345" href="/agda_html/Leios.Prelude.html#1171" class="Function">filter</a> <a id="6352" class="Symbol">(</a><a id="6353" href="/agda_html/Leios.Simplified.html#722" class="Function">isVote1Certified</a> <a id="6370" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a><a id="6371" class="Symbol">)</a> <a id="6373" href="/agda_html/Function.Base.html#1974" class="Function Operator">$</a></div>
<div class="line">                           <a id="6402" href="/agda_html/Leios.Prelude.html#1171" class="Function">filter</a> <a id="6409" class="Symbol">(</a><a id="6410" href="/agda_html/Leios.Blocks.html#527" class="Function Operator">_∈ᴮ</a> <a id="6414" href="/agda_html/Leios.Prelude.html#1001" class="Function">slice</a> <a id="6420" href="/agda_html/Leios.Abstract.html#628" class="Function">L</a> <a id="6422" href="/agda_html/Leios.Protocol.html#1260" class="Function">slot</a> <a id="6427" class="Symbol">(</a><a id="6428" href="/agda_html/Leios.Simplified.Deterministic.html#574" class="Bound">μ</a> <a id="6430" href="/agda_html/Class.HasAdd.Core.html#136" class="Field Operator">+</a> <a id="6432" class="Number">2</a><a id="6433" class="Symbol">))</a> <a id="6436" href="/agda_html/Leios.Protocol.html#1180" class="Function">EBs</a></div>
<div class="line">                <a id="6456" href="/agda_html/Leios.Simplified.Deterministic.html#6456" class="Bound">h</a> <a id="6458" class="Symbol">=</a> <a id="6460" href="/agda_html/Leios.Blocks.html#3335" class="Function">mkEB</a> <a id="6465" href="/agda_html/Leios.Protocol.html#1260" class="Function">slot</a> <a id="6470" href="/agda_html/Leios.SpecStructure.html#601" class="Field">id</a> <a id="6473" href="/agda_html/Leios.Simplified.Deterministic.html#1078" class="Generalizable">π</a> <a id="6475" href="/agda_html/Leios.SpecStructure.html#736" class="Field">sk-EB</a> <a id="6481" href="/agda_html/Leios.Simplified.Deterministic.html#6251" class="Bound">LI</a> <a id="6484" href="/agda_html/Leios.Simplified.Deterministic.html#6325" class="Bound">LE</a></div>
<div class="line">          <a id="6497" class="Keyword">in</a></div>
<div class="line">          <a id="6510" href="/agda_html/Prelude.InferenceRules.html#56074" class="Function Operator">∙</a> <a id="6512" href="/agda_html/Leios.VRF.html#1418" class="Function">canProduceEB</a> <a id="6525" href="/agda_html/Leios.Protocol.html#1260" class="Function">slot</a> <a id="6530" href="/agda_html/Leios.SpecStructure.html#736" class="Field">sk-EB</a> <a id="6536" class="Symbol">(</a><a id="6537" href="/agda_html/Leios.Protocol.html#2995" class="Function">stake</a> <a id="6543" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a><a id="6544" class="Symbol">)</a> <a id="6546" href="/agda_html/Leios.Simplified.Deterministic.html#1078" class="Generalizable">π</a></div>
<div class="line">          <a id="6558" href="/agda_html/Prelude.InferenceRules.html#56005" class="Function Operator">∙</a> <a id="6560" href="/agda_html/Leios.Simplified.Deterministic.html#6229" class="Function">ffds</a> <a id="6565" href="/agda_html/Leios.FFD.html#562" class="Function Operator">FFD.-⟦</a> <a id="6572" href="/agda_html/Leios.FFD.html#311" class="InductiveConstructor">Send</a> <a id="6577" class="Symbol">(</a><a id="6578" href="/agda_html/Leios.Blocks.html#4351" class="InductiveConstructor">ebHeader</a> <a id="6587" href="/agda_html/Leios.Simplified.Deterministic.html#6456" class="Bound">h</a><a id="6588" class="Symbol">)</a> <a id="6590" href="/agda_html/Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="6598" href="/agda_html/Leios.FFD.html#562" class="Function Operator">/</a> <a id="6600" href="/agda_html/Leios.FFD.html#397" class="InductiveConstructor">SendRes</a> <a id="6608" href="/agda_html/Leios.FFD.html#562" class="Function Operator">⟧⇀</a> <a id="6611" href="/agda_html/Leios.Simplified.Deterministic.html#1042" class="Generalizable">ffds&#39;</a></div>
<div class="line">          <a id="6627" href="/agda_html/Prelude.InferenceRules.html#11695" class="Function Operator">────────────────────────────────────────────────────────────────────</a></div>
<div class="line">          <a id="6706" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="6708" href="/agda_html/Leios.Simplified.Deterministic.html#6119" class="Datatype Operator">-⟦EB-Role⟧⇀</a> <a id="6720" href="/agda_html/Leios.Protocol.html#2208" class="Function">addUpkeep</a> <a id="6730" class="Keyword">record</a> <a id="6737" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="6739" class="Symbol">{</a> <a id="6741" href="/agda_html/Leios.Protocol.html#1050" class="Field">FFDState</a> <a id="6750" class="Symbol">=</a> <a id="6752" href="/agda_html/Leios.Simplified.Deterministic.html#1042" class="Generalizable">ffds&#39;</a> <a id="6758" class="Symbol">}</a> <a id="6760" href="/agda_html/Leios.Simplified.html#343" class="InductiveConstructor">EB-Role</a></div>
<div class="line"></div>
<div class="line">  <a id="_-⟦EB-Role⟧⇀_.No-EB-Role"></a><a id="6771" href="/agda_html/Leios.Simplified.Deterministic.html#6771" class="InductiveConstructor">No-EB-Role</a> <a id="6782" class="Symbol">:</a> <a id="6784" class="Keyword">let</a> <a id="6788" class="Keyword">open</a> <a id="6793" href="/agda_html/Leios.Protocol.html#959" class="Module">LeiosState</a> <a id="6804" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="6806" class="Keyword">in</a></div>
<div class="line">          <a id="6819" href="/agda_html/Prelude.InferenceRules.html#56074" class="Function Operator">∙</a> <a id="6821" class="Symbol">(∀</a> <a id="6824" href="/agda_html/Leios.Simplified.Deterministic.html#6824" class="Bound">π</a> <a id="6826" class="Symbol">→</a> <a id="6828" href="/agda_html/Relation.Nullary.Negation.Core.html#658" class="Function Operator">¬</a> <a id="6830" href="/agda_html/Leios.VRF.html#1418" class="Function">canProduceEB</a> <a id="6843" href="/agda_html/Leios.Protocol.html#1260" class="Function">slot</a> <a id="6848" href="/agda_html/Leios.SpecStructure.html#736" class="Field">sk-EB</a> <a id="6854" class="Symbol">(</a><a id="6855" href="/agda_html/Leios.Protocol.html#2995" class="Function">stake</a> <a id="6861" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a><a id="6862" class="Symbol">)</a> <a id="6864" href="/agda_html/Leios.Simplified.Deterministic.html#6824" class="Bound">π</a><a id="6865" class="Symbol">)</a></div>
<div class="line">          <a id="6877" href="/agda_html/Prelude.InferenceRules.html#13361" class="Function Operator">────────────────────────────────────────</a></div>
<div class="line">          <a id="6928" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="6930" href="/agda_html/Leios.Simplified.Deterministic.html#6119" class="Datatype Operator">-⟦EB-Role⟧⇀</a> <a id="6942" href="/agda_html/Leios.Protocol.html#2208" class="Function">addUpkeep</a> <a id="6952" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="6954" href="/agda_html/Leios.Simplified.html#343" class="InductiveConstructor">EB-Role</a></div>
<div class="line"></div>
<div class="line"><a id="EB-Role⇒ND"></a><a id="6963" href="/agda_html/Leios.Simplified.Deterministic.html#6963" class="Function">EB-Role⇒ND</a> <a id="6974" class="Symbol">:</a> <a id="6976" href="/agda_html/Leios.Protocol.html#2023" class="Function">LeiosState.needsUpkeep</a> <a id="6999" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="7001" class="InductiveConstructor">EB-Role</a> <a id="7009" class="Symbol">→</a> <a id="7011" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="7013" href="/agda_html/Leios.Simplified.Deterministic.html#6119" class="Datatype Operator">-⟦EB-Role⟧⇀</a> <a id="7025" href="/agda_html/Leios.Simplified.Deterministic.html#916" class="Generalizable">s&#39;</a> <a id="7028" class="Symbol">→</a> <a id="7030" href="/agda_html/Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="7035" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="7037" href="/agda_html/Leios.Simplified.html#5007" class="Datatype Operator">ND.-⟦</a> <a id="7043" href="/agda_html/Leios.Protocol.html#814" class="InductiveConstructor">SLOT</a> <a id="7048" href="/agda_html/Leios.Simplified.html#5007" class="Datatype Operator">/</a> <a id="7050" href="/agda_html/Leios.Protocol.html#928" class="InductiveConstructor">EMPTY</a> <a id="7056" href="/agda_html/Leios.Simplified.html#5007" class="Datatype Operator">⟧⇀</a> <a id="7059" href="/agda_html/Leios.Simplified.Deterministic.html#916" class="Generalizable">s&#39;</a></div>
<div class="line"><a id="7062" href="/agda_html/Leios.Simplified.Deterministic.html#6963" class="Function">EB-Role⇒ND</a> <a id="7073" href="/agda_html/Leios.Simplified.Deterministic.html#7073" class="Bound">u</a> <a id="7075" class="Symbol">(</a><a id="7076" href="/agda_html/Leios.Simplified.Deterministic.html#6175" class="InductiveConstructor">EB-Role</a> <a id="7084" href="/agda_html/Leios.Simplified.Deterministic.html#7084" class="Bound">x₁</a> <a id="7087" href="/agda_html/Leios.Simplified.Deterministic.html#7087" class="Bound">x₂</a><a id="7089" class="Symbol">)</a> <a id="7091" class="Symbol">=</a> <a id="7093" href="/agda_html/Leios.Simplified.html#7284" class="InductiveConstructor">Roles</a> <a id="7099" class="Symbol">(</a><a id="7100" href="/agda_html/Leios.Simplified.html#2416" class="InductiveConstructor">EB-Role</a> <a id="7108" href="/agda_html/Leios.Simplified.Deterministic.html#7073" class="Bound">u</a> <a id="7110" href="/agda_html/Leios.Simplified.Deterministic.html#7084" class="Bound">x₁</a> <a id="7113" href="/agda_html/Leios.Simplified.Deterministic.html#7087" class="Bound">x₂</a><a id="7115" class="Symbol">)</a></div>
<div class="line"><a id="7117" href="/agda_html/Leios.Simplified.Deterministic.html#6963" class="Function">EB-Role⇒ND</a> <a id="7128" href="/agda_html/Leios.Simplified.Deterministic.html#7128" class="Bound">u</a> <a id="7130" class="Symbol">(</a><a id="7131" href="/agda_html/Leios.Simplified.Deterministic.html#6771" class="InductiveConstructor">No-EB-Role</a> <a id="7142" href="/agda_html/Leios.Simplified.Deterministic.html#7142" class="Bound">x₁</a><a id="7144" class="Symbol">)</a> <a id="7146" class="Symbol">=</a> <a id="7148" href="/agda_html/Leios.Simplified.html#7284" class="InductiveConstructor">Roles</a> <a id="7154" class="Symbol">(</a><a id="7155" href="/agda_html/Leios.Simplified.html#4361" class="InductiveConstructor">No-EB-Role</a> <a id="7166" href="/agda_html/Leios.Simplified.Deterministic.html#7128" class="Bound">u</a> <a id="7168" href="/agda_html/Leios.Simplified.Deterministic.html#7142" class="Bound">x₁</a><a id="7170" class="Symbol">)</a></div>
<div class="line"></div>
<div class="line"><a id="EB-Role-Upkeep"></a><a id="7173" href="/agda_html/Leios.Simplified.Deterministic.html#7173" class="Function">EB-Role-Upkeep</a> <a id="7188" class="Symbol">:</a> <a id="7190" class="Symbol">∀</a> <a id="7192" class="Symbol">{</a><a id="7193" href="/agda_html/Leios.Simplified.Deterministic.html#7193" class="Bound">u</a><a id="7194" class="Symbol">}</a> <a id="7196" class="Symbol">→</a> <a id="7198" href="/agda_html/Leios.Simplified.Deterministic.html#7193" class="Bound">u</a> <a id="7200" href="/agda_html/Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="7202" class="InductiveConstructor">EB-Role</a> <a id="7210" class="Symbol">→</a> <a id="7212" href="/agda_html/Leios.Protocol.html#2023" class="Function">LeiosState.needsUpkeep</a> <a id="7235" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="7237" href="/agda_html/Leios.Simplified.Deterministic.html#7193" class="Bound">u</a> <a id="7239" class="Symbol">→</a> <a id="7241" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="7243" href="/agda_html/Leios.Simplified.Deterministic.html#6119" class="Datatype Operator">-⟦EB-Role⟧⇀</a> <a id="7255" href="/agda_html/Leios.Simplified.Deterministic.html#916" class="Generalizable">s&#39;</a></div>
<div class="line">                  <a id="7276" class="Symbol">→</a> <a id="7278" href="/agda_html/Leios.Protocol.html#2023" class="Function">LeiosState.needsUpkeep</a> <a id="7301" href="/agda_html/Leios.Simplified.Deterministic.html#916" class="Generalizable">s&#39;</a> <a id="7304" href="/agda_html/Leios.Simplified.Deterministic.html#7193" class="Bound">u</a></div>
<div class="line"><a id="7306" href="/agda_html/Leios.Simplified.Deterministic.html#7173" class="Function">EB-Role-Upkeep</a> <a id="7321" href="/agda_html/Leios.Simplified.Deterministic.html#7321" class="Bound">u≢EB-Role</a> <a id="7331" href="/agda_html/Leios.Simplified.Deterministic.html#7331" class="Bound">h</a> <a id="7333" class="Symbol">(</a><a id="7334" href="/agda_html/Leios.Simplified.Deterministic.html#6175" class="InductiveConstructor">EB-Role</a> <a id="7342" class="Symbol">_</a> <a id="7344" class="Symbol">_)</a> <a id="7347" href="/agda_html/Leios.Simplified.Deterministic.html#7347" class="Bound">u∈su</a> <a id="7352" class="Symbol">=</a> <a id="7354" href="/agda_html/Function.Base.html#4042" class="Function Operator">case</a> <a id="7359" href="/agda_html/Function.Bundles.html#4834" class="Field">Equivalence.from</a> <a id="7376" href="/agda_html/Axiom.Set.html#9013" class="Function">∈-∪</a> <a id="7380" href="/agda_html/Leios.Simplified.Deterministic.html#7347" class="Bound">u∈su</a> <a id="7385" href="/agda_html/Function.Base.html#4042" class="Function Operator">of</a> <a id="7388" class="Symbol">λ</a> <a id="7390" class="Keyword">where</a></div>
<div class="line">  <a id="7398" class="Symbol">(</a><a id="7399" href="/agda_html/Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="7404" href="/agda_html/Leios.Simplified.Deterministic.html#7404" class="Bound">x</a><a id="7405" class="Symbol">)</a> <a id="7407" class="Symbol">→</a> <a id="7409" href="/agda_html/Leios.Simplified.Deterministic.html#7331" class="Bound">h</a> <a id="7411" href="/agda_html/Leios.Simplified.Deterministic.html#7404" class="Bound">x</a></div>
<div class="line">  <a id="7415" class="Symbol">(</a><a id="7416" href="/agda_html/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="7421" href="/agda_html/Leios.Simplified.Deterministic.html#7421" class="Bound">y</a><a id="7422" class="Symbol">)</a> <a id="7424" class="Symbol">→</a> <a id="7426" href="/agda_html/Leios.Simplified.Deterministic.html#7321" class="Bound">u≢EB-Role</a> <a id="7436" class="Symbol">(</a><a id="7437" href="/agda_html/Function.Bundles.html#4834" class="Field">Equivalence.from</a> <a id="7454" href="/agda_html/Axiom.Set.html#6243" class="Function">∈-singleton</a> <a id="7466" href="/agda_html/Leios.Simplified.Deterministic.html#7421" class="Bound">y</a><a id="7467" class="Symbol">)</a></div>
<div class="line"><a id="7469" href="/agda_html/Leios.Simplified.Deterministic.html#7173" class="Function">EB-Role-Upkeep</a> <a id="7484" href="/agda_html/Leios.Simplified.Deterministic.html#7484" class="Bound">u≢EB-Role</a> <a id="7494" href="/agda_html/Leios.Simplified.Deterministic.html#7494" class="Bound">h</a> <a id="7496" class="Symbol">(</a><a id="7497" href="/agda_html/Leios.Simplified.Deterministic.html#6771" class="InductiveConstructor">No-EB-Role</a> <a id="7508" class="Symbol">_)</a> <a id="7511" href="/agda_html/Leios.Simplified.Deterministic.html#7511" class="Bound">u∈su</a> <a id="7516" class="Symbol">=</a> <a id="7518" href="/agda_html/Function.Base.html#4042" class="Function Operator">case</a> <a id="7523" href="/agda_html/Function.Bundles.html#4834" class="Field">Equivalence.from</a> <a id="7540" href="/agda_html/Axiom.Set.html#9013" class="Function">∈-∪</a> <a id="7544" href="/agda_html/Leios.Simplified.Deterministic.html#7511" class="Bound">u∈su</a> <a id="7549" href="/agda_html/Function.Base.html#4042" class="Function Operator">of</a> <a id="7552" class="Symbol">λ</a> <a id="7554" class="Keyword">where</a></div>
<div class="line">  <a id="7562" class="Symbol">(</a><a id="7563" href="/agda_html/Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="7568" href="/agda_html/Leios.Simplified.Deterministic.html#7568" class="Bound">x</a><a id="7569" class="Symbol">)</a> <a id="7571" class="Symbol">→</a> <a id="7573" href="/agda_html/Leios.Simplified.Deterministic.html#7494" class="Bound">h</a> <a id="7575" href="/agda_html/Leios.Simplified.Deterministic.html#7568" class="Bound">x</a></div>
<div class="line">  <a id="7579" class="Symbol">(</a><a id="7580" href="/agda_html/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="7585" href="/agda_html/Leios.Simplified.Deterministic.html#7585" class="Bound">y</a><a id="7586" class="Symbol">)</a> <a id="7588" class="Symbol">→</a> <a id="7590" href="/agda_html/Leios.Simplified.Deterministic.html#7484" class="Bound">u≢EB-Role</a> <a id="7600" class="Symbol">(</a><a id="7601" href="/agda_html/Function.Bundles.html#4834" class="Field">Equivalence.from</a> <a id="7618" href="/agda_html/Axiom.Set.html#6243" class="Function">∈-singleton</a> <a id="7630" href="/agda_html/Leios.Simplified.Deterministic.html#7585" class="Bound">y</a><a id="7631" class="Symbol">)</a></div>
<div class="line"></div>
<div class="line"><a id="7634" class="Keyword">opaque</a></div>
<div class="line">  <a id="EB-Role-total"></a><a id="7643" href="/agda_html/Leios.Simplified.Deterministic.html#7643" class="Function">EB-Role-total</a> <a id="7657" class="Symbol">:</a> <a id="7659" href="/agda_html/Data.Product.Base.html#1371" class="Function">∃[</a> <a id="7662" href="/agda_html/Leios.Simplified.Deterministic.html#7662" class="Bound">s&#39;</a> <a id="7665" href="/agda_html/Data.Product.Base.html#1371" class="Function">]</a> <a id="7667" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="7669" href="/agda_html/Leios.Simplified.Deterministic.html#6119" class="Datatype Operator">-⟦EB-Role⟧⇀</a> <a id="7681" href="/agda_html/Leios.Simplified.Deterministic.html#7662" class="Bound">s&#39;</a></div>
<div class="line">  <a id="7686" href="/agda_html/Leios.Simplified.Deterministic.html#7643" class="Function">EB-Role-total</a> <a id="7700" class="Symbol">{</a><a id="7701" class="Argument">s</a> <a id="7703" class="Symbol">=</a> <a id="7705" href="/agda_html/Leios.Simplified.Deterministic.html#7705" class="Bound">s</a><a id="7706" class="Symbol">}</a> <a id="7708" class="Symbol">=</a> <a id="7710" class="Keyword">let</a> <a id="7714" class="Keyword">open</a> <a id="7719" href="/agda_html/Leios.Protocol.html#959" class="Module">LeiosState</a> <a id="7730" href="/agda_html/Leios.Simplified.Deterministic.html#7705" class="Bound">s</a> <a id="7732" class="Keyword">in</a> <a id="7735" href="/agda_html/Function.Base.html#4042" class="Function Operator">case</a> <a id="7740" href="/agda_html/Leios.VRF.html#1565" class="Function">Dec-canProduceEB</a> <a id="7757" href="/agda_html/Function.Base.html#4042" class="Function Operator">of</a> <a id="7760" class="Symbol">λ</a> <a id="7762" class="Keyword">where</a></div>
<div class="line">    <a id="7772" class="Symbol">(</a><a id="7773" href="/agda_html/Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="7778" class="Symbol">(</a><a id="7779" href="/agda_html/Leios.Simplified.Deterministic.html#7779" class="Bound">π</a> <a id="7781" href="/agda_html/Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7783" href="/agda_html/Leios.Simplified.Deterministic.html#7783" class="Bound">pf</a><a id="7785" class="Symbol">))</a> <a id="7788" class="Symbol">→</a> <a id="7790" href="/agda_html/Data.Product.Base.html#1932" class="Function Operator">-,</a> <a id="7793" href="/agda_html/Leios.Simplified.Deterministic.html#6175" class="InductiveConstructor">EB-Role</a>    <a id="7804" href="/agda_html/Leios.Simplified.Deterministic.html#7783" class="Bound">pf</a> <a id="7807" class="Symbol">(</a><a id="7808" href="/agda_html/Data.Product.Base.html#650" class="Field">proj₂</a> <a id="7814" href="/agda_html/Leios.FFD.html#731" class="Function">FFD.Send-total</a><a id="7828" class="Symbol">)</a></div>
<div class="line">    <a id="7834" class="Symbol">(</a><a id="7835" href="/agda_html/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="7840" href="/agda_html/Leios.Simplified.Deterministic.html#7840" class="Bound">pf</a><a id="7842" class="Symbol">)</a>       <a id="7850" class="Symbol">→</a> <a id="7852" href="/agda_html/Data.Product.Base.html#1932" class="Function Operator">-,</a> <a id="7855" href="/agda_html/Leios.Simplified.Deterministic.html#6771" class="InductiveConstructor">No-EB-Role</a> <a id="7866" href="/agda_html/Leios.Simplified.Deterministic.html#7840" class="Bound">pf</a></div>
<div class="line"></div>
<div class="line">  <a id="EB-Role-total&#39;"></a><a id="7872" href="/agda_html/Leios.Simplified.Deterministic.html#7872" class="Function">EB-Role-total&#39;</a> <a id="7887" class="Symbol">:</a> <a id="7889" href="/agda_html/Data.Product.Base.html#1371" class="Function">∃[</a> <a id="7892" href="/agda_html/Leios.Simplified.Deterministic.html#7892" class="Bound">ffds</a> <a id="7897" href="/agda_html/Data.Product.Base.html#1371" class="Function">]</a> <a id="7899" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="7901" href="/agda_html/Leios.Simplified.Deterministic.html#6119" class="Datatype Operator">-⟦EB-Role⟧⇀</a> <a id="7913" href="/agda_html/Leios.Protocol.html#2208" class="Function">addUpkeep</a> <a id="7923" class="Keyword">record</a> <a id="7930" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="7932" class="Symbol">{</a> <a id="7934" class="Field">FFDState</a> <a id="7943" class="Symbol">=</a> <a id="7945" href="/agda_html/Leios.Simplified.Deterministic.html#7892" class="Bound">ffds</a> <a id="7950" class="Symbol">}</a> <a id="7952" class="InductiveConstructor">EB-Role</a></div>
<div class="line">  <a id="7962" href="/agda_html/Leios.Simplified.Deterministic.html#7872" class="Function">EB-Role-total&#39;</a> <a id="7977" class="Symbol">{</a><a id="7978" class="Argument">s</a> <a id="7980" class="Symbol">=</a> <a id="7982" href="/agda_html/Leios.Simplified.Deterministic.html#7982" class="Bound">s</a><a id="7983" class="Symbol">}</a> <a id="7985" class="Symbol">=</a> <a id="7987" class="Keyword">let</a> <a id="7991" class="Keyword">open</a> <a id="7996" href="/agda_html/Leios.Protocol.html#959" class="Module">LeiosState</a> <a id="8007" href="/agda_html/Leios.Simplified.Deterministic.html#7982" class="Bound">s</a> <a id="8009" class="Keyword">in</a> <a id="8012" href="/agda_html/Function.Base.html#4042" class="Function Operator">case</a> <a id="8017" href="/agda_html/Leios.VRF.html#1565" class="Function">Dec-canProduceEB</a> <a id="8034" href="/agda_html/Function.Base.html#4042" class="Function Operator">of</a> <a id="8037" class="Symbol">λ</a> <a id="8039" class="Keyword">where</a></div>
<div class="line">    <a id="8049" class="Symbol">(</a><a id="8050" href="/agda_html/Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="8055" class="Symbol">(</a><a id="8056" href="/agda_html/Leios.Simplified.Deterministic.html#8056" class="Bound">π</a> <a id="8058" href="/agda_html/Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8060" href="/agda_html/Leios.Simplified.Deterministic.html#8060" class="Bound">pf</a><a id="8062" class="Symbol">))</a> <a id="8065" class="Symbol">→</a> <a id="8067" href="/agda_html/Data.Product.Base.html#1932" class="Function Operator">-,</a> <a id="8070" href="/agda_html/Leios.Simplified.Deterministic.html#6175" class="InductiveConstructor">EB-Role</a>    <a id="8081" href="/agda_html/Leios.Simplified.Deterministic.html#8060" class="Bound">pf</a> <a id="8084" class="Symbol">(</a><a id="8085" href="/agda_html/Data.Product.Base.html#650" class="Field">proj₂</a> <a id="8091" href="/agda_html/Leios.FFD.html#731" class="Function">FFD.Send-total</a><a id="8105" class="Symbol">)</a></div>
<div class="line">    <a id="8111" class="Symbol">(</a><a id="8112" href="/agda_html/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="8117" href="/agda_html/Leios.Simplified.Deterministic.html#8117" class="Bound">pf</a><a id="8119" class="Symbol">)</a>       <a id="8127" class="Symbol">→</a> <a id="8129" href="/agda_html/Data.Product.Base.html#1932" class="Function Operator">-,</a> <a id="8132" href="/agda_html/Leios.Simplified.Deterministic.html#6771" class="InductiveConstructor">No-EB-Role</a> <a id="8143" href="/agda_html/Leios.Simplified.Deterministic.html#8117" class="Bound">pf</a></div>
<div class="line"></div>
<div class="line"><a id="8147" class="Keyword">data</a> <a id="_-⟦V1-Role⟧⇀_"></a><a id="8152" href="/agda_html/Leios.Simplified.Deterministic.html#8152" class="Datatype Operator">_-⟦V1-Role⟧⇀_</a> <a id="8166" class="Symbol">:</a> <a id="8168" href="/agda_html/Leios.Protocol.html#959" class="Record">LeiosState</a> <a id="8179" class="Symbol">→</a> <a id="8181" href="/agda_html/Leios.Protocol.html#959" class="Record">LeiosState</a> <a id="8192" class="Symbol">→</a> <a id="8194" href="/agda_html/Agda.Primitive.html#388" class="Primitive">Type</a> <a id="8199" class="Keyword">where</a></div>
<div class="line"></div>
<div class="line">  <a id="_-⟦V1-Role⟧⇀_.V1-Role"></a><a id="8208" href="/agda_html/Leios.Simplified.Deterministic.html#8208" class="InductiveConstructor">V1-Role</a> <a id="8216" class="Symbol">:</a> <a id="8218" class="Keyword">let</a> <a id="8222" class="Keyword">open</a> <a id="8227" href="/agda_html/Leios.Protocol.html#959" class="Module">LeiosState</a> <a id="8238" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="8240" class="Keyword">renaming</a> <a id="8249" class="Symbol">(</a><a id="8250" href="/agda_html/Leios.Protocol.html#1050" class="Field">FFDState</a> <a id="8259" class="Symbol">to</a> <a id="8262" class="Field">ffds</a><a id="8266" class="Symbol">)</a></div>
<div class="line">                <a id="8284" href="/agda_html/Leios.Simplified.Deterministic.html#8284" class="Bound">EBs&#39;</a> <a id="8289" class="Symbol">=</a> <a id="8291" href="/agda_html/Leios.Prelude.html#1171" class="Function">filter</a> <a id="8298" class="Symbol">(</a><a id="8299" href="/agda_html/Leios.Protocol.html#6510" class="Function">allIBRefsKnown</a> <a id="8314" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a><a id="8315" class="Symbol">)</a> <a id="8317" href="/agda_html/Function.Base.html#1974" class="Function Operator">$</a> <a id="8319" href="/agda_html/Leios.Prelude.html#1171" class="Function">filter</a> <a id="8326" class="Symbol">(</a><a id="8327" href="/agda_html/Leios.Blocks.html#527" class="Function Operator">_∈ᴮ</a> <a id="8331" href="/agda_html/Leios.Prelude.html#1001" class="Function">slice</a> <a id="8337" href="/agda_html/Leios.Abstract.html#628" class="Function">L</a> <a id="8339" href="/agda_html/Leios.Protocol.html#1260" class="Function">slot</a> <a id="8344" class="Symbol">(</a><a id="8345" href="/agda_html/Leios.Simplified.Deterministic.html#574" class="Bound">μ</a> <a id="8347" href="/agda_html/Class.HasAdd.Core.html#136" class="Field Operator">+</a> <a id="8349" class="Number">1</a><a id="8350" class="Symbol">))</a> <a id="8353" href="/agda_html/Leios.Protocol.html#1180" class="Function">EBs</a></div>
<div class="line">                <a id="8373" href="/agda_html/Leios.Simplified.Deterministic.html#8373" class="Bound">votes</a> <a id="8379" class="Symbol">=</a> <a id="8381" href="/agda_html/abstract-set-theory.Prelude.html#1824" class="Function">map</a> <a id="8385" class="Symbol">(</a><a id="8386" href="/agda_html/Leios.Abstract.html#504" class="Function">vote</a> <a id="8391" href="/agda_html/Leios.SpecStructure.html#742" class="Field">sk-VT</a> <a id="8397" href="/agda_html/Function.Base.html#1115" class="Function Operator">∘</a> <a id="8399" href="/agda_html/Class.Hashable.html#167" class="Field">hash</a><a id="8403" class="Symbol">)</a> <a id="8405" href="/agda_html/Leios.Simplified.Deterministic.html#8284" class="Bound">EBs&#39;</a></div>
<div class="line">          <a id="8420" class="Keyword">in</a></div>
<div class="line">          <a id="8433" href="/agda_html/Prelude.InferenceRules.html#56074" class="Function Operator">∙</a> <a id="8435" href="/agda_html/Leios.VRF.html#2305" class="Function">canProduceV1</a> <a id="8448" href="/agda_html/Leios.Protocol.html#1260" class="Function">slot</a> <a id="8453" href="/agda_html/Leios.SpecStructure.html#742" class="Field">sk-VT</a> <a id="8459" class="Symbol">(</a><a id="8460" href="/agda_html/Leios.Protocol.html#2995" class="Function">stake</a> <a id="8466" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a><a id="8467" class="Symbol">)</a></div>
<div class="line">          <a id="8479" href="/agda_html/Prelude.InferenceRules.html#56005" class="Function Operator">∙</a> <a id="8481" href="/agda_html/Leios.Simplified.Deterministic.html#8262" class="Function">ffds</a> <a id="8486" href="/agda_html/Leios.FFD.html#562" class="Function Operator">FFD.-⟦</a> <a id="8493" href="/agda_html/Leios.FFD.html#311" class="InductiveConstructor">Send</a> <a id="8498" class="Symbol">(</a><a id="8499" href="/agda_html/Leios.Blocks.html#4389" class="InductiveConstructor">vtHeader</a> <a id="8508" href="/agda_html/Leios.Simplified.Deterministic.html#8373" class="Bound">votes</a><a id="8513" class="Symbol">)</a> <a id="8515" href="/agda_html/Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="8523" href="/agda_html/Leios.FFD.html#562" class="Function Operator">/</a> <a id="8525" href="/agda_html/Leios.FFD.html#397" class="InductiveConstructor">SendRes</a> <a id="8533" href="/agda_html/Leios.FFD.html#562" class="Function Operator">⟧⇀</a> <a id="8536" href="/agda_html/Leios.Simplified.Deterministic.html#1042" class="Generalizable">ffds&#39;</a></div>
<div class="line">          <a id="8552" href="/agda_html/Prelude.InferenceRules.html#11695" class="Function Operator">────────────────────────────────────────────────────────────────────</a></div>
<div class="line">          <a id="8631" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="8633" href="/agda_html/Leios.Simplified.Deterministic.html#8152" class="Datatype Operator">-⟦V1-Role⟧⇀</a> <a id="8645" href="/agda_html/Leios.Protocol.html#2208" class="Function">addUpkeep</a> <a id="8655" class="Keyword">record</a> <a id="8662" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="8664" class="Symbol">{</a> <a id="8666" href="/agda_html/Leios.Protocol.html#1050" class="Field">FFDState</a> <a id="8675" class="Symbol">=</a> <a id="8677" href="/agda_html/Leios.Simplified.Deterministic.html#1042" class="Generalizable">ffds&#39;</a> <a id="8683" class="Symbol">}</a> <a id="8685" href="/agda_html/Leios.Simplified.html#351" class="InductiveConstructor">V1-Role</a></div>
<div class="line"></div>
<div class="line">  <a id="_-⟦V1-Role⟧⇀_.No-V1-Role"></a><a id="8696" href="/agda_html/Leios.Simplified.Deterministic.html#8696" class="InductiveConstructor">No-V1-Role</a> <a id="8707" class="Symbol">:</a> <a id="8709" class="Keyword">let</a> <a id="8713" class="Keyword">open</a> <a id="8718" href="/agda_html/Leios.Protocol.html#959" class="Module">LeiosState</a> <a id="8729" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="8731" class="Keyword">in</a></div>
<div class="line">          <a id="8744" href="/agda_html/Prelude.InferenceRules.html#56074" class="Function Operator">∙</a> <a id="8746" href="/agda_html/Relation.Nullary.Negation.Core.html#658" class="Function Operator">¬</a> <a id="8748" href="/agda_html/Leios.VRF.html#2305" class="Function">canProduceV1</a> <a id="8761" href="/agda_html/Leios.Protocol.html#1260" class="Function">slot</a> <a id="8766" href="/agda_html/Leios.SpecStructure.html#742" class="Field">sk-VT</a> <a id="8772" class="Symbol">(</a><a id="8773" href="/agda_html/Leios.Protocol.html#2995" class="Function">stake</a> <a id="8779" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a><a id="8780" class="Symbol">)</a></div>
<div class="line">          <a id="8792" href="/agda_html/Prelude.InferenceRules.html#13361" class="Function Operator">────────────────────────────────────────</a></div>
<div class="line">          <a id="8843" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="8845" href="/agda_html/Leios.Simplified.Deterministic.html#8152" class="Datatype Operator">-⟦V1-Role⟧⇀</a> <a id="8857" href="/agda_html/Leios.Protocol.html#2208" class="Function">addUpkeep</a> <a id="8867" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="8869" href="/agda_html/Leios.Simplified.html#351" class="InductiveConstructor">V1-Role</a></div>
<div class="line"></div>
<div class="line"><a id="V1-Role⇒ND"></a><a id="8878" href="/agda_html/Leios.Simplified.Deterministic.html#8878" class="Function">V1-Role⇒ND</a> <a id="8889" class="Symbol">:</a> <a id="8891" href="/agda_html/Leios.Protocol.html#2023" class="Function">LeiosState.needsUpkeep</a> <a id="8914" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="8916" class="InductiveConstructor">V1-Role</a> <a id="8924" class="Symbol">→</a> <a id="8926" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="8928" href="/agda_html/Leios.Simplified.Deterministic.html#8152" class="Datatype Operator">-⟦V1-Role⟧⇀</a> <a id="8940" href="/agda_html/Leios.Simplified.Deterministic.html#916" class="Generalizable">s&#39;</a> <a id="8943" class="Symbol">→</a> <a id="8945" href="/agda_html/Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8950" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="8952" href="/agda_html/Leios.Simplified.html#5007" class="Datatype Operator">ND.-⟦</a> <a id="8958" href="/agda_html/Leios.Protocol.html#814" class="InductiveConstructor">SLOT</a> <a id="8963" href="/agda_html/Leios.Simplified.html#5007" class="Datatype Operator">/</a> <a id="8965" href="/agda_html/Leios.Protocol.html#928" class="InductiveConstructor">EMPTY</a> <a id="8971" href="/agda_html/Leios.Simplified.html#5007" class="Datatype Operator">⟧⇀</a> <a id="8974" href="/agda_html/Leios.Simplified.Deterministic.html#916" class="Generalizable">s&#39;</a></div>
<div class="line"><a id="8977" href="/agda_html/Leios.Simplified.Deterministic.html#8878" class="Function">V1-Role⇒ND</a> <a id="8988" href="/agda_html/Leios.Simplified.Deterministic.html#8988" class="Bound">u</a> <a id="8990" class="Symbol">(</a><a id="8991" href="/agda_html/Leios.Simplified.Deterministic.html#8208" class="InductiveConstructor">V1-Role</a> <a id="8999" href="/agda_html/Leios.Simplified.Deterministic.html#8999" class="Bound">x₁</a> <a id="9002" href="/agda_html/Leios.Simplified.Deterministic.html#9002" class="Bound">x₂</a><a id="9004" class="Symbol">)</a> <a id="9006" class="Symbol">=</a> <a id="9008" href="/agda_html/Leios.Simplified.html#7284" class="InductiveConstructor">Roles</a> <a id="9014" class="Symbol">(</a><a id="9015" href="/agda_html/Leios.Simplified.html#3039" class="InductiveConstructor">V1-Role</a> <a id="9023" href="/agda_html/Leios.Simplified.Deterministic.html#8988" class="Bound">u</a> <a id="9025" href="/agda_html/Leios.Simplified.Deterministic.html#8999" class="Bound">x₁</a> <a id="9028" href="/agda_html/Leios.Simplified.Deterministic.html#9002" class="Bound">x₂</a><a id="9030" class="Symbol">)</a></div>
<div class="line"><a id="9032" href="/agda_html/Leios.Simplified.Deterministic.html#8878" class="Function">V1-Role⇒ND</a> <a id="9043" href="/agda_html/Leios.Simplified.Deterministic.html#9043" class="Bound">u</a> <a id="9045" class="Symbol">(</a><a id="9046" href="/agda_html/Leios.Simplified.Deterministic.html#8696" class="InductiveConstructor">No-V1-Role</a> <a id="9057" href="/agda_html/Leios.Simplified.Deterministic.html#9057" class="Bound">x₁</a><a id="9059" class="Symbol">)</a> <a id="9061" class="Symbol">=</a> <a id="9063" href="/agda_html/Leios.Simplified.html#7284" class="InductiveConstructor">Roles</a> <a id="9069" class="Symbol">(</a><a id="9070" href="/agda_html/Leios.Simplified.html#4582" class="InductiveConstructor">No-V1-Role</a> <a id="9081" href="/agda_html/Leios.Simplified.Deterministic.html#9043" class="Bound">u</a> <a id="9083" href="/agda_html/Leios.Simplified.Deterministic.html#9057" class="Bound">x₁</a><a id="9085" class="Symbol">)</a></div>
<div class="line"></div>
<div class="line"><a id="V1-Role-Upkeep"></a><a id="9088" href="/agda_html/Leios.Simplified.Deterministic.html#9088" class="Function">V1-Role-Upkeep</a> <a id="9103" class="Symbol">:</a> <a id="9105" class="Symbol">∀</a> <a id="9107" class="Symbol">{</a><a id="9108" href="/agda_html/Leios.Simplified.Deterministic.html#9108" class="Bound">u</a><a id="9109" class="Symbol">}</a> <a id="9111" class="Symbol">→</a> <a id="9113" href="/agda_html/Leios.Simplified.Deterministic.html#9108" class="Bound">u</a> <a id="9115" href="/agda_html/Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="9117" class="InductiveConstructor">V1-Role</a> <a id="9125" class="Symbol">→</a> <a id="9127" href="/agda_html/Leios.Protocol.html#2023" class="Function">LeiosState.needsUpkeep</a> <a id="9150" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="9152" href="/agda_html/Leios.Simplified.Deterministic.html#9108" class="Bound">u</a> <a id="9154" class="Symbol">→</a> <a id="9156" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="9158" href="/agda_html/Leios.Simplified.Deterministic.html#8152" class="Datatype Operator">-⟦V1-Role⟧⇀</a> <a id="9170" href="/agda_html/Leios.Simplified.Deterministic.html#916" class="Generalizable">s&#39;</a></div>
<div class="line">                  <a id="9191" class="Symbol">→</a> <a id="9193" href="/agda_html/Leios.Protocol.html#2023" class="Function">LeiosState.needsUpkeep</a> <a id="9216" href="/agda_html/Leios.Simplified.Deterministic.html#916" class="Generalizable">s&#39;</a> <a id="9219" href="/agda_html/Leios.Simplified.Deterministic.html#9108" class="Bound">u</a></div>
<div class="line"><a id="9221" href="/agda_html/Leios.Simplified.Deterministic.html#9088" class="Function">V1-Role-Upkeep</a> <a id="9236" href="/agda_html/Leios.Simplified.Deterministic.html#9236" class="Bound">u≢V1-Role</a> <a id="9246" href="/agda_html/Leios.Simplified.Deterministic.html#9246" class="Bound">h</a> <a id="9248" class="Symbol">(</a><a id="9249" href="/agda_html/Leios.Simplified.Deterministic.html#8208" class="InductiveConstructor">V1-Role</a> <a id="9257" class="Symbol">_</a> <a id="9259" class="Symbol">_)</a> <a id="9262" href="/agda_html/Leios.Simplified.Deterministic.html#9262" class="Bound">u∈su</a> <a id="9267" class="Symbol">=</a> <a id="9269" href="/agda_html/Function.Base.html#4042" class="Function Operator">case</a> <a id="9274" href="/agda_html/Function.Bundles.html#4834" class="Field">Equivalence.from</a> <a id="9291" href="/agda_html/Axiom.Set.html#9013" class="Function">∈-∪</a> <a id="9295" href="/agda_html/Leios.Simplified.Deterministic.html#9262" class="Bound">u∈su</a> <a id="9300" href="/agda_html/Function.Base.html#4042" class="Function Operator">of</a> <a id="9303" class="Symbol">λ</a> <a id="9305" class="Keyword">where</a></div>
<div class="line">  <a id="9313" class="Symbol">(</a><a id="9314" href="/agda_html/Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="9319" href="/agda_html/Leios.Simplified.Deterministic.html#9319" class="Bound">x</a><a id="9320" class="Symbol">)</a> <a id="9322" class="Symbol">→</a> <a id="9324" href="/agda_html/Leios.Simplified.Deterministic.html#9246" class="Bound">h</a> <a id="9326" href="/agda_html/Leios.Simplified.Deterministic.html#9319" class="Bound">x</a></div>
<div class="line">  <a id="9330" class="Symbol">(</a><a id="9331" href="/agda_html/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="9336" href="/agda_html/Leios.Simplified.Deterministic.html#9336" class="Bound">y</a><a id="9337" class="Symbol">)</a> <a id="9339" class="Symbol">→</a> <a id="9341" href="/agda_html/Leios.Simplified.Deterministic.html#9236" class="Bound">u≢V1-Role</a> <a id="9351" class="Symbol">(</a><a id="9352" href="/agda_html/Function.Bundles.html#4834" class="Field">Equivalence.from</a> <a id="9369" href="/agda_html/Axiom.Set.html#6243" class="Function">∈-singleton</a> <a id="9381" href="/agda_html/Leios.Simplified.Deterministic.html#9336" class="Bound">y</a><a id="9382" class="Symbol">)</a></div>
<div class="line"><a id="9384" href="/agda_html/Leios.Simplified.Deterministic.html#9088" class="Function">V1-Role-Upkeep</a> <a id="9399" href="/agda_html/Leios.Simplified.Deterministic.html#9399" class="Bound">u≢V1-Role</a> <a id="9409" href="/agda_html/Leios.Simplified.Deterministic.html#9409" class="Bound">h</a> <a id="9411" class="Symbol">(</a><a id="9412" href="/agda_html/Leios.Simplified.Deterministic.html#8696" class="InductiveConstructor">No-V1-Role</a> <a id="9423" class="Symbol">_)</a> <a id="9426" href="/agda_html/Leios.Simplified.Deterministic.html#9426" class="Bound">u∈su</a> <a id="9431" class="Symbol">=</a> <a id="9433" href="/agda_html/Function.Base.html#4042" class="Function Operator">case</a> <a id="9438" href="/agda_html/Function.Bundles.html#4834" class="Field">Equivalence.from</a> <a id="9455" href="/agda_html/Axiom.Set.html#9013" class="Function">∈-∪</a> <a id="9459" href="/agda_html/Leios.Simplified.Deterministic.html#9426" class="Bound">u∈su</a> <a id="9464" href="/agda_html/Function.Base.html#4042" class="Function Operator">of</a> <a id="9467" class="Symbol">λ</a> <a id="9469" class="Keyword">where</a></div>
<div class="line">  <a id="9477" class="Symbol">(</a><a id="9478" href="/agda_html/Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="9483" href="/agda_html/Leios.Simplified.Deterministic.html#9483" class="Bound">x</a><a id="9484" class="Symbol">)</a> <a id="9486" class="Symbol">→</a> <a id="9488" href="/agda_html/Leios.Simplified.Deterministic.html#9409" class="Bound">h</a> <a id="9490" href="/agda_html/Leios.Simplified.Deterministic.html#9483" class="Bound">x</a></div>
<div class="line">  <a id="9494" class="Symbol">(</a><a id="9495" href="/agda_html/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="9500" href="/agda_html/Leios.Simplified.Deterministic.html#9500" class="Bound">y</a><a id="9501" class="Symbol">)</a> <a id="9503" class="Symbol">→</a> <a id="9505" href="/agda_html/Leios.Simplified.Deterministic.html#9399" class="Bound">u≢V1-Role</a> <a id="9515" class="Symbol">(</a><a id="9516" href="/agda_html/Function.Bundles.html#4834" class="Field">Equivalence.from</a> <a id="9533" href="/agda_html/Axiom.Set.html#6243" class="Function">∈-singleton</a> <a id="9545" href="/agda_html/Leios.Simplified.Deterministic.html#9500" class="Bound">y</a><a id="9546" class="Symbol">)</a></div>
<div class="line"></div>
<div class="line"><a id="9549" class="Keyword">opaque</a></div>
<div class="line">  <a id="V1-Role-total"></a><a id="9558" href="/agda_html/Leios.Simplified.Deterministic.html#9558" class="Function">V1-Role-total</a> <a id="9572" class="Symbol">:</a> <a id="9574" href="/agda_html/Data.Product.Base.html#1371" class="Function">∃[</a> <a id="9577" href="/agda_html/Leios.Simplified.Deterministic.html#9577" class="Bound">s&#39;</a> <a id="9580" href="/agda_html/Data.Product.Base.html#1371" class="Function">]</a> <a id="9582" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="9584" href="/agda_html/Leios.Simplified.Deterministic.html#8152" class="Datatype Operator">-⟦V1-Role⟧⇀</a> <a id="9596" href="/agda_html/Leios.Simplified.Deterministic.html#9577" class="Bound">s&#39;</a></div>
<div class="line">  <a id="9601" href="/agda_html/Leios.Simplified.Deterministic.html#9558" class="Function">V1-Role-total</a> <a id="9615" class="Symbol">{</a><a id="9616" class="Argument">s</a> <a id="9618" class="Symbol">=</a> <a id="9620" href="/agda_html/Leios.Simplified.Deterministic.html#9620" class="Bound">s</a><a id="9621" class="Symbol">}</a> <a id="9623" class="Symbol">=</a> <a id="9625" class="Keyword">let</a> <a id="9629" class="Keyword">open</a> <a id="9634" href="/agda_html/Leios.Protocol.html#959" class="Module">LeiosState</a> <a id="9645" href="/agda_html/Leios.Simplified.Deterministic.html#9620" class="Bound">s</a> <a id="9647" class="Keyword">in</a> <a id="9650" href="/agda_html/Function.Base.html#4042" class="Function Operator">case</a> <a id="9655" href="/agda_html/Leios.VRF.html#2417" class="Function">Dec-canProduceV1</a> <a id="9672" href="/agda_html/Function.Base.html#4042" class="Function Operator">of</a> <a id="9675" class="Symbol">λ</a> <a id="9677" class="Keyword">where</a></div>
<div class="line">    <a id="9687" class="Symbol">(</a><a id="9688" href="/agda_html/Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="9692" href="/agda_html/Leios.Simplified.Deterministic.html#9692" class="Bound">p</a><a id="9693" class="Symbol">)</a> <a id="9695" class="Symbol">→</a> <a id="9697" href="/agda_html/Data.Product.Base.html#1932" class="Function Operator">-,</a> <a id="9700" href="/agda_html/Leios.Simplified.Deterministic.html#8208" class="InductiveConstructor">V1-Role</a> <a id="9708" href="/agda_html/Leios.Simplified.Deterministic.html#9692" class="Bound">p</a> <a id="9710" class="Symbol">(</a><a id="9711" href="/agda_html/Data.Product.Base.html#650" class="Field">proj₂</a> <a id="9717" href="/agda_html/Leios.FFD.html#731" class="Function">FFD.Send-total</a><a id="9731" class="Symbol">)</a></div>
<div class="line">    <a id="9737" class="Symbol">(</a><a id="9738" href="/agda_html/Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="9741" href="/agda_html/Leios.Simplified.Deterministic.html#9741" class="Bound">¬p</a><a id="9743" class="Symbol">)</a> <a id="9745" class="Symbol">→</a> <a id="9747" href="/agda_html/Data.Product.Base.html#1932" class="Function Operator">-,</a> <a id="9750" href="/agda_html/Leios.Simplified.Deterministic.html#8696" class="InductiveConstructor">No-V1-Role</a> <a id="9761" href="/agda_html/Leios.Simplified.Deterministic.html#9741" class="Bound">¬p</a></div>
<div class="line"></div>
<div class="line">  <a id="V1-Role-total&#39;"></a><a id="9767" href="/agda_html/Leios.Simplified.Deterministic.html#9767" class="Function">V1-Role-total&#39;</a> <a id="9782" class="Symbol">:</a> <a id="9784" href="/agda_html/Data.Product.Base.html#1371" class="Function">∃[</a> <a id="9787" href="/agda_html/Leios.Simplified.Deterministic.html#9787" class="Bound">ffds</a> <a id="9792" href="/agda_html/Data.Product.Base.html#1371" class="Function">]</a> <a id="9794" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="9796" href="/agda_html/Leios.Simplified.Deterministic.html#8152" class="Datatype Operator">-⟦V1-Role⟧⇀</a> <a id="9808" href="/agda_html/Leios.Protocol.html#2208" class="Function">addUpkeep</a> <a id="9818" class="Keyword">record</a> <a id="9825" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="9827" class="Symbol">{</a> <a id="9829" class="Field">FFDState</a> <a id="9838" class="Symbol">=</a> <a id="9840" href="/agda_html/Leios.Simplified.Deterministic.html#9787" class="Bound">ffds</a> <a id="9845" class="Symbol">}</a> <a id="9847" class="InductiveConstructor">V1-Role</a></div>
<div class="line">  <a id="9857" href="/agda_html/Leios.Simplified.Deterministic.html#9767" class="Function">V1-Role-total&#39;</a> <a id="9872" class="Symbol">{</a><a id="9873" class="Argument">s</a> <a id="9875" class="Symbol">=</a> <a id="9877" href="/agda_html/Leios.Simplified.Deterministic.html#9877" class="Bound">s</a><a id="9878" class="Symbol">}</a> <a id="9880" class="Symbol">=</a> <a id="9882" class="Keyword">let</a> <a id="9886" class="Keyword">open</a> <a id="9891" href="/agda_html/Leios.Protocol.html#959" class="Module">LeiosState</a> <a id="9902" href="/agda_html/Leios.Simplified.Deterministic.html#9877" class="Bound">s</a> <a id="9904" class="Keyword">in</a> <a id="9907" href="/agda_html/Function.Base.html#4042" class="Function Operator">case</a> <a id="9912" href="/agda_html/Leios.VRF.html#2417" class="Function">Dec-canProduceV1</a> <a id="9929" href="/agda_html/Function.Base.html#4042" class="Function Operator">of</a> <a id="9932" class="Symbol">λ</a> <a id="9934" class="Keyword">where</a></div>
<div class="line">    <a id="9944" class="Symbol">(</a><a id="9945" href="/agda_html/Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="9949" href="/agda_html/Leios.Simplified.Deterministic.html#9949" class="Bound">p</a><a id="9950" class="Symbol">)</a> <a id="9952" class="Symbol">→</a> <a id="9954" href="/agda_html/Data.Product.Base.html#1932" class="Function Operator">-,</a> <a id="9957" href="/agda_html/Leios.Simplified.Deterministic.html#8208" class="InductiveConstructor">V1-Role</a>    <a id="9968" href="/agda_html/Leios.Simplified.Deterministic.html#9949" class="Bound">p</a> <a id="9970" class="Symbol">(</a><a id="9971" href="/agda_html/Data.Product.Base.html#650" class="Field">proj₂</a> <a id="9977" href="/agda_html/Leios.FFD.html#731" class="Function">FFD.Send-total</a><a id="9991" class="Symbol">)</a></div>
<div class="line">    <a id="9997" class="Symbol">(</a><a id="9998" href="/agda_html/Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="10001" href="/agda_html/Leios.Simplified.Deterministic.html#10001" class="Bound">¬p</a><a id="10003" class="Symbol">)</a> <a id="10005" class="Symbol">→</a> <a id="10007" href="/agda_html/Data.Product.Base.html#1932" class="Function Operator">-,</a> <a id="10010" href="/agda_html/Leios.Simplified.Deterministic.html#8696" class="InductiveConstructor">No-V1-Role</a> <a id="10021" href="/agda_html/Leios.Simplified.Deterministic.html#10001" class="Bound">¬p</a></div>
<div class="line"></div>
<div class="line"><a id="10025" class="Keyword">data</a> <a id="_-⟦V2-Role⟧⇀_"></a><a id="10030" href="/agda_html/Leios.Simplified.Deterministic.html#10030" class="Datatype Operator">_-⟦V2-Role⟧⇀_</a> <a id="10044" class="Symbol">:</a> <a id="10046" href="/agda_html/Leios.Protocol.html#959" class="Record">LeiosState</a> <a id="10057" class="Symbol">→</a> <a id="10059" href="/agda_html/Leios.Protocol.html#959" class="Record">LeiosState</a> <a id="10070" class="Symbol">→</a> <a id="10072" href="/agda_html/Agda.Primitive.html#388" class="Primitive">Type</a> <a id="10077" class="Keyword">where</a></div>
<div class="line"></div>
<div class="line">  <a id="_-⟦V2-Role⟧⇀_.V2-Role"></a><a id="10086" href="/agda_html/Leios.Simplified.Deterministic.html#10086" class="InductiveConstructor">V2-Role</a> <a id="10094" class="Symbol">:</a> <a id="10096" class="Keyword">let</a> <a id="10100" class="Keyword">open</a> <a id="10105" href="/agda_html/Leios.Protocol.html#959" class="Module">LeiosState</a> <a id="10116" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="10118" class="Keyword">renaming</a> <a id="10127" class="Symbol">(</a><a id="10128" href="/agda_html/Leios.Protocol.html#1050" class="Field">FFDState</a> <a id="10137" class="Symbol">to</a> <a id="10140" class="Field">ffds</a><a id="10144" class="Symbol">)</a></div>
<div class="line">                <a id="10162" href="/agda_html/Leios.Simplified.Deterministic.html#10162" class="Bound">EBs&#39;</a> <a id="10167" class="Symbol">=</a> <a id="10169" href="/agda_html/Leios.Prelude.html#1171" class="Function">filter</a> <a id="10176" class="Symbol">(</a><a id="10177" href="/agda_html/Leios.Simplified.html#1112" class="Function">vote2Eligible</a> <a id="10191" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a><a id="10192" class="Symbol">)</a> <a id="10194" href="/agda_html/Function.Base.html#1974" class="Function Operator">$</a> <a id="10196" href="/agda_html/Leios.Prelude.html#1171" class="Function">filter</a> <a id="10203" class="Symbol">(</a><a id="10204" href="/agda_html/Leios.Blocks.html#527" class="Function Operator">_∈ᴮ</a> <a id="10208" href="/agda_html/Leios.Prelude.html#1001" class="Function">slice</a> <a id="10214" href="/agda_html/Leios.Abstract.html#628" class="Function">L</a> <a id="10216" href="/agda_html/Leios.Protocol.html#1260" class="Function">slot</a> <a id="10221" class="Number">1</a><a id="10222" class="Symbol">)</a> <a id="10224" href="/agda_html/Leios.Protocol.html#1180" class="Function">EBs</a></div>
<div class="line">                <a id="10244" href="/agda_html/Leios.Simplified.Deterministic.html#10244" class="Bound">votes</a> <a id="10250" class="Symbol">=</a> <a id="10252" href="/agda_html/abstract-set-theory.Prelude.html#1824" class="Function">map</a> <a id="10256" class="Symbol">(</a><a id="10257" href="/agda_html/Leios.Abstract.html#504" class="Function">vote</a> <a id="10262" href="/agda_html/Leios.SpecStructure.html#742" class="Field">sk-VT</a> <a id="10268" href="/agda_html/Function.Base.html#1115" class="Function Operator">∘</a> <a id="10270" href="/agda_html/Class.Hashable.html#167" class="Field">hash</a><a id="10274" class="Symbol">)</a> <a id="10276" href="/agda_html/Leios.Simplified.Deterministic.html#10162" class="Bound">EBs&#39;</a></div>
<div class="line">          <a id="10291" class="Keyword">in</a></div>
<div class="line">          <a id="10304" href="/agda_html/Prelude.InferenceRules.html#56074" class="Function Operator">∙</a> <a id="10306" href="/agda_html/Leios.VRF.html#2595" class="Function">canProduceV2</a> <a id="10319" href="/agda_html/Leios.Protocol.html#1260" class="Function">slot</a> <a id="10324" href="/agda_html/Leios.SpecStructure.html#742" class="Field">sk-VT</a> <a id="10330" class="Symbol">(</a><a id="10331" href="/agda_html/Leios.Protocol.html#2995" class="Function">stake</a> <a id="10337" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a><a id="10338" class="Symbol">)</a></div>
<div class="line">          <a id="10350" href="/agda_html/Prelude.InferenceRules.html#56005" class="Function Operator">∙</a> <a id="10352" href="/agda_html/Leios.Simplified.Deterministic.html#10140" class="Function">ffds</a> <a id="10357" href="/agda_html/Leios.FFD.html#562" class="Function Operator">FFD.-⟦</a> <a id="10364" href="/agda_html/Leios.FFD.html#311" class="InductiveConstructor">Send</a> <a id="10369" class="Symbol">(</a><a id="10370" href="/agda_html/Leios.Blocks.html#4389" class="InductiveConstructor">vtHeader</a> <a id="10379" href="/agda_html/Leios.Simplified.Deterministic.html#10244" class="Bound">votes</a><a id="10384" class="Symbol">)</a> <a id="10386" href="/agda_html/Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="10394" href="/agda_html/Leios.FFD.html#562" class="Function Operator">/</a> <a id="10396" href="/agda_html/Leios.FFD.html#397" class="InductiveConstructor">SendRes</a> <a id="10404" href="/agda_html/Leios.FFD.html#562" class="Function Operator">⟧⇀</a> <a id="10407" href="/agda_html/Leios.Simplified.Deterministic.html#1042" class="Generalizable">ffds&#39;</a></div>
<div class="line">          <a id="10423" href="/agda_html/Prelude.InferenceRules.html#11695" class="Function Operator">────────────────────────────────────────────────────────────────────</a></div>
<div class="line">          <a id="10502" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="10504" href="/agda_html/Leios.Simplified.Deterministic.html#10030" class="Datatype Operator">-⟦V2-Role⟧⇀</a> <a id="10516" href="/agda_html/Leios.Protocol.html#2208" class="Function">addUpkeep</a> <a id="10526" class="Keyword">record</a> <a id="10533" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="10535" class="Symbol">{</a> <a id="10537" href="/agda_html/Leios.Protocol.html#1050" class="Field">FFDState</a> <a id="10546" class="Symbol">=</a> <a id="10548" href="/agda_html/Leios.Simplified.Deterministic.html#1042" class="Generalizable">ffds&#39;</a> <a id="10554" class="Symbol">}</a> <a id="10556" href="/agda_html/Leios.Simplified.html#359" class="InductiveConstructor">V2-Role</a></div>
<div class="line"></div>
<div class="line">  <a id="_-⟦V2-Role⟧⇀_.No-V2-Role"></a><a id="10567" href="/agda_html/Leios.Simplified.Deterministic.html#10567" class="InductiveConstructor">No-V2-Role</a> <a id="10578" class="Symbol">:</a> <a id="10580" class="Keyword">let</a> <a id="10584" class="Keyword">open</a> <a id="10589" href="/agda_html/Leios.Protocol.html#959" class="Module">LeiosState</a> <a id="10600" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="10602" class="Keyword">in</a></div>
<div class="line">          <a id="10615" href="/agda_html/Prelude.InferenceRules.html#56074" class="Function Operator">∙</a> <a id="10617" href="/agda_html/Relation.Nullary.Negation.Core.html#658" class="Function Operator">¬</a> <a id="10619" href="/agda_html/Leios.VRF.html#2595" class="Function">canProduceV2</a> <a id="10632" href="/agda_html/Leios.Protocol.html#1260" class="Function">slot</a> <a id="10637" href="/agda_html/Leios.SpecStructure.html#742" class="Field">sk-VT</a> <a id="10643" class="Symbol">(</a><a id="10644" href="/agda_html/Leios.Protocol.html#2995" class="Function">stake</a> <a id="10650" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a><a id="10651" class="Symbol">)</a></div>
<div class="line">          <a id="10663" href="/agda_html/Prelude.InferenceRules.html#13361" class="Function Operator">────────────────────────────────────────</a></div>
<div class="line">          <a id="10714" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="10716" href="/agda_html/Leios.Simplified.Deterministic.html#10030" class="Datatype Operator">-⟦V2-Role⟧⇀</a> <a id="10728" href="/agda_html/Leios.Protocol.html#2208" class="Function">addUpkeep</a> <a id="10738" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="10740" href="/agda_html/Leios.Simplified.html#359" class="InductiveConstructor">V2-Role</a></div>
<div class="line"></div>
<div class="line"><a id="V2-Role⇒ND"></a><a id="10749" href="/agda_html/Leios.Simplified.Deterministic.html#10749" class="Function">V2-Role⇒ND</a> <a id="10760" class="Symbol">:</a> <a id="10762" href="/agda_html/Leios.Protocol.html#2023" class="Function">LeiosState.needsUpkeep</a> <a id="10785" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="10787" class="InductiveConstructor">V2-Role</a> <a id="10795" class="Symbol">→</a> <a id="10797" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="10799" href="/agda_html/Leios.Simplified.Deterministic.html#10030" class="Datatype Operator">-⟦V2-Role⟧⇀</a> <a id="10811" href="/agda_html/Leios.Simplified.Deterministic.html#916" class="Generalizable">s&#39;</a> <a id="10814" class="Symbol">→</a> <a id="10816" href="/agda_html/Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="10821" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="10823" href="/agda_html/Leios.Simplified.html#5007" class="Datatype Operator">ND.-⟦</a> <a id="10829" href="/agda_html/Leios.Protocol.html#814" class="InductiveConstructor">SLOT</a> <a id="10834" href="/agda_html/Leios.Simplified.html#5007" class="Datatype Operator">/</a> <a id="10836" href="/agda_html/Leios.Protocol.html#928" class="InductiveConstructor">EMPTY</a> <a id="10842" href="/agda_html/Leios.Simplified.html#5007" class="Datatype Operator">⟧⇀</a> <a id="10845" href="/agda_html/Leios.Simplified.Deterministic.html#916" class="Generalizable">s&#39;</a></div>
<div class="line"><a id="10848" href="/agda_html/Leios.Simplified.Deterministic.html#10749" class="Function">V2-Role⇒ND</a> <a id="10859" href="/agda_html/Leios.Simplified.Deterministic.html#10859" class="Bound">u</a> <a id="10861" class="Symbol">(</a><a id="10862" href="/agda_html/Leios.Simplified.Deterministic.html#10086" class="InductiveConstructor">V2-Role</a> <a id="10870" href="/agda_html/Leios.Simplified.Deterministic.html#10870" class="Bound">x₁</a> <a id="10873" href="/agda_html/Leios.Simplified.Deterministic.html#10873" class="Bound">x₂</a><a id="10875" class="Symbol">)</a> <a id="10877" class="Symbol">=</a> <a id="10879" href="/agda_html/Leios.Simplified.html#7284" class="InductiveConstructor">Roles</a> <a id="10885" class="Symbol">(</a><a id="10886" href="/agda_html/Leios.Simplified.html#3554" class="InductiveConstructor">V2-Role</a> <a id="10894" href="/agda_html/Leios.Simplified.Deterministic.html#10859" class="Bound">u</a> <a id="10896" href="/agda_html/Leios.Simplified.Deterministic.html#10870" class="Bound">x₁</a> <a id="10899" href="/agda_html/Leios.Simplified.Deterministic.html#10873" class="Bound">x₂</a><a id="10901" class="Symbol">)</a></div>
<div class="line"><a id="10903" href="/agda_html/Leios.Simplified.Deterministic.html#10749" class="Function">V2-Role⇒ND</a> <a id="10914" href="/agda_html/Leios.Simplified.Deterministic.html#10914" class="Bound">u</a> <a id="10916" class="Symbol">(</a><a id="10917" href="/agda_html/Leios.Simplified.Deterministic.html#10567" class="InductiveConstructor">No-V2-Role</a> <a id="10928" href="/agda_html/Leios.Simplified.Deterministic.html#10928" class="Bound">x₁</a><a id="10930" class="Symbol">)</a> <a id="10932" class="Symbol">=</a> <a id="10934" href="/agda_html/Leios.Simplified.html#7284" class="InductiveConstructor">Roles</a> <a id="10940" class="Symbol">(</a><a id="10941" href="/agda_html/Leios.Simplified.html#4793" class="InductiveConstructor">No-V2-Role</a> <a id="10952" href="/agda_html/Leios.Simplified.Deterministic.html#10914" class="Bound">u</a> <a id="10954" href="/agda_html/Leios.Simplified.Deterministic.html#10928" class="Bound">x₁</a><a id="10956" class="Symbol">)</a></div>
<div class="line"></div>
<div class="line"><a id="V2-Role-Upkeep"></a><a id="10959" href="/agda_html/Leios.Simplified.Deterministic.html#10959" class="Function">V2-Role-Upkeep</a> <a id="10974" class="Symbol">:</a> <a id="10976" class="Symbol">∀</a> <a id="10978" class="Symbol">{</a><a id="10979" href="/agda_html/Leios.Simplified.Deterministic.html#10979" class="Bound">u</a><a id="10980" class="Symbol">}</a> <a id="10982" class="Symbol">→</a> <a id="10984" href="/agda_html/Leios.Simplified.Deterministic.html#10979" class="Bound">u</a> <a id="10986" href="/agda_html/Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="10988" class="InductiveConstructor">V2-Role</a> <a id="10996" class="Symbol">→</a> <a id="10998" href="/agda_html/Leios.Protocol.html#2023" class="Function">LeiosState.needsUpkeep</a> <a id="11021" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="11023" href="/agda_html/Leios.Simplified.Deterministic.html#10979" class="Bound">u</a> <a id="11025" class="Symbol">→</a> <a id="11027" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="11029" href="/agda_html/Leios.Simplified.Deterministic.html#10030" class="Datatype Operator">-⟦V2-Role⟧⇀</a> <a id="11041" href="/agda_html/Leios.Simplified.Deterministic.html#916" class="Generalizable">s&#39;</a></div>
<div class="line">                  <a id="11062" class="Symbol">→</a> <a id="11064" href="/agda_html/Leios.Protocol.html#2023" class="Function">LeiosState.needsUpkeep</a> <a id="11087" href="/agda_html/Leios.Simplified.Deterministic.html#916" class="Generalizable">s&#39;</a> <a id="11090" href="/agda_html/Leios.Simplified.Deterministic.html#10979" class="Bound">u</a></div>
<div class="line"><a id="11092" href="/agda_html/Leios.Simplified.Deterministic.html#10959" class="Function">V2-Role-Upkeep</a> <a id="11107" href="/agda_html/Leios.Simplified.Deterministic.html#11107" class="Bound">u≢V2-Role</a> <a id="11117" href="/agda_html/Leios.Simplified.Deterministic.html#11117" class="Bound">h</a> <a id="11119" class="Symbol">(</a><a id="11120" href="/agda_html/Leios.Simplified.Deterministic.html#10086" class="InductiveConstructor">V2-Role</a> <a id="11128" class="Symbol">_</a> <a id="11130" class="Symbol">_)</a> <a id="11133" href="/agda_html/Leios.Simplified.Deterministic.html#11133" class="Bound">u∈su</a> <a id="11138" class="Symbol">=</a> <a id="11140" href="/agda_html/Function.Base.html#4042" class="Function Operator">case</a> <a id="11145" href="/agda_html/Function.Bundles.html#4834" class="Field">Equivalence.from</a> <a id="11162" href="/agda_html/Axiom.Set.html#9013" class="Function">∈-∪</a> <a id="11166" href="/agda_html/Leios.Simplified.Deterministic.html#11133" class="Bound">u∈su</a> <a id="11171" href="/agda_html/Function.Base.html#4042" class="Function Operator">of</a> <a id="11174" class="Symbol">λ</a> <a id="11176" class="Keyword">where</a></div>
<div class="line">  <a id="11184" class="Symbol">(</a><a id="11185" href="/agda_html/Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="11190" href="/agda_html/Leios.Simplified.Deterministic.html#11190" class="Bound">x</a><a id="11191" class="Symbol">)</a> <a id="11193" class="Symbol">→</a> <a id="11195" href="/agda_html/Leios.Simplified.Deterministic.html#11117" class="Bound">h</a> <a id="11197" href="/agda_html/Leios.Simplified.Deterministic.html#11190" class="Bound">x</a></div>
<div class="line">  <a id="11201" class="Symbol">(</a><a id="11202" href="/agda_html/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="11207" href="/agda_html/Leios.Simplified.Deterministic.html#11207" class="Bound">y</a><a id="11208" class="Symbol">)</a> <a id="11210" class="Symbol">→</a> <a id="11212" href="/agda_html/Leios.Simplified.Deterministic.html#11107" class="Bound">u≢V2-Role</a> <a id="11222" class="Symbol">(</a><a id="11223" href="/agda_html/Function.Bundles.html#4834" class="Field">Equivalence.from</a> <a id="11240" href="/agda_html/Axiom.Set.html#6243" class="Function">∈-singleton</a> <a id="11252" href="/agda_html/Leios.Simplified.Deterministic.html#11207" class="Bound">y</a><a id="11253" class="Symbol">)</a></div>
<div class="line"><a id="11255" href="/agda_html/Leios.Simplified.Deterministic.html#10959" class="Function">V2-Role-Upkeep</a> <a id="11270" href="/agda_html/Leios.Simplified.Deterministic.html#11270" class="Bound">u≢V2-Role</a> <a id="11280" href="/agda_html/Leios.Simplified.Deterministic.html#11280" class="Bound">h</a> <a id="11282" class="Symbol">(</a><a id="11283" href="/agda_html/Leios.Simplified.Deterministic.html#10567" class="InductiveConstructor">No-V2-Role</a> <a id="11294" class="Symbol">_)</a> <a id="11297" href="/agda_html/Leios.Simplified.Deterministic.html#11297" class="Bound">u∈su</a> <a id="11302" class="Symbol">=</a> <a id="11304" href="/agda_html/Function.Base.html#4042" class="Function Operator">case</a> <a id="11309" href="/agda_html/Function.Bundles.html#4834" class="Field">Equivalence.from</a> <a id="11326" href="/agda_html/Axiom.Set.html#9013" class="Function">∈-∪</a> <a id="11330" href="/agda_html/Leios.Simplified.Deterministic.html#11297" class="Bound">u∈su</a> <a id="11335" href="/agda_html/Function.Base.html#4042" class="Function Operator">of</a> <a id="11338" class="Symbol">λ</a> <a id="11340" class="Keyword">where</a></div>
<div class="line">  <a id="11348" class="Symbol">(</a><a id="11349" href="/agda_html/Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="11354" href="/agda_html/Leios.Simplified.Deterministic.html#11354" class="Bound">x</a><a id="11355" class="Symbol">)</a> <a id="11357" class="Symbol">→</a> <a id="11359" href="/agda_html/Leios.Simplified.Deterministic.html#11280" class="Bound">h</a> <a id="11361" href="/agda_html/Leios.Simplified.Deterministic.html#11354" class="Bound">x</a></div>
<div class="line">  <a id="11365" class="Symbol">(</a><a id="11366" href="/agda_html/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="11371" href="/agda_html/Leios.Simplified.Deterministic.html#11371" class="Bound">y</a><a id="11372" class="Symbol">)</a> <a id="11374" class="Symbol">→</a> <a id="11376" href="/agda_html/Leios.Simplified.Deterministic.html#11270" class="Bound">u≢V2-Role</a> <a id="11386" class="Symbol">(</a><a id="11387" href="/agda_html/Function.Bundles.html#4834" class="Field">Equivalence.from</a> <a id="11404" href="/agda_html/Axiom.Set.html#6243" class="Function">∈-singleton</a> <a id="11416" href="/agda_html/Leios.Simplified.Deterministic.html#11371" class="Bound">y</a><a id="11417" class="Symbol">)</a></div>
<div class="line"></div>
<div class="line"><a id="11420" class="Keyword">opaque</a></div>
<div class="line">  <a id="V2-Role-total"></a><a id="11429" href="/agda_html/Leios.Simplified.Deterministic.html#11429" class="Function">V2-Role-total</a> <a id="11443" class="Symbol">:</a> <a id="11445" href="/agda_html/Data.Product.Base.html#1371" class="Function">∃[</a> <a id="11448" href="/agda_html/Leios.Simplified.Deterministic.html#11448" class="Bound">s&#39;</a> <a id="11451" href="/agda_html/Data.Product.Base.html#1371" class="Function">]</a> <a id="11453" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="11455" href="/agda_html/Leios.Simplified.Deterministic.html#10030" class="Datatype Operator">-⟦V2-Role⟧⇀</a> <a id="11467" href="/agda_html/Leios.Simplified.Deterministic.html#11448" class="Bound">s&#39;</a></div>
<div class="line">  <a id="11472" href="/agda_html/Leios.Simplified.Deterministic.html#11429" class="Function">V2-Role-total</a> <a id="11486" class="Symbol">{</a><a id="11487" class="Argument">s</a> <a id="11489" class="Symbol">=</a> <a id="11491" href="/agda_html/Leios.Simplified.Deterministic.html#11491" class="Bound">s</a><a id="11492" class="Symbol">}</a> <a id="11494" class="Symbol">=</a> <a id="11496" class="Keyword">let</a> <a id="11500" class="Keyword">open</a> <a id="11505" href="/agda_html/Leios.Protocol.html#959" class="Module">LeiosState</a> <a id="11516" href="/agda_html/Leios.Simplified.Deterministic.html#11491" class="Bound">s</a> <a id="11518" class="Keyword">in</a> <a id="11521" href="/agda_html/Function.Base.html#4042" class="Function Operator">case</a> <a id="11526" href="/agda_html/Leios.VRF.html#2707" class="Function">Dec-canProduceV2</a> <a id="11543" href="/agda_html/Function.Base.html#4042" class="Function Operator">of</a> <a id="11546" class="Symbol">λ</a> <a id="11548" class="Keyword">where</a></div>
<div class="line">    <a id="11558" class="Symbol">(</a><a id="11559" href="/agda_html/Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="11563" href="/agda_html/Leios.Simplified.Deterministic.html#11563" class="Bound">p</a><a id="11564" class="Symbol">)</a> <a id="11566" class="Symbol">→</a> <a id="11568" href="/agda_html/Data.Product.Base.html#1932" class="Function Operator">-,</a> <a id="11571" href="/agda_html/Leios.Simplified.Deterministic.html#10086" class="InductiveConstructor">V2-Role</a> <a id="11579" href="/agda_html/Leios.Simplified.Deterministic.html#11563" class="Bound">p</a> <a id="11581" class="Symbol">(</a><a id="11582" href="/agda_html/Data.Product.Base.html#650" class="Field">proj₂</a> <a id="11588" href="/agda_html/Leios.FFD.html#731" class="Function">FFD.Send-total</a><a id="11602" class="Symbol">)</a></div>
<div class="line">    <a id="11608" class="Symbol">(</a><a id="11609" href="/agda_html/Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="11612" href="/agda_html/Leios.Simplified.Deterministic.html#11612" class="Bound">¬p</a><a id="11614" class="Symbol">)</a> <a id="11616" class="Symbol">→</a> <a id="11618" href="/agda_html/Data.Product.Base.html#1932" class="Function Operator">-,</a> <a id="11621" href="/agda_html/Leios.Simplified.Deterministic.html#10567" class="InductiveConstructor">No-V2-Role</a> <a id="11632" href="/agda_html/Leios.Simplified.Deterministic.html#11612" class="Bound">¬p</a></div>
<div class="line"></div>
<div class="line">  <a id="V2-Role-total&#39;"></a><a id="11638" href="/agda_html/Leios.Simplified.Deterministic.html#11638" class="Function">V2-Role-total&#39;</a> <a id="11653" class="Symbol">:</a> <a id="11655" href="/agda_html/Data.Product.Base.html#1371" class="Function">∃[</a> <a id="11658" href="/agda_html/Leios.Simplified.Deterministic.html#11658" class="Bound">ffds</a> <a id="11663" href="/agda_html/Data.Product.Base.html#1371" class="Function">]</a> <a id="11665" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="11667" href="/agda_html/Leios.Simplified.Deterministic.html#10030" class="Datatype Operator">-⟦V2-Role⟧⇀</a> <a id="11679" href="/agda_html/Leios.Protocol.html#2208" class="Function">addUpkeep</a> <a id="11689" class="Keyword">record</a> <a id="11696" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="11698" class="Symbol">{</a> <a id="11700" class="Field">FFDState</a> <a id="11709" class="Symbol">=</a> <a id="11711" href="/agda_html/Leios.Simplified.Deterministic.html#11658" class="Bound">ffds</a> <a id="11716" class="Symbol">}</a> <a id="11718" class="InductiveConstructor">V2-Role</a></div>
<div class="line">  <a id="11728" href="/agda_html/Leios.Simplified.Deterministic.html#11638" class="Function">V2-Role-total&#39;</a> <a id="11743" class="Symbol">{</a><a id="11744" class="Argument">s</a> <a id="11746" class="Symbol">=</a> <a id="11748" href="/agda_html/Leios.Simplified.Deterministic.html#11748" class="Bound">s</a><a id="11749" class="Symbol">}</a> <a id="11751" class="Symbol">=</a> <a id="11753" class="Keyword">let</a> <a id="11757" class="Keyword">open</a> <a id="11762" href="/agda_html/Leios.Protocol.html#959" class="Module">LeiosState</a> <a id="11773" href="/agda_html/Leios.Simplified.Deterministic.html#11748" class="Bound">s</a> <a id="11775" class="Keyword">in</a> <a id="11778" href="/agda_html/Function.Base.html#4042" class="Function Operator">case</a> <a id="11783" href="/agda_html/Leios.VRF.html#2707" class="Function">Dec-canProduceV2</a> <a id="11800" href="/agda_html/Function.Base.html#4042" class="Function Operator">of</a> <a id="11803" class="Symbol">λ</a> <a id="11805" class="Keyword">where</a></div>
<div class="line">    <a id="11815" class="Symbol">(</a><a id="11816" href="/agda_html/Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="11820" href="/agda_html/Leios.Simplified.Deterministic.html#11820" class="Bound">p</a><a id="11821" class="Symbol">)</a> <a id="11823" class="Symbol">→</a> <a id="11825" href="/agda_html/Data.Product.Base.html#1932" class="Function Operator">-,</a> <a id="11828" href="/agda_html/Leios.Simplified.Deterministic.html#10086" class="InductiveConstructor">V2-Role</a>    <a id="11839" href="/agda_html/Leios.Simplified.Deterministic.html#11820" class="Bound">p</a> <a id="11841" class="Symbol">(</a><a id="11842" href="/agda_html/Data.Product.Base.html#650" class="Field">proj₂</a> <a id="11848" href="/agda_html/Leios.FFD.html#731" class="Function">FFD.Send-total</a><a id="11862" class="Symbol">)</a></div>
<div class="line">    <a id="11868" class="Symbol">(</a><a id="11869" href="/agda_html/Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="11872" href="/agda_html/Leios.Simplified.Deterministic.html#11872" class="Bound">¬p</a><a id="11874" class="Symbol">)</a> <a id="11876" class="Symbol">→</a> <a id="11878" href="/agda_html/Data.Product.Base.html#1932" class="Function Operator">-,</a> <a id="11881" href="/agda_html/Leios.Simplified.Deterministic.html#10567" class="InductiveConstructor">No-V2-Role</a> <a id="11892" href="/agda_html/Leios.Simplified.Deterministic.html#11872" class="Bound">¬p</a></div>
<div class="line"></div>
<div class="line"><a id="11896" class="Keyword">data</a> <a id="_-⟦_/_⟧⇀_"></a><a id="11901" href="/agda_html/Leios.Simplified.Deterministic.html#11901" class="Datatype Operator">_-⟦_/_⟧⇀_</a> <a id="11911" class="Symbol">:</a> <a id="11913" href="/agda_html/Leios.Protocol.html#959" class="Record">LeiosState</a> <a id="11924" class="Symbol">→</a> <a id="11926" href="/agda_html/Leios.Protocol.html#708" class="Datatype">LeiosInput</a> <a id="11937" class="Symbol">→</a> <a id="11939" href="/agda_html/Leios.Protocol.html#866" class="Datatype">LeiosOutput</a> <a id="11951" class="Symbol">→</a> <a id="11953" href="/agda_html/Leios.Protocol.html#959" class="Record">LeiosState</a> <a id="11964" class="Symbol">→</a> <a id="11966" href="/agda_html/Agda.Primitive.html#388" class="Primitive">Type</a> <a id="11971" class="Keyword">where</a></div>
<div class="line"></div>
<div class="line">  <a id="11980" class="Comment">-- Network and Ledger</a></div>
<div class="line"></div>
<div class="line">  <a id="_-⟦_/_⟧⇀_.Slot"></a><a id="12005" href="/agda_html/Leios.Simplified.Deterministic.html#12005" class="InductiveConstructor">Slot</a> <a id="12010" class="Symbol">:</a> <a id="12012" class="Keyword">let</a> <a id="12016" class="Keyword">open</a> <a id="12021" href="/agda_html/Leios.Protocol.html#959" class="Module">LeiosState</a> <a id="12032" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="12034" class="Keyword">renaming</a> <a id="12043" class="Symbol">(</a><a id="12044" href="/agda_html/Leios.Protocol.html#1050" class="Field">FFDState</a> <a id="12053" class="Symbol">to</a> <a id="12056" class="Field">ffds</a><a id="12060" class="Symbol">;</a> <a id="12062" href="/agda_html/Leios.Protocol.html#1389" class="Field">BaseState</a> <a id="12072" class="Symbol">to</a> <a id="12075" class="Field">bs</a><a id="12077" class="Symbol">)</a></div>
<div class="line">             <a id="12092" href="/agda_html/Leios.Simplified.Deterministic.html#12092" class="Bound">s0</a> <a id="12095" class="Symbol">=</a> <a id="12097" class="Keyword">record</a> <a id="12104" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a></div>
<div class="line">                    <a id="12126" class="Symbol">{</a> <a id="12128" href="/agda_html/Leios.Protocol.html#1050" class="Field">FFDState</a> <a id="12137" class="Symbol">=</a> <a id="12139" href="/agda_html/Leios.Simplified.Deterministic.html#1042" class="Generalizable">ffds&#39;</a></div>
<div class="line">                    <a id="12165" class="Symbol">;</a> <a id="12167" href="/agda_html/Leios.Protocol.html#1082" class="Field">Ledger</a>   <a id="12176" class="Symbol">=</a> <a id="12178" href="/agda_html/Leios.Protocol.html#1896" class="Function">constructLedger</a> <a id="12194" href="/agda_html/Leios.Simplified.Deterministic.html#1313" class="Generalizable">rbs</a></div>
<div class="line">                    <a id="12218" class="Symbol">;</a> <a id="12220" href="/agda_html/Leios.Protocol.html#1260" class="Field">slot</a>     <a id="12229" class="Symbol">=</a> <a id="12231" href="/agda_html/Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="12235" href="/agda_html/Leios.Protocol.html#1260" class="Function">slot</a></div>
<div class="line">                    <a id="12260" class="Symbol">;</a> <a id="12262" href="/agda_html/Leios.Protocol.html#1354" class="Field">Upkeep</a>   <a id="12271" class="Symbol">=</a> <a id="12273" href="/agda_html/Class.HasEmptySet.html#287" class="Field">∅</a></div>
<div class="line">                    <a id="12295" class="Symbol">;</a> <a id="12297" href="/agda_html/Leios.Protocol.html#1389" class="Field">BaseState</a> <a id="12307" class="Symbol">=</a> <a id="12309" href="/agda_html/Leios.Simplified.Deterministic.html#1110" class="Generalizable">bs&#39;</a></div>
<div class="line">                    <a id="12333" class="Symbol">}</a> <a id="12335" href="/agda_html/Leios.Protocol.html#7915" class="Function Operator">↑</a> <a id="12337" href="/agda_html/Data.List.Base.html#10687" class="Function">L.filter</a> <a id="12346" class="Symbol">(</a><a id="12347" href="/agda_html/Leios.Protocol.html#6253" class="Function">isValid?</a> <a id="12356" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a><a id="12357" class="Symbol">)</a> <a id="12359" href="/agda_html/Leios.Simplified.Deterministic.html#1178" class="Generalizable">msgs</a></div>
<div class="line">       <a id="12371" class="Keyword">in</a></div>
<div class="line">       <a id="12381" href="/agda_html/Prelude.InferenceRules.html#56074" class="Function Operator">∙</a> <a id="12383" href="/agda_html/Leios.Protocol.html#1354" class="Function">Upkeep</a> <a id="12390" href="/agda_html/Axiom.Set.html#2587" class="Function Operator">≡ᵉ</a> <a id="12393" href="/agda_html/Leios.Simplified.html#471" class="Function">allUpkeep</a></div>
<div class="line">       <a id="12410" href="/agda_html/Prelude.InferenceRules.html#56005" class="Function Operator">∙</a> <a id="12412" href="/agda_html/Leios.Simplified.Deterministic.html#12075" class="Function">bs</a> <a id="12415" href="/agda_html/Leios.Base.html#870" class="Function Operator">B.-⟦</a> <a id="12420" href="/agda_html/Leios.Base.html#661" class="InductiveConstructor">B.FTCH-LDG</a> <a id="12431" href="/agda_html/Leios.Base.html#870" class="Function Operator">/</a> <a id="12433" href="/agda_html/Leios.Base.html#761" class="InductiveConstructor">B.BASE-LDG</a> <a id="12444" href="/agda_html/Leios.Simplified.Deterministic.html#1313" class="Generalizable">rbs</a> <a id="12448" href="/agda_html/Leios.Base.html#870" class="Function Operator">⟧⇀</a> <a id="12451" href="/agda_html/Leios.Simplified.Deterministic.html#1110" class="Generalizable">bs&#39;</a></div>
<div class="line">       <a id="12462" href="/agda_html/Prelude.InferenceRules.html#56005" class="Function Operator">∙</a> <a id="12464" href="/agda_html/Leios.Simplified.Deterministic.html#12056" class="Function">ffds</a> <a id="12469" href="/agda_html/Leios.FFD.html#562" class="Function Operator">FFD.-⟦</a> <a id="12476" href="/agda_html/Leios.FFD.html#351" class="InductiveConstructor">Fetch</a> <a id="12482" href="/agda_html/Leios.FFD.html#562" class="Function Operator">/</a> <a id="12484" href="/agda_html/Leios.FFD.html#419" class="InductiveConstructor">FetchRes</a> <a id="12493" href="/agda_html/Leios.Simplified.Deterministic.html#1178" class="Generalizable">msgs</a> <a id="12498" href="/agda_html/Leios.FFD.html#562" class="Function Operator">⟧⇀</a> <a id="12501" href="/agda_html/Leios.Simplified.Deterministic.html#1042" class="Generalizable">ffds&#39;</a></div>
<div class="line">       <a id="12514" href="/agda_html/Prelude.InferenceRules.html#56005" class="Function Operator">∙</a> <a id="12516" href="/agda_html/Leios.Simplified.Deterministic.html#12092" class="Bound">s0</a> <a id="12519" href="/agda_html/Leios.Simplified.Deterministic.html#2054" class="Datatype Operator">-⟦Base⟧⇀</a>    <a id="12531" href="/agda_html/Leios.Simplified.Deterministic.html#922" class="Generalizable">s1</a></div>
<div class="line">       <a id="12541" href="/agda_html/Prelude.InferenceRules.html#56005" class="Function Operator">∙</a> <a id="12543" href="/agda_html/Leios.Simplified.Deterministic.html#922" class="Generalizable">s1</a> <a id="12546" href="/agda_html/Leios.Simplified.Deterministic.html#4224" class="Datatype Operator">-⟦IB-Role⟧⇀</a> <a id="12558" href="/agda_html/Leios.Simplified.Deterministic.html#925" class="Generalizable">s2</a></div>
<div class="line">       <a id="12568" href="/agda_html/Prelude.InferenceRules.html#56005" class="Function Operator">∙</a> <a id="12570" href="/agda_html/Leios.Simplified.Deterministic.html#925" class="Generalizable">s2</a> <a id="12573" href="/agda_html/Leios.Simplified.Deterministic.html#6119" class="Datatype Operator">-⟦EB-Role⟧⇀</a> <a id="12585" href="/agda_html/Leios.Simplified.Deterministic.html#928" class="Generalizable">s3</a></div>
<div class="line">       <a id="12595" href="/agda_html/Prelude.InferenceRules.html#56005" class="Function Operator">∙</a> <a id="12597" href="/agda_html/Leios.Simplified.Deterministic.html#928" class="Generalizable">s3</a> <a id="12600" href="/agda_html/Leios.Simplified.Deterministic.html#8152" class="Datatype Operator">-⟦V1-Role⟧⇀</a> <a id="12612" href="/agda_html/Leios.Simplified.Deterministic.html#931" class="Generalizable">s4</a></div>
<div class="line">       <a id="12622" href="/agda_html/Prelude.InferenceRules.html#56005" class="Function Operator">∙</a> <a id="12624" href="/agda_html/Leios.Simplified.Deterministic.html#931" class="Generalizable">s4</a> <a id="12627" href="/agda_html/Leios.Simplified.Deterministic.html#10030" class="Datatype Operator">-⟦V2-Role⟧⇀</a> <a id="12639" href="/agda_html/Leios.Simplified.Deterministic.html#934" class="Generalizable">s5</a></div>
<div class="line">       <a id="12649" href="/agda_html/Prelude.InferenceRules.html#11470" class="Function Operator">───────────────────────────────────────────────────────────────────────</a></div>
<div class="line">       <a id="12728" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="12730" href="/agda_html/Leios.Simplified.Deterministic.html#11901" class="Datatype Operator">-⟦</a> <a id="12733" href="/agda_html/Leios.Protocol.html#814" class="InductiveConstructor">SLOT</a> <a id="12738" href="/agda_html/Leios.Simplified.Deterministic.html#11901" class="Datatype Operator">/</a> <a id="12740" href="/agda_html/Leios.Protocol.html#928" class="InductiveConstructor">EMPTY</a> <a id="12746" href="/agda_html/Leios.Simplified.Deterministic.html#11901" class="Datatype Operator">⟧⇀</a> <a id="12749" href="/agda_html/Leios.Simplified.Deterministic.html#934" class="Generalizable">s5</a></div>
<div class="line"></div>
<div class="line">  <a id="_-⟦_/_⟧⇀_.Ftch"></a><a id="12755" href="/agda_html/Leios.Simplified.Deterministic.html#12755" class="InductiveConstructor">Ftch</a> <a id="12760" class="Symbol">:</a></div>
<div class="line">       <a id="12769" href="/agda_html/Prelude.InferenceRules.html#43011" class="Function Operator">───────────────────────────────────────────────────</a></div>
<div class="line">       <a id="12828" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="12830" href="/agda_html/Leios.Simplified.Deterministic.html#11901" class="Datatype Operator">-⟦</a> <a id="12833" href="/agda_html/Leios.Protocol.html#838" class="InductiveConstructor">FTCH-LDG</a> <a id="12842" href="/agda_html/Leios.Simplified.Deterministic.html#11901" class="Datatype Operator">/</a> <a id="12844" href="/agda_html/Leios.Protocol.html#893" class="InductiveConstructor">FTCH-LDG</a> <a id="12853" class="Symbol">(</a><a id="12854" href="/agda_html/Leios.Protocol.html#1082" class="Field">LeiosState.Ledger</a> <a id="12872" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a><a id="12873" class="Symbol">)</a> <a id="12875" href="/agda_html/Leios.Simplified.Deterministic.html#11901" class="Datatype Operator">⟧⇀</a> <a id="12878" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a></div>
<div class="line"></div>
<div class="line">  <a id="12883" class="Comment">-- Base chain</a></div>
<div class="line">  <a id="12899" class="Comment">--</a></div>
<div class="line">  <a id="12904" class="Comment">-- Note: Submitted data to the base chain is only taken into account</a></div>
<div class="line">  <a id="12975" class="Comment">--       if the party submitting is the block producer on the base chain</a></div>
<div class="line">  <a id="13050" class="Comment">--       for the given slot</a></div>
<div class="line"></div>
<div class="line">  <a id="_-⟦_/_⟧⇀_.Base₁"></a><a id="13081" href="/agda_html/Leios.Simplified.Deterministic.html#13081" class="InductiveConstructor">Base₁</a>   <a id="13089" class="Symbol">:</a></div>
<div class="line">          <a id="13101" href="/agda_html/Prelude.InferenceRules.html#41724" class="Function Operator">──────────────────────────────────────────────────────────────</a></div>
<div class="line">          <a id="13174" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="13176" href="/agda_html/Leios.Simplified.Deterministic.html#11901" class="Datatype Operator">-⟦</a> <a id="13179" href="/agda_html/Leios.Protocol.html#764" class="InductiveConstructor">SUBMIT</a> <a id="13186" class="Symbol">(</a><a id="13187" href="/agda_html/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="13192" href="/agda_html/Leios.Simplified.Deterministic.html#1357" class="Generalizable">txs</a><a id="13195" class="Symbol">)</a> <a id="13197" href="/agda_html/Leios.Simplified.Deterministic.html#11901" class="Datatype Operator">/</a> <a id="13199" href="/agda_html/Leios.Protocol.html#928" class="InductiveConstructor">EMPTY</a> <a id="13205" href="/agda_html/Leios.Simplified.Deterministic.html#11901" class="Datatype Operator">⟧⇀</a> <a id="13208" class="Keyword">record</a> <a id="13215" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="13217" class="Symbol">{</a> <a id="13219" href="/agda_html/Leios.Protocol.html#1112" class="Field">ToPropose</a> <a id="13229" class="Symbol">=</a> <a id="13231" href="/agda_html/Leios.Simplified.Deterministic.html#1357" class="Generalizable">txs</a> <a id="13235" class="Symbol">}</a></div>
<div class="line"></div>
<div class="line">  <a id="13240" class="Comment">-- Protocol rules</a></div>
<div class="line"></div>
<div class="line"><a id="_-⟦_/_⟧ⁿᵈ⇀_"></a><a id="13259" href="/agda_html/Leios.Simplified.Deterministic.html#13259" class="Function Operator">_-⟦_/_⟧ⁿᵈ⇀_</a> <a id="13271" class="Symbol">:</a> <a id="13273" href="/agda_html/Leios.Protocol.html#959" class="Record">LeiosState</a> <a id="13284" class="Symbol">→</a> <a id="13286" href="/agda_html/Leios.Protocol.html#708" class="Datatype">LeiosInput</a> <a id="13297" class="Symbol">→</a> <a id="13299" href="/agda_html/Leios.Protocol.html#866" class="Datatype">LeiosOutput</a> <a id="13311" class="Symbol">→</a> <a id="13313" href="/agda_html/Leios.Protocol.html#959" class="Record">LeiosState</a> <a id="13324" class="Symbol">→</a> <a id="13326" href="/agda_html/Agda.Primitive.html#388" class="Primitive">Type</a></div>
<div class="line"><a id="13331" href="/agda_html/Leios.Simplified.Deterministic.html#13331" class="Bound">s</a> <a id="13333" href="/agda_html/Leios.Simplified.Deterministic.html#13259" class="Function Operator">-⟦</a> <a id="13336" href="/agda_html/Leios.Simplified.Deterministic.html#13336" class="Bound">i</a> <a id="13338" href="/agda_html/Leios.Simplified.Deterministic.html#13259" class="Function Operator">/</a> <a id="13340" href="/agda_html/Leios.Simplified.Deterministic.html#13340" class="Bound">o</a> <a id="13342" href="/agda_html/Leios.Simplified.Deterministic.html#13259" class="Function Operator">⟧ⁿᵈ⇀</a> <a id="13347" href="/agda_html/Leios.Simplified.Deterministic.html#13347" class="Bound">s&#39;</a> <a id="13350" class="Symbol">=</a> <a id="13352" href="/agda_html/Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="13357" href="/agda_html/Leios.Simplified.Deterministic.html#13331" class="Bound">s</a> <a id="13359" href="/agda_html/Leios.Simplified.html#5007" class="Datatype Operator">ND.-⟦</a> <a id="13365" href="/agda_html/Leios.Simplified.Deterministic.html#13336" class="Bound">i</a> <a id="13367" href="/agda_html/Leios.Simplified.html#5007" class="Datatype Operator">/</a> <a id="13369" href="/agda_html/Leios.Simplified.Deterministic.html#13340" class="Bound">o</a> <a id="13371" href="/agda_html/Leios.Simplified.html#5007" class="Datatype Operator">⟧⇀</a> <a id="13374" href="/agda_html/Leios.Simplified.Deterministic.html#13347" class="Bound">s&#39;</a></div>
<div class="line"></div>
<div class="line"><a id="_-⟦_/_⟧ⁿᵈ*⇀_"></a><a id="13378" href="/agda_html/Leios.Simplified.Deterministic.html#13378" class="Function Operator">_-⟦_/_⟧ⁿᵈ*⇀_</a> <a id="13391" class="Symbol">:</a> <a id="13393" href="/agda_html/Leios.Protocol.html#959" class="Record">LeiosState</a> <a id="13404" class="Symbol">→</a> <a id="13406" href="/agda_html/Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="13411" href="/agda_html/Leios.Protocol.html#708" class="Datatype">LeiosInput</a> <a id="13422" class="Symbol">→</a> <a id="13424" href="/agda_html/Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="13429" href="/agda_html/Leios.Protocol.html#866" class="Datatype">LeiosOutput</a> <a id="13441" class="Symbol">→</a> <a id="13443" href="/agda_html/Leios.Protocol.html#959" class="Record">LeiosState</a> <a id="13454" class="Symbol">→</a> <a id="13456" href="/agda_html/Agda.Primitive.html#388" class="Primitive">Type</a></div>
<div class="line"><a id="13461" href="/agda_html/Leios.Simplified.Deterministic.html#13378" class="Function Operator">_-⟦_/_⟧ⁿᵈ*⇀_</a> <a id="13474" class="Symbol">=</a> <a id="13476" href="/agda_html/StateMachine.html#741" class="Function">ReflexiveTransitiveClosure</a> <a id="13503" href="/agda_html/Leios.Simplified.Deterministic.html#13259" class="Function Operator">_-⟦_/_⟧ⁿᵈ⇀_</a></div>
<div class="line"></div>
<div class="line"><a id="13516" class="Comment">-- Key fact: stepping with the deterministic relation means we can</a></div>
<div class="line"><a id="13583" class="Comment">-- also step with the non-deterministic one</a></div>
<div class="line"><a id="13627" class="Comment">-- TODO: this is a lot like a weak simulation, can we do something prettier?</a></div>
<div class="line"><a id="-⟦/⟧⇀⇒ND"></a><a id="13704" href="/agda_html/Leios.Simplified.Deterministic.html#13704" class="Function">-⟦/⟧⇀⇒ND</a> <a id="13713" class="Symbol">:</a> <a id="13715" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="13717" href="/agda_html/Leios.Simplified.Deterministic.html#11901" class="Datatype Operator">-⟦</a> <a id="13720" href="/agda_html/Leios.Simplified.Deterministic.html#967" class="Generalizable">i</a> <a id="13722" href="/agda_html/Leios.Simplified.Deterministic.html#11901" class="Datatype Operator">/</a> <a id="13724" href="/agda_html/Leios.Simplified.Deterministic.html#1004" class="Generalizable">o</a> <a id="13726" href="/agda_html/Leios.Simplified.Deterministic.html#11901" class="Datatype Operator">⟧⇀</a> <a id="13729" href="/agda_html/Leios.Simplified.Deterministic.html#916" class="Generalizable">s&#39;</a> <a id="13732" class="Symbol">→</a> <a id="13734" href="/agda_html/Prelude.Init.html#5110" class="Function">∃₂[</a> <a id="13738" href="/agda_html/Leios.Simplified.Deterministic.html#13738" class="Bound">i</a> <a id="13740" href="/agda_html/Prelude.Init.html#5110" class="Function">,</a> <a id="13742" href="/agda_html/Leios.Simplified.Deterministic.html#13742" class="Bound">o</a> <a id="13744" href="/agda_html/Prelude.Init.html#5110" class="Function">]</a> <a id="13746" class="Symbol">(</a><a id="13747" href="/agda_html/Leios.Simplified.Deterministic.html#914" class="Generalizable">s</a> <a id="13749" href="/agda_html/Leios.Simplified.Deterministic.html#13378" class="Function Operator">-⟦</a> <a id="13752" href="/agda_html/Leios.Simplified.Deterministic.html#13738" class="Bound">i</a> <a id="13754" href="/agda_html/Leios.Simplified.Deterministic.html#13378" class="Function Operator">/</a> <a id="13756" href="/agda_html/Leios.Simplified.Deterministic.html#13742" class="Bound">o</a> <a id="13758" href="/agda_html/Leios.Simplified.Deterministic.html#13378" class="Function Operator">⟧ⁿᵈ*⇀</a> <a id="13764" href="/agda_html/Leios.Simplified.Deterministic.html#916" class="Generalizable">s&#39;</a><a id="13766" class="Symbol">)</a></div>
<div class="line"><a id="13768" href="/agda_html/Leios.Simplified.Deterministic.html#13704" class="Function">-⟦/⟧⇀⇒ND</a> <a id="13777" class="Symbol">(</a><a id="13778" href="/agda_html/Leios.Simplified.Deterministic.html#12005" class="InductiveConstructor">Slot</a> <a id="13783" class="Symbol">{</a><a id="13784" class="Argument">s</a> <a id="13786" class="Symbol">=</a> <a id="13788" href="/agda_html/Leios.Simplified.Deterministic.html#13788" class="Bound">s</a><a id="13789" class="Symbol">}</a> <a id="13791" class="Symbol">{</a><a id="13792" class="Argument">msgs</a> <a id="13797" class="Symbol">=</a> <a id="13799" href="/agda_html/Leios.Simplified.Deterministic.html#13799" class="Bound">msgs</a><a id="13803" class="Symbol">}</a> <a id="13805" class="Symbol">{</a><a id="13806" class="Argument">s1</a> <a id="13809" class="Symbol">=</a> <a id="13811" href="/agda_html/Leios.Simplified.Deterministic.html#13811" class="Bound">s1</a><a id="13813" class="Symbol">}</a> <a id="13815" class="Symbol">{</a><a id="13816" class="Argument">s2</a> <a id="13819" class="Symbol">=</a> <a id="13821" href="/agda_html/Leios.Simplified.Deterministic.html#13821" class="Bound">s2</a><a id="13823" class="Symbol">}</a> <a id="13825" class="Symbol">{</a><a id="13826" class="Argument">s3</a> <a id="13829" class="Symbol">=</a> <a id="13831" href="/agda_html/Leios.Simplified.Deterministic.html#13831" class="Bound">s3</a><a id="13833" class="Symbol">}</a> <a id="13835" class="Symbol">{</a><a id="13836" class="Argument">s4</a> <a id="13839" class="Symbol">=</a> <a id="13841" href="/agda_html/Leios.Simplified.Deterministic.html#13841" class="Bound">s4</a><a id="13843" class="Symbol">}</a> <a id="13845" href="/agda_html/Leios.Simplified.Deterministic.html#13845" class="Bound">x</a> <a id="13847" href="/agda_html/Leios.Simplified.Deterministic.html#13847" class="Bound">x₁</a> <a id="13850" href="/agda_html/Leios.Simplified.Deterministic.html#13850" class="Bound">x₂</a> <a id="13853" href="/agda_html/Leios.Simplified.Deterministic.html#13853" class="Bound">hB</a> <a id="13856" href="/agda_html/Leios.Simplified.Deterministic.html#13856" class="Bound">hIB</a> <a id="13860" href="/agda_html/Leios.Simplified.Deterministic.html#13860" class="Bound">hEB</a> <a id="13864" href="/agda_html/Leios.Simplified.Deterministic.html#13864" class="Bound">hV1</a> <a id="13868" href="/agda_html/Leios.Simplified.Deterministic.html#13868" class="Bound">hV2</a><a id="13871" class="Symbol">)</a> <a id="13873" class="Symbol">=</a> <a id="13875" href="/agda_html/Data.List.Base.html#5319" class="Function">replicate</a> <a id="13885" class="Number">6</a> <a id="13887" href="/agda_html/Leios.Protocol.html#814" class="InductiveConstructor">SLOT</a> <a id="13892" href="/agda_html/Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="13894" href="/agda_html/Data.List.Base.html#5319" class="Function">replicate</a> <a id="13904" class="Number">6</a> <a id="13906" href="/agda_html/Leios.Protocol.html#928" class="InductiveConstructor">EMPTY</a> <a id="13912" href="/agda_html/Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a></div>
<div class="line">  <a id="13916" class="Keyword">let</a></div>
<div class="line">    <a id="13924" href="/agda_html/Leios.Simplified.Deterministic.html#13924" class="Bound">s0</a> <a id="13927" class="Symbol">=</a> <a id="13929" class="Symbol">_</a></div>
<div class="line">    <a id="13935" href="/agda_html/Leios.Simplified.Deterministic.html#13935" class="Bound">upkeep≡∅</a> <a id="13944" class="Symbol">:</a> <a id="13946" href="/agda_html/Leios.Protocol.html#1354" class="Field">LeiosState.Upkeep</a> <a id="13964" href="/agda_html/Leios.Simplified.Deterministic.html#13924" class="Bound">s0</a> <a id="13967" href="/agda_html/Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="13969" href="/agda_html/Class.HasEmptySet.html#287" class="Field">∅</a></div>
<div class="line">    <a id="13975" href="/agda_html/Leios.Simplified.Deterministic.html#13935" class="Bound">upkeep≡∅</a> <a id="13984" class="Symbol">=</a> <a id="13986" href="/agda_html/Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a> <a id="13990" class="Symbol">(</a><a id="13991" href="/agda_html/Leios.Protocol.html#7992" class="Function">↑-preserves-Upkeep</a> <a id="14010" class="Symbol">{</a><a id="14011" class="Argument">x</a> <a id="14013" class="Symbol">=</a> <a id="14015" href="/agda_html/Data.List.Base.html#10687" class="Function">L.filter</a> <a id="14024" class="Symbol">(</a><a id="14025" href="/agda_html/Leios.Protocol.html#6253" class="Function">isValid?</a> <a id="14034" href="/agda_html/Leios.Simplified.Deterministic.html#13788" class="Bound">s</a><a id="14035" class="Symbol">)</a> <a id="14037" href="/agda_html/Leios.Simplified.Deterministic.html#13799" class="Bound">msgs</a><a id="14041" class="Symbol">})</a></div>
<div class="line">    <a id="14048" href="/agda_html/Leios.Simplified.Deterministic.html#14048" class="Bound">needsAllUpkeep</a> <a id="14063" class="Symbol">:</a> <a id="14065" class="Symbol">∀</a> <a id="14067" class="Symbol">{</a><a id="14068" href="/agda_html/Leios.Simplified.Deterministic.html#14068" class="Bound">u</a><a id="14069" class="Symbol">}</a> <a id="14071" class="Symbol">→</a> <a id="14073" href="/agda_html/Leios.Protocol.html#2023" class="Function">LeiosState.needsUpkeep</a> <a id="14096" href="/agda_html/Leios.Simplified.Deterministic.html#13924" class="Bound">s0</a> <a id="14099" href="/agda_html/Leios.Simplified.Deterministic.html#14068" class="Bound">u</a></div>
<div class="line">    <a id="14105" href="/agda_html/Leios.Simplified.Deterministic.html#14048" class="Bound">needsAllUpkeep</a> <a id="14120" class="Symbol">{</a><a id="14121" href="/agda_html/Leios.Simplified.Deterministic.html#14121" class="Bound">u</a><a id="14122" class="Symbol">}</a> <a id="14124" class="Symbol">=</a> <a id="14126" href="/agda_html/Relation.Binary.PropositionalEquality.Core.html#1989" class="Function">subst</a> <a id="14132" class="Symbol">(</a><a id="14133" href="/agda_html/Leios.Simplified.Deterministic.html#14121" class="Bound">u</a> <a id="14135" href="/agda_html/Class.IsSet.html#462" class="Function Operator">∉_</a><a id="14137" class="Symbol">)</a> <a id="14139" class="Symbol">(</a><a id="14140" href="/agda_html/Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a> <a id="14144" href="/agda_html/Leios.Simplified.Deterministic.html#13935" class="Bound">upkeep≡∅</a><a id="14152" class="Symbol">)</a> <a id="14154" href="/agda_html/Axiom.Set.Properties.html#5520" class="Function">Properties.∉-∅</a></div>
<div class="line">    <a id="14173" href="/agda_html/Leios.Simplified.Deterministic.html#14173" class="Bound">needsUpkeep1</a> <a id="14186" class="Symbol">:</a> <a id="14188" class="Symbol">∀</a> <a id="14190" class="Symbol">{</a><a id="14191" href="/agda_html/Leios.Simplified.Deterministic.html#14191" class="Bound">u</a><a id="14192" class="Symbol">}</a> <a id="14194" class="Symbol">→</a> <a id="14196" href="/agda_html/Leios.Simplified.Deterministic.html#14191" class="Bound">u</a> <a id="14198" href="/agda_html/Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="14200" href="/agda_html/Leios.Simplified.html#330" class="InductiveConstructor">Base</a> <a id="14205" class="Symbol">→</a> <a id="14207" href="/agda_html/Leios.Protocol.html#2023" class="Function">LeiosState.needsUpkeep</a> <a id="14230" href="/agda_html/Leios.Simplified.Deterministic.html#13811" class="Bound">s1</a> <a id="14233" href="/agda_html/Leios.Simplified.Deterministic.html#14191" class="Bound">u</a></div>
<div class="line">    <a id="14239" href="/agda_html/Leios.Simplified.Deterministic.html#14173" class="Bound">needsUpkeep1</a> <a id="14252" href="/agda_html/Leios.Simplified.Deterministic.html#14252" class="Bound">h1</a> <a id="14255" class="Symbol">=</a> <a id="14257" href="/agda_html/Leios.Simplified.Deterministic.html#3058" class="Function">Base-Upkeep</a> <a id="14269" href="/agda_html/Leios.Simplified.Deterministic.html#14252" class="Bound">h1</a> <a id="14272" href="/agda_html/Leios.Simplified.Deterministic.html#14048" class="Bound">needsAllUpkeep</a> <a id="14287" href="/agda_html/Leios.Simplified.Deterministic.html#13853" class="Bound">hB</a></div>
<div class="line">    <a id="14294" href="/agda_html/Leios.Simplified.Deterministic.html#14294" class="Bound">needsUpkeep2</a> <a id="14307" class="Symbol">:</a> <a id="14309" class="Symbol">∀</a> <a id="14311" class="Symbol">{</a><a id="14312" href="/agda_html/Leios.Simplified.Deterministic.html#14312" class="Bound">u</a><a id="14313" class="Symbol">}</a> <a id="14315" class="Symbol">→</a> <a id="14317" href="/agda_html/Leios.Simplified.Deterministic.html#14312" class="Bound">u</a> <a id="14319" href="/agda_html/Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="14321" href="/agda_html/Leios.Simplified.html#330" class="InductiveConstructor">Base</a> <a id="14326" class="Symbol">→</a> <a id="14328" href="/agda_html/Leios.Simplified.Deterministic.html#14312" class="Bound">u</a> <a id="14330" href="/agda_html/Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="14332" href="/agda_html/Leios.Simplified.html#335" class="InductiveConstructor">IB-Role</a> <a id="14340" class="Symbol">→</a> <a id="14342" href="/agda_html/Leios.Protocol.html#2023" class="Function">LeiosState.needsUpkeep</a> <a id="14365" href="/agda_html/Leios.Simplified.Deterministic.html#13821" class="Bound">s2</a> <a id="14368" href="/agda_html/Leios.Simplified.Deterministic.html#14312" class="Bound">u</a></div>
<div class="line">    <a id="14374" href="/agda_html/Leios.Simplified.Deterministic.html#14294" class="Bound">needsUpkeep2</a> <a id="14387" href="/agda_html/Leios.Simplified.Deterministic.html#14387" class="Bound">h1</a> <a id="14390" href="/agda_html/Leios.Simplified.Deterministic.html#14390" class="Bound">h2</a> <a id="14393" class="Symbol">=</a> <a id="14395" href="/agda_html/Leios.Simplified.Deterministic.html#5140" class="Function">IB-Role-Upkeep</a> <a id="14410" href="/agda_html/Leios.Simplified.Deterministic.html#14390" class="Bound">h2</a> <a id="14413" class="Symbol">(</a><a id="14414" href="/agda_html/Leios.Simplified.Deterministic.html#14173" class="Bound">needsUpkeep1</a> <a id="14427" href="/agda_html/Leios.Simplified.Deterministic.html#14387" class="Bound">h1</a><a id="14429" class="Symbol">)</a> <a id="14431" href="/agda_html/Leios.Simplified.Deterministic.html#13856" class="Bound">hIB</a></div>
<div class="line">    <a id="14439" href="/agda_html/Leios.Simplified.Deterministic.html#14439" class="Bound">needsUpkeep3</a> <a id="14452" class="Symbol">:</a> <a id="14454" class="Symbol">∀</a> <a id="14456" class="Symbol">{</a><a id="14457" href="/agda_html/Leios.Simplified.Deterministic.html#14457" class="Bound">u</a><a id="14458" class="Symbol">}</a> <a id="14460" class="Symbol">→</a> <a id="14462" href="/agda_html/Leios.Simplified.Deterministic.html#14457" class="Bound">u</a> <a id="14464" href="/agda_html/Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="14466" href="/agda_html/Leios.Simplified.html#330" class="InductiveConstructor">Base</a> <a id="14471" class="Symbol">→</a> <a id="14473" href="/agda_html/Leios.Simplified.Deterministic.html#14457" class="Bound">u</a> <a id="14475" href="/agda_html/Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="14477" href="/agda_html/Leios.Simplified.html#335" class="InductiveConstructor">IB-Role</a> <a id="14485" class="Symbol">→</a> <a id="14487" href="/agda_html/Leios.Simplified.Deterministic.html#14457" class="Bound">u</a> <a id="14489" href="/agda_html/Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="14491" href="/agda_html/Leios.Simplified.html#343" class="InductiveConstructor">EB-Role</a> <a id="14499" class="Symbol">→</a> <a id="14501" href="/agda_html/Leios.Protocol.html#2023" class="Function">LeiosState.needsUpkeep</a> <a id="14524" href="/agda_html/Leios.Simplified.Deterministic.html#13831" class="Bound">s3</a> <a id="14527" href="/agda_html/Leios.Simplified.Deterministic.html#14457" class="Bound">u</a></div>
<div class="line">    <a id="14533" href="/agda_html/Leios.Simplified.Deterministic.html#14439" class="Bound">needsUpkeep3</a> <a id="14546" href="/agda_html/Leios.Simplified.Deterministic.html#14546" class="Bound">h1</a> <a id="14549" href="/agda_html/Leios.Simplified.Deterministic.html#14549" class="Bound">h2</a> <a id="14552" href="/agda_html/Leios.Simplified.Deterministic.html#14552" class="Bound">h3</a> <a id="14555" class="Symbol">=</a> <a id="14557" href="/agda_html/Leios.Simplified.Deterministic.html#7173" class="Function">EB-Role-Upkeep</a> <a id="14572" href="/agda_html/Leios.Simplified.Deterministic.html#14552" class="Bound">h3</a> <a id="14575" class="Symbol">(</a><a id="14576" href="/agda_html/Leios.Simplified.Deterministic.html#14294" class="Bound">needsUpkeep2</a> <a id="14589" href="/agda_html/Leios.Simplified.Deterministic.html#14546" class="Bound">h1</a> <a id="14592" href="/agda_html/Leios.Simplified.Deterministic.html#14549" class="Bound">h2</a><a id="14594" class="Symbol">)</a> <a id="14596" href="/agda_html/Leios.Simplified.Deterministic.html#13860" class="Bound">hEB</a></div>
<div class="line">    <a id="14604" href="/agda_html/Leios.Simplified.Deterministic.html#14604" class="Bound">needsUpkeep4</a> <a id="14617" class="Symbol">:</a> <a id="14619" class="Symbol">∀</a> <a id="14621" class="Symbol">{</a><a id="14622" href="/agda_html/Leios.Simplified.Deterministic.html#14622" class="Bound">u</a><a id="14623" class="Symbol">}</a> <a id="14625" class="Symbol">→</a> <a id="14627" href="/agda_html/Leios.Simplified.Deterministic.html#14622" class="Bound">u</a> <a id="14629" href="/agda_html/Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="14631" href="/agda_html/Leios.Simplified.html#330" class="InductiveConstructor">Base</a> <a id="14636" class="Symbol">→</a> <a id="14638" href="/agda_html/Leios.Simplified.Deterministic.html#14622" class="Bound">u</a> <a id="14640" href="/agda_html/Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="14642" href="/agda_html/Leios.Simplified.html#335" class="InductiveConstructor">IB-Role</a> <a id="14650" class="Symbol">→</a> <a id="14652" href="/agda_html/Leios.Simplified.Deterministic.html#14622" class="Bound">u</a> <a id="14654" href="/agda_html/Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="14656" href="/agda_html/Leios.Simplified.html#343" class="InductiveConstructor">EB-Role</a> <a id="14664" class="Symbol">→</a> <a id="14666" href="/agda_html/Leios.Simplified.Deterministic.html#14622" class="Bound">u</a> <a id="14668" href="/agda_html/Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="14670" href="/agda_html/Leios.Simplified.html#351" class="InductiveConstructor">V1-Role</a> <a id="14678" class="Symbol">→</a> <a id="14680" href="/agda_html/Leios.Protocol.html#2023" class="Function">LeiosState.needsUpkeep</a> <a id="14703" href="/agda_html/Leios.Simplified.Deterministic.html#13841" class="Bound">s4</a> <a id="14706" href="/agda_html/Leios.Simplified.Deterministic.html#14622" class="Bound">u</a></div>
<div class="line">    <a id="14712" href="/agda_html/Leios.Simplified.Deterministic.html#14604" class="Bound">needsUpkeep4</a> <a id="14725" href="/agda_html/Leios.Simplified.Deterministic.html#14725" class="Bound">h1</a> <a id="14728" href="/agda_html/Leios.Simplified.Deterministic.html#14728" class="Bound">h2</a> <a id="14731" href="/agda_html/Leios.Simplified.Deterministic.html#14731" class="Bound">h3</a> <a id="14734" href="/agda_html/Leios.Simplified.Deterministic.html#14734" class="Bound">h4</a> <a id="14737" class="Symbol">=</a> <a id="14739" href="/agda_html/Leios.Simplified.Deterministic.html#9088" class="Function">V1-Role-Upkeep</a> <a id="14754" href="/agda_html/Leios.Simplified.Deterministic.html#14734" class="Bound">h4</a> <a id="14757" class="Symbol">(</a><a id="14758" href="/agda_html/Leios.Simplified.Deterministic.html#14439" class="Bound">needsUpkeep3</a> <a id="14771" href="/agda_html/Leios.Simplified.Deterministic.html#14725" class="Bound">h1</a> <a id="14774" href="/agda_html/Leios.Simplified.Deterministic.html#14728" class="Bound">h2</a> <a id="14777" href="/agda_html/Leios.Simplified.Deterministic.html#14731" class="Bound">h3</a><a id="14779" class="Symbol">)</a> <a id="14781" href="/agda_html/Leios.Simplified.Deterministic.html#13864" class="Bound">hV1</a></div>
<div class="line">  <a id="14787" class="Keyword">in</a> <a id="14790" class="Symbol">(</a><a id="14791" href="/agda_html/StateMachine.html#570" class="InductiveConstructor">BS-ind</a> <a id="14798" class="Symbol">(</a><a id="14799" href="/agda_html/Leios.Simplified.html#5421" class="InductiveConstructor">ND.Slot</a> <a id="14807" href="/agda_html/Leios.Simplified.Deterministic.html#13845" class="Bound">x</a> <a id="14809" href="/agda_html/Leios.Simplified.Deterministic.html#13847" class="Bound">x₁</a> <a id="14812" href="/agda_html/Leios.Simplified.Deterministic.html#13850" class="Bound">x₂</a><a id="14814" class="Symbol">)</a> <a id="14816" href="/agda_html/Function.Base.html#1974" class="Function Operator">$</a></div>
<div class="line">      <a id="14824" href="/agda_html/StateMachine.html#570" class="InductiveConstructor">BS-ind</a> <a id="14831" class="Symbol">(</a><a id="14832" href="/agda_html/Leios.Simplified.Deterministic.html#2828" class="Function">Base⇒ND</a> <a id="14840" class="Symbol">{</a><a id="14841" class="Argument">s</a> <a id="14843" class="Symbol">=</a> <a id="14845" href="/agda_html/Leios.Simplified.Deterministic.html#13924" class="Bound">s0</a><a id="14847" class="Symbol">}</a> <a id="14849" href="/agda_html/Leios.Simplified.Deterministic.html#14048" class="Bound">needsAllUpkeep</a> <a id="14864" href="/agda_html/Leios.Simplified.Deterministic.html#13853" class="Bound">hB</a><a id="14866" class="Symbol">)</a> <a id="14868" href="/agda_html/Function.Base.html#1974" class="Function Operator">$</a></div>
<div class="line">      <a id="14876" href="/agda_html/StateMachine.html#570" class="InductiveConstructor">BS-ind</a> <a id="14883" class="Symbol">(</a><a id="14884" href="/agda_html/Leios.Simplified.Deterministic.html#4930" class="Function">IB-Role⇒ND</a> <a id="14895" class="Symbol">(</a><a id="14896" href="/agda_html/Leios.Simplified.Deterministic.html#14173" class="Bound">needsUpkeep1</a> <a id="14909" class="Symbol">(λ</a> <a id="14912" class="Symbol">()))</a> <a id="14917" href="/agda_html/Leios.Simplified.Deterministic.html#13856" class="Bound">hIB</a><a id="14920" class="Symbol">)</a> <a id="14922" href="/agda_html/Function.Base.html#1974" class="Function Operator">$</a></div>
<div class="line">      <a id="14930" href="/agda_html/StateMachine.html#570" class="InductiveConstructor">BS-ind</a> <a id="14937" class="Symbol">(</a><a id="14938" href="/agda_html/Leios.Simplified.Deterministic.html#6963" class="Function">EB-Role⇒ND</a> <a id="14949" class="Symbol">(</a><a id="14950" href="/agda_html/Leios.Simplified.Deterministic.html#14294" class="Bound">needsUpkeep2</a> <a id="14963" class="Symbol">(λ</a> <a id="14966" class="Symbol">())</a> <a id="14970" class="Symbol">(λ</a> <a id="14973" class="Symbol">()))</a> <a id="14978" href="/agda_html/Leios.Simplified.Deterministic.html#13860" class="Bound">hEB</a><a id="14981" class="Symbol">)</a> <a id="14983" href="/agda_html/Function.Base.html#1974" class="Function Operator">$</a></div>
<div class="line">      <a id="14991" href="/agda_html/StateMachine.html#570" class="InductiveConstructor">BS-ind</a> <a id="14998" class="Symbol">(</a><a id="14999" href="/agda_html/Leios.Simplified.Deterministic.html#8878" class="Function">V1-Role⇒ND</a> <a id="15010" class="Symbol">(</a><a id="15011" href="/agda_html/Leios.Simplified.Deterministic.html#14439" class="Bound">needsUpkeep3</a> <a id="15024" class="Symbol">(λ</a> <a id="15027" class="Symbol">())</a> <a id="15031" class="Symbol">(λ</a> <a id="15034" class="Symbol">())</a> <a id="15038" class="Symbol">(λ</a> <a id="15041" class="Symbol">()))</a> <a id="15046" href="/agda_html/Leios.Simplified.Deterministic.html#13864" class="Bound">hV1</a><a id="15049" class="Symbol">)</a> <a id="15051" href="/agda_html/Function.Base.html#1974" class="Function Operator">$</a></div>
<div class="line">      <a id="15059" href="/agda_html/StateMachine.html#1074" class="Function">STS⇒RTC</a> <a id="15067" class="Symbol">(</a><a id="15068" href="/agda_html/Leios.Simplified.Deterministic.html#10749" class="Function">V2-Role⇒ND</a> <a id="15079" class="Symbol">(</a><a id="15080" href="/agda_html/Leios.Simplified.Deterministic.html#14604" class="Bound">needsUpkeep4</a> <a id="15093" class="Symbol">(λ</a> <a id="15096" class="Symbol">())</a> <a id="15100" class="Symbol">(λ</a> <a id="15103" class="Symbol">())</a> <a id="15107" class="Symbol">(λ</a> <a id="15110" class="Symbol">())</a> <a id="15114" class="Symbol">(λ</a> <a id="15117" class="Symbol">()))</a> <a id="15122" href="/agda_html/Leios.Simplified.Deterministic.html#13868" class="Bound">hV2</a><a id="15125" class="Symbol">))</a></div>
<div class="line"><a id="15128" href="/agda_html/Leios.Simplified.Deterministic.html#13704" class="Function">-⟦/⟧⇀⇒ND</a> <a id="15137" href="/agda_html/Leios.Simplified.Deterministic.html#12755" class="InductiveConstructor">Ftch</a> <a id="15142" class="Symbol">=</a> <a id="15144" class="Symbol">_</a> <a id="15146" href="/agda_html/Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15148" class="Symbol">_</a> <a id="15150" href="/agda_html/Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15152" href="/agda_html/StateMachine.html#1074" class="Function">STS⇒RTC</a> <a id="15160" href="/agda_html/Leios.Simplified.html#5963" class="InductiveConstructor">Ftch</a></div>
<div class="line"><a id="15165" href="/agda_html/Leios.Simplified.Deterministic.html#13704" class="Function">-⟦/⟧⇀⇒ND</a> <a id="15174" href="/agda_html/Leios.Simplified.Deterministic.html#13081" class="InductiveConstructor">Base₁</a> <a id="15180" class="Symbol">=</a> <a id="15182" class="Symbol">_</a> <a id="15184" href="/agda_html/Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15186" class="Symbol">_</a> <a id="15188" href="/agda_html/Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15190" href="/agda_html/StateMachine.html#1074" class="Function">STS⇒RTC</a> <a id="15198" href="/agda_html/Leios.Simplified.html#6299" class="InductiveConstructor">Base₁</a></div>
<div class="line"></div>
<div class="line"><a id="15205" class="Keyword">open</a> <a id="15210" href="/agda_html/Class.Computational22.html#445" class="Module">Computational22</a> <a id="15226" class="Symbol">⦃...⦄</a></div>
<div class="line"></div>
<div class="line"><a id="15233" class="Keyword">module</a> <a id="15240" href="/agda_html/Leios.Simplified.Deterministic.html#15240" class="Module">_</a> <a id="15242" class="Symbol">⦃</a> <a id="15244" href="/agda_html/Leios.Simplified.Deterministic.html#15244" class="Bound">Computational-B</a> <a id="15260" class="Symbol">:</a> <a id="15262" href="/agda_html/Class.Computational22.html#445" class="Record">Computational22</a> <a id="15278" href="/agda_html/Leios.Base.html#870" class="Function Operator">B._-⟦_/_⟧⇀_</a> <a id="15290" href="/agda_html/Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="15297" class="Symbol">⦄</a></div>
<div class="line">         <a id="15308" class="Symbol">⦃</a> <a id="15310" href="/agda_html/Leios.Simplified.Deterministic.html#15310" class="Bound">Computational-FFD</a> <a id="15328" class="Symbol">:</a> <a id="15330" href="/agda_html/Class.Computational22.html#445" class="Record">Computational22</a> <a id="15346" href="/agda_html/Leios.FFD.html#562" class="Function Operator">FFD._-⟦_/_⟧⇀_</a> <a id="15360" href="/agda_html/Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="15367" class="Symbol">⦄</a> <a id="15369" class="Keyword">where</a></div>
<div class="line"></div>
<div class="line">  <a id="15378" class="Keyword">instance</a></div>
<div class="line">    <a id="15391" href="/agda_html/Leios.Simplified.Deterministic.html#15391" class="Function">Computational--⟦/⟧⇀</a> <a id="15411" class="Symbol">:</a> <a id="15413" href="/agda_html/Class.Computational22.html#445" class="Record">Computational22</a> <a id="15429" href="/agda_html/Leios.Simplified.Deterministic.html#11901" class="Datatype Operator">_-⟦_/_⟧⇀_</a> <a id="15439" href="/agda_html/Agda.Builtin.String.html#335" class="Postulate">String</a></div>
<div class="line">    <a id="15450" href="/agda_html/Leios.Simplified.Deterministic.html#15391" class="Function">Computational--⟦/⟧⇀</a> <a id="15470" class="Symbol">.</a><a id="15471" href="/agda_html/Class.Computational22.html#527" class="Field">computeProof</a> <a id="15484" href="/agda_html/Leios.Simplified.Deterministic.html#15484" class="Bound">s</a> <a id="15486" class="Symbol">(</a><a id="15487" href="/agda_html/Leios.Protocol.html#734" class="InductiveConstructor">INIT</a> <a id="15492" href="/agda_html/Leios.Simplified.Deterministic.html#15492" class="Bound">x</a><a id="15493" class="Symbol">)</a> <a id="15495" class="Symbol">=</a> <a id="15497" href="/agda_html/Class.Computational.html#606" class="InductiveConstructor">failure</a> <a id="15505" class="String">&quot;No handling of INIT here&quot;</a></div>
<div class="line">    <a id="15536" href="/agda_html/Leios.Simplified.Deterministic.html#15391" class="Function">Computational--⟦/⟧⇀</a> <a id="15556" class="Symbol">.</a><a id="15557" href="/agda_html/Class.Computational22.html#527" class="Field">computeProof</a> <a id="15570" href="/agda_html/Leios.Simplified.Deterministic.html#15570" class="Bound">s</a> <a id="15572" class="Symbol">(</a><a id="15573" href="/agda_html/Leios.Protocol.html#764" class="InductiveConstructor">SUBMIT</a> <a id="15580" class="Symbol">(</a><a id="15581" href="/agda_html/Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="15586" href="/agda_html/Leios.Simplified.Deterministic.html#15586" class="Bound">eb</a><a id="15588" class="Symbol">))</a> <a id="15591" class="Symbol">=</a> <a id="15593" href="/agda_html/Class.Computational.html#606" class="InductiveConstructor">failure</a> <a id="15601" class="String">&quot;Cannot submit EB here&quot;</a></div>
<div class="line">    <a id="15629" href="/agda_html/Leios.Simplified.Deterministic.html#15391" class="Function">Computational--⟦/⟧⇀</a> <a id="15649" class="Symbol">.</a><a id="15650" href="/agda_html/Class.Computational22.html#527" class="Field">computeProof</a> <a id="15663" href="/agda_html/Leios.Simplified.Deterministic.html#15663" class="Bound">s</a> <a id="15665" class="Symbol">(</a><a id="15666" href="/agda_html/Leios.Protocol.html#764" class="InductiveConstructor">SUBMIT</a> <a id="15673" class="Symbol">(</a><a id="15674" href="/agda_html/Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="15679" href="/agda_html/Leios.Simplified.Deterministic.html#15679" class="Bound">txs</a><a id="15682" class="Symbol">))</a> <a id="15685" class="Symbol">=</a> <a id="15687" href="/agda_html/Class.Computational.html#566" class="InductiveConstructor">success</a> <a id="15695" class="Symbol">(</a><a id="15696" href="/agda_html/Data.Product.Base.html#1932" class="Function Operator">-,</a> <a id="15699" href="/agda_html/Leios.Simplified.Deterministic.html#13081" class="InductiveConstructor">Base₁</a><a id="15704" class="Symbol">)</a></div>
<div class="line">    <a id="15710" href="/agda_html/Leios.Simplified.Deterministic.html#15391" class="Function">Computational--⟦/⟧⇀</a> <a id="15730" class="Symbol">.</a><a id="15731" href="/agda_html/Class.Computational22.html#527" class="Field">computeProof</a> <a id="15744" href="/agda_html/Leios.Simplified.Deterministic.html#15744" class="Bound">s*</a> <a id="15747" href="/agda_html/Leios.Protocol.html#814" class="InductiveConstructor">SLOT</a> <a id="15752" class="Symbol">=</a> <a id="15754" class="Keyword">let</a> <a id="15758" class="Keyword">open</a> <a id="15763" href="/agda_html/Leios.Protocol.html#959" class="Module">LeiosState</a> <a id="15774" href="/agda_html/Leios.Simplified.Deterministic.html#15744" class="Bound">s*</a> <a id="15777" class="Keyword">in</a></div>
<div class="line">      <a id="15786" href="/agda_html/Function.Base.html#4042" class="Function Operator">case</a> <a id="15791" class="Symbol">(</a><a id="15792" href="/agda_html/Class.Decidable.Core.html#461" class="Function Operator">¿</a> <a id="15794" href="/agda_html/Leios.Protocol.html#1354" class="Field">Upkeep</a> <a id="15801" href="/agda_html/Axiom.Set.html#2587" class="Function Operator">≡ᵉ</a> <a id="15804" href="/agda_html/Leios.Simplified.html#471" class="Function">allUpkeep</a> <a id="15814" href="/agda_html/Class.Decidable.Core.html#461" class="Function Operator">¿</a> <a id="15816" href="/agda_html/Data.Product.Base.html#1686" class="Function Operator">,′</a> <a id="15819" href="/agda_html/Class.Computational22.html#527" class="Field">computeProof</a> <a id="15832" href="/agda_html/Leios.Protocol.html#1389" class="Field">BaseState</a> <a id="15842" href="/agda_html/Leios.Base.html#661" class="InductiveConstructor">B.FTCH-LDG</a> <a id="15853" href="/agda_html/Data.Product.Base.html#1686" class="Function Operator">,′</a> <a id="15856" href="/agda_html/Class.Computational22.html#527" class="Field">computeProof</a> <a id="15869" href="/agda_html/Leios.Protocol.html#1050" class="Field">FFDState</a> <a id="15878" href="/agda_html/Leios.FFD.html#351" class="InductiveConstructor">FFD.Fetch</a><a id="15887" class="Symbol">)</a> <a id="15889" href="/agda_html/Function.Base.html#4042" class="Function Operator">of</a> <a id="15892" class="Symbol">λ</a> <a id="15894" class="Keyword">where</a></div>
<div class="line">        <a id="15908" class="Symbol">(</a><a id="15909" href="/agda_html/Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="15913" href="/agda_html/Leios.Simplified.Deterministic.html#15913" class="Bound">p</a> <a id="15915" href="/agda_html/Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15917" href="/agda_html/Class.Computational.html#566" class="InductiveConstructor">success</a> <a id="15925" class="Symbol">((</a><a id="15927" href="/agda_html/Leios.Base.html#761" class="InductiveConstructor">B.BASE-LDG</a> <a id="15938" href="/agda_html/Leios.Simplified.Deterministic.html#15938" class="Bound">l</a> <a id="15940" href="/agda_html/Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15942" href="/agda_html/Leios.Simplified.Deterministic.html#15942" class="Bound">bs</a><a id="15944" class="Symbol">)</a> <a id="15946" href="/agda_html/Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15948" href="/agda_html/Leios.Simplified.Deterministic.html#15948" class="Bound">p₁</a><a id="15950" class="Symbol">)</a> <a id="15952" href="/agda_html/Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15954" href="/agda_html/Class.Computational.html#566" class="InductiveConstructor">success</a> <a id="15962" class="Symbol">((</a><a id="15964" href="/agda_html/Leios.FFD.html#419" class="InductiveConstructor">FFD.FetchRes</a> <a id="15977" href="/agda_html/Leios.Simplified.Deterministic.html#15977" class="Bound">msgs</a> <a id="15982" href="/agda_html/Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15984" href="/agda_html/Leios.Simplified.Deterministic.html#15984" class="Bound">ffds</a><a id="15988" class="Symbol">)</a> <a id="15990" href="/agda_html/Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15992" href="/agda_html/Leios.Simplified.Deterministic.html#15992" class="Bound">p₂</a><a id="15994" class="Symbol">))</a> <a id="15997" class="Symbol">→</a></div>
<div class="line">          <a id="16009" href="/agda_html/Class.Computational.html#566" class="InductiveConstructor">success</a> <a id="16017" class="Symbol">((_</a> <a id="16021" href="/agda_html/Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16023" class="Symbol">(</a><a id="16024" href="/agda_html/Leios.Simplified.Deterministic.html#12005" class="InductiveConstructor">Slot</a> <a id="16029" href="/agda_html/Leios.Simplified.Deterministic.html#15913" class="Bound">p</a> <a id="16031" href="/agda_html/Leios.Simplified.Deterministic.html#15948" class="Bound">p₁</a> <a id="16034" href="/agda_html/Leios.Simplified.Deterministic.html#15992" class="Bound">p₂</a> <a id="16037" class="Symbol">(</a><a id="16038" href="/agda_html/Data.Product.Base.html#650" class="Field">proj₂</a> <a id="16044" href="/agda_html/Leios.Simplified.Deterministic.html#3498" class="Function">Base-total</a><a id="16054" class="Symbol">)</a> <a id="16056" class="Symbol">(</a><a id="16057" href="/agda_html/Data.Product.Base.html#650" class="Field">proj₂</a> <a id="16063" href="/agda_html/Leios.Simplified.Deterministic.html#5610" class="Function">IB-Role-total</a><a id="16076" class="Symbol">)</a> <a id="16078" class="Symbol">(</a><a id="16079" href="/agda_html/Data.Product.Base.html#650" class="Field">proj₂</a> <a id="16085" href="/agda_html/Leios.Simplified.Deterministic.html#7643" class="Function">EB-Role-total</a><a id="16098" class="Symbol">)</a> <a id="16100" class="Symbol">(</a><a id="16101" href="/agda_html/Data.Product.Base.html#650" class="Field">proj₂</a> <a id="16107" href="/agda_html/Leios.Simplified.Deterministic.html#9558" class="Function">V1-Role-total</a><a id="16120" class="Symbol">)</a> <a id="16122" class="Symbol">(</a><a id="16123" href="/agda_html/Data.Product.Base.html#650" class="Field">proj₂</a> <a id="16129" href="/agda_html/Leios.Simplified.Deterministic.html#11429" class="Function">V2-Role-total</a><a id="16142" class="Symbol">))))</a></div>
<div class="line">        <a id="16155" class="CatchallClause Symbol">(</a><a id="16156" href="/agda_html/Relation.Nullary.Decidable.Core.html#1994" class="CatchallClause InductiveConstructor">yes</a><a id="16159" class="CatchallClause"> </a><a id="16160" href="/agda_html/Leios.Simplified.Deterministic.html#16160" class="CatchallClause Bound">p</a><a id="16161" class="CatchallClause"> </a><a id="16162" href="/agda_html/Agda.Builtin.Sigma.html#235" class="CatchallClause InductiveConstructor Operator">,</a><a id="16163" class="CatchallClause"> </a><a id="16164" class="CatchallClause Symbol">_</a><a id="16165" class="CatchallClause"> </a><a id="16166" href="/agda_html/Agda.Builtin.Sigma.html#235" class="CatchallClause InductiveConstructor Operator">,</a><a id="16167" class="CatchallClause"> </a><a id="16168" class="CatchallClause Symbol">_)</a> <a id="16171" class="Symbol">→</a> <a id="16173" href="/agda_html/Class.Computational.html#606" class="InductiveConstructor">failure</a> <a id="16181" class="String">&quot;Subsystem failed&quot;</a></div>
<div class="line">        <a id="16208" class="Symbol">(</a><a id="16209" href="/agda_html/Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="16212" href="/agda_html/Leios.Simplified.Deterministic.html#16212" class="Bound">¬p</a> <a id="16215" href="/agda_html/Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16217" class="Symbol">_)</a> <a id="16220" class="Symbol">→</a> <a id="16222" href="/agda_html/Class.Computational.html#606" class="InductiveConstructor">failure</a> <a id="16230" class="String">&quot;Upkeep incorrect&quot;</a></div>
<div class="line">    <a id="16253" href="/agda_html/Leios.Simplified.Deterministic.html#15391" class="Function">Computational--⟦/⟧⇀</a> <a id="16273" class="Symbol">.</a><a id="16274" href="/agda_html/Class.Computational22.html#527" class="Field">computeProof</a> <a id="16287" href="/agda_html/Leios.Simplified.Deterministic.html#16287" class="Bound">s</a> <a id="16289" href="/agda_html/Leios.Protocol.html#838" class="InductiveConstructor">FTCH-LDG</a> <a id="16298" class="Symbol">=</a> <a id="16300" href="/agda_html/Class.Computational.html#566" class="InductiveConstructor">success</a> <a id="16308" class="Symbol">(</a><a id="16309" href="/agda_html/Data.Product.Base.html#1932" class="Function Operator">-,</a> <a id="16312" href="/agda_html/Leios.Simplified.Deterministic.html#12755" class="InductiveConstructor">Ftch</a><a id="16316" class="Symbol">)</a></div>
<div class="line">    <a id="16322" href="/agda_html/Leios.Simplified.Deterministic.html#15391" class="Function">Computational--⟦/⟧⇀</a> <a id="16342" class="Symbol">.</a><a id="16343" href="/agda_html/Class.Computational22.html#728" class="Field">completeness</a> <a id="16356" class="Symbol">=</a> <a id="16358" class="Hole">{!!}</a></div>
<div class="line"></div></pre></main></div></body></html>