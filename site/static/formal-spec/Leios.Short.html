<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang=""><head><script src="themeInit.js"></script>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>Leios.Short</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="Agda.css">
<link rel="stylesheet" href="base.css"><link rel="stylesheet" href="search.css"><link rel="stylesheet" href="typePreview.css"></head>
<body><header><div class="header-left"><button class="menu-toggle" title="Toggle navigation menu" aria-label="Toggle navigation menu">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <path fill="currentColor" d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"></path>
      </svg>
    </button><a href="/formal-spec/" class="back-button">← Back</a></div><div class="header-right"><a href="https://github.com/input-output-hk/ouroboros-leios-formal-spec" class="github-link" target="_blank" rel="noopener noreferrer" title="View on GitHub">
        <svg viewBox="0 0 24 24" width="24" height="24" class="github-icon">
          <path fill="currentColor" d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path>
        </svg>
      </a><button class="theme-toggle" title="Toggle theme">
      <span class="light-icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path>
        </svg>
      </span>
      <span class="dark-icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path>
        </svg>
      </span>
    </button></div></header><div class="main-wrapper"><aside class="sidebar"><h3 class="modules-header">Modules</h3><h4 class="module-group-header">Leios</h4><ul class="module-list"><li class="module-item"><a href="Leios.Abstract.html" class="module-link">Abstract</a></li><li class="module-item"><a href="Leios.Base.html" class="module-link">Base</a></li><li class="module-item"><a href="Leios.Blocks.html" class="module-link">Blocks</a></li><li class="module-item"><a href="Leios.Config.html" class="module-link">Config</a></li><li class="module-item"><a href="Leios.Defaults.html" class="module-link">Defaults</a></li><li class="module-item"><a href="Leios.FFD.html" class="module-link">FFD</a></li><li class="module-item"><a href="Leios.Foreign.BaseTypes.html" class="module-link">Foreign.BaseTypes</a></li><li class="module-item"><a href="Leios.Foreign.HsTypes.html" class="module-link">Foreign.HsTypes</a></li><li class="module-item"><a href="Leios.Foreign.Types.html" class="module-link">Foreign.Types</a></li><li class="module-item"><a href="Leios.Foreign.Util.html" class="module-link">Foreign.Util</a></li><li class="module-item"><a href="Leios.KeyRegistration.html" class="module-link">KeyRegistration</a></li><li class="module-item"><a href="Leios.Network.html" class="module-link">Network</a></li><li class="module-item"><a href="Leios.Prelude.html" class="module-link">Prelude</a></li><li class="module-item"><a href="Leios.Protocol.html" class="module-link">Protocol</a></li><li class="module-item"><a href="Leios.Short.html" class="module-link">Short</a></li><li class="module-item"><a href="Leios.Short.Trace.Verifier.html" class="module-link">Short.Trace.Verifier</a></li><li class="module-item"><a href="Leios.Simplified.html" class="module-link">Simplified</a></li><li class="module-item"><a href="Leios.Simplified.Deterministic.html" class="module-link">Simplified.Deterministic</a></li><li class="module-item"><a href="Leios.SpecStructure.html" class="module-link">SpecStructure</a></li><li class="module-item"><a href="Leios.Traces.html" class="module-link">Traces</a></li><li class="module-item"><a href="Leios.Voting.html" class="module-link">Voting</a></li><li class="module-item"><a href="Leios.VRF.html" class="module-link">VRF</a></li></ul><h4 class="module-group-header">Network</h4><ul class="module-list"><li class="module-item"><a href="Network.BasicBroadcast.html" class="module-link">BasicBroadcast</a></li><li class="module-item"><a href="Network.Leios.html" class="module-link">Leios</a></li></ul></aside><div class="main-content">
<h2 id="short-pipeline-leios">Short-Pipeline Leios</h2>
<!--
<pre class="Agda"><a id="39" class="Symbol">{-#</a> <a id="43" class="Keyword">OPTIONS</a> <a id="51" class="Pragma">--safe</a> <a id="58" class="Symbol">#-}</a>
<a id="62" class="Keyword">open</a> <a id="67" class="Keyword">import</a> <a id="74" href="Leios.Prelude.html" class="Module">Leios.Prelude</a> <a id="88" class="Keyword">hiding</a> <a id="95" class="Symbol">(</a><a id="96" href="Function.Base.html#704" class="Function">id</a><a id="98" class="Symbol">)</a>
<a id="100" class="Keyword">open</a> <a id="105" class="Keyword">import</a> <a id="112" href="Leios.FFD.html" class="Module">Leios.FFD</a>
<a id="122" class="Keyword">open</a> <a id="127" class="Keyword">import</a> <a id="134" href="Leios.SpecStructure.html" class="Module">Leios.SpecStructure</a>

<a id="155" class="Keyword">open</a> <a id="160" class="Keyword">import</a> <a id="167" href="Tactic.Defaults.html" class="Module">Tactic.Defaults</a>
<a id="183" class="Keyword">open</a> <a id="188" class="Keyword">import</a> <a id="195" href="Tactic.Derive.DecEq.html" class="Module">Tactic.Derive.DecEq</a>

<a id="216" class="Keyword">module</a> <a id="223" href="Leios.Short.html" class="Module">Leios.Short</a> <a id="235" class="Symbol">(</a><a id="236" href="Leios.Short.html#236" class="Bound">⋯</a> <a id="238" class="Symbol">:</a> <a id="240" href="Leios.SpecStructure.html#286" class="Record">SpecStructure</a> <a id="254" class="Number">1</a><a id="255" class="Symbol">)</a>
  <a id="259" class="Symbol">(</a><a id="260" class="Keyword">let</a> <a id="264" class="Keyword">open</a> <a id="269" href="Leios.SpecStructure.html#286" class="Module">SpecStructure</a> <a id="283" href="Leios.Short.html#236" class="Bound">⋯</a> <a id="285" class="Keyword">renaming</a> <a id="294" class="Symbol">(</a><a id="295" href="Leios.Voting.html#203" class="Function">isVoteCertified</a> <a id="311" class="Symbol">to</a> <a id="314" class="Function">isVoteCertified&#39;</a><a id="330" class="Symbol">))</a> <a id="333" class="Keyword">where</a>
</pre>-->
<p>This document is a specification of Short-Pipeline Leios, usually
abbreviated as Short Leios. On a high level, the pipeline looks like
this:</p>
<ol type="1">
<li>If elected, propose IB</li>
<li>Wait</li>
<li>Wait</li>
<li>If elected, propose EB</li>
<li>If elected, vote If elected, propose RB</li>
</ol>
<h3 id="upkeep">Upkeep</h3>
<p>A node that never produces a block even though it could is not
supposed to be an honest node, and we prevent that by tracking whether a
node has checked if it can make a block in a particular slot.
<code>LeiosState</code> contains a set of <code>SlotUpkeep</code> and we
ensure that this set contains all elements before we can advance to the
next slot, resetting this field to the empty set.</p>
<pre class="Agda has-copy-button" id="B1"><div class="code-container"><div class="line-numbers"><a href="#B1-L1" id="B1-L1" class="line-number" data-line-number="1" data-block-id="B1">1</a><a href="#B1-L2" id="B1-L2" class="line-number" data-line-number="2" data-block-id="B1">2</a><a href="#B1-L3" id="B1-L3" class="line-number" data-line-number="3" data-block-id="B1">3</a><a href="#B1-L4" id="B1-L4" class="line-number" data-line-number="4" data-block-id="B1">4</a></div><div class="code-content"><div id="B1-LC1" class="code-line"><a id="997" class="Keyword">data</a> <a id="SlotUpkeep"></a><a id="1002" href="Leios.Short.html#B1-L1" class="Datatype type-hoverable" data-original-href="Leios.Short.html#1002" data-hoverable="true" data-position="1002" data-target-file="Leios.Short.html">SlotUpkeep</a> <a id="1013" class="Symbol">:</a> <a id="1015" href="Agda.Primitive.html#B1-L14" class="Primitive type-hoverable" data-original-href="Agda.Primitive.html#388" data-hoverable="true" data-position="388" data-target-file="Agda.Primitive.html">Type</a> <a id="1020" class="Keyword">where</a></div><div id="B1-LC2" class="code-line">  <a id="SlotUpkeep.Base"></a><a id="1028" href="Leios.Short.html#B1-L2" class="InductiveConstructor type-hoverable" data-original-href="Leios.Short.html#1028" data-hoverable="true" data-position="1028" data-target-file="Leios.Short.html">Base</a> <a id="SlotUpkeep.IB-Role"></a><a id="1033" href="Leios.Short.html#B1-L2" class="InductiveConstructor type-hoverable" data-original-href="Leios.Short.html#1033" data-hoverable="true" data-position="1033" data-target-file="Leios.Short.html">IB-Role</a> <a id="SlotUpkeep.EB-Role"></a><a id="1041" href="Leios.Short.html#B1-L2" class="InductiveConstructor type-hoverable" data-original-href="Leios.Short.html#1041" data-hoverable="true" data-position="1041" data-target-file="Leios.Short.html">EB-Role</a> <a id="1049" class="Symbol">:</a> <a id="1051" href="Leios.Short.html#B1-L1" class="Datatype type-hoverable" data-original-href="Leios.Short.html#1002" data-hoverable="true" data-position="1002" data-target-file="Leios.Short.html">SlotUpkeep</a></div><div id="B1-LC3" class="code-line">&nbsp;</div><div id="B1-LC4" class="code-line"><a id="1063" class="Keyword">unquoteDecl</a> <a id="DecEq-SlotUpkeep"></a><a id="1075" href="Leios.Short.html#B1-L4" class="Function type-hoverable" data-original-href="Leios.Short.html#1075" data-hoverable="true" data-position="1075" data-target-file="Leios.Short.html">DecEq-SlotUpkeep</a> <a id="1092" class="Symbol">=</a> <a id="1094" href="Tactic.Derive.DecEq.html#B1-L94" class="Function type-hoverable" data-original-href="Tactic.Derive.DecEq.html#3512" data-hoverable="true" data-position="3512" data-target-file="Tactic.Derive.DecEq.html">derive-DecEq</a> <a id="1107" class="Symbol">((</a><a id="1109" class="Keyword">quote</a> <a id="1115" href="Leios.Short.html#B1-L1" class="Datatype type-hoverable" data-original-href="Leios.Short.html#1002" data-hoverable="true" data-position="1002" data-target-file="Leios.Short.html">SlotUpkeep</a> <a id="1126" href="Agda.Builtin.Sigma.html#B1-L8" class="InductiveConstructor Operator type-hoverable" data-original-href="Agda.Builtin.Sigma.html#235" data-hoverable="true" data-position="235" data-target-file="Agda.Builtin.Sigma.html">,</a> <a id="1128" href="Leios.Short.html#B1-L4" class="Function type-hoverable" data-original-href="Leios.Short.html#1075" data-hoverable="true" data-position="1075" data-target-file="Leios.Short.html">DecEq-SlotUpkeep</a><a id="1144" class="Symbol">)</a> <a id="1146" href="Agda.Builtin.List.html#B1-L8" class="InductiveConstructor Operator type-hoverable" data-original-href="Agda.Builtin.List.html#199" data-hoverable="true" data-position="199" data-target-file="Agda.Builtin.List.html">∷</a> <a id="1148" href="Agda.Builtin.List.html#B1-L7" class="InductiveConstructor type-hoverable" data-original-href="Agda.Builtin.List.html#184" data-hoverable="true" data-position="184" data-target-file="Agda.Builtin.List.html">[]</a><a id="1150" class="Symbol">)</a></div></div></div><button class="copy-code-button" title="Copy code">
        <svg width="16" height="16" viewBox="0 0 16 16">
          <path fill="currentColor" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path fill="currentColor" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
        </svg>
      </button></pre>
<!--
<pre class="Agda"><a id="1169" class="Keyword">data</a> <a id="StageUpkeep"></a><a id="1174" href="Leios.Short.html#1174" class="Datatype">StageUpkeep</a> <a id="1186" class="Symbol">:</a> <a id="1188" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1193" class="Keyword">where</a>
  <a id="StageUpkeep.VT-Role"></a><a id="1201" href="Leios.Short.html#1201" class="InductiveConstructor">VT-Role</a> <a id="1209" class="Symbol">:</a> <a id="1211" href="Leios.Short.html#1174" class="Datatype">StageUpkeep</a>

<a id="1224" class="Keyword">unquoteDecl</a> <a id="DecEq-StageUpkeep"></a><a id="1236" href="Leios.Short.html#1236" class="Function">DecEq-StageUpkeep</a> <a id="1254" class="Symbol">=</a> <a id="1256" href="Tactic.Derive.DecEq.html#3512" class="Function">derive-DecEq</a> <a id="1269" class="Symbol">((</a><a id="1271" class="Keyword">quote</a> <a id="1277" href="Leios.Short.html#1174" class="Datatype">StageUpkeep</a> <a id="1289" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1291" href="Leios.Short.html#1236" class="Function">DecEq-StageUpkeep</a><a id="1308" class="Symbol">)</a> <a id="1310" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1312" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="1314" class="Symbol">)</a>
</pre><pre class="Agda"><a id="1328" class="Keyword">open</a> <a id="1333" class="Keyword">import</a> <a id="1340" href="Leios.Protocol.html" class="Module">Leios.Protocol</a> <a id="1355" class="Symbol">(</a><a id="1356" href="Leios.Short.html#236" class="Bound">⋯</a><a id="1357" class="Symbol">)</a> <a id="1359" href="Leios.Short.html#1002" class="Datatype">SlotUpkeep</a> <a id="1370" href="Leios.Short.html#1174" class="Datatype">StageUpkeep</a> <a id="1382" class="Keyword">public</a>

<a id="1390" class="Keyword">open</a> <a id="1395" href="Leios.Base.html#576" class="Module">BaseAbstract</a> <a id="1408" href="Leios.SpecStructure.html#835" class="Field">B&#39;</a> <a id="1411" class="Keyword">using</a> <a id="1417" class="Symbol">(</a><a id="1418" href="Leios.Base.html#611" class="Field">Cert</a><a id="1422" class="Symbol">;</a> <a id="1424" href="Leios.Base.html#677" class="Field">V-chkCerts</a><a id="1434" class="Symbol">;</a> <a id="1436" href="Leios.Base.html#631" class="Field">VTy</a><a id="1439" class="Symbol">;</a> <a id="1441" href="Leios.Base.html#650" class="Field">initSlot</a><a id="1449" class="Symbol">)</a>
<a id="1451" class="Keyword">open</a> <a id="1456" href="Leios.SpecStructure.html#1203" class="Module">FFD</a> <a id="1460" class="Keyword">hiding</a> <a id="1467" class="Symbol">(</a><a id="1468" href="Leios.FFD.html#562" class="Function Operator">_-⟦_/_⟧⇀_</a><a id="1477" class="Symbol">)</a>
<a id="1479" class="Keyword">open</a> <a id="1484" href="Leios.Blocks.html#4489" class="Module">GenFFD</a>
</pre><pre class="Agda"><a id="isVoteCertified"></a><a id="1503" href="Leios.Short.html#1503" class="Function">isVoteCertified</a> <a id="1519" class="Symbol">:</a> <a id="1521" href="Leios.Protocol.html#1359" class="Record">LeiosState</a> <a id="1532" class="Symbol">→</a> <a id="1534" href="Leios.Blocks.html#3047" class="Function">EndorserBlock</a> <a id="1548" class="Symbol">→</a> <a id="1550" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="1555" href="Leios.Short.html#1503" class="Function">isVoteCertified</a> <a id="1571" href="Leios.Short.html#1571" class="Bound">s</a> <a id="1573" href="Leios.Short.html#1573" class="Bound">eb</a> <a id="1576" class="Symbol">=</a> <a id="1578" href="Leios.Short.html#314" class="Function">isVoteCertified&#39;</a> <a id="1595" class="Symbol">(</a><a id="1596" href="Leios.Protocol.html#1869" class="Field">LeiosState.votingState</a> <a id="1619" href="Leios.Short.html#1571" class="Bound">s</a><a id="1620" class="Symbol">)</a> <a id="1622" class="Symbol">(</a><a id="1623" href="Data.Fin.Patterns.html#399" class="InductiveConstructor">0F</a> <a id="1626" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1628" href="Leios.Short.html#1573" class="Bound">eb</a><a id="1630" class="Symbol">)</a>
</pre><pre class="Agda"><a id="1644" class="Keyword">private</a> <a id="1652" class="Keyword">variable</a> <a id="1661" href="Leios.Short.html#1661" class="Generalizable">s</a> <a id="1663" href="Leios.Short.html#1663" class="Generalizable">s&#39;</a>   <a id="1668" class="Symbol">:</a> <a id="1670" href="Leios.Protocol.html#1359" class="Record">LeiosState</a>
                 <a id="1698" href="Leios.Short.html#1698" class="Generalizable">ffds&#39;</a>  <a id="1705" class="Symbol">:</a> <a id="1707" href="Leios.FFD.html#508" class="Function">FFD.State</a>
                 <a id="1734" href="Leios.Short.html#1734" class="Generalizable">π</a>      <a id="1741" class="Symbol">:</a> <a id="1743" href="Leios.Abstract.html#578" class="Function">VrfPf</a>
                 <a id="1766" href="Leios.Short.html#1766" class="Generalizable">bs&#39;</a>    <a id="1773" class="Symbol">:</a> <a id="1775" href="Leios.Base.html#3253" class="Function">B.State</a>
                 <a id="1800" href="Leios.Short.html#1800" class="Generalizable">ks</a> <a id="1803" href="Leios.Short.html#1803" class="Generalizable">ks&#39;</a> <a id="1807" class="Symbol">:</a> <a id="1809" href="Leios.KeyRegistration.html#453" class="Function">K.State</a>
                 <a id="1834" href="Leios.Short.html#1834" class="Generalizable">msgs</a>   <a id="1841" class="Symbol">:</a> <a id="1843" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="1848" class="Symbol">(</a><a id="1849" href="Leios.FFD.html#117" class="Field">FFDAbstract.Header</a> <a id="1868" href="Leios.Blocks.html#5537" class="Function">ffdAbstract</a> <a id="1880" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="1882" href="Leios.FFD.html#124" class="Field">FFDAbstract.Body</a> <a id="1899" href="Leios.Blocks.html#5537" class="Function">ffdAbstract</a><a id="1910" class="Symbol">)</a>
                 <a id="1929" href="Leios.Short.html#1929" class="Generalizable">eb</a>     <a id="1936" class="Symbol">:</a> <a id="1938" href="Leios.Blocks.html#3047" class="Function">EndorserBlock</a>
                 <a id="1969" href="Leios.Short.html#1969" class="Generalizable">ebs</a>    <a id="1976" class="Symbol">:</a> <a id="1978" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="1983" href="Leios.Blocks.html#3047" class="Function">EndorserBlock</a>
                 <a id="2014" href="Leios.Short.html#2014" class="Generalizable">rbs</a>    <a id="2021" class="Symbol">:</a> <a id="2023" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2028" href="Leios.Base.html#503" class="Function">RankingBlock</a>
                 <a id="2058" href="Leios.Short.html#2058" class="Generalizable">txs</a>    <a id="2065" class="Symbol">:</a> <a id="2067" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2072" href="Leios.Abstract.html#457" class="Function">Tx</a>
                 <a id="2092" href="Leios.Short.html#2092" class="Generalizable">V</a>      <a id="2099" class="Symbol">:</a> <a id="2101" href="Leios.Base.html#631" class="Function">VTy</a>
                 <a id="2122" href="Leios.Short.html#2122" class="Generalizable">SD</a>     <a id="2129" class="Symbol">:</a> <a id="2131" href="Leios.Base.html#453" class="Function">StakeDistr</a>
                 <a id="2159" href="Leios.Short.html#2159" class="Generalizable">pks</a>    <a id="2166" class="Symbol">:</a> <a id="2168" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2173" href="Leios.VRF.html#911" class="Function">PubKey</a>
</pre>-->
<h3 id="blockvote-production">Block/Vote production</h3>
IBs from the last 3 pipelines are directly included in the EB, when the
late IB inclusion flag is set
<pre class="Agda has-copy-button" id="B2"><div class="code-container"><div class="line-numbers"><a href="#B2-L1" id="B2-L1" class="line-number" data-line-number="1" data-block-id="B2">1</a><a href="#B2-L2" id="B2-L2" class="line-number" data-line-number="2" data-block-id="B2">2</a><a href="#B2-L3" id="B2-L3" class="line-number" data-line-number="3" data-block-id="B2">3</a><a href="#B2-L4" id="B2-L4" class="line-number" data-line-number="4" data-block-id="B2">4</a><a href="#B2-L5" id="B2-L5" class="line-number" data-line-number="5" data-block-id="B2">5</a><a href="#B2-L6" id="B2-L6" class="line-number" data-line-number="6" data-block-id="B2">6</a><a href="#B2-L7" id="B2-L7" class="line-number" data-line-number="7" data-block-id="B2">7</a></div><div class="code-content"><div id="B2-LC1" class="code-line"><a id="IBSelection"></a><a id="2325" href="Leios.Short.html#B1-L1" class="Function type-hoverable" data-original-href="Leios.Short.html#2325" data-hoverable="true" data-position="2325" data-target-file="Leios.Short.html">IBSelection</a> <a id="2337" class="Symbol">:</a> <a id="2339" href="Leios.Protocol.html#B1-L43" class="Record type-hoverable" data-original-href="Leios.Protocol.html#1359" data-hoverable="true" data-position="1359" data-target-file="Leios.Protocol.html">LeiosState</a> <a id="2350" class="Symbol">→</a> <a id="2352" href="Agda.Builtin.Bool.html#B1-L6" class="Datatype type-hoverable" data-original-href="Agda.Builtin.Bool.html#173" data-hoverable="true" data-position="173" data-target-file="Agda.Builtin.Bool.html">Bool</a> <a id="2357" class="Symbol">→</a> <a id="2359" href="Leios.Blocks.html#B1-L53" class="Record type-hoverable" data-original-href="Leios.Blocks.html#1348" data-hoverable="true" data-position="1348" data-target-file="Leios.Blocks.html">InputBlock</a> <a id="2370" class="Symbol">→</a> <a id="2372" href="Agda.Primitive.html#B1-L14" class="Primitive type-hoverable" data-original-href="Agda.Primitive.html#388" data-hoverable="true" data-position="388" data-target-file="Agda.Primitive.html">Type</a></div><div id="B2-LC2" class="code-line"><a id="2377" href="Leios.Short.html#B1-L1" class="Function type-hoverable" data-original-href="Leios.Short.html#2325" data-hoverable="true" data-position="2325" data-target-file="Leios.Short.html">IBSelection</a> <a id="2389" href="Leios.Short.html#B1-L2" class="Bound type-hoverable" data-original-href="Leios.Short.html#2389" data-hoverable="true" data-position="2389" data-target-file="Leios.Short.html">s</a> <a id="2391" href="Agda.Builtin.Bool.html#B1-L7" class="InductiveConstructor type-hoverable" data-original-href="Agda.Builtin.Bool.html#192" data-hoverable="true" data-position="192" data-target-file="Agda.Builtin.Bool.html">false</a> <a id="2397" class="Symbol">=</a> <a id="2399" href="Leios.Blocks.html#B1-L28" class="Function Operator type-hoverable" data-original-href="Leios.Blocks.html#770" data-hoverable="true" data-position="770" data-target-file="Leios.Blocks.html">_∈ᴮ</a> <a id="2403" href="Leios.Prelude.html#B1-L45" class="Function type-hoverable" data-original-href="Leios.Prelude.html#1209" data-hoverable="true" data-position="1209" data-target-file="Leios.Prelude.html">slice</a> <a id="2409" href="Leios.Abstract.html#B1-L29" class="Function type-hoverable" data-original-href="Leios.Abstract.html#961" data-hoverable="true" data-position="961" data-target-file="Leios.Abstract.html">L</a> <a id="2411" class="Symbol">(</a><a id="2412" href="Leios.Protocol.html#B1-L52" class="Field type-hoverable" data-original-href="Leios.Protocol.html#1668" data-hoverable="true" data-position="1668" data-target-file="Leios.Protocol.html">LeiosState.slot</a> <a id="2428" href="Leios.Short.html#B1-L2" class="Bound type-hoverable" data-original-href="Leios.Short.html#2389" data-hoverable="true" data-position="2389" data-target-file="Leios.Short.html">s</a><a id="2429" class="Symbol">)</a> <a id="2431" class="Number">3</a></div><div id="B2-LC3" class="code-line"><a id="2433" href="Leios.Short.html#B1-L1" class="Function type-hoverable" data-original-href="Leios.Short.html#2325" data-hoverable="true" data-position="2325" data-target-file="Leios.Short.html">IBSelection</a> <a id="2445" href="Leios.Short.html#B1-L3" class="Bound type-hoverable" data-original-href="Leios.Short.html#2445" data-hoverable="true" data-position="2445" data-target-file="Leios.Short.html">s</a> <a id="2447" href="Agda.Builtin.Bool.html#B1-L7" class="InductiveConstructor type-hoverable" data-original-href="Agda.Builtin.Bool.html#198" data-hoverable="true" data-position="198" data-target-file="Agda.Builtin.Bool.html">true</a>  <a id="2453" class="Symbol">=</a> <a id="2455" href="Leios.Blocks.html#B1-L28" class="Function Operator type-hoverable" data-original-href="Leios.Blocks.html#770" data-hoverable="true" data-position="770" data-target-file="Leios.Blocks.html">_∈ᴮ</a> <a id="2459" href="Leios.Prelude.html#B1-L51" class="Function type-hoverable" data-original-href="Leios.Prelude.html#1475" data-hoverable="true" data-position="1475" data-target-file="Leios.Prelude.html">slices</a> <a id="2466" href="Leios.Abstract.html#B1-L29" class="Function type-hoverable" data-original-href="Leios.Abstract.html#961" data-hoverable="true" data-position="961" data-target-file="Leios.Abstract.html">L</a> <a id="2468" class="Symbol">(</a><a id="2469" href="Leios.Protocol.html#B1-L52" class="Field type-hoverable" data-original-href="Leios.Protocol.html#1668" data-hoverable="true" data-position="1668" data-target-file="Leios.Protocol.html">LeiosState.slot</a> <a id="2485" href="Leios.Short.html#B1-L3" class="Bound type-hoverable" data-original-href="Leios.Short.html#2445" data-hoverable="true" data-position="2445" data-target-file="Leios.Short.html">s</a><a id="2486" class="Symbol">)</a> <a id="2488" class="Number">3</a> <a id="2490" class="Number">6</a></div><div id="B2-LC4" class="code-line">&nbsp;</div><div id="B2-LC5" class="code-line"><a id="IBSelection?"></a><a id="2493" href="Leios.Short.html#B1-L5" class="Function type-hoverable" data-original-href="Leios.Short.html#2493" data-hoverable="true" data-position="2493" data-target-file="Leios.Short.html">IBSelection?</a> <a id="2506" class="Symbol">:</a> <a id="2508" class="Symbol">(</a><a id="2509" href="Leios.Short.html#B1-L5" class="Bound type-hoverable" data-original-href="Leios.Short.html#2509" data-hoverable="true" data-position="2509" data-target-file="Leios.Short.html">s</a> <a id="2511" class="Symbol">:</a> <a id="2513" href="Leios.Protocol.html#B1-L43" class="Record type-hoverable" data-original-href="Leios.Protocol.html#1359" data-hoverable="true" data-position="1359" data-target-file="Leios.Protocol.html">LeiosState</a><a id="2523" class="Symbol">)</a> <a id="2525" class="Symbol">→</a> <a id="2527" class="Symbol">(</a><a id="2528" href="Leios.Short.html#B1-L5" class="Bound type-hoverable" data-original-href="Leios.Short.html#2528" data-hoverable="true" data-position="2528" data-target-file="Leios.Short.html">b</a> <a id="2530" class="Symbol">:</a> <a id="2532" href="Agda.Builtin.Bool.html#B1-L6" class="Datatype type-hoverable" data-original-href="Agda.Builtin.Bool.html#173" data-hoverable="true" data-position="173" data-target-file="Agda.Builtin.Bool.html">Bool</a><a id="2536" class="Symbol">)</a> <a id="2538" class="Symbol">→</a> <a id="2540" class="Symbol">(</a><a id="2541" href="Leios.Short.html#B1-L5" class="Bound type-hoverable" data-original-href="Leios.Short.html#2541" data-hoverable="true" data-position="2541" data-target-file="Leios.Short.html">ib</a> <a id="2544" class="Symbol">:</a> <a id="2546" href="Leios.Blocks.html#B1-L53" class="Record type-hoverable" data-original-href="Leios.Blocks.html#1348" data-hoverable="true" data-position="1348" data-target-file="Leios.Blocks.html">InputBlock</a><a id="2556" class="Symbol">)</a> <a id="2558" class="Symbol">→</a> <a id="2560" href="Relation.Nullary.Decidable.Core.html#B1-L49" class="Record type-hoverable" data-original-href="Relation.Nullary.Decidable.Core.html#1861" data-hoverable="true" data-position="1861" data-target-file="Relation.Nullary.Decidable.Core.html">Dec</a> <a id="2564" class="Symbol">(</a><a id="2565" href="Leios.Short.html#B1-L1" class="Function type-hoverable" data-original-href="Leios.Short.html#2325" data-hoverable="true" data-position="2325" data-target-file="Leios.Short.html">IBSelection</a> <a id="2577" href="Leios.Short.html#B1-L5" class="Bound type-hoverable" data-original-href="Leios.Short.html#2509" data-hoverable="true" data-position="2509" data-target-file="Leios.Short.html">s</a> <a id="2579" href="Leios.Short.html#B1-L5" class="Bound type-hoverable" data-original-href="Leios.Short.html#2528" data-hoverable="true" data-position="2528" data-target-file="Leios.Short.html">b</a> <a id="2581" href="Leios.Short.html#B1-L5" class="Bound type-hoverable" data-original-href="Leios.Short.html#2541" data-hoverable="true" data-position="2541" data-target-file="Leios.Short.html">ib</a><a id="2583" class="Symbol">)</a></div><div id="B2-LC6" class="code-line"><a id="2585" href="Leios.Short.html#B1-L5" class="Function type-hoverable" data-original-href="Leios.Short.html#2493" data-hoverable="true" data-position="2493" data-target-file="Leios.Short.html">IBSelection?</a> <a id="2598" href="Leios.Short.html#B1-L6" class="Bound type-hoverable" data-original-href="Leios.Short.html#2598" data-hoverable="true" data-position="2598" data-target-file="Leios.Short.html">s</a> <a id="2600" href="Agda.Builtin.Bool.html#B1-L7" class="InductiveConstructor type-hoverable" data-original-href="Agda.Builtin.Bool.html#192" data-hoverable="true" data-position="192" data-target-file="Agda.Builtin.Bool.html">false</a> <a id="2606" href="Leios.Short.html#B1-L6" class="Bound type-hoverable" data-original-href="Leios.Short.html#2606" data-hoverable="true" data-position="2606" data-target-file="Leios.Short.html">ib</a> <a id="2609" class="Symbol">=</a> <a id="2611" href="Leios.Blocks.html#B1-L21" class="Field type-hoverable" data-original-href="Leios.Blocks.html#640" data-hoverable="true" data-position="640" data-target-file="Leios.Blocks.html">slotNumber</a> <a id="2622" href="Leios.Short.html#B1-L6" class="Bound type-hoverable" data-original-href="Leios.Short.html#2606" data-hoverable="true" data-position="2606" data-target-file="Leios.Short.html">ib</a> <a id="2625" href="Axiom.Set.html#B1-L324" class="Function Operator type-hoverable" data-original-href="Axiom.Set.html#10771" data-hoverable="true" data-position="10771" data-target-file="Axiom.Set.html">∈?</a> <a id="2628" href="Leios.Prelude.html#B1-L45" class="Function type-hoverable" data-original-href="Leios.Prelude.html#1209" data-hoverable="true" data-position="1209" data-target-file="Leios.Prelude.html">slice</a> <a id="2634" href="Leios.Abstract.html#B1-L29" class="Function type-hoverable" data-original-href="Leios.Abstract.html#961" data-hoverable="true" data-position="961" data-target-file="Leios.Abstract.html">L</a> <a id="2636" class="Symbol">(</a><a id="2637" href="Leios.Protocol.html#B1-L52" class="Field type-hoverable" data-original-href="Leios.Protocol.html#1668" data-hoverable="true" data-position="1668" data-target-file="Leios.Protocol.html">LeiosState.slot</a> <a id="2653" href="Leios.Short.html#B1-L6" class="Bound type-hoverable" data-original-href="Leios.Short.html#2598" data-hoverable="true" data-position="2598" data-target-file="Leios.Short.html">s</a><a id="2654" class="Symbol">)</a> <a id="2656" class="Number">3</a></div><div id="B2-LC7" class="code-line"><a id="2658" href="Leios.Short.html#B1-L5" class="Function type-hoverable" data-original-href="Leios.Short.html#2493" data-hoverable="true" data-position="2493" data-target-file="Leios.Short.html">IBSelection?</a> <a id="2671" href="Leios.Short.html#B1-L7" class="Bound type-hoverable" data-original-href="Leios.Short.html#2671" data-hoverable="true" data-position="2671" data-target-file="Leios.Short.html">s</a> <a id="2673" href="Agda.Builtin.Bool.html#B1-L7" class="InductiveConstructor type-hoverable" data-original-href="Agda.Builtin.Bool.html#198" data-hoverable="true" data-position="198" data-target-file="Agda.Builtin.Bool.html">true</a> <a id="2678" href="Leios.Short.html#B1-L7" class="Bound type-hoverable" data-original-href="Leios.Short.html#2678" data-hoverable="true" data-position="2678" data-target-file="Leios.Short.html">ib</a>  <a id="2682" class="Symbol">=</a> <a id="2684" href="Leios.Blocks.html#B1-L21" class="Field type-hoverable" data-original-href="Leios.Blocks.html#640" data-hoverable="true" data-position="640" data-target-file="Leios.Blocks.html">slotNumber</a> <a id="2695" href="Leios.Short.html#B1-L7" class="Bound type-hoverable" data-original-href="Leios.Short.html#2678" data-hoverable="true" data-position="2678" data-target-file="Leios.Short.html">ib</a> <a id="2698" href="Axiom.Set.html#B1-L324" class="Function Operator type-hoverable" data-original-href="Axiom.Set.html#10771" data-hoverable="true" data-position="10771" data-target-file="Axiom.Set.html">∈?</a> <a id="2701" href="Leios.Prelude.html#B1-L51" class="Function type-hoverable" data-original-href="Leios.Prelude.html#1475" data-hoverable="true" data-position="1475" data-target-file="Leios.Prelude.html">slices</a> <a id="2708" href="Leios.Abstract.html#B1-L29" class="Function type-hoverable" data-original-href="Leios.Abstract.html#961" data-hoverable="true" data-position="961" data-target-file="Leios.Abstract.html">L</a> <a id="2710" class="Symbol">(</a><a id="2711" href="Leios.Protocol.html#B1-L52" class="Field type-hoverable" data-original-href="Leios.Protocol.html#1668" data-hoverable="true" data-position="1668" data-target-file="Leios.Protocol.html">LeiosState.slot</a> <a id="2727" href="Leios.Short.html#B1-L7" class="Bound type-hoverable" data-original-href="Leios.Short.html#2671" data-hoverable="true" data-position="2671" data-target-file="Leios.Short.html">s</a><a id="2728" class="Symbol">)</a> <a id="2730" class="Number">3</a> <a id="2732" class="Number">6</a></div></div></div><button class="copy-code-button" title="Copy code">
        <svg width="16" height="16" viewBox="0 0 16 16">
          <path fill="currentColor" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path fill="currentColor" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
        </svg>
      </button></pre>
<p>We now define the rules for block production given by the relation
<code>_↝_</code>. These are split in two:</p>
<ol type="1">
<li>Positive rules, when we do need to create a block.</li>
<li>Negative rules, when we cannot create a block.</li>
</ol>
<p>The purpose of the negative rules is to properly adjust the upkeep if
we cannot make a block.</p>
<p>Note that <code>_↝_</code>, starting with an empty upkeep can always
make exactly three steps corresponding to the three types of Leios
specific blocks.</p>
<pre class="Agda has-copy-button" id="B3"><div class="code-container"><div class="line-numbers"><a href="#B3-L1" id="B3-L1" class="line-number" data-line-number="1" data-block-id="B3">1</a></div><div class="code-content"><div id="B3-LC1" class="code-line"><a id="3188" class="Keyword">data</a> <a id="_↝_"></a><a id="3193" href="Leios.Short.html#B1-L1" class="Datatype Operator type-hoverable" data-original-href="Leios.Short.html#3193" data-hoverable="true" data-position="3193" data-target-file="Leios.Short.html">_↝_</a> <a id="3197" class="Symbol">:</a> <a id="3199" href="Leios.Protocol.html#B1-L43" class="Record type-hoverable" data-original-href="Leios.Protocol.html#1359" data-hoverable="true" data-position="1359" data-target-file="Leios.Protocol.html">LeiosState</a> <a id="3210" class="Symbol">→</a> <a id="3212" href="Leios.Protocol.html#B1-L43" class="Record type-hoverable" data-original-href="Leios.Protocol.html#1359" data-hoverable="true" data-position="1359" data-target-file="Leios.Protocol.html">LeiosState</a> <a id="3223" class="Symbol">→</a> <a id="3225" href="Agda.Primitive.html#B1-L14" class="Primitive type-hoverable" data-original-href="Agda.Primitive.html#388" data-hoverable="true" data-position="388" data-target-file="Agda.Primitive.html">Type</a> <a id="3230" class="Keyword">where</a></div></div></div><button class="copy-code-button" title="Copy code">
        <svg width="16" height="16" viewBox="0 0 16 16">
          <path fill="currentColor" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path fill="currentColor" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
        </svg>
      </button></pre>
<h4 id="positive-rules">Positive rules</h4>
<pre class="Agda has-copy-button" id="B4"><div class="code-container"><div class="line-numbers"><a href="#B4-L1" id="B4-L1" class="line-number" data-line-number="1" data-block-id="B4">1</a><a href="#B4-L2" id="B4-L2" class="line-number" data-line-number="2" data-block-id="B4">2</a><a href="#B4-L3" id="B4-L3" class="line-number" data-line-number="3" data-block-id="B4">3</a><a href="#B4-L4" id="B4-L4" class="line-number" data-line-number="4" data-block-id="B4">4</a><a href="#B4-L5" id="B4-L5" class="line-number" data-line-number="5" data-block-id="B4">5</a><a href="#B4-L6" id="B4-L6" class="line-number" data-line-number="6" data-block-id="B4">6</a><a href="#B4-L7" id="B4-L7" class="line-number" data-line-number="7" data-block-id="B4">7</a><a href="#B4-L8" id="B4-L8" class="line-number" data-line-number="8" data-block-id="B4">8</a></div><div class="code-content"><div id="B4-LC1" class="code-line">  <a id="_↝_.IB-Role"></a><a id="3270" href="Leios.Short.html#B1-L1" class="InductiveConstructor type-hoverable" data-original-href="Leios.Short.html#3270" data-hoverable="true" data-position="3270" data-target-file="Leios.Short.html">IB-Role</a> <a id="3278" class="Symbol">:</a> <a id="3280" class="Keyword">let</a> <a id="3284" class="Keyword">open</a> <a id="3289" href="Leios.Protocol.html#B1-L43" class="Module type-hoverable" data-original-href="Leios.Protocol.html#1359" data-hoverable="true" data-position="1359" data-target-file="Leios.Protocol.html">LeiosState</a> <a id="3300" href="Leios.Short.html#1661" class="Generalizable">s</a> <a id="3302" class="Keyword">renaming</a> <a id="3311" class="Symbol">(</a><a id="3312" href="Leios.Protocol.html#B1-L46" class="Field type-hoverable" data-original-href="Leios.Protocol.html#1452" data-hoverable="true" data-position="1452" data-target-file="Leios.Protocol.html">FFDState</a> <a id="3321" class="Symbol">to</a> <a id="3324" class="Field">ffds</a><a id="3328" class="Symbol">)</a></div><div id="B4-LC2" class="code-line">                <a id="3346" href="Leios.Short.html#B1-L2" class="Bound type-hoverable" data-original-href="Leios.Short.html#3346" data-hoverable="true" data-position="3346" data-target-file="Leios.Short.html">b</a> <a id="3348" class="Symbol">=</a> <a id="3350" href="Leios.Blocks.html#B1-L150" class="InductiveConstructor type-hoverable" data-original-href="Leios.Blocks.html#4692" data-hoverable="true" data-position="4692" data-target-file="Leios.Blocks.html">ibBody</a> <a id="3357" class="Symbol">(</a><a id="3358" class="Keyword">record</a> <a id="3365" class="Symbol">{</a> <a id="3367" href="Leios.Blocks.html#B1-L51" class="Field type-hoverable" data-original-href="Leios.Blocks.html#1326" data-hoverable="true" data-position="1326" data-target-file="Leios.Blocks.html">txs</a> <a id="3371" class="Symbol">=</a> <a id="3373" href="Leios.Protocol.html#B1-L48" class="Function type-hoverable" data-original-href="Leios.Protocol.html#1516" data-hoverable="true" data-position="1516" data-target-file="Leios.Protocol.html">ToPropose</a> <a id="3383" class="Symbol">})</a></div><div id="B4-LC3" class="code-line">                <a id="3402" href="Leios.Short.html#B1-L3" class="Bound type-hoverable" data-original-href="Leios.Short.html#3402" data-hoverable="true" data-position="3402" data-target-file="Leios.Short.html">h</a> <a id="3404" class="Symbol">=</a> <a id="3406" href="Leios.Blocks.html#B1-L145" class="InductiveConstructor type-hoverable" data-original-href="Leios.Blocks.html#4561" data-hoverable="true" data-position="4561" data-target-file="Leios.Blocks.html">ibHeader</a> <a id="3415" class="Symbol">(</a><a id="3416" href="Leios.Blocks.html#B1-L79" class="Function type-hoverable" data-original-href="Leios.Blocks.html#2141" data-hoverable="true" data-position="2141" data-target-file="Leios.Blocks.html">mkIBHeader</a> <a id="3427" href="Leios.Protocol.html#B1-L52" class="Function type-hoverable" data-original-href="Leios.Protocol.html#1668" data-hoverable="true" data-position="1668" data-target-file="Leios.Protocol.html">slot</a> <a id="3432" href="Leios.SpecStructure.html#B1-L26" class="Field type-hoverable" data-original-href="Leios.SpecStructure.html#601" data-hoverable="true" data-position="601" data-target-file="Leios.SpecStructure.html">id</a> <a id="3435" href="Leios.Short.html#1734" class="Generalizable">π</a> <a id="3437" href="Leios.SpecStructure.html#B1-L32" class="Field type-hoverable" data-original-href="Leios.SpecStructure.html#730" data-hoverable="true" data-position="730" data-target-file="Leios.SpecStructure.html">sk-IB</a> <a id="3443" href="Leios.Protocol.html#B1-L48" class="Function type-hoverable" data-original-href="Leios.Protocol.html#1516" data-hoverable="true" data-position="1516" data-target-file="Leios.Protocol.html">ToPropose</a><a id="3452" class="Symbol">)</a></div><div id="B4-LC4" class="code-line">          <a id="3464" class="Keyword">in</a></div><div id="B4-LC5" class="code-line">          <a id="3477" href="Prelude.InferenceRules.html#B1-L689" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#56074" data-hoverable="true" data-position="56074" data-target-file="Prelude.InferenceRules.html">∙</a> <a id="3479" href="Leios.VRF.html#B1-L37" class="Function type-hoverable" data-original-href="Leios.VRF.html#1245" data-hoverable="true" data-position="1245" data-target-file="Leios.VRF.html">canProduceIB</a> <a id="3492" href="Leios.Protocol.html#B1-L52" class="Function type-hoverable" data-original-href="Leios.Protocol.html#1668" data-hoverable="true" data-position="1668" data-target-file="Leios.Protocol.html">slot</a> <a id="3497" href="Leios.SpecStructure.html#B1-L32" class="Field type-hoverable" data-original-href="Leios.SpecStructure.html#730" data-hoverable="true" data-position="730" data-target-file="Leios.SpecStructure.html">sk-IB</a> <a id="3503" class="Symbol">(</a><a id="3504" href="Leios.Protocol.html#B1-L124" class="Function type-hoverable" data-original-href="Leios.Protocol.html#3868" data-hoverable="true" data-position="3868" data-target-file="Leios.Protocol.html">stake</a> <a id="3510" href="Leios.Short.html#1661" class="Generalizable">s</a><a id="3511" class="Symbol">)</a> <a id="3513" href="Leios.Short.html#1734" class="Generalizable">π</a></div><div id="B4-LC6" class="code-line">          <a id="3525" href="Prelude.InferenceRules.html#B1-L685" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#56005" data-hoverable="true" data-position="56005" data-target-file="Prelude.InferenceRules.html">∙</a> <a id="3527" href="Leios.Short.html#B1-L1" class="Function type-hoverable" data-original-href="Leios.Short.html#3324" data-hoverable="true" data-position="3324" data-target-file="Leios.Short.html">ffds</a> <a id="3532" href="Leios.FFD.html#B1-L25" class="Function Operator type-hoverable" data-original-href="Leios.FFD.html#562" data-hoverable="true" data-position="562" data-target-file="Leios.FFD.html">FFD.-⟦</a> <a id="3539" href="Leios.FFD.html#B1-L15" class="InductiveConstructor type-hoverable" data-original-href="Leios.FFD.html#311" data-hoverable="true" data-position="311" data-target-file="Leios.FFD.html">Send</a> <a id="3544" href="Leios.Short.html#B1-L3" class="Bound type-hoverable" data-original-href="Leios.Short.html#3402" data-hoverable="true" data-position="3402" data-target-file="Leios.Short.html">h</a> <a id="3546" class="Symbol">(</a><a id="3547" href="Agda.Builtin.Maybe.html#B1-L6" class="InductiveConstructor type-hoverable" data-original-href="Agda.Builtin.Maybe.html#173" data-hoverable="true" data-position="173" data-target-file="Agda.Builtin.Maybe.html">just</a> <a id="3552" href="Leios.Short.html#B1-L2" class="Bound type-hoverable" data-original-href="Leios.Short.html#3346" data-hoverable="true" data-position="3346" data-target-file="Leios.Short.html">b</a><a id="3553" class="Symbol">)</a> <a id="3555" href="Leios.FFD.html#B1-L25" class="Function Operator type-hoverable" data-original-href="Leios.FFD.html#562" data-hoverable="true" data-position="562" data-target-file="Leios.FFD.html">/</a> <a id="3557" href="Leios.FFD.html#B1-L19" class="InductiveConstructor type-hoverable" data-original-href="Leios.FFD.html#397" data-hoverable="true" data-position="397" data-target-file="Leios.FFD.html">SendRes</a> <a id="3565" href="Leios.FFD.html#B1-L25" class="Function Operator type-hoverable" data-original-href="Leios.FFD.html#562" data-hoverable="true" data-position="562" data-target-file="Leios.FFD.html">⟧⇀</a> <a id="3568" href="Leios.Short.html#1698" class="Generalizable">ffds'</a></div><div id="B4-LC7" class="code-line">          <a id="3584" href="Prelude.InferenceRules.html#B1-L160" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#11315" data-hoverable="true" data-position="11315" data-target-file="Prelude.InferenceRules.html">─────────────────────────────────────────────────────────────────────────</a></div><div id="B4-LC8" class="code-line">          <a id="3668" href="Leios.Short.html#1661" class="Generalizable">s</a> <a id="3670" href="Leios.Short.html#B1-L1" class="Datatype Operator type-hoverable" data-original-href="Leios.Short.html#3193" data-hoverable="true" data-position="3193" data-target-file="Leios.Short.html">↝</a> <a id="3672" href="Leios.Protocol.html#B1-L91" class="Function type-hoverable" data-original-href="Leios.Protocol.html#2892" data-hoverable="true" data-position="2892" data-target-file="Leios.Protocol.html">addUpkeep</a> <a id="3682" class="Keyword">record</a> <a id="3689" href="Leios.Short.html#1661" class="Generalizable">s</a> <a id="3691" class="Symbol">{</a> <a id="3693" href="Leios.Protocol.html#B1-L46" class="Field type-hoverable" data-original-href="Leios.Protocol.html#1452" data-hoverable="true" data-position="1452" data-target-file="Leios.Protocol.html">FFDState</a> <a id="3702" class="Symbol">=</a> <a id="3704" href="Leios.Short.html#1698" class="Generalizable">ffds'</a> <a id="3710" class="Symbol">}</a> <a id="3712" href="Leios.Short.html#B1-L2" class="InductiveConstructor type-hoverable" data-original-href="Leios.Short.html#1033" data-hoverable="true" data-position="1033" data-target-file="Leios.Short.html">IB-Role</a></div></div></div><button class="copy-code-button" title="Copy code">
        <svg width="16" height="16" viewBox="0 0 16 16">
          <path fill="currentColor" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path fill="currentColor" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
        </svg>
      </button></pre>
When η = 0 there is no indirect ledger inclusion; in case η &gt; 0
earlier EBs might be referenced (Full-Short Leios).
<pre class="Agda has-copy-button" id="B5"><div class="code-container"><div class="line-numbers"><a href="#B5-L1" id="B5-L1" class="line-number" data-line-number="1" data-block-id="B5">1</a><a href="#B5-L2" id="B5-L2" class="line-number" data-line-number="2" data-block-id="B5">2</a><a href="#B5-L3" id="B5-L3" class="line-number" data-line-number="3" data-block-id="B5">3</a><a href="#B5-L4" id="B5-L4" class="line-number" data-line-number="4" data-block-id="B5">4</a><a href="#B5-L5" id="B5-L5" class="line-number" data-line-number="5" data-block-id="B5">5</a><a href="#B5-L6" id="B5-L6" class="line-number" data-line-number="6" data-block-id="B5">6</a><a href="#B5-L7" id="B5-L7" class="line-number" data-line-number="7" data-block-id="B5">7</a><a href="#B5-L8" id="B5-L8" class="line-number" data-line-number="8" data-block-id="B5">8</a><a href="#B5-L9" id="B5-L9" class="line-number" data-line-number="9" data-block-id="B5">9</a><a href="#B5-L10" id="B5-L10" class="line-number" data-line-number="10" data-block-id="B5">10</a><a href="#B5-L11" id="B5-L11" class="line-number" data-line-number="11" data-block-id="B5">11</a><a href="#B5-L12" id="B5-L12" class="line-number" data-line-number="12" data-block-id="B5">12</a><a href="#B5-L13" id="B5-L13" class="line-number" data-line-number="13" data-block-id="B5">13</a><a href="#B5-L14" id="B5-L14" class="line-number" data-line-number="14" data-block-id="B5">14</a><a href="#B5-L15" id="B5-L15" class="line-number" data-line-number="15" data-block-id="B5">15</a><a href="#B5-L16" id="B5-L16" class="line-number" data-line-number="16" data-block-id="B5">16</a><a href="#B5-L17" id="B5-L17" class="line-number" data-line-number="17" data-block-id="B5">17</a></div><div class="code-content"><div id="B5-LC1" class="code-line">  <a id="_↝_.EB-Role"></a><a id="3850" href="Leios.Short.html#B1-L1" class="InductiveConstructor type-hoverable" data-original-href="Leios.Short.html#3850" data-hoverable="true" data-position="3850" data-target-file="Leios.Short.html">EB-Role</a> <a id="3858" class="Symbol">:</a> <a id="3860" class="Keyword">let</a> <a id="3864" class="Keyword">open</a> <a id="3869" href="Leios.Protocol.html#B1-L43" class="Module type-hoverable" data-original-href="Leios.Protocol.html#1359" data-hoverable="true" data-position="1359" data-target-file="Leios.Protocol.html">LeiosState</a> <a id="3880" href="Leios.Short.html#1661" class="Generalizable">s</a> <a id="3882" class="Keyword">renaming</a> <a id="3891" class="Symbol">(</a><a id="3892" href="Leios.Protocol.html#B1-L46" class="Field type-hoverable" data-original-href="Leios.Protocol.html#1452" data-hoverable="true" data-position="1452" data-target-file="Leios.Protocol.html">FFDState</a> <a id="3901" class="Symbol">to</a> <a id="3904" class="Field">ffds</a><a id="3908" class="Symbol">)</a></div><div id="B5-LC2" class="code-line">                <a id="3926" href="Leios.Short.html#B1-L2" class="Bound type-hoverable" data-original-href="Leios.Short.html#3926" data-hoverable="true" data-position="3926" data-target-file="Leios.Short.html">ibs</a> <a id="3930" class="Symbol">=</a> <a id="3932" href="Data.List.Base.html#B1-L377" class="Function type-hoverable" data-original-href="Data.List.Base.html#10687" data-hoverable="true" data-position="10687" data-target-file="Data.List.Base.html">L.filter</a> <a id="3941" class="Symbol">(</a><a id="3942" href="Leios.Short.html#B1-L5" class="Function type-hoverable" data-original-href="Leios.Short.html#2493" data-hoverable="true" data-position="2493" data-target-file="Leios.Short.html">IBSelection?</a> <a id="3955" href="Leios.Short.html#1661" class="Generalizable">s</a> <a id="3957" href="Leios.Abstract.html#B1-L32" class="Function type-hoverable" data-original-href="Leios.Abstract.html#1023" data-hoverable="true" data-position="1023" data-target-file="Leios.Abstract.html">Late-IB-Inclusion</a><a id="3974" class="Symbol">)</a> <a id="3976" href="Leios.Protocol.html#B1-L49" class="Function type-hoverable" data-original-href="Leios.Protocol.html#1547" data-hoverable="true" data-position="1547" data-target-file="Leios.Protocol.html">IBs</a></div><div id="B5-LC3" class="code-line">                <a id="3996" href="Leios.Short.html#B1-L3" class="Bound type-hoverable" data-original-href="Leios.Short.html#3996" data-hoverable="true" data-position="3996" data-target-file="Leios.Short.html">LI</a>  <a id="4000" class="Symbol">=</a> <a id="4002" href="abstract-set-theory.Prelude.html#B1-L53" class="Function type-hoverable" data-original-href="abstract-set-theory.Prelude.html#1824" data-hoverable="true" data-position="1824" data-target-file="abstract-set-theory.Prelude.html">map</a> <a id="4006" href="Leios.Blocks.html#B1-L90" class="Function type-hoverable" data-original-href="Leios.Blocks.html#2547" data-hoverable="true" data-position="2547" data-target-file="Leios.Blocks.html">getIBRef</a> <a id="4015" href="Leios.Short.html#B1-L2" class="Bound type-hoverable" data-original-href="Leios.Short.html#3926" data-hoverable="true" data-position="3926" data-target-file="Leios.Short.html">ibs</a></div><div id="B5-LC4" class="code-line">                <a id="4035" href="Leios.Short.html#B1-L4" class="Bound type-hoverable" data-original-href="Leios.Short.html#4035" data-hoverable="true" data-position="4035" data-target-file="Leios.Short.html">LE</a>  <a id="4039" class="Symbol">=</a> <a id="4041" href="abstract-set-theory.Prelude.html#B1-L53" class="Function type-hoverable" data-original-href="abstract-set-theory.Prelude.html#1824" data-hoverable="true" data-position="1824" data-target-file="abstract-set-theory.Prelude.html">map</a> <a id="4045" href="Leios.Blocks.html#B1-L130" class="Function type-hoverable" data-original-href="Leios.Blocks.html#4034" data-hoverable="true" data-position="4034" data-target-file="Leios.Blocks.html">getEBRef</a> <a id="4054" href="Leios.Short.html#1969" class="Generalizable">ebs</a></div><div id="B5-LC5" class="code-line">                <a id="4074" href="Leios.Short.html#B1-L5" class="Bound type-hoverable" data-original-href="Leios.Short.html#4074" data-hoverable="true" data-position="4074" data-target-file="Leios.Short.html">h</a>   <a id="4078" class="Symbol">=</a> <a id="4080" href="Leios.Blocks.html#B1-L118" class="Function type-hoverable" data-original-href="Leios.Blocks.html#3578" data-hoverable="true" data-position="3578" data-target-file="Leios.Blocks.html">mkEB</a> <a id="4085" href="Leios.Protocol.html#B1-L52" class="Function type-hoverable" data-original-href="Leios.Protocol.html#1668" data-hoverable="true" data-position="1668" data-target-file="Leios.Protocol.html">slot</a> <a id="4090" href="Leios.SpecStructure.html#B1-L26" class="Field type-hoverable" data-original-href="Leios.SpecStructure.html#601" data-hoverable="true" data-position="601" data-target-file="Leios.SpecStructure.html">id</a> <a id="4093" href="Leios.Short.html#1734" class="Generalizable">π</a> <a id="4095" href="Leios.SpecStructure.html#B1-L32" class="Field type-hoverable" data-original-href="Leios.SpecStructure.html#736" data-hoverable="true" data-position="736" data-target-file="Leios.SpecStructure.html">sk-EB</a> <a id="4101" href="Leios.Short.html#B1-L3" class="Bound type-hoverable" data-original-href="Leios.Short.html#3996" data-hoverable="true" data-position="3996" data-target-file="Leios.Short.html">LI</a> <a id="4104" href="Leios.Short.html#B1-L4" class="Bound type-hoverable" data-original-href="Leios.Short.html#4035" data-hoverable="true" data-position="4035" data-target-file="Leios.Short.html">LE</a></div><div id="B5-LC6" class="code-line">                <a id="4123" href="Leios.Short.html#B1-L6" class="Bound type-hoverable" data-original-href="Leios.Short.html#4123" data-hoverable="true" data-position="4123" data-target-file="Leios.Short.html">P</a>   <a id="4127" class="Symbol">=</a> <a id="4129" class="Symbol">λ</a> <a id="4131" href="Leios.Short.html#B1-L6" class="Bound type-hoverable" data-original-href="Leios.Short.html#4131" data-hoverable="true" data-position="4131" data-target-file="Leios.Short.html">x</a> <a id="4133" class="Symbol">→</a> <a id="4135" href="Leios.Short.html#1503" class="Function">isVoteCertified</a> <a id="4151" href="Leios.Short.html#1661" class="Generalizable">s</a> <a id="4153" href="Leios.Short.html#B1-L6" class="Bound type-hoverable" data-original-href="Leios.Short.html#4131" data-hoverable="true" data-position="4131" data-target-file="Leios.Short.html">x</a></div><div id="B5-LC7" class="code-line">                         <a id="4180" href="Data.Product.Base.html#B1-L70" class="Function Operator type-hoverable" data-original-href="Data.Product.Base.html#1618" data-hoverable="true" data-position="1618" data-target-file="Data.Product.Base.html">×</a> <a id="4182" href="Leios.Short.html#B1-L6" class="Bound type-hoverable" data-original-href="Leios.Short.html#4131" data-hoverable="true" data-position="4131" data-target-file="Leios.Short.html">x</a> <a id="4184" href="abstract-set-theory.Prelude.html#B1-L18" class="Function Operator type-hoverable" data-original-href="abstract-set-theory.Prelude.html#563" data-hoverable="true" data-position="563" data-target-file="abstract-set-theory.Prelude.html">∈ˡ</a> <a id="4187" href="Leios.Protocol.html#B1-L50" class="Function type-hoverable" data-original-href="Leios.Protocol.html#1586" data-hoverable="true" data-position="1586" data-target-file="Leios.Protocol.html">EBs</a></div><div id="B5-LC8" class="code-line">                         <a id="4216" href="Data.Product.Base.html#B1-L70" class="Function Operator type-hoverable" data-original-href="Data.Product.Base.html#1618" data-hoverable="true" data-position="1618" data-target-file="Data.Product.Base.html">×</a> <a id="4218" href="Leios.Short.html#B1-L6" class="Bound type-hoverable" data-original-href="Leios.Short.html#4131" data-hoverable="true" data-position="4131" data-target-file="Leios.Short.html">x</a> <a id="4220" href="Leios.Blocks.html#B1-L28" class="Function Operator type-hoverable" data-original-href="Leios.Blocks.html#770" data-hoverable="true" data-position="770" data-target-file="Leios.Blocks.html">∈ᴮ</a> <a id="4223" href="Leios.Prelude.html#B1-L51" class="Function type-hoverable" data-original-href="Leios.Prelude.html#1475" data-hoverable="true" data-position="1475" data-target-file="Leios.Prelude.html">slices</a> <a id="4230" href="Leios.Abstract.html#B1-L29" class="Function type-hoverable" data-original-href="Leios.Abstract.html#961" data-hoverable="true" data-position="961" data-target-file="Leios.Abstract.html">L</a> <a id="4232" href="Leios.Protocol.html#B1-L52" class="Function type-hoverable" data-original-href="Leios.Protocol.html#1668" data-hoverable="true" data-position="1668" data-target-file="Leios.Protocol.html">slot</a> <a id="4237" class="Number">2</a> <a id="4239" class="Symbol">(</a><a id="4240" class="Number">3</a> <a id="4242" href="Agda.Builtin.Nat.html#B1-L31" class="Primitive Operator type-hoverable" data-original-href="Agda.Builtin.Nat.html#539" data-hoverable="true" data-position="539" data-target-file="Agda.Builtin.Nat.html">*</a> <a id="4244" href="Leios.Abstract.html#B1-L31" class="Function type-hoverable" data-original-href="Leios.Abstract.html#1009" data-hoverable="true" data-position="1009" data-target-file="Leios.Abstract.html">η</a> <a id="4246" href="Data.Nat.Base.html#B1-L317" class="Function Operator type-hoverable" data-original-href="Data.Nat.Base.html#7096" data-hoverable="true" data-position="7096" data-target-file="Data.Nat.Base.html">/</a> <a id="4248" href="Leios.Abstract.html#B1-L29" class="Function type-hoverable" data-original-href="Leios.Abstract.html#961" data-hoverable="true" data-position="961" data-target-file="Leios.Abstract.html">L</a><a id="4249" class="Symbol">)</a></div><div id="B5-LC9" class="code-line">                <a id="4267" href="Leios.Short.html#B1-L9" class="Bound type-hoverable" data-original-href="Leios.Short.html#4267" data-hoverable="true" data-position="4267" data-target-file="Leios.Short.html">slots</a> <a id="4273" class="Symbol">=</a> <a id="4275" href="abstract-set-theory.Prelude.html#B1-L53" class="Function type-hoverable" data-original-href="abstract-set-theory.Prelude.html#1824" data-hoverable="true" data-position="1824" data-target-file="abstract-set-theory.Prelude.html">map</a> <a id="4279" href="Leios.Blocks.html#B1-L21" class="Field type-hoverable" data-original-href="Leios.Blocks.html#640" data-hoverable="true" data-position="640" data-target-file="Leios.Blocks.html">slotNumber</a></div><div id="B5-LC10" class="code-line">          <a id="4300" class="Keyword">in</a></div><div id="B5-LC11" class="code-line">          <a id="4313" href="Prelude.InferenceRules.html#B1-L689" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#56074" data-hoverable="true" data-position="56074" data-target-file="Prelude.InferenceRules.html">∙</a> <a id="4315" href="Leios.Protocol.html#B1-L79" class="Function type-hoverable" data-original-href="Leios.Protocol.html#2475" data-hoverable="true" data-position="2475" data-target-file="Leios.Protocol.html">needsUpkeep</a> <a id="4327" href="Leios.Short.html#B1-L2" class="InductiveConstructor type-hoverable" data-original-href="Leios.Short.html#1041" data-hoverable="true" data-position="1041" data-target-file="Leios.Short.html">EB-Role</a></div><div id="B5-LC12" class="code-line">          <a id="4345" href="Prelude.InferenceRules.html#B1-L685" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#56005" data-hoverable="true" data-position="56005" data-target-file="Prelude.InferenceRules.html">∙</a> <a id="4347" href="Leios.VRF.html#B1-L49" class="Function type-hoverable" data-original-href="Leios.VRF.html#1849" data-hoverable="true" data-position="1849" data-target-file="Leios.VRF.html">canProduceEB</a> <a id="4360" href="Leios.Protocol.html#B1-L52" class="Function type-hoverable" data-original-href="Leios.Protocol.html#1668" data-hoverable="true" data-position="1668" data-target-file="Leios.Protocol.html">slot</a> <a id="4365" href="Leios.SpecStructure.html#B1-L32" class="Field type-hoverable" data-original-href="Leios.SpecStructure.html#736" data-hoverable="true" data-position="736" data-target-file="Leios.SpecStructure.html">sk-EB</a> <a id="4371" class="Symbol">(</a><a id="4372" href="Leios.Protocol.html#B1-L124" class="Function type-hoverable" data-original-href="Leios.Protocol.html#3868" data-hoverable="true" data-position="3868" data-target-file="Leios.Protocol.html">stake</a> <a id="4378" href="Leios.Short.html#1661" class="Generalizable">s</a><a id="4379" class="Symbol">)</a> <a id="4381" href="Leios.Short.html#1734" class="Generalizable">π</a></div><div id="B5-LC13" class="code-line">          <a id="4393" href="Prelude.InferenceRules.html#B1-L685" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#56005" data-hoverable="true" data-position="56005" data-target-file="Prelude.InferenceRules.html">∙</a> <a id="4395" href="Data.List.Relation.Unary.All.html#B1-L48" class="Datatype type-hoverable" data-original-href="Data.List.Relation.Unary.All.html#1639" data-hoverable="true" data-position="1639" data-target-file="Data.List.Relation.Unary.All.html">All.All</a> <a id="4403" href="Leios.Short.html#B1-L6" class="Bound type-hoverable" data-original-href="Leios.Short.html#4123" data-hoverable="true" data-position="4123" data-target-file="Leios.Short.html">P</a> <a id="4405" href="Leios.Short.html#1969" class="Generalizable">ebs</a></div><div id="B5-LC14" class="code-line">          <a id="4419" href="Prelude.InferenceRules.html#B1-L685" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#56005" data-hoverable="true" data-position="56005" data-target-file="Prelude.InferenceRules.html">∙</a> <a id="4421" href="Data.List.Relation.Unary.Unique.Setoid.html#B1-L25" class="Datatype type-hoverable" data-original-href="Data.List.Relation.Unary.Unique.Setoid.html#785" data-hoverable="true" data-position="785" data-target-file="Data.List.Relation.Unary.Unique.Setoid.html">Unique</a> <a id="4428" class="Symbol">(</a><a id="4429" href="Leios.Short.html#B1-L9" class="Bound type-hoverable" data-original-href="Leios.Short.html#4267" data-hoverable="true" data-position="4267" data-target-file="Leios.Short.html">slots</a> <a id="4435" href="Leios.Short.html#1969" class="Generalizable">ebs</a><a id="4438" class="Symbol">)</a> <a id="4440" href="Data.Product.Base.html#B1-L70" class="Function Operator type-hoverable" data-original-href="Data.Product.Base.html#1618" data-hoverable="true" data-position="1618" data-target-file="Data.Product.Base.html">×</a> <a id="4442" href="Axiom.Set.html#B1-L169" class="Function type-hoverable" data-original-href="Axiom.Set.html#5718" data-hoverable="true" data-position="5718" data-target-file="Axiom.Set.html">fromList</a> <a id="4451" class="Symbol">(</a><a id="4452" href="Leios.Short.html#B1-L9" class="Bound type-hoverable" data-original-href="Leios.Short.html#4267" data-hoverable="true" data-position="4267" data-target-file="Leios.Short.html">slots</a> <a id="4458" href="Leios.Short.html#1969" class="Generalizable">ebs</a><a id="4461" class="Symbol">)</a> <a id="4463" href="Axiom.Set.html#B1-L76" class="Function Operator type-hoverable" data-original-href="Axiom.Set.html#2587" data-hoverable="true" data-position="2587" data-target-file="Axiom.Set.html">≡ᵉ</a> <a id="4466" href="Axiom.Set.html#B1-L169" class="Function type-hoverable" data-original-href="Axiom.Set.html#5718" data-hoverable="true" data-position="5718" data-target-file="Axiom.Set.html">fromList</a> <a id="4475" class="Symbol">(</a><a id="4476" href="Leios.Short.html#B1-L9" class="Bound type-hoverable" data-original-href="Leios.Short.html#4267" data-hoverable="true" data-position="4267" data-target-file="Leios.Short.html">slots</a> <a id="4482" class="Symbol">(</a><a id="4483" href="Leios.Prelude.html#B1-L54" class="Function type-hoverable" data-original-href="Leios.Prelude.html#1588" data-hoverable="true" data-position="1588" data-target-file="Leios.Prelude.html">filter</a> <a id="4490" href="Leios.Short.html#B1-L6" class="Bound type-hoverable" data-original-href="Leios.Short.html#4123" data-hoverable="true" data-position="4123" data-target-file="Leios.Short.html">P</a> <a id="4492" href="Leios.Protocol.html#B1-L50" class="Function type-hoverable" data-original-href="Leios.Protocol.html#1586" data-hoverable="true" data-position="1586" data-target-file="Leios.Protocol.html">EBs</a><a id="4495" class="Symbol">))</a></div><div id="B5-LC15" class="code-line">          <a id="4508" href="Prelude.InferenceRules.html#B1-L685" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#56005" data-hoverable="true" data-position="56005" data-target-file="Prelude.InferenceRules.html">∙</a> <a id="4510" href="Leios.Short.html#B1-L1" class="Function type-hoverable" data-original-href="Leios.Short.html#3904" data-hoverable="true" data-position="3904" data-target-file="Leios.Short.html">ffds</a> <a id="4515" href="Leios.FFD.html#B1-L25" class="Function Operator type-hoverable" data-original-href="Leios.FFD.html#562" data-hoverable="true" data-position="562" data-target-file="Leios.FFD.html">FFD.-⟦</a> <a id="4522" href="Leios.FFD.html#B1-L15" class="InductiveConstructor type-hoverable" data-original-href="Leios.FFD.html#311" data-hoverable="true" data-position="311" data-target-file="Leios.FFD.html">Send</a> <a id="4527" class="Symbol">(</a><a id="4528" href="Leios.Blocks.html#B1-L146" class="InductiveConstructor type-hoverable" data-original-href="Leios.Blocks.html#4594" data-hoverable="true" data-position="4594" data-target-file="Leios.Blocks.html">ebHeader</a> <a id="4537" href="Leios.Short.html#B1-L5" class="Bound type-hoverable" data-original-href="Leios.Short.html#4074" data-hoverable="true" data-position="4074" data-target-file="Leios.Short.html">h</a><a id="4538" class="Symbol">)</a> <a id="4540" href="Agda.Builtin.Maybe.html#B1-L7" class="InductiveConstructor type-hoverable" data-original-href="Agda.Builtin.Maybe.html#194" data-hoverable="true" data-position="194" data-target-file="Agda.Builtin.Maybe.html">nothing</a> <a id="4548" href="Leios.FFD.html#B1-L25" class="Function Operator type-hoverable" data-original-href="Leios.FFD.html#562" data-hoverable="true" data-position="562" data-target-file="Leios.FFD.html">/</a> <a id="4550" href="Leios.FFD.html#B1-L19" class="InductiveConstructor type-hoverable" data-original-href="Leios.FFD.html#397" data-hoverable="true" data-position="397" data-target-file="Leios.FFD.html">SendRes</a> <a id="4558" href="Leios.FFD.html#B1-L25" class="Function Operator type-hoverable" data-original-href="Leios.FFD.html#562" data-hoverable="true" data-position="562" data-target-file="Leios.FFD.html">⟧⇀</a> <a id="4561" href="Leios.Short.html#1698" class="Generalizable">ffds'</a></div><div id="B5-LC16" class="code-line">          <a id="4577" href="Prelude.InferenceRules.html#B1-L160" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#11315" data-hoverable="true" data-position="11315" data-target-file="Prelude.InferenceRules.html">─────────────────────────────────────────────────────────────────────────</a></div><div id="B5-LC17" class="code-line">          <a id="4661" href="Leios.Short.html#1661" class="Generalizable">s</a> <a id="4663" href="Leios.Short.html#B1-L1" class="Datatype Operator type-hoverable" data-original-href="Leios.Short.html#3193" data-hoverable="true" data-position="3193" data-target-file="Leios.Short.html">↝</a> <a id="4665" href="Leios.Protocol.html#B1-L91" class="Function type-hoverable" data-original-href="Leios.Protocol.html#2892" data-hoverable="true" data-position="2892" data-target-file="Leios.Protocol.html">addUpkeep</a> <a id="4675" class="Keyword">record</a> <a id="4682" href="Leios.Short.html#1661" class="Generalizable">s</a> <a id="4684" class="Symbol">{</a> <a id="4686" href="Leios.Protocol.html#B1-L46" class="Field type-hoverable" data-original-href="Leios.Protocol.html#1452" data-hoverable="true" data-position="1452" data-target-file="Leios.Protocol.html">FFDState</a> <a id="4695" class="Symbol">=</a> <a id="4697" href="Leios.Short.html#1698" class="Generalizable">ffds'</a> <a id="4703" class="Symbol">}</a> <a id="4705" href="Leios.Short.html#B1-L2" class="InductiveConstructor type-hoverable" data-original-href="Leios.Short.html#1041" data-hoverable="true" data-position="1041" data-target-file="Leios.Short.html">EB-Role</a></div></div></div><button class="copy-code-button" title="Copy code">
        <svg width="16" height="16" viewBox="0 0 16 16">
          <path fill="currentColor" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path fill="currentColor" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
        </svg>
      </button></pre>
<pre class="Agda has-copy-button" id="B6"><div class="code-container"><div class="line-numbers"><a href="#B6-L1" id="B6-L1" class="line-number" data-line-number="1" data-block-id="B6">1</a><a href="#B6-L2" id="B6-L2" class="line-number" data-line-number="2" data-block-id="B6">2</a><a href="#B6-L3" id="B6-L3" class="line-number" data-line-number="3" data-block-id="B6">3</a><a href="#B6-L4" id="B6-L4" class="line-number" data-line-number="4" data-block-id="B6">4</a><a href="#B6-L5" id="B6-L5" class="line-number" data-line-number="5" data-block-id="B6">5</a><a href="#B6-L6" id="B6-L6" class="line-number" data-line-number="6" data-block-id="B6">6</a><a href="#B6-L7" id="B6-L7" class="line-number" data-line-number="7" data-block-id="B6">7</a><a href="#B6-L8" id="B6-L8" class="line-number" data-line-number="8" data-block-id="B6">8</a><a href="#B6-L9" id="B6-L9" class="line-number" data-line-number="9" data-block-id="B6">9</a></div><div class="code-content"><div id="B6-LC1" class="code-line">  <a id="_↝_.VT-Role"></a><a id="4727" href="Leios.Short.html#B1-L1" class="InductiveConstructor type-hoverable" data-original-href="Leios.Short.html#4727" data-hoverable="true" data-position="4727" data-target-file="Leios.Short.html">VT-Role</a> <a id="4735" class="Symbol">:</a> <a id="4737" class="Keyword">let</a> <a id="4741" class="Keyword">open</a> <a id="4746" href="Leios.Protocol.html#B1-L43" class="Module type-hoverable" data-original-href="Leios.Protocol.html#1359" data-hoverable="true" data-position="1359" data-target-file="Leios.Protocol.html">LeiosState</a> <a id="4757" href="Leios.Short.html#1661" class="Generalizable">s</a> <a id="4759" class="Keyword">renaming</a> <a id="4768" class="Symbol">(</a><a id="4769" href="Leios.Protocol.html#B1-L46" class="Field type-hoverable" data-original-href="Leios.Protocol.html#1452" data-hoverable="true" data-position="1452" data-target-file="Leios.Protocol.html">FFDState</a> <a id="4778" class="Symbol">to</a> <a id="4781" class="Field">ffds</a><a id="4785" class="Symbol">)</a></div><div id="B6-LC2" class="code-line">                <a id="4803" href="Leios.Short.html#B1-L2" class="Bound type-hoverable" data-original-href="Leios.Short.html#4803" data-hoverable="true" data-position="4803" data-target-file="Leios.Short.html">EBs'</a> <a id="4808" class="Symbol">=</a> <a id="4810" href="Leios.Prelude.html#B1-L54" class="Function type-hoverable" data-original-href="Leios.Prelude.html#1588" data-hoverable="true" data-position="1588" data-target-file="Leios.Prelude.html">filter</a> <a id="4817" class="Symbol">(</a><a id="4818" href="Leios.Protocol.html#B1-L228" class="Function type-hoverable" data-original-href="Leios.Protocol.html#7383" data-hoverable="true" data-position="7383" data-target-file="Leios.Protocol.html">allIBRefsKnown</a> <a id="4833" href="Leios.Short.html#1661" class="Generalizable">s</a><a id="4834" class="Symbol">)</a> <a id="4836" href="Function.Base.html#B1-L77" class="Function Operator type-hoverable" data-original-href="Function.Base.html#1974" data-hoverable="true" data-position="1974" data-target-file="Function.Base.html">$</a> <a id="4838" href="Leios.Prelude.html#B1-L54" class="Function type-hoverable" data-original-href="Leios.Prelude.html#1588" data-hoverable="true" data-position="1588" data-target-file="Leios.Prelude.html">filter</a> <a id="4845" class="Symbol">(</a><a id="4846" href="Leios.Blocks.html#B1-L28" class="Function Operator type-hoverable" data-original-href="Leios.Blocks.html#770" data-hoverable="true" data-position="770" data-target-file="Leios.Blocks.html">_∈ᴮ</a> <a id="4850" href="Leios.Prelude.html#B1-L45" class="Function type-hoverable" data-original-href="Leios.Prelude.html#1209" data-hoverable="true" data-position="1209" data-target-file="Leios.Prelude.html">slice</a> <a id="4856" href="Leios.Abstract.html#B1-L29" class="Function type-hoverable" data-original-href="Leios.Abstract.html#961" data-hoverable="true" data-position="961" data-target-file="Leios.Abstract.html">L</a> <a id="4858" href="Leios.Protocol.html#B1-L52" class="Function type-hoverable" data-original-href="Leios.Protocol.html#1668" data-hoverable="true" data-position="1668" data-target-file="Leios.Protocol.html">slot</a> <a id="4863" class="Number">1</a><a id="4864" class="Symbol">)</a> <a id="4866" href="Leios.Protocol.html#B1-L50" class="Function type-hoverable" data-original-href="Leios.Protocol.html#1586" data-hoverable="true" data-position="1586" data-target-file="Leios.Protocol.html">EBs</a></div><div id="B6-LC3" class="code-line">                <a id="4886" href="Leios.Short.html#B1-L3" class="Bound type-hoverable" data-original-href="Leios.Short.html#4886" data-hoverable="true" data-position="4886" data-target-file="Leios.Short.html">votes</a> <a id="4892" class="Symbol">=</a> <a id="4894" href="abstract-set-theory.Prelude.html#B1-L53" class="Function type-hoverable" data-original-href="abstract-set-theory.Prelude.html#1824" data-hoverable="true" data-position="1824" data-target-file="abstract-set-theory.Prelude.html">map</a> <a id="4898" class="Symbol">(</a><a id="4899" href="Leios.Abstract.html#B1-L26" class="Function type-hoverable" data-original-href="Leios.Abstract.html#837" data-hoverable="true" data-position="837" data-target-file="Leios.Abstract.html">vote</a> <a id="4904" href="Leios.SpecStructure.html#B1-L32" class="Field type-hoverable" data-original-href="Leios.SpecStructure.html#742" data-hoverable="true" data-position="742" data-target-file="Leios.SpecStructure.html">sk-VT</a> <a id="4910" href="Function.Base.html#B1-L52" class="Function Operator type-hoverable" data-original-href="Function.Base.html#1115" data-hoverable="true" data-position="1115" data-target-file="Function.Base.html">∘</a> <a id="4912" href="Class.Hashable.html#B1-L7" class="Field type-hoverable" data-original-href="Class.Hashable.html#167" data-hoverable="true" data-position="167" data-target-file="Class.Hashable.html">hash</a><a id="4916" class="Symbol">)</a> <a id="4918" href="Leios.Short.html#B1-L2" class="Bound type-hoverable" data-original-href="Leios.Short.html#4803" data-hoverable="true" data-position="4803" data-target-file="Leios.Short.html">EBs'</a></div><div id="B6-LC4" class="code-line">          <a id="4933" class="Keyword">in</a></div><div id="B6-LC5" class="code-line">          <a id="4946" href="Prelude.InferenceRules.html#B1-L689" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#56074" data-hoverable="true" data-position="56074" data-target-file="Prelude.InferenceRules.html">∙</a> <a id="4948" href="Leios.Protocol.html#B1-L82" class="Function type-hoverable" data-original-href="Leios.Protocol.html#2535" data-hoverable="true" data-position="2535" data-target-file="Leios.Protocol.html">needsUpkeep-Stage</a> <a id="4966" href="Leios.Short.html#1201" class="InductiveConstructor">VT-Role</a></div><div id="B6-LC6" class="code-line">          <a id="4984" href="Prelude.InferenceRules.html#B1-L685" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#56005" data-hoverable="true" data-position="56005" data-target-file="Prelude.InferenceRules.html">∙</a> <a id="4986" href="Leios.VRF.html#B1-L61" class="Function type-hoverable" data-original-href="Leios.VRF.html#2453" data-hoverable="true" data-position="2453" data-target-file="Leios.VRF.html">canProduceV</a> <a id="4998" href="Leios.Protocol.html#B1-L52" class="Function type-hoverable" data-original-href="Leios.Protocol.html#1668" data-hoverable="true" data-position="1668" data-target-file="Leios.Protocol.html">slot</a> <a id="5003" href="Leios.SpecStructure.html#B1-L32" class="Field type-hoverable" data-original-href="Leios.SpecStructure.html#742" data-hoverable="true" data-position="742" data-target-file="Leios.SpecStructure.html">sk-VT</a> <a id="5009" class="Symbol">(</a><a id="5010" href="Leios.Protocol.html#B1-L124" class="Function type-hoverable" data-original-href="Leios.Protocol.html#3868" data-hoverable="true" data-position="3868" data-target-file="Leios.Protocol.html">stake</a> <a id="5016" href="Leios.Short.html#1661" class="Generalizable">s</a><a id="5017" class="Symbol">)</a></div><div id="B6-LC7" class="code-line">          <a id="5029" href="Prelude.InferenceRules.html#B1-L685" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#56005" data-hoverable="true" data-position="56005" data-target-file="Prelude.InferenceRules.html">∙</a> <a id="5031" href="Leios.Short.html#B1-L1" class="Function type-hoverable" data-original-href="Leios.Short.html#4781" data-hoverable="true" data-position="4781" data-target-file="Leios.Short.html">ffds</a> <a id="5036" href="Leios.FFD.html#B1-L25" class="Function Operator type-hoverable" data-original-href="Leios.FFD.html#562" data-hoverable="true" data-position="562" data-target-file="Leios.FFD.html">FFD.-⟦</a> <a id="5043" href="Leios.FFD.html#B1-L15" class="InductiveConstructor type-hoverable" data-original-href="Leios.FFD.html#311" data-hoverable="true" data-position="311" data-target-file="Leios.FFD.html">Send</a> <a id="5048" class="Symbol">(</a><a id="5049" href="Leios.Blocks.html#B1-L147" class="InductiveConstructor type-hoverable" data-original-href="Leios.Blocks.html#4632" data-hoverable="true" data-position="4632" data-target-file="Leios.Blocks.html">vtHeader</a> <a id="5058" href="Leios.Short.html#B1-L3" class="Bound type-hoverable" data-original-href="Leios.Short.html#4886" data-hoverable="true" data-position="4886" data-target-file="Leios.Short.html">votes</a><a id="5063" class="Symbol">)</a> <a id="5065" href="Agda.Builtin.Maybe.html#B1-L7" class="InductiveConstructor type-hoverable" data-original-href="Agda.Builtin.Maybe.html#194" data-hoverable="true" data-position="194" data-target-file="Agda.Builtin.Maybe.html">nothing</a> <a id="5073" href="Leios.FFD.html#B1-L25" class="Function Operator type-hoverable" data-original-href="Leios.FFD.html#562" data-hoverable="true" data-position="562" data-target-file="Leios.FFD.html">/</a> <a id="5075" href="Leios.FFD.html#B1-L19" class="InductiveConstructor type-hoverable" data-original-href="Leios.FFD.html#397" data-hoverable="true" data-position="397" data-target-file="Leios.FFD.html">SendRes</a> <a id="5083" href="Leios.FFD.html#B1-L25" class="Function Operator type-hoverable" data-original-href="Leios.FFD.html#562" data-hoverable="true" data-position="562" data-target-file="Leios.FFD.html">⟧⇀</a> <a id="5086" href="Leios.Short.html#1698" class="Generalizable">ffds'</a></div><div id="B6-LC8" class="code-line">          <a id="5102" href="Prelude.InferenceRules.html#B1-L160" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#11315" data-hoverable="true" data-position="11315" data-target-file="Prelude.InferenceRules.html">─────────────────────────────────────────────────────────────────────────</a></div><div id="B6-LC9" class="code-line">          <a id="5186" href="Leios.Short.html#1661" class="Generalizable">s</a> <a id="5188" href="Leios.Short.html#B1-L1" class="Datatype Operator type-hoverable" data-original-href="Leios.Short.html#3193" data-hoverable="true" data-position="3193" data-target-file="Leios.Short.html">↝</a> <a id="5190" href="Leios.Protocol.html#B1-L95" class="Function type-hoverable" data-original-href="Leios.Protocol.html#3062" data-hoverable="true" data-position="3062" data-target-file="Leios.Protocol.html">addUpkeep-Stage</a> <a id="5206" class="Keyword">record</a> <a id="5213" href="Leios.Short.html#1661" class="Generalizable">s</a> <a id="5215" class="Symbol">{</a> <a id="5217" href="Leios.Protocol.html#B1-L46" class="Field type-hoverable" data-original-href="Leios.Protocol.html#1452" data-hoverable="true" data-position="1452" data-target-file="Leios.Protocol.html">FFDState</a> <a id="5226" class="Symbol">=</a> <a id="5228" href="Leios.Short.html#1698" class="Generalizable">ffds'</a> <a id="5234" class="Symbol">}</a> <a id="5236" href="Leios.Short.html#1201" class="InductiveConstructor">VT-Role</a></div></div></div><button class="copy-code-button" title="Copy code">
        <svg width="16" height="16" viewBox="0 0 16 16">
          <path fill="currentColor" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path fill="currentColor" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
        </svg>
      </button></pre>
<h4 id="negative-rules">Negative rules</h4>
<pre class="Agda has-copy-button" id="B7"><div class="code-container"><div class="line-numbers"><a href="#B7-L1" id="B7-L1" class="line-number" data-line-number="1" data-block-id="B7">1</a><a href="#B7-L2" id="B7-L2" class="line-number" data-line-number="2" data-block-id="B7">2</a><a href="#B7-L3" id="B7-L3" class="line-number" data-line-number="3" data-block-id="B7">3</a><a href="#B7-L4" id="B7-L4" class="line-number" data-line-number="4" data-block-id="B7">4</a><a href="#B7-L5" id="B7-L5" class="line-number" data-line-number="5" data-block-id="B7">5</a></div><div class="code-content"><div id="B7-LC1" class="code-line">  <a id="_↝_.No-IB-Role"></a><a id="5278" href="Leios.Short.html#B1-L1" class="InductiveConstructor type-hoverable" data-original-href="Leios.Short.html#5278" data-hoverable="true" data-position="5278" data-target-file="Leios.Short.html">No-IB-Role</a> <a id="5289" class="Symbol">:</a> <a id="5291" class="Keyword">let</a> <a id="5295" class="Keyword">open</a> <a id="5300" href="Leios.Protocol.html#B1-L43" class="Module type-hoverable" data-original-href="Leios.Protocol.html#1359" data-hoverable="true" data-position="1359" data-target-file="Leios.Protocol.html">LeiosState</a> <a id="5311" href="Leios.Short.html#1661" class="Generalizable">s</a> <a id="5313" class="Keyword">in</a></div><div id="B7-LC2" class="code-line">             <a id="5329" href="Prelude.InferenceRules.html#B1-L689" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#56074" data-hoverable="true" data-position="56074" data-target-file="Prelude.InferenceRules.html">∙</a> <a id="5331" href="Leios.Protocol.html#B1-L79" class="Function type-hoverable" data-original-href="Leios.Protocol.html#2475" data-hoverable="true" data-position="2475" data-target-file="Leios.Protocol.html">needsUpkeep</a> <a id="5343" href="Leios.Short.html#B1-L2" class="InductiveConstructor type-hoverable" data-original-href="Leios.Short.html#1033" data-hoverable="true" data-position="1033" data-target-file="Leios.Short.html">IB-Role</a></div><div id="B7-LC3" class="code-line">             <a id="5364" href="Prelude.InferenceRules.html#B1-L685" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#56005" data-hoverable="true" data-position="56005" data-target-file="Prelude.InferenceRules.html">∙</a> <a id="5366" class="Symbol">(∀</a> <a id="5369" href="Leios.Short.html#B1-L3" class="Bound type-hoverable" data-original-href="Leios.Short.html#5369" data-hoverable="true" data-position="5369" data-target-file="Leios.Short.html">π</a> <a id="5371" class="Symbol">→</a> <a id="5373" href="Relation.Nullary.Negation.Core.html#B1-L26" class="Function Operator type-hoverable" data-original-href="Relation.Nullary.Negation.Core.html#658" data-hoverable="true" data-position="658" data-target-file="Relation.Nullary.Negation.Core.html">¬</a> <a id="5375" href="Leios.VRF.html#B1-L37" class="Function type-hoverable" data-original-href="Leios.VRF.html#1245" data-hoverable="true" data-position="1245" data-target-file="Leios.VRF.html">canProduceIB</a> <a id="5388" href="Leios.Protocol.html#B1-L52" class="Function type-hoverable" data-original-href="Leios.Protocol.html#1668" data-hoverable="true" data-position="1668" data-target-file="Leios.Protocol.html">slot</a> <a id="5393" href="Leios.SpecStructure.html#B1-L32" class="Field type-hoverable" data-original-href="Leios.SpecStructure.html#730" data-hoverable="true" data-position="730" data-target-file="Leios.SpecStructure.html">sk-IB</a> <a id="5399" class="Symbol">(</a><a id="5400" href="Leios.Protocol.html#B1-L124" class="Function type-hoverable" data-original-href="Leios.Protocol.html#3868" data-hoverable="true" data-position="3868" data-target-file="Leios.Protocol.html">stake</a> <a id="5406" href="Leios.Short.html#1661" class="Generalizable">s</a><a id="5407" class="Symbol">)</a> <a id="5409" href="Leios.Short.html#B1-L3" class="Bound type-hoverable" data-original-href="Leios.Short.html#5369" data-hoverable="true" data-position="5369" data-target-file="Leios.Short.html">π</a><a id="5410" class="Symbol">)</a></div><div id="B7-LC4" class="code-line">             <a id="5425" href="Prelude.InferenceRules.html#B1-L188" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#13121" data-hoverable="true" data-position="13121" data-target-file="Prelude.InferenceRules.html">─────────────────────────────────────────────</a></div><div id="B7-LC5" class="code-line">             <a id="5484" href="Leios.Short.html#1661" class="Generalizable">s</a> <a id="5486" href="Leios.Short.html#B1-L1" class="Datatype Operator type-hoverable" data-original-href="Leios.Short.html#3193" data-hoverable="true" data-position="3193" data-target-file="Leios.Short.html">↝</a> <a id="5488" href="Leios.Protocol.html#B1-L91" class="Function type-hoverable" data-original-href="Leios.Protocol.html#2892" data-hoverable="true" data-position="2892" data-target-file="Leios.Protocol.html">addUpkeep</a> <a id="5498" href="Leios.Short.html#1661" class="Generalizable">s</a> <a id="5500" href="Leios.Short.html#B1-L2" class="InductiveConstructor type-hoverable" data-original-href="Leios.Short.html#1033" data-hoverable="true" data-position="1033" data-target-file="Leios.Short.html">IB-Role</a></div></div></div><button class="copy-code-button" title="Copy code">
        <svg width="16" height="16" viewBox="0 0 16 16">
          <path fill="currentColor" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path fill="currentColor" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
        </svg>
      </button></pre>
<pre class="Agda has-copy-button" id="B8"><div class="code-container"><div class="line-numbers"><a href="#B8-L1" id="B8-L1" class="line-number" data-line-number="1" data-block-id="B8">1</a><a href="#B8-L2" id="B8-L2" class="line-number" data-line-number="2" data-block-id="B8">2</a><a href="#B8-L3" id="B8-L3" class="line-number" data-line-number="3" data-block-id="B8">3</a><a href="#B8-L4" id="B8-L4" class="line-number" data-line-number="4" data-block-id="B8">4</a><a href="#B8-L5" id="B8-L5" class="line-number" data-line-number="5" data-block-id="B8">5</a></div><div class="code-content"><div id="B8-LC1" class="code-line">  <a id="_↝_.No-EB-Role"></a><a id="5522" href="Leios.Short.html#B1-L1" class="InductiveConstructor type-hoverable" data-original-href="Leios.Short.html#5522" data-hoverable="true" data-position="5522" data-target-file="Leios.Short.html">No-EB-Role</a> <a id="5533" class="Symbol">:</a> <a id="5535" class="Keyword">let</a> <a id="5539" class="Keyword">open</a> <a id="5544" href="Leios.Protocol.html#B1-L43" class="Module type-hoverable" data-original-href="Leios.Protocol.html#1359" data-hoverable="true" data-position="1359" data-target-file="Leios.Protocol.html">LeiosState</a> <a id="5555" href="Leios.Short.html#1661" class="Generalizable">s</a> <a id="5557" class="Keyword">in</a></div><div id="B8-LC2" class="code-line">             <a id="5573" href="Prelude.InferenceRules.html#B1-L689" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#56074" data-hoverable="true" data-position="56074" data-target-file="Prelude.InferenceRules.html">∙</a> <a id="5575" href="Leios.Protocol.html#B1-L79" class="Function type-hoverable" data-original-href="Leios.Protocol.html#2475" data-hoverable="true" data-position="2475" data-target-file="Leios.Protocol.html">needsUpkeep</a> <a id="5587" href="Leios.Short.html#B1-L2" class="InductiveConstructor type-hoverable" data-original-href="Leios.Short.html#1041" data-hoverable="true" data-position="1041" data-target-file="Leios.Short.html">EB-Role</a></div><div id="B8-LC3" class="code-line">             <a id="5608" href="Prelude.InferenceRules.html#B1-L685" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#56005" data-hoverable="true" data-position="56005" data-target-file="Prelude.InferenceRules.html">∙</a> <a id="5610" class="Symbol">(∀</a> <a id="5613" href="Leios.Short.html#B1-L3" class="Bound type-hoverable" data-original-href="Leios.Short.html#5613" data-hoverable="true" data-position="5613" data-target-file="Leios.Short.html">π</a> <a id="5615" class="Symbol">→</a> <a id="5617" href="Relation.Nullary.Negation.Core.html#B1-L26" class="Function Operator type-hoverable" data-original-href="Relation.Nullary.Negation.Core.html#658" data-hoverable="true" data-position="658" data-target-file="Relation.Nullary.Negation.Core.html">¬</a> <a id="5619" href="Leios.VRF.html#B1-L49" class="Function type-hoverable" data-original-href="Leios.VRF.html#1849" data-hoverable="true" data-position="1849" data-target-file="Leios.VRF.html">canProduceEB</a> <a id="5632" href="Leios.Protocol.html#B1-L52" class="Function type-hoverable" data-original-href="Leios.Protocol.html#1668" data-hoverable="true" data-position="1668" data-target-file="Leios.Protocol.html">slot</a> <a id="5637" href="Leios.SpecStructure.html#B1-L32" class="Field type-hoverable" data-original-href="Leios.SpecStructure.html#736" data-hoverable="true" data-position="736" data-target-file="Leios.SpecStructure.html">sk-EB</a> <a id="5643" class="Symbol">(</a><a id="5644" href="Leios.Protocol.html#B1-L124" class="Function type-hoverable" data-original-href="Leios.Protocol.html#3868" data-hoverable="true" data-position="3868" data-target-file="Leios.Protocol.html">stake</a> <a id="5650" href="Leios.Short.html#1661" class="Generalizable">s</a><a id="5651" class="Symbol">)</a> <a id="5653" href="Leios.Short.html#B1-L3" class="Bound type-hoverable" data-original-href="Leios.Short.html#5613" data-hoverable="true" data-position="5613" data-target-file="Leios.Short.html">π</a><a id="5654" class="Symbol">)</a></div><div id="B8-LC4" class="code-line">             <a id="5669" href="Prelude.InferenceRules.html#B1-L188" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#13121" data-hoverable="true" data-position="13121" data-target-file="Prelude.InferenceRules.html">─────────────────────────────────────────────</a></div><div id="B8-LC5" class="code-line">             <a id="5728" href="Leios.Short.html#1661" class="Generalizable">s</a> <a id="5730" href="Leios.Short.html#B1-L1" class="Datatype Operator type-hoverable" data-original-href="Leios.Short.html#3193" data-hoverable="true" data-position="3193" data-target-file="Leios.Short.html">↝</a> <a id="5732" href="Leios.Protocol.html#B1-L91" class="Function type-hoverable" data-original-href="Leios.Protocol.html#2892" data-hoverable="true" data-position="2892" data-target-file="Leios.Protocol.html">addUpkeep</a> <a id="5742" href="Leios.Short.html#1661" class="Generalizable">s</a> <a id="5744" href="Leios.Short.html#B1-L2" class="InductiveConstructor type-hoverable" data-original-href="Leios.Short.html#1041" data-hoverable="true" data-position="1041" data-target-file="Leios.Short.html">EB-Role</a></div></div></div><button class="copy-code-button" title="Copy code">
        <svg width="16" height="16" viewBox="0 0 16 16">
          <path fill="currentColor" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path fill="currentColor" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
        </svg>
      </button></pre>
<pre class="Agda has-copy-button" id="B9"><div class="code-container"><div class="line-numbers"><a href="#B9-L1" id="B9-L1" class="line-number" data-line-number="1" data-block-id="B9">1</a><a href="#B9-L2" id="B9-L2" class="line-number" data-line-number="2" data-block-id="B9">2</a><a href="#B9-L3" id="B9-L3" class="line-number" data-line-number="3" data-block-id="B9">3</a><a href="#B9-L4" id="B9-L4" class="line-number" data-line-number="4" data-block-id="B9">4</a><a href="#B9-L5" id="B9-L5" class="line-number" data-line-number="5" data-block-id="B9">5</a></div><div class="code-content"><div id="B9-LC1" class="code-line">  <a id="_↝_.No-VT-Role"></a><a id="5766" href="Leios.Short.html#B1-L1" class="InductiveConstructor type-hoverable" data-original-href="Leios.Short.html#5766" data-hoverable="true" data-position="5766" data-target-file="Leios.Short.html">No-VT-Role</a> <a id="5777" class="Symbol">:</a> <a id="5779" class="Keyword">let</a> <a id="5783" class="Keyword">open</a> <a id="5788" href="Leios.Protocol.html#B1-L43" class="Module type-hoverable" data-original-href="Leios.Protocol.html#1359" data-hoverable="true" data-position="1359" data-target-file="Leios.Protocol.html">LeiosState</a> <a id="5799" href="Leios.Short.html#1661" class="Generalizable">s</a> <a id="5801" class="Keyword">in</a></div><div id="B9-LC2" class="code-line">             <a id="5817" href="Prelude.InferenceRules.html#B1-L689" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#56074" data-hoverable="true" data-position="56074" data-target-file="Prelude.InferenceRules.html">∙</a> <a id="5819" href="Leios.Protocol.html#B1-L82" class="Function type-hoverable" data-original-href="Leios.Protocol.html#2535" data-hoverable="true" data-position="2535" data-target-file="Leios.Protocol.html">needsUpkeep-Stage</a> <a id="5837" href="Leios.Short.html#1201" class="InductiveConstructor">VT-Role</a></div><div id="B9-LC3" class="code-line">             <a id="5858" href="Prelude.InferenceRules.html#B1-L685" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#56005" data-hoverable="true" data-position="56005" data-target-file="Prelude.InferenceRules.html">∙</a> <a id="5860" href="Relation.Nullary.Negation.Core.html#B1-L26" class="Function Operator type-hoverable" data-original-href="Relation.Nullary.Negation.Core.html#658" data-hoverable="true" data-position="658" data-target-file="Relation.Nullary.Negation.Core.html">¬</a> <a id="5862" href="Leios.VRF.html#B1-L61" class="Function type-hoverable" data-original-href="Leios.VRF.html#2453" data-hoverable="true" data-position="2453" data-target-file="Leios.VRF.html">canProduceV</a> <a id="5874" href="Leios.Protocol.html#B1-L52" class="Function type-hoverable" data-original-href="Leios.Protocol.html#1668" data-hoverable="true" data-position="1668" data-target-file="Leios.Protocol.html">slot</a> <a id="5879" href="Leios.SpecStructure.html#B1-L32" class="Field type-hoverable" data-original-href="Leios.SpecStructure.html#742" data-hoverable="true" data-position="742" data-target-file="Leios.SpecStructure.html">sk-VT</a> <a id="5885" class="Symbol">(</a><a id="5886" href="Leios.Protocol.html#B1-L124" class="Function type-hoverable" data-original-href="Leios.Protocol.html#3868" data-hoverable="true" data-position="3868" data-target-file="Leios.Protocol.html">stake</a> <a id="5892" href="Leios.Short.html#1661" class="Generalizable">s</a><a id="5893" class="Symbol">)</a></div><div id="B9-LC4" class="code-line">             <a id="5908" href="Prelude.InferenceRules.html#B1-L188" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#13121" data-hoverable="true" data-position="13121" data-target-file="Prelude.InferenceRules.html">─────────────────────────────────────────────</a></div><div id="B9-LC5" class="code-line">             <a id="5967" href="Leios.Short.html#1661" class="Generalizable">s</a> <a id="5969" href="Leios.Short.html#B1-L1" class="Datatype Operator type-hoverable" data-original-href="Leios.Short.html#3193" data-hoverable="true" data-position="3193" data-target-file="Leios.Short.html">↝</a> <a id="5971" href="Leios.Protocol.html#B1-L95" class="Function type-hoverable" data-original-href="Leios.Protocol.html#3062" data-hoverable="true" data-position="3062" data-target-file="Leios.Protocol.html">addUpkeep-Stage</a> <a id="5987" href="Leios.Short.html#1661" class="Generalizable">s</a> <a id="5989" href="Leios.Short.html#1201" class="InductiveConstructor">VT-Role</a></div></div></div><button class="copy-code-button" title="Copy code">
        <svg width="16" height="16" viewBox="0 0 16 16">
          <path fill="currentColor" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path fill="currentColor" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
        </svg>
      </button></pre>
<h3 id="uniform-short-pipeline">Uniform short-pipeline</h3>
<pre class="Agda has-copy-button" id="B10"><div class="code-container"><div class="line-numbers"><a href="#B10-L1" id="B10-L1" class="line-number" data-line-number="1" data-block-id="B10">1</a><a href="#B10-L2" id="B10-L2" class="line-number" data-line-number="2" data-block-id="B10">2</a><a href="#B10-L3" id="B10-L3" class="line-number" data-line-number="3" data-block-id="B10">3</a><a href="#B10-L4" id="B10-L4" class="line-number" data-line-number="4" data-block-id="B10">4</a><a href="#B10-L5" id="B10-L5" class="line-number" data-line-number="5" data-block-id="B10">5</a><a href="#B10-L6" id="B10-L6" class="line-number" data-line-number="6" data-block-id="B10">6</a><a href="#B10-L7" id="B10-L7" class="line-number" data-line-number="7" data-block-id="B10">7</a><a href="#B10-L8" id="B10-L8" class="line-number" data-line-number="8" data-block-id="B10">8</a></div><div class="code-content"><div id="B10-LC1" class="code-line"><a id="stage"></a><a id="6036" href="Leios.Short.html#B1-L1" class="Function type-hoverable" data-original-href="Leios.Short.html#6036" data-hoverable="true" data-position="6036" data-target-file="Leios.Short.html">stage</a> <a id="6042" class="Symbol">:</a> <a id="6044" href="Agda.Builtin.Nat.html#B1-L8" class="Datatype type-hoverable" data-original-href="Agda.Builtin.Nat.html#203" data-hoverable="true" data-position="203" data-target-file="Agda.Builtin.Nat.html">ℕ</a> <a id="6046" class="Symbol">→</a> <a id="6048" class="Symbol">⦃</a> <a id="6050" href="Leios.Short.html#B1-L1" class="Bound type-hoverable" data-original-href="Leios.Short.html#6050" data-hoverable="true" data-position="6050" data-target-file="Leios.Short.html">_</a> <a id="6052" class="Symbol">:</a> <a id="6054" href="Data.Nat.Base.html#B1-L116" class="Record type-hoverable" data-original-href="Data.Nat.Base.html#3260" data-hoverable="true" data-position="3260" data-target-file="Data.Nat.Base.html">NonZero</a> <a id="6062" href="Leios.Abstract.html#B1-L29" class="Function type-hoverable" data-original-href="Leios.Abstract.html#961" data-hoverable="true" data-position="961" data-target-file="Leios.Abstract.html">L</a> <a id="6064" class="Symbol">⦄</a> <a id="6066" class="Symbol">→</a> <a id="6068" href="Agda.Builtin.Nat.html#B1-L8" class="Datatype type-hoverable" data-original-href="Agda.Builtin.Nat.html#203" data-hoverable="true" data-position="203" data-target-file="Agda.Builtin.Nat.html">ℕ</a></div><div id="B10-LC2" class="code-line"><a id="6070" href="Leios.Short.html#B1-L1" class="Function type-hoverable" data-original-href="Leios.Short.html#6036" data-hoverable="true" data-position="6036" data-target-file="Leios.Short.html">stage</a> <a id="6076" href="Leios.Short.html#B1-L2" class="Bound type-hoverable" data-original-href="Leios.Short.html#6076" data-hoverable="true" data-position="6076" data-target-file="Leios.Short.html">s</a> <a id="6078" class="Symbol">=</a> <a id="6080" href="Leios.Short.html#B1-L2" class="Bound type-hoverable" data-original-href="Leios.Short.html#6076" data-hoverable="true" data-position="6076" data-target-file="Leios.Short.html">s</a> <a id="6082" href="Data.Nat.Base.html#B1-L317" class="Function Operator type-hoverable" data-original-href="Data.Nat.Base.html#7096" data-hoverable="true" data-position="7096" data-target-file="Data.Nat.Base.html">/</a> <a id="6084" href="Leios.Abstract.html#B1-L29" class="Function type-hoverable" data-original-href="Leios.Abstract.html#961" data-hoverable="true" data-position="961" data-target-file="Leios.Abstract.html">L</a></div><div id="B10-LC3" class="code-line">&nbsp;</div><div id="B10-LC4" class="code-line"><a id="beginningOfStage"></a><a id="6087" href="Leios.Short.html#B1-L4" class="Function type-hoverable" data-original-href="Leios.Short.html#6087" data-hoverable="true" data-position="6087" data-target-file="Leios.Short.html">beginningOfStage</a> <a id="6104" class="Symbol">:</a> <a id="6106" href="Agda.Builtin.Nat.html#B1-L8" class="Datatype type-hoverable" data-original-href="Agda.Builtin.Nat.html#203" data-hoverable="true" data-position="203" data-target-file="Agda.Builtin.Nat.html">ℕ</a> <a id="6108" class="Symbol">→</a> <a id="6110" href="Agda.Primitive.html#B1-L14" class="Primitive type-hoverable" data-original-href="Agda.Primitive.html#388" data-hoverable="true" data-position="388" data-target-file="Agda.Primitive.html">Type</a></div><div id="B10-LC5" class="code-line"><a id="6115" href="Leios.Short.html#B1-L4" class="Function type-hoverable" data-original-href="Leios.Short.html#6087" data-hoverable="true" data-position="6087" data-target-file="Leios.Short.html">beginningOfStage</a> <a id="6132" href="Leios.Short.html#B1-L5" class="Bound type-hoverable" data-original-href="Leios.Short.html#6132" data-hoverable="true" data-position="6132" data-target-file="Leios.Short.html">s</a> <a id="6134" class="Symbol">=</a> <a id="6136" href="Leios.Short.html#B1-L1" class="Function type-hoverable" data-original-href="Leios.Short.html#6036" data-hoverable="true" data-position="6036" data-target-file="Leios.Short.html">stage</a> <a id="6142" href="Leios.Short.html#B1-L5" class="Bound type-hoverable" data-original-href="Leios.Short.html#6132" data-hoverable="true" data-position="6132" data-target-file="Leios.Short.html">s</a> <a id="6144" href="Agda.Builtin.Nat.html#B1-L31" class="Primitive Operator type-hoverable" data-original-href="Agda.Builtin.Nat.html#539" data-hoverable="true" data-position="539" data-target-file="Agda.Builtin.Nat.html">*</a> <a id="6146" href="Leios.Abstract.html#B1-L29" class="Function type-hoverable" data-original-href="Leios.Abstract.html#961" data-hoverable="true" data-position="961" data-target-file="Leios.Abstract.html">L</a> <a id="6148" href="Agda.Builtin.Equality.html#B1-L6" class="Datatype Operator type-hoverable" data-original-href="Agda.Builtin.Equality.html#150" data-hoverable="true" data-position="150" data-target-file="Agda.Builtin.Equality.html">≡</a> <a id="6150" href="Leios.Short.html#B1-L5" class="Bound type-hoverable" data-original-href="Leios.Short.html#6132" data-hoverable="true" data-position="6132" data-target-file="Leios.Short.html">s</a></div><div id="B10-LC6" class="code-line">&nbsp;</div><div id="B10-LC7" class="code-line"><a id="endOfStage"></a><a id="6153" href="Leios.Short.html#B1-L7" class="Function type-hoverable" data-original-href="Leios.Short.html#6153" data-hoverable="true" data-position="6153" data-target-file="Leios.Short.html">endOfStage</a> <a id="6164" class="Symbol">:</a> <a id="6166" href="Agda.Builtin.Nat.html#B1-L8" class="Datatype type-hoverable" data-original-href="Agda.Builtin.Nat.html#203" data-hoverable="true" data-position="203" data-target-file="Agda.Builtin.Nat.html">ℕ</a> <a id="6168" class="Symbol">→</a> <a id="6170" href="Agda.Primitive.html#B1-L14" class="Primitive type-hoverable" data-original-href="Agda.Primitive.html#388" data-hoverable="true" data-position="388" data-target-file="Agda.Primitive.html">Type</a></div><div id="B10-LC8" class="code-line"><a id="6175" href="Leios.Short.html#B1-L7" class="Function type-hoverable" data-original-href="Leios.Short.html#6153" data-hoverable="true" data-position="6153" data-target-file="Leios.Short.html">endOfStage</a> <a id="6186" href="Leios.Short.html#B1-L8" class="Bound type-hoverable" data-original-href="Leios.Short.html#6186" data-hoverable="true" data-position="6186" data-target-file="Leios.Short.html">s</a> <a id="6188" class="Symbol">=</a> <a id="6190" href="Agda.Builtin.Nat.html#B1-L10" class="InductiveConstructor type-hoverable" data-original-href="Agda.Builtin.Nat.html#234" data-hoverable="true" data-position="234" data-target-file="Agda.Builtin.Nat.html">suc</a> <a id="6194" class="Symbol">(</a><a id="6195" href="Leios.Short.html#B1-L1" class="Function type-hoverable" data-original-href="Leios.Short.html#6036" data-hoverable="true" data-position="6036" data-target-file="Leios.Short.html">stage</a> <a id="6201" href="Leios.Short.html#B1-L8" class="Bound type-hoverable" data-original-href="Leios.Short.html#6186" data-hoverable="true" data-position="6186" data-target-file="Leios.Short.html">s</a><a id="6202" class="Symbol">)</a> <a id="6204" href="Agda.Builtin.Equality.html#B1-L6" class="Datatype Operator type-hoverable" data-original-href="Agda.Builtin.Equality.html#150" data-hoverable="true" data-position="150" data-target-file="Agda.Builtin.Equality.html">≡</a> <a id="6206" href="Leios.Short.html#B1-L1" class="Function type-hoverable" data-original-href="Leios.Short.html#6036" data-hoverable="true" data-position="6036" data-target-file="Leios.Short.html">stage</a> <a id="6212" class="Symbol">(</a><a id="6213" href="Agda.Builtin.Nat.html#B1-L10" class="InductiveConstructor type-hoverable" data-original-href="Agda.Builtin.Nat.html#234" data-hoverable="true" data-position="234" data-target-file="Agda.Builtin.Nat.html">suc</a> <a id="6217" href="Leios.Short.html#B1-L8" class="Bound type-hoverable" data-original-href="Leios.Short.html#6186" data-hoverable="true" data-position="6186" data-target-file="Leios.Short.html">s</a><a id="6218" class="Symbol">)</a></div></div></div><button class="copy-code-button" title="Copy code">
        <svg width="16" height="16" viewBox="0 0 16 16">
          <path fill="currentColor" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path fill="currentColor" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
        </svg>
      </button></pre>
Predicate needed for slot transition. Special care needs to be taken
when starting from genesis.
<pre class="Agda has-copy-button" id="B11"><div class="code-container"><div class="line-numbers"><a href="#B11-L1" id="B11-L1" class="line-number" data-line-number="1" data-block-id="B11">1</a><a href="#B11-L2" id="B11-L2" class="line-number" data-line-number="2" data-block-id="B11">2</a><a href="#B11-L3" id="B11-L3" class="line-number" data-line-number="3" data-block-id="B11">3</a><a href="#B11-L4" id="B11-L4" class="line-number" data-line-number="4" data-block-id="B11">4</a><a href="#B11-L5" id="B11-L5" class="line-number" data-line-number="5" data-block-id="B11">5</a><a href="#B11-L6" id="B11-L6" class="line-number" data-line-number="6" data-block-id="B11">6</a><a href="#B11-L7" id="B11-L7" class="line-number" data-line-number="7" data-block-id="B11">7</a><a href="#B11-L8" id="B11-L8" class="line-number" data-line-number="8" data-block-id="B11">8</a><a href="#B11-L9" id="B11-L9" class="line-number" data-line-number="9" data-block-id="B11">9</a><a href="#B11-L10" id="B11-L10" class="line-number" data-line-number="10" data-block-id="B11">10</a><a href="#B11-L11" id="B11-L11" class="line-number" data-line-number="11" data-block-id="B11">11</a></div><div class="code-content"><div id="B11-LC1" class="code-line"><a id="allDone"></a><a id="6329" href="Leios.Short.html#B1-L1" class="Function type-hoverable" data-original-href="Leios.Short.html#6329" data-hoverable="true" data-position="6329" data-target-file="Leios.Short.html">allDone</a> <a id="6337" class="Symbol">:</a> <a id="6339" href="Leios.Protocol.html#B1-L43" class="Record type-hoverable" data-original-href="Leios.Protocol.html#1359" data-hoverable="true" data-position="1359" data-target-file="Leios.Protocol.html">LeiosState</a> <a id="6350" class="Symbol">→</a> <a id="6352" href="Agda.Primitive.html#B1-L14" class="Primitive type-hoverable" data-original-href="Agda.Primitive.html#388" data-hoverable="true" data-position="388" data-target-file="Agda.Primitive.html">Type</a></div><div id="B11-LC2" class="code-line"><a id="6357" href="Leios.Short.html#B1-L1" class="Function type-hoverable" data-original-href="Leios.Short.html#6329" data-hoverable="true" data-position="6329" data-target-file="Leios.Short.html">allDone</a> <a id="6365" class="Keyword">record</a> <a id="6372" class="Symbol">{</a> <a id="6374" href="Leios.Protocol.html#B1-L52" class="Field type-hoverable" data-original-href="Leios.Protocol.html#1668" data-hoverable="true" data-position="1668" data-target-file="Leios.Protocol.html">slot</a> <a id="6379" class="Symbol">=</a> <a id="6381" href="Leios.Short.html#B1-L2" class="Bound type-hoverable" data-original-href="Leios.Short.html#6381" data-hoverable="true" data-position="6381" data-target-file="Leios.Short.html">s</a> <a id="6383" class="Symbol">;</a> <a id="6385" href="Leios.Protocol.html#B1-L55" class="Field type-hoverable" data-original-href="Leios.Protocol.html#1765" data-hoverable="true" data-position="1765" data-target-file="Leios.Protocol.html">Upkeep</a> <a id="6392" class="Symbol">=</a> <a id="6394" href="Leios.Short.html#B1-L2" class="Bound type-hoverable" data-original-href="Leios.Short.html#6394" data-hoverable="true" data-position="6394" data-target-file="Leios.Short.html">u</a> <a id="6396" class="Symbol">;</a> <a id="6398" href="Leios.Protocol.html#B1-L56" class="Field type-hoverable" data-original-href="Leios.Protocol.html#1801" data-hoverable="true" data-position="1801" data-target-file="Leios.Protocol.html">Upkeep-Stage</a> <a id="6411" class="Symbol">=</a> <a id="6413" href="Leios.Short.html#B1-L2" class="Bound type-hoverable" data-original-href="Leios.Short.html#6413" data-hoverable="true" data-position="6413" data-target-file="Leios.Short.html">v</a> <a id="6415" class="Symbol">}</a> <a id="6417" class="Symbol">=</a></div><div id="B11-LC3" class="code-line">  <a id="6421" class="Comment">-- bootstrapping</a></div><div id="B11-LC4" class="code-line">    <a id="6442" class="Symbol">(</a><a id="6443" href="Leios.Short.html#B1-L1" class="Function type-hoverable" data-original-href="Leios.Short.html#6036" data-hoverable="true" data-position="6036" data-target-file="Leios.Short.html">stage</a> <a id="6449" href="Leios.Short.html#B1-L2" class="Bound type-hoverable" data-original-href="Leios.Short.html#6381" data-hoverable="true" data-position="6381" data-target-file="Leios.Short.html">s</a> <a id="6451" href="Class.HasOrder.Core.html#B1-L24" class="Field Operator type-hoverable" data-original-href="Class.HasOrder.Core.html#555" data-hoverable="true" data-position="555" data-target-file="Class.HasOrder.Core.html">&lt;</a> <a id="6453" class="Number">3</a> <a id="6455" href="Data.Product.Base.html#B1-L70" class="Function Operator type-hoverable" data-original-href="Data.Product.Base.html#1618" data-hoverable="true" data-position="1618" data-target-file="Data.Product.Base.html">×</a>                        <a id="6480" href="Leios.Short.html#B1-L2" class="Bound type-hoverable" data-original-href="Leios.Short.html#6394" data-hoverable="true" data-position="6394" data-target-file="Leios.Short.html">u</a> <a id="6482" href="Axiom.Set.html#B1-L76" class="Function Operator type-hoverable" data-original-href="Axiom.Set.html#2587" data-hoverable="true" data-position="2587" data-target-file="Axiom.Set.html">≡ᵉ</a> <a id="6485" href="Axiom.Set.html#B1-L169" class="Function type-hoverable" data-original-href="Axiom.Set.html#5718" data-hoverable="true" data-position="5718" data-target-file="Axiom.Set.html">fromList</a> <a id="6494" class="Symbol">(</a><a id="6495" href="Leios.Short.html#B1-L2" class="InductiveConstructor type-hoverable" data-original-href="Leios.Short.html#1033" data-hoverable="true" data-position="1033" data-target-file="Leios.Short.html">IB-Role</a>           <a id="6513" href="Agda.Builtin.List.html#B1-L8" class="InductiveConstructor Operator type-hoverable" data-original-href="Agda.Builtin.List.html#199" data-hoverable="true" data-position="199" data-target-file="Agda.Builtin.List.html">∷</a> <a id="6515" href="Leios.Short.html#B1-L2" class="InductiveConstructor type-hoverable" data-original-href="Leios.Short.html#1028" data-hoverable="true" data-position="1028" data-target-file="Leios.Short.html">Base</a> <a id="6520" href="Agda.Builtin.List.html#B1-L8" class="InductiveConstructor Operator type-hoverable" data-original-href="Agda.Builtin.List.html#199" data-hoverable="true" data-position="199" data-target-file="Agda.Builtin.List.html">∷</a> <a id="6522" href="Agda.Builtin.List.html#B1-L7" class="InductiveConstructor type-hoverable" data-original-href="Agda.Builtin.List.html#184" data-hoverable="true" data-position="184" data-target-file="Agda.Builtin.List.html">[]</a><a id="6524" class="Symbol">))</a></div><div id="B11-LC5" class="code-line">  <a id="6529" href="Data.Sum.Base.html#B1-L28" class="Datatype Operator type-hoverable" data-original-href="Data.Sum.Base.html#625" data-hoverable="true" data-position="625" data-target-file="Data.Sum.Base.html">⊎</a> <a id="6531" class="Symbol">(</a><a id="6532" href="Leios.Short.html#B1-L1" class="Function type-hoverable" data-original-href="Leios.Short.html#6036" data-hoverable="true" data-position="6036" data-target-file="Leios.Short.html">stage</a> <a id="6538" href="Leios.Short.html#B1-L2" class="Bound type-hoverable" data-original-href="Leios.Short.html#6381" data-hoverable="true" data-position="6381" data-target-file="Leios.Short.html">s</a> <a id="6540" href="Agda.Builtin.Equality.html#B1-L6" class="Datatype Operator type-hoverable" data-original-href="Agda.Builtin.Equality.html#150" data-hoverable="true" data-position="150" data-target-file="Agda.Builtin.Equality.html">≡</a> <a id="6542" class="Number">3</a> <a id="6544" href="Data.Product.Base.html#B1-L70" class="Function Operator type-hoverable" data-original-href="Data.Product.Base.html#1618" data-hoverable="true" data-position="1618" data-target-file="Data.Product.Base.html">×</a>   <a id="6548" href="Leios.Short.html#B1-L4" class="Function type-hoverable" data-original-href="Leios.Short.html#6087" data-hoverable="true" data-position="6087" data-target-file="Leios.Short.html">beginningOfStage</a> <a id="6565" href="Leios.Short.html#B1-L2" class="Bound type-hoverable" data-original-href="Leios.Short.html#6381" data-hoverable="true" data-position="6381" data-target-file="Leios.Short.html">s</a> <a id="6567" href="Data.Product.Base.html#B1-L70" class="Function Operator type-hoverable" data-original-href="Data.Product.Base.html#1618" data-hoverable="true" data-position="1618" data-target-file="Data.Product.Base.html">×</a> <a id="6569" href="Leios.Short.html#B1-L2" class="Bound type-hoverable" data-original-href="Leios.Short.html#6394" data-hoverable="true" data-position="6394" data-target-file="Leios.Short.html">u</a> <a id="6571" href="Axiom.Set.html#B1-L76" class="Function Operator type-hoverable" data-original-href="Axiom.Set.html#2587" data-hoverable="true" data-position="2587" data-target-file="Axiom.Set.html">≡ᵉ</a> <a id="6574" href="Axiom.Set.html#B1-L169" class="Function type-hoverable" data-original-href="Axiom.Set.html#5718" data-hoverable="true" data-position="5718" data-target-file="Axiom.Set.html">fromList</a> <a id="6583" class="Symbol">(</a><a id="6584" href="Leios.Short.html#B1-L2" class="InductiveConstructor type-hoverable" data-original-href="Leios.Short.html#1033" data-hoverable="true" data-position="1033" data-target-file="Leios.Short.html">IB-Role</a> <a id="6592" href="Agda.Builtin.List.html#B1-L8" class="InductiveConstructor Operator type-hoverable" data-original-href="Agda.Builtin.List.html#199" data-hoverable="true" data-position="199" data-target-file="Agda.Builtin.List.html">∷</a> <a id="6594" href="Leios.Short.html#B1-L2" class="InductiveConstructor type-hoverable" data-original-href="Leios.Short.html#1041" data-hoverable="true" data-position="1041" data-target-file="Leios.Short.html">EB-Role</a> <a id="6602" href="Agda.Builtin.List.html#B1-L8" class="InductiveConstructor Operator type-hoverable" data-original-href="Agda.Builtin.List.html#199" data-hoverable="true" data-position="199" data-target-file="Agda.Builtin.List.html">∷</a> <a id="6604" href="Leios.Short.html#B1-L2" class="InductiveConstructor type-hoverable" data-original-href="Leios.Short.html#1028" data-hoverable="true" data-position="1028" data-target-file="Leios.Short.html">Base</a> <a id="6609" href="Agda.Builtin.List.html#B1-L8" class="InductiveConstructor Operator type-hoverable" data-original-href="Agda.Builtin.List.html#199" data-hoverable="true" data-position="199" data-target-file="Agda.Builtin.List.html">∷</a> <a id="6611" href="Agda.Builtin.List.html#B1-L7" class="InductiveConstructor type-hoverable" data-original-href="Agda.Builtin.List.html#184" data-hoverable="true" data-position="184" data-target-file="Agda.Builtin.List.html">[]</a><a id="6613" class="Symbol">))</a></div><div id="B11-LC6" class="code-line">  <a id="6618" href="Data.Sum.Base.html#B1-L28" class="Datatype Operator type-hoverable" data-original-href="Data.Sum.Base.html#625" data-hoverable="true" data-position="625" data-target-file="Data.Sum.Base.html">⊎</a> <a id="6620" class="Symbol">(</a><a id="6621" href="Leios.Short.html#B1-L1" class="Function type-hoverable" data-original-href="Leios.Short.html#6036" data-hoverable="true" data-position="6036" data-target-file="Leios.Short.html">stage</a> <a id="6627" href="Leios.Short.html#B1-L2" class="Bound type-hoverable" data-original-href="Leios.Short.html#6381" data-hoverable="true" data-position="6381" data-target-file="Leios.Short.html">s</a> <a id="6629" href="Agda.Builtin.Equality.html#B1-L6" class="Datatype Operator type-hoverable" data-original-href="Agda.Builtin.Equality.html#150" data-hoverable="true" data-position="150" data-target-file="Agda.Builtin.Equality.html">≡</a> <a id="6631" class="Number">3</a> <a id="6633" href="Data.Product.Base.html#B1-L70" class="Function Operator type-hoverable" data-original-href="Data.Product.Base.html#1618" data-hoverable="true" data-position="1618" data-target-file="Data.Product.Base.html">×</a> <a id="6635" href="Relation.Nullary.Negation.Core.html#B1-L26" class="Function Operator type-hoverable" data-original-href="Relation.Nullary.Negation.Core.html#658" data-hoverable="true" data-position="658" data-target-file="Relation.Nullary.Negation.Core.html">¬</a> <a id="6637" href="Leios.Short.html#B1-L4" class="Function type-hoverable" data-original-href="Leios.Short.html#6087" data-hoverable="true" data-position="6087" data-target-file="Leios.Short.html">beginningOfStage</a> <a id="6654" href="Leios.Short.html#B1-L2" class="Bound type-hoverable" data-original-href="Leios.Short.html#6381" data-hoverable="true" data-position="6381" data-target-file="Leios.Short.html">s</a> <a id="6656" href="Data.Product.Base.html#B1-L70" class="Function Operator type-hoverable" data-original-href="Data.Product.Base.html#1618" data-hoverable="true" data-position="1618" data-target-file="Data.Product.Base.html">×</a> <a id="6658" href="Leios.Short.html#B1-L2" class="Bound type-hoverable" data-original-href="Leios.Short.html#6394" data-hoverable="true" data-position="6394" data-target-file="Leios.Short.html">u</a> <a id="6660" href="Axiom.Set.html#B1-L76" class="Function Operator type-hoverable" data-original-href="Axiom.Set.html#2587" data-hoverable="true" data-position="2587" data-target-file="Axiom.Set.html">≡ᵉ</a> <a id="6663" href="Axiom.Set.html#B1-L169" class="Function type-hoverable" data-original-href="Axiom.Set.html#5718" data-hoverable="true" data-position="5718" data-target-file="Axiom.Set.html">fromList</a> <a id="6672" class="Symbol">(</a><a id="6673" href="Leios.Short.html#B1-L2" class="InductiveConstructor type-hoverable" data-original-href="Leios.Short.html#1033" data-hoverable="true" data-position="1033" data-target-file="Leios.Short.html">IB-Role</a>           <a id="6691" href="Agda.Builtin.List.html#B1-L8" class="InductiveConstructor Operator type-hoverable" data-original-href="Agda.Builtin.List.html#199" data-hoverable="true" data-position="199" data-target-file="Agda.Builtin.List.html">∷</a> <a id="6693" href="Leios.Short.html#B1-L2" class="InductiveConstructor type-hoverable" data-original-href="Leios.Short.html#1028" data-hoverable="true" data-position="1028" data-target-file="Leios.Short.html">Base</a> <a id="6698" href="Agda.Builtin.List.html#B1-L8" class="InductiveConstructor Operator type-hoverable" data-original-href="Agda.Builtin.List.html#199" data-hoverable="true" data-position="199" data-target-file="Agda.Builtin.List.html">∷</a> <a id="6700" href="Agda.Builtin.List.html#B1-L7" class="InductiveConstructor type-hoverable" data-original-href="Agda.Builtin.List.html#184" data-hoverable="true" data-position="184" data-target-file="Agda.Builtin.List.html">[]</a><a id="6702" class="Symbol">))</a></div><div id="B11-LC7" class="code-line">  <a id="6707" class="Comment">-- done</a></div><div id="B11-LC8" class="code-line">  <a id="6717" href="Data.Sum.Base.html#B1-L28" class="Datatype Operator type-hoverable" data-original-href="Data.Sum.Base.html#625" data-hoverable="true" data-position="625" data-target-file="Data.Sum.Base.html">⊎</a> <a id="6719" class="Symbol">(</a><a id="6720" href="Leios.Short.html#B1-L1" class="Function type-hoverable" data-original-href="Leios.Short.html#6036" data-hoverable="true" data-position="6036" data-target-file="Leios.Short.html">stage</a> <a id="6726" href="Leios.Short.html#B1-L2" class="Bound type-hoverable" data-original-href="Leios.Short.html#6381" data-hoverable="true" data-position="6381" data-target-file="Leios.Short.html">s</a> <a id="6728" href="Class.HasOrder.Core.html#B1-L30" class="Function Operator type-hoverable" data-original-href="Class.HasOrder.Core.html#748" data-hoverable="true" data-position="748" data-target-file="Class.HasOrder.Core.html">&gt;</a> <a id="6730" class="Number">3</a> <a id="6732" href="Data.Product.Base.html#B1-L70" class="Function Operator type-hoverable" data-original-href="Data.Product.Base.html#1618" data-hoverable="true" data-position="1618" data-target-file="Data.Product.Base.html">×</a>   <a id="6736" href="Leios.Short.html#B1-L4" class="Function type-hoverable" data-original-href="Leios.Short.html#6087" data-hoverable="true" data-position="6087" data-target-file="Leios.Short.html">beginningOfStage</a> <a id="6753" href="Leios.Short.html#B1-L2" class="Bound type-hoverable" data-original-href="Leios.Short.html#6381" data-hoverable="true" data-position="6381" data-target-file="Leios.Short.html">s</a> <a id="6755" href="Data.Product.Base.html#B1-L70" class="Function Operator type-hoverable" data-original-href="Data.Product.Base.html#1618" data-hoverable="true" data-position="1618" data-target-file="Data.Product.Base.html">×</a> <a id="6757" href="Leios.Short.html#B1-L2" class="Bound type-hoverable" data-original-href="Leios.Short.html#6394" data-hoverable="true" data-position="6394" data-target-file="Leios.Short.html">u</a> <a id="6759" href="Axiom.Set.html#B1-L76" class="Function Operator type-hoverable" data-original-href="Axiom.Set.html#2587" data-hoverable="true" data-position="2587" data-target-file="Axiom.Set.html">≡ᵉ</a> <a id="6762" href="Axiom.Set.html#B1-L169" class="Function type-hoverable" data-original-href="Axiom.Set.html#5718" data-hoverable="true" data-position="5718" data-target-file="Axiom.Set.html">fromList</a> <a id="6771" class="Symbol">(</a><a id="6772" href="Leios.Short.html#B1-L2" class="InductiveConstructor type-hoverable" data-original-href="Leios.Short.html#1033" data-hoverable="true" data-position="1033" data-target-file="Leios.Short.html">IB-Role</a> <a id="6780" href="Agda.Builtin.List.html#B1-L8" class="InductiveConstructor Operator type-hoverable" data-original-href="Agda.Builtin.List.html#199" data-hoverable="true" data-position="199" data-target-file="Agda.Builtin.List.html">∷</a> <a id="6782" href="Leios.Short.html#B1-L2" class="InductiveConstructor type-hoverable" data-original-href="Leios.Short.html#1041" data-hoverable="true" data-position="1041" data-target-file="Leios.Short.html">EB-Role</a> <a id="6790" href="Agda.Builtin.List.html#B1-L8" class="InductiveConstructor Operator type-hoverable" data-original-href="Agda.Builtin.List.html#199" data-hoverable="true" data-position="199" data-target-file="Agda.Builtin.List.html">∷</a> <a id="6792" href="Leios.Short.html#B1-L2" class="InductiveConstructor type-hoverable" data-original-href="Leios.Short.html#1028" data-hoverable="true" data-position="1028" data-target-file="Leios.Short.html">Base</a> <a id="6797" href="Agda.Builtin.List.html#B1-L8" class="InductiveConstructor Operator type-hoverable" data-original-href="Agda.Builtin.List.html#199" data-hoverable="true" data-position="199" data-target-file="Agda.Builtin.List.html">∷</a> <a id="6799" href="Agda.Builtin.List.html#B1-L7" class="InductiveConstructor type-hoverable" data-original-href="Agda.Builtin.List.html#184" data-hoverable="true" data-position="184" data-target-file="Agda.Builtin.List.html">[]</a><a id="6801" class="Symbol">))</a></div><div id="B11-LC9" class="code-line">  <a id="6806" href="Data.Sum.Base.html#B1-L28" class="Datatype Operator type-hoverable" data-original-href="Data.Sum.Base.html#625" data-hoverable="true" data-position="625" data-target-file="Data.Sum.Base.html">⊎</a> <a id="6808" class="Symbol">(</a><a id="6809" href="Leios.Short.html#B1-L1" class="Function type-hoverable" data-original-href="Leios.Short.html#6036" data-hoverable="true" data-position="6036" data-target-file="Leios.Short.html">stage</a> <a id="6815" href="Leios.Short.html#B1-L2" class="Bound type-hoverable" data-original-href="Leios.Short.html#6381" data-hoverable="true" data-position="6381" data-target-file="Leios.Short.html">s</a> <a id="6817" href="Class.HasOrder.Core.html#B1-L30" class="Function Operator type-hoverable" data-original-href="Class.HasOrder.Core.html#748" data-hoverable="true" data-position="748" data-target-file="Class.HasOrder.Core.html">&gt;</a> <a id="6819" class="Number">3</a> <a id="6821" href="Data.Product.Base.html#B1-L70" class="Function Operator type-hoverable" data-original-href="Data.Product.Base.html#1618" data-hoverable="true" data-position="1618" data-target-file="Data.Product.Base.html">×</a> <a id="6823" href="Relation.Nullary.Negation.Core.html#B1-L26" class="Function Operator type-hoverable" data-original-href="Relation.Nullary.Negation.Core.html#658" data-hoverable="true" data-position="658" data-target-file="Relation.Nullary.Negation.Core.html">¬</a> <a id="6825" href="Leios.Short.html#B1-L4" class="Function type-hoverable" data-original-href="Leios.Short.html#6087" data-hoverable="true" data-position="6087" data-target-file="Leios.Short.html">beginningOfStage</a> <a id="6842" href="Leios.Short.html#B1-L2" class="Bound type-hoverable" data-original-href="Leios.Short.html#6381" data-hoverable="true" data-position="6381" data-target-file="Leios.Short.html">s</a> <a id="6844" href="Data.Product.Base.html#B1-L70" class="Function Operator type-hoverable" data-original-href="Data.Product.Base.html#1618" data-hoverable="true" data-position="1618" data-target-file="Data.Product.Base.html">×</a> <a id="6846" href="Leios.Short.html#B1-L2" class="Bound type-hoverable" data-original-href="Leios.Short.html#6394" data-hoverable="true" data-position="6394" data-target-file="Leios.Short.html">u</a> <a id="6848" href="Axiom.Set.html#B1-L76" class="Function Operator type-hoverable" data-original-href="Axiom.Set.html#2587" data-hoverable="true" data-position="2587" data-target-file="Axiom.Set.html">≡ᵉ</a> <a id="6851" href="Axiom.Set.html#B1-L169" class="Function type-hoverable" data-original-href="Axiom.Set.html#5718" data-hoverable="true" data-position="5718" data-target-file="Axiom.Set.html">fromList</a> <a id="6860" class="Symbol">(</a><a id="6861" href="Leios.Short.html#B1-L2" class="InductiveConstructor type-hoverable" data-original-href="Leios.Short.html#1033" data-hoverable="true" data-position="1033" data-target-file="Leios.Short.html">IB-Role</a>           <a id="6879" href="Agda.Builtin.List.html#B1-L8" class="InductiveConstructor Operator type-hoverable" data-original-href="Agda.Builtin.List.html#199" data-hoverable="true" data-position="199" data-target-file="Agda.Builtin.List.html">∷</a> <a id="6881" href="Leios.Short.html#B1-L2" class="InductiveConstructor type-hoverable" data-original-href="Leios.Short.html#1028" data-hoverable="true" data-position="1028" data-target-file="Leios.Short.html">Base</a> <a id="6886" href="Agda.Builtin.List.html#B1-L8" class="InductiveConstructor Operator type-hoverable" data-original-href="Agda.Builtin.List.html#199" data-hoverable="true" data-position="199" data-target-file="Agda.Builtin.List.html">∷</a> <a id="6888" href="Agda.Builtin.List.html#B1-L7" class="InductiveConstructor type-hoverable" data-original-href="Agda.Builtin.List.html#184" data-hoverable="true" data-position="184" data-target-file="Agda.Builtin.List.html">[]</a><a id="6890" class="Symbol">)</a> <a id="6892" href="Data.Product.Base.html#B1-L70" class="Function Operator type-hoverable" data-original-href="Data.Product.Base.html#1618" data-hoverable="true" data-position="1618" data-target-file="Data.Product.Base.html">×</a></div><div id="B11-LC10" class="code-line">       <a id="6901" class="Symbol">(((</a>  <a id="6906" href="Leios.Short.html#B1-L7" class="Function type-hoverable" data-original-href="Leios.Short.html#6153" data-hoverable="true" data-position="6153" data-target-file="Leios.Short.html">endOfStage</a> <a id="6917" href="Leios.Short.html#B1-L2" class="Bound type-hoverable" data-original-href="Leios.Short.html#6381" data-hoverable="true" data-position="6381" data-target-file="Leios.Short.html">s</a> <a id="6919" href="Data.Product.Base.html#B1-L70" class="Function Operator type-hoverable" data-original-href="Data.Product.Base.html#1618" data-hoverable="true" data-position="1618" data-target-file="Data.Product.Base.html">×</a> <a id="6921" href="Leios.Short.html#B1-L2" class="Bound type-hoverable" data-original-href="Leios.Short.html#6413" data-hoverable="true" data-position="6413" data-target-file="Leios.Short.html">v</a> <a id="6923" href="Axiom.Set.html#B1-L76" class="Function Operator type-hoverable" data-original-href="Axiom.Set.html#2587" data-hoverable="true" data-position="2587" data-target-file="Axiom.Set.html">≡ᵉ</a> <a id="6926" href="Axiom.Set.html#B1-L169" class="Function type-hoverable" data-original-href="Axiom.Set.html#5718" data-hoverable="true" data-position="5718" data-target-file="Axiom.Set.html">fromList</a> <a id="6935" class="Symbol">(</a><a id="6936" href="Leios.Short.html#1201" class="InductiveConstructor">VT-Role</a> <a id="6944" href="Agda.Builtin.List.html#B1-L8" class="InductiveConstructor Operator type-hoverable" data-original-href="Agda.Builtin.List.html#199" data-hoverable="true" data-position="199" data-target-file="Agda.Builtin.List.html">∷</a> <a id="6946" href="Agda.Builtin.List.html#B1-L7" class="InductiveConstructor type-hoverable" data-original-href="Agda.Builtin.List.html#184" data-hoverable="true" data-position="184" data-target-file="Agda.Builtin.List.html">[]</a><a id="6948" class="Symbol">))</a></div><div id="B11-LC11" class="code-line">       <a id="6958" href="Data.Sum.Base.html#B1-L28" class="Datatype Operator type-hoverable" data-original-href="Data.Sum.Base.html#625" data-hoverable="true" data-position="625" data-target-file="Data.Sum.Base.html">⊎</a> <a id="6960" class="Symbol">(</a><a id="6961" href="Relation.Nullary.Negation.Core.html#B1-L26" class="Function Operator type-hoverable" data-original-href="Relation.Nullary.Negation.Core.html#658" data-hoverable="true" data-position="658" data-target-file="Relation.Nullary.Negation.Core.html">¬</a> <a id="6963" href="Leios.Short.html#B1-L7" class="Function type-hoverable" data-original-href="Leios.Short.html#6153" data-hoverable="true" data-position="6153" data-target-file="Leios.Short.html">endOfStage</a> <a id="6974" href="Leios.Short.html#B1-L2" class="Bound type-hoverable" data-original-href="Leios.Short.html#6381" data-hoverable="true" data-position="6381" data-target-file="Leios.Short.html">s</a><a id="6975" class="Symbol">))))</a></div></div></div><button class="copy-code-button" title="Copy code">
        <svg width="16" height="16" viewBox="0 0 16 16">
          <path fill="currentColor" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path fill="currentColor" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
        </svg>
      </button></pre>
<h3 id="full-short-leios-transitions">(Full-)Short Leios
transitions</h3>
The relation describing the transition given input and state
<pre class="Agda has-copy-button" id="B12"><div class="code-container"><div class="line-numbers"><a href="#B12-L1" id="B12-L1" class="line-number" data-line-number="1" data-block-id="B12">1</a></div><div class="code-content"><div id="B12-LC1" class="code-line"><a id="7088" class="Keyword">data</a> <a id="_-⟦_/_⟧⇀_"></a><a id="7093" href="Leios.Short.html#B1-L1" class="Datatype Operator type-hoverable" data-original-href="Leios.Short.html#7093" data-hoverable="true" data-position="7093" data-target-file="Leios.Short.html">_-⟦_/_⟧⇀_</a> <a id="7103" class="Symbol">:</a> <a id="7105" href="Agda.Builtin.Maybe.html#B1-L5" class="Datatype type-hoverable" data-original-href="Agda.Builtin.Maybe.html#135" data-hoverable="true" data-position="135" data-target-file="Agda.Builtin.Maybe.html">Maybe</a> <a id="7111" href="Leios.Protocol.html#B1-L43" class="Record type-hoverable" data-original-href="Leios.Protocol.html#1359" data-hoverable="true" data-position="1359" data-target-file="Leios.Protocol.html">LeiosState</a> <a id="7122" class="Symbol">→</a> <a id="7124" href="Leios.Protocol.html#B1-L33" class="Datatype type-hoverable" data-original-href="Leios.Protocol.html#1108" data-hoverable="true" data-position="1108" data-target-file="Leios.Protocol.html">LeiosInput</a> <a id="7135" class="Symbol">→</a> <a id="7137" href="Leios.Protocol.html#B1-L39" class="Datatype type-hoverable" data-original-href="Leios.Protocol.html#1266" data-hoverable="true" data-position="1266" data-target-file="Leios.Protocol.html">LeiosOutput</a> <a id="7149" class="Symbol">→</a> <a id="7151" href="Leios.Protocol.html#B1-L43" class="Record type-hoverable" data-original-href="Leios.Protocol.html#1359" data-hoverable="true" data-position="1359" data-target-file="Leios.Protocol.html">LeiosState</a> <a id="7162" class="Symbol">→</a> <a id="7164" href="Agda.Primitive.html#B1-L14" class="Primitive type-hoverable" data-original-href="Agda.Primitive.html#388" data-hoverable="true" data-position="388" data-target-file="Agda.Primitive.html">Type</a> <a id="7169" class="Keyword">where</a></div></div></div><button class="copy-code-button" title="Copy code">
        <svg width="16" height="16" viewBox="0 0 16 16">
          <path fill="currentColor" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path fill="currentColor" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
        </svg>
      </button></pre>
<h4 id="initialization">Initialization</h4>
<pre class="Agda has-copy-button" id="B13"><div class="code-container"><div class="line-numbers"><a href="#B13-L1" id="B13-L1" class="line-number" data-line-number="1" data-block-id="B13">1</a><a href="#B13-L2" id="B13-L2" class="line-number" data-line-number="2" data-block-id="B13">2</a><a href="#B13-L3" id="B13-L3" class="line-number" data-line-number="3" data-block-id="B13">3</a><a href="#B13-L4" id="B13-L4" class="line-number" data-line-number="4" data-block-id="B13">4</a><a href="#B13-L5" id="B13-L5" class="line-number" data-line-number="5" data-block-id="B13">5</a></div><div class="code-content"><div id="B13-LC1" class="code-line">  <a id="_-⟦_/_⟧⇀_.Init"></a><a id="7209" href="Leios.Short.html#B1-L1" class="InductiveConstructor type-hoverable" data-original-href="Leios.Short.html#7209" data-hoverable="true" data-position="7209" data-target-file="Leios.Short.html">Init</a> <a id="7214" class="Symbol">:</a></div><div id="B13-LC2" class="code-line">       <a id="7223" href="Prelude.InferenceRules.html#B1-L689" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#56074" data-hoverable="true" data-position="56074" data-target-file="Prelude.InferenceRules.html">∙</a> <a id="7225" href="Leios.Short.html#1800" class="Generalizable">ks</a> <a id="7228" href="Leios.KeyRegistration.html#B1-L20" class="Function Operator type-hoverable" data-original-href="Leios.KeyRegistration.html#476" data-hoverable="true" data-position="476" data-target-file="Leios.KeyRegistration.html">K.-⟦</a> <a id="7233" href="Leios.KeyRegistration.html#B1-L13" class="InductiveConstructor type-hoverable" data-original-href="Leios.KeyRegistration.html#302" data-hoverable="true" data-position="302" data-target-file="Leios.KeyRegistration.html">K.INIT</a> <a id="7240" href="Leios.SpecStructure.html#B1-L33" class="Field type-hoverable" data-original-href="Leios.SpecStructure.html#766" data-hoverable="true" data-position="766" data-target-file="Leios.SpecStructure.html">pk-IB</a> <a id="7246" href="Leios.SpecStructure.html#B1-L33" class="Field type-hoverable" data-original-href="Leios.SpecStructure.html#772" data-hoverable="true" data-position="772" data-target-file="Leios.SpecStructure.html">pk-EB</a> <a id="7252" href="Leios.SpecStructure.html#B1-L33" class="Field type-hoverable" data-original-href="Leios.SpecStructure.html#778" data-hoverable="true" data-position="778" data-target-file="Leios.SpecStructure.html">pk-VT</a> <a id="7258" href="Leios.KeyRegistration.html#B1-L20" class="Function Operator type-hoverable" data-original-href="Leios.KeyRegistration.html#476" data-hoverable="true" data-position="476" data-target-file="Leios.KeyRegistration.html">/</a> <a id="7260" href="Leios.KeyRegistration.html#B1-L16" class="InductiveConstructor type-hoverable" data-original-href="Leios.KeyRegistration.html#374" data-hoverable="true" data-position="374" data-target-file="Leios.KeyRegistration.html">K.PUBKEYS</a> <a id="7270" href="Leios.Short.html#2159" class="Generalizable">pks</a> <a id="7274" href="Leios.KeyRegistration.html#B1-L20" class="Function Operator type-hoverable" data-original-href="Leios.KeyRegistration.html#476" data-hoverable="true" data-position="476" data-target-file="Leios.KeyRegistration.html">⟧⇀</a> <a id="7277" href="Leios.Short.html#1803" class="Generalizable">ks'</a></div><div id="B13-LC3" class="code-line">       <a id="7288" href="Prelude.InferenceRules.html#B1-L685" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#56005" data-hoverable="true" data-position="56005" data-target-file="Prelude.InferenceRules.html">∙</a> <a id="7290" href="Leios.SpecStructure.html#B1-L39" class="Field type-hoverable" data-original-href="Leios.SpecStructure.html#904" data-hoverable="true" data-position="904" data-target-file="Leios.SpecStructure.html">initBaseState</a> <a id="7304" href="Leios.Base.html#B1-L98" class="Function Operator type-hoverable" data-original-href="Leios.Base.html#3276" data-hoverable="true" data-position="3276" data-target-file="Leios.Base.html">B.-⟦</a> <a id="7309" href="Leios.Base.html#B1-L45" class="InductiveConstructor type-hoverable" data-original-href="Leios.Base.html#1390" data-hoverable="true" data-position="1390" data-target-file="Leios.Base.html">B.INIT</a> <a id="7316" class="Symbol">(</a><a id="7317" href="Leios.Base.html#B1-L28" class="Function type-hoverable" data-original-href="Leios.Base.html#677" data-hoverable="true" data-position="677" data-target-file="Leios.Base.html">V-chkCerts</a> <a id="7328" href="Leios.Short.html#2159" class="Generalizable">pks</a><a id="7331" class="Symbol">)</a> <a id="7333" href="Leios.Base.html#B1-L98" class="Function Operator type-hoverable" data-original-href="Leios.Base.html#3276" data-hoverable="true" data-position="3276" data-target-file="Leios.Base.html">/</a> <a id="7335" href="Leios.Base.html#B1-L78" class="InductiveConstructor type-hoverable" data-original-href="Leios.Base.html#2591" data-hoverable="true" data-position="2591" data-target-file="Leios.Base.html">B.STAKE</a> <a id="7343" href="Leios.Short.html#2122" class="Generalizable">SD</a> <a id="7346" href="Leios.Base.html#B1-L98" class="Function Operator type-hoverable" data-original-href="Leios.Base.html#3276" data-hoverable="true" data-position="3276" data-target-file="Leios.Base.html">⟧⇀</a> <a id="7349" href="Leios.Short.html#1766" class="Generalizable">bs'</a></div><div id="B13-LC4" class="code-line">       <a id="7360" href="Prelude.InferenceRules.html#B1-L169" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#11981" data-hoverable="true" data-position="11981" data-target-file="Prelude.InferenceRules.html">────────────────────────────────────────────────────────────────</a></div><div id="B13-LC5" class="code-line">       <a id="7432" href="Agda.Builtin.Maybe.html#B1-L7" class="InductiveConstructor type-hoverable" data-original-href="Agda.Builtin.Maybe.html#194" data-hoverable="true" data-position="194" data-target-file="Agda.Builtin.Maybe.html">nothing</a> <a id="7440" href="Leios.Short.html#B1-L1" class="Datatype Operator type-hoverable" data-original-href="Leios.Short.html#7093" data-hoverable="true" data-position="7093" data-target-file="Leios.Short.html">-⟦</a> <a id="7443" href="Leios.Protocol.html#B1-L34" class="InductiveConstructor type-hoverable" data-original-href="Leios.Protocol.html#1134" data-hoverable="true" data-position="1134" data-target-file="Leios.Protocol.html">INIT</a> <a id="7448" href="Leios.Short.html#2092" class="Generalizable">V</a> <a id="7450" href="Leios.Short.html#B1-L1" class="Datatype Operator type-hoverable" data-original-href="Leios.Short.html#7093" data-hoverable="true" data-position="7093" data-target-file="Leios.Short.html">/</a> <a id="7452" href="Leios.Protocol.html#B1-L41" class="InductiveConstructor type-hoverable" data-original-href="Leios.Protocol.html#1328" data-hoverable="true" data-position="1328" data-target-file="Leios.Protocol.html">EMPTY</a> <a id="7458" href="Leios.Short.html#B1-L1" class="Datatype Operator type-hoverable" data-original-href="Leios.Short.html#7093" data-hoverable="true" data-position="7093" data-target-file="Leios.Short.html">⟧⇀</a> <a id="7461" href="Leios.Protocol.html#B1-L98" class="Function type-hoverable" data-original-href="Leios.Protocol.html#3215" data-hoverable="true" data-position="3215" data-target-file="Leios.Protocol.html">initLeiosState</a> <a id="7476" href="Leios.Short.html#2092" class="Generalizable">V</a> <a id="7478" href="Leios.Short.html#2122" class="Generalizable">SD</a> <a id="7481" href="Leios.Short.html#1766" class="Generalizable">bs'</a> <a id="7485" href="Leios.Short.html#2159" class="Generalizable">pks</a></div></div></div><button class="copy-code-button" title="Copy code">
        <svg width="16" height="16" viewBox="0 0 16 16">
          <path fill="currentColor" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path fill="currentColor" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
        </svg>
      </button></pre>
<h4 id="network-and-ledger">Network and Ledger</h4>
<pre class="Agda has-copy-button" id="B14"><div class="code-container"><div class="line-numbers"><a href="#B14-L1" id="B14-L1" class="line-number" data-line-number="1" data-block-id="B14">1</a><a href="#B14-L2" id="B14-L2" class="line-number" data-line-number="2" data-block-id="B14">2</a><a href="#B14-L3" id="B14-L3" class="line-number" data-line-number="3" data-block-id="B14">3</a><a href="#B14-L4" id="B14-L4" class="line-number" data-line-number="4" data-block-id="B14">4</a><a href="#B14-L5" id="B14-L5" class="line-number" data-line-number="5" data-block-id="B14">5</a><a href="#B14-L6" id="B14-L6" class="line-number" data-line-number="6" data-block-id="B14">6</a><a href="#B14-L7" id="B14-L7" class="line-number" data-line-number="7" data-block-id="B14">7</a><a href="#B14-L8" id="B14-L8" class="line-number" data-line-number="8" data-block-id="B14">8</a><a href="#B14-L9" id="B14-L9" class="line-number" data-line-number="9" data-block-id="B14">9</a><a href="#B14-L10" id="B14-L10" class="line-number" data-line-number="10" data-block-id="B14">10</a><a href="#B14-L11" id="B14-L11" class="line-number" data-line-number="11" data-block-id="B14">11</a><a href="#B14-L12" id="B14-L12" class="line-number" data-line-number="12" data-block-id="B14">12</a><a href="#B14-L13" id="B14-L13" class="line-number" data-line-number="13" data-block-id="B14">13</a></div><div class="code-content"><div id="B14-LC1" class="code-line">  <a id="_-⟦_/_⟧⇀_.Slot"></a><a id="7527" href="Leios.Short.html#B1-L1" class="InductiveConstructor type-hoverable" data-original-href="Leios.Short.html#7527" data-hoverable="true" data-position="7527" data-target-file="Leios.Short.html">Slot</a> <a id="7532" class="Symbol">:</a> <a id="7534" class="Keyword">let</a> <a id="7538" class="Keyword">open</a> <a id="7543" href="Leios.Protocol.html#B1-L43" class="Module type-hoverable" data-original-href="Leios.Protocol.html#1359" data-hoverable="true" data-position="1359" data-target-file="Leios.Protocol.html">LeiosState</a> <a id="7554" href="Leios.Short.html#1661" class="Generalizable">s</a> <a id="7556" class="Keyword">renaming</a> <a id="7565" class="Symbol">(</a><a id="7566" href="Leios.Protocol.html#B1-L46" class="Field type-hoverable" data-original-href="Leios.Protocol.html#1452" data-hoverable="true" data-position="1452" data-target-file="Leios.Protocol.html">FFDState</a> <a id="7575" class="Symbol">to</a> <a id="7578" class="Field">ffds</a><a id="7582" class="Symbol">;</a> <a id="7584" href="Leios.Protocol.html#B1-L57" class="Field type-hoverable" data-original-href="Leios.Protocol.html#1838" data-hoverable="true" data-position="1838" data-target-file="Leios.Protocol.html">BaseState</a> <a id="7594" class="Symbol">to</a> <a id="7597" class="Field">bs</a><a id="7599" class="Symbol">)</a> <a id="7601" class="Keyword">in</a></div><div id="B14-LC2" class="code-line">       <a id="7611" href="Prelude.InferenceRules.html#B1-L689" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#56074" data-hoverable="true" data-position="56074" data-target-file="Prelude.InferenceRules.html">∙</a> <a id="7613" href="Leios.Short.html#B1-L1" class="Function type-hoverable" data-original-href="Leios.Short.html#6329" data-hoverable="true" data-position="6329" data-target-file="Leios.Short.html">allDone</a> <a id="7621" href="Leios.Short.html#1661" class="Generalizable">s</a></div><div id="B14-LC3" class="code-line">       <a id="7630" href="Prelude.InferenceRules.html#B1-L685" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#56005" data-hoverable="true" data-position="56005" data-target-file="Prelude.InferenceRules.html">∙</a> <a id="7632" href="Leios.Short.html#B1-L1" class="Function type-hoverable" data-original-href="Leios.Short.html#7597" data-hoverable="true" data-position="7597" data-target-file="Leios.Short.html">bs</a> <a id="7635" href="Leios.Base.html#B1-L98" class="Function Operator type-hoverable" data-original-href="Leios.Base.html#3276" data-hoverable="true" data-position="3276" data-target-file="Leios.Base.html">B.-⟦</a> <a id="7640" href="Leios.Base.html#B1-L61" class="InductiveConstructor type-hoverable" data-original-href="Leios.Base.html#1991" data-hoverable="true" data-position="1991" data-target-file="Leios.Base.html">B.FTCH-LDG</a> <a id="7651" href="Leios.Base.html#B1-L98" class="Function Operator type-hoverable" data-original-href="Leios.Base.html#3276" data-hoverable="true" data-position="3276" data-target-file="Leios.Base.html">/</a> <a id="7653" href="Leios.Base.html#B1-L94" class="InductiveConstructor type-hoverable" data-original-href="Leios.Base.html#3167" data-hoverable="true" data-position="3167" data-target-file="Leios.Base.html">B.BASE-LDG</a> <a id="7664" href="Leios.Short.html#2014" class="Generalizable">rbs</a> <a id="7668" href="Leios.Base.html#B1-L98" class="Function Operator type-hoverable" data-original-href="Leios.Base.html#3276" data-hoverable="true" data-position="3276" data-target-file="Leios.Base.html">⟧⇀</a> <a id="7671" href="Leios.Short.html#1766" class="Generalizable">bs'</a></div><div id="B14-LC4" class="code-line">       <a id="7682" href="Prelude.InferenceRules.html#B1-L685" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#56005" data-hoverable="true" data-position="56005" data-target-file="Prelude.InferenceRules.html">∙</a> <a id="7684" href="Leios.Short.html#B1-L1" class="Function type-hoverable" data-original-href="Leios.Short.html#7578" data-hoverable="true" data-position="7578" data-target-file="Leios.Short.html">ffds</a> <a id="7689" href="Leios.FFD.html#B1-L25" class="Function Operator type-hoverable" data-original-href="Leios.FFD.html#562" data-hoverable="true" data-position="562" data-target-file="Leios.FFD.html">FFD.-⟦</a> <a id="7696" href="Leios.FFD.html#B1-L16" class="InductiveConstructor type-hoverable" data-original-href="Leios.FFD.html#351" data-hoverable="true" data-position="351" data-target-file="Leios.FFD.html">Fetch</a> <a id="7702" href="Leios.FFD.html#B1-L25" class="Function Operator type-hoverable" data-original-href="Leios.FFD.html#562" data-hoverable="true" data-position="562" data-target-file="Leios.FFD.html">/</a> <a id="7704" href="Leios.FFD.html#B1-L20" class="InductiveConstructor type-hoverable" data-original-href="Leios.FFD.html#419" data-hoverable="true" data-position="419" data-target-file="Leios.FFD.html">FetchRes</a> <a id="7713" href="Leios.Short.html#1834" class="Generalizable">msgs</a> <a id="7718" href="Leios.FFD.html#B1-L25" class="Function Operator type-hoverable" data-original-href="Leios.FFD.html#562" data-hoverable="true" data-position="562" data-target-file="Leios.FFD.html">⟧⇀</a> <a id="7721" href="Leios.Short.html#1698" class="Generalizable">ffds'</a></div><div id="B14-LC5" class="code-line">       <a id="7734" href="Prelude.InferenceRules.html#B1-L162" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#11470" data-hoverable="true" data-position="11470" data-target-file="Prelude.InferenceRules.html">───────────────────────────────────────────────────────────────────────</a></div><div id="B14-LC6" class="code-line">       <a id="7813" href="Agda.Builtin.Maybe.html#B1-L6" class="InductiveConstructor type-hoverable" data-original-href="Agda.Builtin.Maybe.html#173" data-hoverable="true" data-position="173" data-target-file="Agda.Builtin.Maybe.html">just</a> <a id="7818" href="Leios.Short.html#1661" class="Generalizable">s</a> <a id="7820" href="Leios.Short.html#B1-L1" class="Datatype Operator type-hoverable" data-original-href="Leios.Short.html#7093" data-hoverable="true" data-position="7093" data-target-file="Leios.Short.html">-⟦</a> <a id="7823" href="Leios.Protocol.html#B1-L36" class="InductiveConstructor type-hoverable" data-original-href="Leios.Protocol.html#1214" data-hoverable="true" data-position="1214" data-target-file="Leios.Protocol.html">SLOT</a> <a id="7828" href="Leios.Short.html#B1-L1" class="Datatype Operator type-hoverable" data-original-href="Leios.Short.html#7093" data-hoverable="true" data-position="7093" data-target-file="Leios.Short.html">/</a> <a id="7830" href="Leios.Protocol.html#B1-L41" class="InductiveConstructor type-hoverable" data-original-href="Leios.Protocol.html#1328" data-hoverable="true" data-position="1328" data-target-file="Leios.Protocol.html">EMPTY</a> <a id="7836" href="Leios.Short.html#B1-L1" class="Datatype Operator type-hoverable" data-original-href="Leios.Short.html#7093" data-hoverable="true" data-position="7093" data-target-file="Leios.Short.html">⟧⇀</a> <a id="7839" class="Keyword">record</a> <a id="7846" href="Leios.Short.html#1661" class="Generalizable">s</a></div><div id="B14-LC7" class="code-line">           <a id="7859" class="Symbol">{</a> <a id="7861" href="Leios.Protocol.html#B1-L46" class="Field type-hoverable" data-original-href="Leios.Protocol.html#1452" data-hoverable="true" data-position="1452" data-target-file="Leios.Protocol.html">FFDState</a>     <a id="7874" class="Symbol">=</a> <a id="7876" href="Leios.Short.html#1698" class="Generalizable">ffds'</a></div><div id="B14-LC8" class="code-line">           <a id="7893" class="Symbol">;</a> <a id="7895" href="Leios.Protocol.html#B1-L57" class="Field type-hoverable" data-original-href="Leios.Protocol.html#1838" data-hoverable="true" data-position="1838" data-target-file="Leios.Protocol.html">BaseState</a>    <a id="7908" class="Symbol">=</a> <a id="7910" href="Leios.Short.html#1766" class="Generalizable">bs'</a></div><div id="B14-LC9" class="code-line">           <a id="7925" class="Symbol">;</a> <a id="7927" href="Leios.Protocol.html#B1-L47" class="Field type-hoverable" data-original-href="Leios.Protocol.html#1485" data-hoverable="true" data-position="1485" data-target-file="Leios.Protocol.html">Ledger</a>       <a id="7940" class="Symbol">=</a> <a id="7942" href="Leios.Protocol.html#B1-L76" class="Function type-hoverable" data-original-href="Leios.Protocol.html#2348" data-hoverable="true" data-position="2348" data-target-file="Leios.Protocol.html">constructLedger</a> <a id="7958" href="Leios.Short.html#2014" class="Generalizable">rbs</a></div><div id="B14-LC10" class="code-line">           <a id="7973" class="Symbol">;</a> <a id="7975" href="Leios.Protocol.html#B1-L52" class="Field type-hoverable" data-original-href="Leios.Protocol.html#1668" data-hoverable="true" data-position="1668" data-target-file="Leios.Protocol.html">slot</a>         <a id="7988" class="Symbol">=</a> <a id="7990" href="Agda.Builtin.Nat.html#B1-L10" class="InductiveConstructor type-hoverable" data-original-href="Agda.Builtin.Nat.html#234" data-hoverable="true" data-position="234" data-target-file="Agda.Builtin.Nat.html">suc</a> <a id="7994" href="Leios.Protocol.html#B1-L52" class="Function type-hoverable" data-original-href="Leios.Protocol.html#1668" data-hoverable="true" data-position="1668" data-target-file="Leios.Protocol.html">slot</a></div><div id="B14-LC11" class="code-line">           <a id="8010" class="Symbol">;</a> <a id="8012" href="Leios.Protocol.html#B1-L55" class="Field type-hoverable" data-original-href="Leios.Protocol.html#1765" data-hoverable="true" data-position="1765" data-target-file="Leios.Protocol.html">Upkeep</a>       <a id="8025" class="Symbol">=</a> <a id="8027" href="Class.HasEmptySet.html#B1-L14" class="Field type-hoverable" data-original-href="Class.HasEmptySet.html#287" data-hoverable="true" data-position="287" data-target-file="Class.HasEmptySet.html">∅</a></div><div id="B14-LC12" class="code-line">           <a id="8040" class="Symbol">;</a> <a id="8042" href="Leios.Protocol.html#B1-L56" class="Field type-hoverable" data-original-href="Leios.Protocol.html#1801" data-hoverable="true" data-position="1801" data-target-file="Leios.Protocol.html">Upkeep-Stage</a> <a id="8055" class="Symbol">=</a> <a id="8057" href="Class.Decidable.Core.html#B1-L28" class="Function Operator type-hoverable" data-original-href="Class.Decidable.Core.html#593" data-hoverable="true" data-position="593" data-target-file="Class.Decidable.Core.html">ifᵈ</a> <a id="8061" class="Symbol">(</a><a id="8062" href="Leios.Short.html#B1-L7" class="Function type-hoverable" data-original-href="Leios.Short.html#6153" data-hoverable="true" data-position="6153" data-target-file="Leios.Short.html">endOfStage</a> <a id="8073" href="Leios.Protocol.html#B1-L52" class="Function type-hoverable" data-original-href="Leios.Protocol.html#1668" data-hoverable="true" data-position="1668" data-target-file="Leios.Protocol.html">slot</a><a id="8077" class="Symbol">)</a> <a id="8079" href="Class.Decidable.Core.html#B1-L28" class="Function Operator type-hoverable" data-original-href="Class.Decidable.Core.html#593" data-hoverable="true" data-position="593" data-target-file="Class.Decidable.Core.html">then</a> <a id="8084" href="Class.HasEmptySet.html#B1-L14" class="Field type-hoverable" data-original-href="Class.HasEmptySet.html#287" data-hoverable="true" data-position="287" data-target-file="Class.HasEmptySet.html">∅</a> <a id="8086" href="Class.Decidable.Core.html#B1-L28" class="Function Operator type-hoverable" data-original-href="Class.Decidable.Core.html#593" data-hoverable="true" data-position="593" data-target-file="Class.Decidable.Core.html">else</a> <a id="8091" href="Leios.Protocol.html#B1-L56" class="Function type-hoverable" data-original-href="Leios.Protocol.html#1801" data-hoverable="true" data-position="1801" data-target-file="Leios.Protocol.html">Upkeep-Stage</a></div><div id="B14-LC13" class="code-line">           <a id="8115" class="Symbol">}</a> <a id="8117" href="Leios.Protocol.html#B1-L275" class="Function Operator type-hoverable" data-original-href="Leios.Protocol.html#8878" data-hoverable="true" data-position="8878" data-target-file="Leios.Protocol.html">↑</a> <a id="8119" href="Data.List.Base.html#B1-L377" class="Function type-hoverable" data-original-href="Data.List.Base.html#10687" data-hoverable="true" data-position="10687" data-target-file="Data.List.Base.html">L.filter</a> <a id="8128" class="Symbol">(</a><a id="8129" href="Leios.Protocol.html#B1-L219" class="Function type-hoverable" data-original-href="Leios.Protocol.html#7126" data-hoverable="true" data-position="7126" data-target-file="Leios.Protocol.html">isValid?</a> <a id="8138" href="Leios.Short.html#1661" class="Generalizable">s</a><a id="8139" class="Symbol">)</a> <a id="8141" href="Leios.Short.html#1834" class="Generalizable">msgs</a></div></div></div><button class="copy-code-button" title="Copy code">
        <svg width="16" height="16" viewBox="0 0 16 16">
          <path fill="currentColor" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path fill="currentColor" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
        </svg>
      </button></pre>
<pre class="Agda has-copy-button" id="B15"><div class="code-container"><div class="line-numbers"><a href="#B15-L1" id="B15-L1" class="line-number" data-line-number="1" data-block-id="B15">1</a><a href="#B15-L2" id="B15-L2" class="line-number" data-line-number="2" data-block-id="B15">2</a><a href="#B15-L3" id="B15-L3" class="line-number" data-line-number="3" data-block-id="B15">3</a></div><div class="code-content"><div id="B15-LC1" class="code-line">  <a id="_-⟦_/_⟧⇀_.Ftch"></a><a id="8160" href="Leios.Short.html#B1-L1" class="InductiveConstructor type-hoverable" data-original-href="Leios.Short.html#8160" data-hoverable="true" data-position="8160" data-target-file="Leios.Short.html">Ftch</a> <a id="8165" class="Symbol">:</a></div><div id="B15-LC2" class="code-line">       <a id="8174" href="Prelude.InferenceRules.html#B1-L516" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#42426" data-hoverable="true" data-position="42426" data-target-file="Prelude.InferenceRules.html">────────────────────────────────────────────────────────</a></div><div id="B15-LC3" class="code-line">       <a id="8238" href="Agda.Builtin.Maybe.html#B1-L6" class="InductiveConstructor type-hoverable" data-original-href="Agda.Builtin.Maybe.html#173" data-hoverable="true" data-position="173" data-target-file="Agda.Builtin.Maybe.html">just</a> <a id="8243" href="Leios.Short.html#1661" class="Generalizable">s</a> <a id="8245" href="Leios.Short.html#B1-L1" class="Datatype Operator type-hoverable" data-original-href="Leios.Short.html#7093" data-hoverable="true" data-position="7093" data-target-file="Leios.Short.html">-⟦</a> <a id="8248" href="Leios.Protocol.html#B1-L37" class="InductiveConstructor type-hoverable" data-original-href="Leios.Protocol.html#1238" data-hoverable="true" data-position="1238" data-target-file="Leios.Protocol.html">FTCH-LDG</a> <a id="8257" href="Leios.Short.html#B1-L1" class="Datatype Operator type-hoverable" data-original-href="Leios.Short.html#7093" data-hoverable="true" data-position="7093" data-target-file="Leios.Short.html">/</a> <a id="8259" href="Leios.Protocol.html#B1-L40" class="InductiveConstructor type-hoverable" data-original-href="Leios.Protocol.html#1293" data-hoverable="true" data-position="1293" data-target-file="Leios.Protocol.html">FTCH-LDG</a> <a id="8268" class="Symbol">(</a><a id="8269" href="Leios.Protocol.html#B1-L47" class="Field type-hoverable" data-original-href="Leios.Protocol.html#1485" data-hoverable="true" data-position="1485" data-target-file="Leios.Protocol.html">LeiosState.Ledger</a> <a id="8287" href="Leios.Short.html#1661" class="Generalizable">s</a><a id="8288" class="Symbol">)</a> <a id="8290" href="Leios.Short.html#B1-L1" class="Datatype Operator type-hoverable" data-original-href="Leios.Short.html#7093" data-hoverable="true" data-position="7093" data-target-file="Leios.Short.html">⟧⇀</a> <a id="8293" href="Leios.Short.html#1661" class="Generalizable">s</a></div></div></div><button class="copy-code-button" title="Copy code">
        <svg width="16" height="16" viewBox="0 0 16 16">
          <path fill="currentColor" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path fill="currentColor" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
        </svg>
      </button></pre>
<h4 id="base-chain">Base chain</h4>
Note: Submitted data to the base chain is only taken into account if the
party submitting is the block producer on the base chain for the given
slot
<pre class="Agda has-copy-button" id="B16"><div class="code-container"><div class="line-numbers"><a href="#B16-L1" id="B16-L1" class="line-number" data-line-number="1" data-block-id="B16">1</a><a href="#B16-L2" id="B16-L2" class="line-number" data-line-number="2" data-block-id="B16">2</a><a href="#B16-L3" id="B16-L3" class="line-number" data-line-number="3" data-block-id="B16">3</a></div><div class="code-content"><div id="B16-LC1" class="code-line">  <a id="_-⟦_/_⟧⇀_.Base₁"></a><a id="8487" href="Leios.Short.html#B1-L1" class="InductiveConstructor type-hoverable" data-original-href="Leios.Short.html#8487" data-hoverable="true" data-position="8487" data-target-file="Leios.Short.html">Base₁</a>   <a id="8495" class="Symbol">:</a></div><div id="B16-LC2" class="code-line">          <a id="8507" href="Prelude.InferenceRules.html#B1-L505" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#41139" data-hoverable="true" data-position="41139" data-target-file="Prelude.InferenceRules.html">───────────────────────────────────────────────────────────────────</a></div><div id="B16-LC3" class="code-line">          <a id="8585" href="Agda.Builtin.Maybe.html#B1-L6" class="InductiveConstructor type-hoverable" data-original-href="Agda.Builtin.Maybe.html#173" data-hoverable="true" data-position="173" data-target-file="Agda.Builtin.Maybe.html">just</a> <a id="8590" href="Leios.Short.html#1661" class="Generalizable">s</a> <a id="8592" href="Leios.Short.html#B1-L1" class="Datatype Operator type-hoverable" data-original-href="Leios.Short.html#7093" data-hoverable="true" data-position="7093" data-target-file="Leios.Short.html">-⟦</a> <a id="8595" href="Leios.Protocol.html#B1-L35" class="InductiveConstructor type-hoverable" data-original-href="Leios.Protocol.html#1164" data-hoverable="true" data-position="1164" data-target-file="Leios.Protocol.html">SUBMIT</a> <a id="8602" class="Symbol">(</a><a id="8603" href="Data.Sum.Base.html#B1-L30" class="InductiveConstructor type-hoverable" data-original-href="Data.Sum.Base.html#700" data-hoverable="true" data-position="700" data-target-file="Data.Sum.Base.html">inj₂</a> <a id="8608" href="Leios.Short.html#2058" class="Generalizable">txs</a><a id="8611" class="Symbol">)</a> <a id="8613" href="Leios.Short.html#B1-L1" class="Datatype Operator type-hoverable" data-original-href="Leios.Short.html#7093" data-hoverable="true" data-position="7093" data-target-file="Leios.Short.html">/</a> <a id="8615" href="Leios.Protocol.html#B1-L41" class="InductiveConstructor type-hoverable" data-original-href="Leios.Protocol.html#1328" data-hoverable="true" data-position="1328" data-target-file="Leios.Protocol.html">EMPTY</a> <a id="8621" href="Leios.Short.html#B1-L1" class="Datatype Operator type-hoverable" data-original-href="Leios.Short.html#7093" data-hoverable="true" data-position="7093" data-target-file="Leios.Short.html">⟧⇀</a> <a id="8624" class="Keyword">record</a> <a id="8631" href="Leios.Short.html#1661" class="Generalizable">s</a> <a id="8633" class="Symbol">{</a> <a id="8635" href="Leios.Protocol.html#B1-L48" class="Field type-hoverable" data-original-href="Leios.Protocol.html#1516" data-hoverable="true" data-position="1516" data-target-file="Leios.Protocol.html">ToPropose</a> <a id="8645" class="Symbol">=</a> <a id="8647" href="Leios.Short.html#2058" class="Generalizable">txs</a> <a id="8651" class="Symbol">}</a></div></div></div><button class="copy-code-button" title="Copy code">
        <svg width="16" height="16" viewBox="0 0 16 16">
          <path fill="currentColor" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path fill="currentColor" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
        </svg>
      </button></pre>
<pre class="Agda has-copy-button" id="B17"><div class="code-container"><div class="line-numbers"><a href="#B17-L1" id="B17-L1" class="line-number" data-line-number="1" data-block-id="B17">1</a><a href="#B17-L2" id="B17-L2" class="line-number" data-line-number="2" data-block-id="B17">2</a><a href="#B17-L3" id="B17-L3" class="line-number" data-line-number="3" data-block-id="B17">3</a><a href="#B17-L4" id="B17-L4" class="line-number" data-line-number="4" data-block-id="B17">4</a><a href="#B17-L5" id="B17-L5" class="line-number" data-line-number="5" data-block-id="B17">5</a><a href="#B17-L6" id="B17-L6" class="line-number" data-line-number="6" data-block-id="B17">6</a><a href="#B17-L7" id="B17-L7" class="line-number" data-line-number="7" data-block-id="B17">7</a><a href="#B17-L8" id="B17-L8" class="line-number" data-line-number="8" data-block-id="B17">8</a><a href="#B17-L9" id="B17-L9" class="line-number" data-line-number="9" data-block-id="B17">9</a><a href="#B17-L10" id="B17-L10" class="line-number" data-line-number="10" data-block-id="B17">10</a><a href="#B17-L11" id="B17-L11" class="line-number" data-line-number="11" data-block-id="B17">11</a><a href="#B17-L12" id="B17-L12" class="line-number" data-line-number="12" data-block-id="B17">12</a><a href="#B17-L13" id="B17-L13" class="line-number" data-line-number="13" data-block-id="B17">13</a></div><div class="code-content"><div id="B17-LC1" class="code-line">  <a id="_-⟦_/_⟧⇀_.Base₂a"></a><a id="8667" href="Leios.Short.html#B1-L1" class="InductiveConstructor type-hoverable" data-original-href="Leios.Short.html#8667" data-hoverable="true" data-position="8667" data-target-file="Leios.Short.html">Base₂a</a>  <a id="8675" class="Symbol">:</a> <a id="8677" class="Keyword">let</a> <a id="8681" class="Keyword">open</a> <a id="8686" href="Leios.Protocol.html#B1-L43" class="Module type-hoverable" data-original-href="Leios.Protocol.html#1359" data-hoverable="true" data-position="1359" data-target-file="Leios.Protocol.html">LeiosState</a> <a id="8697" href="Leios.Short.html#1661" class="Generalizable">s</a> <a id="8699" class="Keyword">renaming</a> <a id="8708" class="Symbol">(</a><a id="8709" href="Leios.Protocol.html#B1-L57" class="Field type-hoverable" data-original-href="Leios.Protocol.html#1838" data-hoverable="true" data-position="1838" data-target-file="Leios.Protocol.html">BaseState</a> <a id="8719" class="Symbol">to</a> <a id="8722" class="Field">bs</a><a id="8724" class="Symbol">)</a> <a id="8726" class="Keyword">in</a></div><div id="B17-LC2" class="code-line">          <a id="8739" href="Prelude.InferenceRules.html#B1-L689" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#56074" data-hoverable="true" data-position="56074" data-target-file="Prelude.InferenceRules.html">∙</a> <a id="8741" href="Leios.Protocol.html#B1-L79" class="Function type-hoverable" data-original-href="Leios.Protocol.html#2475" data-hoverable="true" data-position="2475" data-target-file="Leios.Protocol.html">needsUpkeep</a> <a id="8753" href="Leios.Short.html#B1-L2" class="InductiveConstructor type-hoverable" data-original-href="Leios.Short.html#1028" data-hoverable="true" data-position="1028" data-target-file="Leios.Short.html">Base</a></div><div id="B17-LC3" class="code-line">          <a id="8768" href="Prelude.InferenceRules.html#B1-L685" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#56005" data-hoverable="true" data-position="56005" data-target-file="Prelude.InferenceRules.html">∙</a> <a id="8770" href="Leios.Short.html#1929" class="Generalizable">eb</a> <a id="8773" href="Class.IsSet.html#B1-L22" class="Function Operator type-hoverable" data-original-href="Class.IsSet.html#458" data-hoverable="true" data-position="458" data-target-file="Class.IsSet.html">∈</a> <a id="8775" href="Leios.Prelude.html#B1-L54" class="Function type-hoverable" data-original-href="Leios.Prelude.html#1588" data-hoverable="true" data-position="1588" data-target-file="Leios.Prelude.html">filter</a> <a id="8782" class="Symbol">(λ</a> <a id="8785" href="Leios.Short.html#B1-L3" class="Bound type-hoverable" data-original-href="Leios.Short.html#8785" data-hoverable="true" data-position="8785" data-target-file="Leios.Short.html">x</a> <a id="8787" class="Symbol">→</a> <a id="8789" href="Leios.Short.html#1503" class="Function">isVoteCertified</a> <a id="8805" href="Leios.Short.html#1661" class="Generalizable">s</a> <a id="8807" href="Leios.Short.html#B1-L3" class="Bound type-hoverable" data-original-href="Leios.Short.html#8785" data-hoverable="true" data-position="8785" data-target-file="Leios.Short.html">x</a> <a id="8809" href="Data.Product.Base.html#B1-L70" class="Function Operator type-hoverable" data-original-href="Data.Product.Base.html#1618" data-hoverable="true" data-position="1618" data-target-file="Data.Product.Base.html">×</a> <a id="8811" href="Leios.Short.html#B1-L3" class="Bound type-hoverable" data-original-href="Leios.Short.html#8785" data-hoverable="true" data-position="8785" data-target-file="Leios.Short.html">x</a> <a id="8813" href="Leios.Blocks.html#B1-L28" class="Function Operator type-hoverable" data-original-href="Leios.Blocks.html#770" data-hoverable="true" data-position="770" data-target-file="Leios.Blocks.html">∈ᴮ</a> <a id="8816" href="Leios.Prelude.html#B1-L45" class="Function type-hoverable" data-original-href="Leios.Prelude.html#1209" data-hoverable="true" data-position="1209" data-target-file="Leios.Prelude.html">slice</a> <a id="8822" href="Leios.Abstract.html#B1-L29" class="Function type-hoverable" data-original-href="Leios.Abstract.html#961" data-hoverable="true" data-position="961" data-target-file="Leios.Abstract.html">L</a> <a id="8824" href="Leios.Protocol.html#B1-L52" class="Function type-hoverable" data-original-href="Leios.Protocol.html#1668" data-hoverable="true" data-position="1668" data-target-file="Leios.Protocol.html">slot</a> <a id="8829" class="Number">2</a><a id="8830" class="Symbol">)</a> <a id="8832" href="Leios.Protocol.html#B1-L50" class="Function type-hoverable" data-original-href="Leios.Protocol.html#1586" data-hoverable="true" data-position="1586" data-target-file="Leios.Protocol.html">EBs</a></div><div id="B17-LC4" class="code-line">          <a id="8846" href="Prelude.InferenceRules.html#B1-L685" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#56005" data-hoverable="true" data-position="56005" data-target-file="Prelude.InferenceRules.html">∙</a> <a id="8848" href="Leios.Short.html#B1-L1" class="Function type-hoverable" data-original-href="Leios.Short.html#8722" data-hoverable="true" data-position="8722" data-target-file="Leios.Short.html">bs</a> <a id="8851" href="Leios.Base.html#B1-L98" class="Function Operator type-hoverable" data-original-href="Leios.Base.html#3276" data-hoverable="true" data-position="3276" data-target-file="Leios.Base.html">B.-⟦</a> <a id="8856" href="Leios.Base.html#B1-L54" class="InductiveConstructor type-hoverable" data-original-href="Leios.Base.html#1769" data-hoverable="true" data-position="1769" data-target-file="Leios.Base.html">B.SUBMIT</a> <a id="8865" class="Symbol">(</a><a id="8866" href="Data.These.Base.html#B1-L26" class="InductiveConstructor type-hoverable" data-original-href="Data.These.Base.html#595" data-hoverable="true" data-position="595" data-target-file="Data.These.Base.html">this</a> <a id="8871" href="Leios.Short.html#1929" class="Generalizable">eb</a><a id="8873" class="Symbol">)</a> <a id="8875" href="Leios.Base.html#B1-L98" class="Function Operator type-hoverable" data-original-href="Leios.Base.html#3276" data-hoverable="true" data-position="3276" data-target-file="Leios.Base.html">/</a> <a id="8877" href="Leios.Base.html#B1-L85" class="InductiveConstructor type-hoverable" data-original-href="Leios.Base.html#2840" data-hoverable="true" data-position="2840" data-target-file="Leios.Base.html">B.EMPTY</a> <a id="8885" href="Leios.Base.html#B1-L98" class="Function Operator type-hoverable" data-original-href="Leios.Base.html#3276" data-hoverable="true" data-position="3276" data-target-file="Leios.Base.html">⟧⇀</a> <a id="8888" href="Leios.Short.html#1766" class="Generalizable">bs'</a></div><div id="B17-LC5" class="code-line">          <a id="8902" href="Prelude.InferenceRules.html#B1-L162" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#11470" data-hoverable="true" data-position="11470" data-target-file="Prelude.InferenceRules.html">───────────────────────────────────────────────────────────────────────</a></div><div id="B17-LC6" class="code-line">          <a id="8984" href="Agda.Builtin.Maybe.html#B1-L6" class="InductiveConstructor type-hoverable" data-original-href="Agda.Builtin.Maybe.html#173" data-hoverable="true" data-position="173" data-target-file="Agda.Builtin.Maybe.html">just</a> <a id="8989" href="Leios.Short.html#1661" class="Generalizable">s</a> <a id="8991" href="Leios.Short.html#B1-L1" class="Datatype Operator type-hoverable" data-original-href="Leios.Short.html#7093" data-hoverable="true" data-position="7093" data-target-file="Leios.Short.html">-⟦</a> <a id="8994" href="Leios.Protocol.html#B1-L36" class="InductiveConstructor type-hoverable" data-original-href="Leios.Protocol.html#1214" data-hoverable="true" data-position="1214" data-target-file="Leios.Protocol.html">SLOT</a> <a id="8999" href="Leios.Short.html#B1-L1" class="Datatype Operator type-hoverable" data-original-href="Leios.Short.html#7093" data-hoverable="true" data-position="7093" data-target-file="Leios.Short.html">/</a> <a id="9001" href="Leios.Protocol.html#B1-L41" class="InductiveConstructor type-hoverable" data-original-href="Leios.Protocol.html#1328" data-hoverable="true" data-position="1328" data-target-file="Leios.Protocol.html">EMPTY</a> <a id="9007" href="Leios.Short.html#B1-L1" class="Datatype Operator type-hoverable" data-original-href="Leios.Short.html#7093" data-hoverable="true" data-position="7093" data-target-file="Leios.Short.html">⟧⇀</a> <a id="9010" href="Leios.Protocol.html#B1-L91" class="Function type-hoverable" data-original-href="Leios.Protocol.html#2892" data-hoverable="true" data-position="2892" data-target-file="Leios.Protocol.html">addUpkeep</a> <a id="9020" class="Keyword">record</a> <a id="9027" href="Leios.Short.html#1661" class="Generalizable">s</a> <a id="9029" class="Symbol">{</a> <a id="9031" href="Leios.Protocol.html#B1-L57" class="Field type-hoverable" data-original-href="Leios.Protocol.html#1838" data-hoverable="true" data-position="1838" data-target-file="Leios.Protocol.html">BaseState</a> <a id="9041" class="Symbol">=</a> <a id="9043" href="Leios.Short.html#1766" class="Generalizable">bs'</a> <a id="9047" class="Symbol">}</a> <a id="9049" href="Leios.Short.html#B1-L2" class="InductiveConstructor type-hoverable" data-original-href="Leios.Short.html#1028" data-hoverable="true" data-position="1028" data-target-file="Leios.Short.html">Base</a></div><div id="B17-LC7" class="code-line">&nbsp;</div><div id="B17-LC8" class="code-line">  <a id="_-⟦_/_⟧⇀_.Base₂b"></a><a id="9057" href="Leios.Short.html#B1-L8" class="InductiveConstructor type-hoverable" data-original-href="Leios.Short.html#9057" data-hoverable="true" data-position="9057" data-target-file="Leios.Short.html">Base₂b</a>  <a id="9065" class="Symbol">:</a> <a id="9067" class="Keyword">let</a> <a id="9071" class="Keyword">open</a> <a id="9076" href="Leios.Protocol.html#B1-L43" class="Module type-hoverable" data-original-href="Leios.Protocol.html#1359" data-hoverable="true" data-position="1359" data-target-file="Leios.Protocol.html">LeiosState</a> <a id="9087" href="Leios.Short.html#1661" class="Generalizable">s</a> <a id="9089" class="Keyword">renaming</a> <a id="9098" class="Symbol">(</a><a id="9099" href="Leios.Protocol.html#B1-L57" class="Field type-hoverable" data-original-href="Leios.Protocol.html#1838" data-hoverable="true" data-position="1838" data-target-file="Leios.Protocol.html">BaseState</a> <a id="9109" class="Symbol">to</a> <a id="9112" class="Field">bs</a><a id="9114" class="Symbol">)</a> <a id="9116" class="Keyword">in</a></div><div id="B17-LC9" class="code-line">          <a id="9129" href="Prelude.InferenceRules.html#B1-L689" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#56074" data-hoverable="true" data-position="56074" data-target-file="Prelude.InferenceRules.html">∙</a> <a id="9131" href="Leios.Protocol.html#B1-L79" class="Function type-hoverable" data-original-href="Leios.Protocol.html#2475" data-hoverable="true" data-position="2475" data-target-file="Leios.Protocol.html">needsUpkeep</a> <a id="9143" href="Leios.Short.html#B1-L2" class="InductiveConstructor type-hoverable" data-original-href="Leios.Short.html#1028" data-hoverable="true" data-position="1028" data-target-file="Leios.Short.html">Base</a></div><div id="B17-LC10" class="code-line">          <a id="9158" href="Prelude.InferenceRules.html#B1-L685" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#56005" data-hoverable="true" data-position="56005" data-target-file="Prelude.InferenceRules.html">∙</a> <a id="9160" href="Agda.Builtin.List.html#B1-L7" class="InductiveConstructor type-hoverable" data-original-href="Agda.Builtin.List.html#184" data-hoverable="true" data-position="184" data-target-file="Agda.Builtin.List.html">[]</a> <a id="9163" href="Agda.Builtin.Equality.html#B1-L6" class="Datatype Operator type-hoverable" data-original-href="Agda.Builtin.Equality.html#150" data-hoverable="true" data-position="150" data-target-file="Agda.Builtin.Equality.html">≡</a> <a id="9165" href="Leios.Prelude.html#B1-L54" class="Function type-hoverable" data-original-href="Leios.Prelude.html#1588" data-hoverable="true" data-position="1588" data-target-file="Leios.Prelude.html">filter</a> <a id="9172" class="Symbol">(λ</a> <a id="9175" href="Leios.Short.html#B1-L10" class="Bound type-hoverable" data-original-href="Leios.Short.html#9175" data-hoverable="true" data-position="9175" data-target-file="Leios.Short.html">x</a> <a id="9177" class="Symbol">→</a> <a id="9179" href="Leios.Short.html#1503" class="Function">isVoteCertified</a> <a id="9195" href="Leios.Short.html#1661" class="Generalizable">s</a> <a id="9197" href="Leios.Short.html#B1-L10" class="Bound type-hoverable" data-original-href="Leios.Short.html#9175" data-hoverable="true" data-position="9175" data-target-file="Leios.Short.html">x</a> <a id="9199" href="Data.Product.Base.html#B1-L70" class="Function Operator type-hoverable" data-original-href="Data.Product.Base.html#1618" data-hoverable="true" data-position="1618" data-target-file="Data.Product.Base.html">×</a> <a id="9201" href="Leios.Short.html#B1-L10" class="Bound type-hoverable" data-original-href="Leios.Short.html#9175" data-hoverable="true" data-position="9175" data-target-file="Leios.Short.html">x</a> <a id="9203" href="Leios.Blocks.html#B1-L28" class="Function Operator type-hoverable" data-original-href="Leios.Blocks.html#770" data-hoverable="true" data-position="770" data-target-file="Leios.Blocks.html">∈ᴮ</a> <a id="9206" href="Leios.Prelude.html#B1-L45" class="Function type-hoverable" data-original-href="Leios.Prelude.html#1209" data-hoverable="true" data-position="1209" data-target-file="Leios.Prelude.html">slice</a> <a id="9212" href="Leios.Abstract.html#B1-L29" class="Function type-hoverable" data-original-href="Leios.Abstract.html#961" data-hoverable="true" data-position="961" data-target-file="Leios.Abstract.html">L</a> <a id="9214" href="Leios.Protocol.html#B1-L52" class="Function type-hoverable" data-original-href="Leios.Protocol.html#1668" data-hoverable="true" data-position="1668" data-target-file="Leios.Protocol.html">slot</a> <a id="9219" class="Number">2</a><a id="9220" class="Symbol">)</a> <a id="9222" href="Leios.Protocol.html#B1-L50" class="Function type-hoverable" data-original-href="Leios.Protocol.html#1586" data-hoverable="true" data-position="1586" data-target-file="Leios.Protocol.html">EBs</a></div><div id="B17-LC11" class="code-line">          <a id="9236" href="Prelude.InferenceRules.html#B1-L685" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#56005" data-hoverable="true" data-position="56005" data-target-file="Prelude.InferenceRules.html">∙</a> <a id="9238" href="Leios.Short.html#B1-L8" class="Function type-hoverable" data-original-href="Leios.Short.html#9112" data-hoverable="true" data-position="9112" data-target-file="Leios.Short.html">bs</a> <a id="9241" href="Leios.Base.html#B1-L98" class="Function Operator type-hoverable" data-original-href="Leios.Base.html#3276" data-hoverable="true" data-position="3276" data-target-file="Leios.Base.html">B.-⟦</a> <a id="9246" href="Leios.Base.html#B1-L54" class="InductiveConstructor type-hoverable" data-original-href="Leios.Base.html#1769" data-hoverable="true" data-position="1769" data-target-file="Leios.Base.html">B.SUBMIT</a> <a id="9255" class="Symbol">(</a><a id="9256" href="Data.These.Base.html#B1-L27" class="InductiveConstructor type-hoverable" data-original-href="Data.These.Base.html#623" data-hoverable="true" data-position="623" data-target-file="Data.These.Base.html">that</a> <a id="9261" href="Leios.Protocol.html#B1-L48" class="Function type-hoverable" data-original-href="Leios.Protocol.html#1516" data-hoverable="true" data-position="1516" data-target-file="Leios.Protocol.html">ToPropose</a><a id="9270" class="Symbol">)</a> <a id="9272" href="Leios.Base.html#B1-L98" class="Function Operator type-hoverable" data-original-href="Leios.Base.html#3276" data-hoverable="true" data-position="3276" data-target-file="Leios.Base.html">/</a> <a id="9274" href="Leios.Base.html#B1-L85" class="InductiveConstructor type-hoverable" data-original-href="Leios.Base.html#2840" data-hoverable="true" data-position="2840" data-target-file="Leios.Base.html">B.EMPTY</a> <a id="9282" href="Leios.Base.html#B1-L98" class="Function Operator type-hoverable" data-original-href="Leios.Base.html#3276" data-hoverable="true" data-position="3276" data-target-file="Leios.Base.html">⟧⇀</a> <a id="9285" href="Leios.Short.html#1766" class="Generalizable">bs'</a></div><div id="B17-LC12" class="code-line">          <a id="9299" href="Prelude.InferenceRules.html#B1-L162" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#11470" data-hoverable="true" data-position="11470" data-target-file="Prelude.InferenceRules.html">───────────────────────────────────────────────────────────────────────</a></div><div id="B17-LC13" class="code-line">          <a id="9381" href="Agda.Builtin.Maybe.html#B1-L6" class="InductiveConstructor type-hoverable" data-original-href="Agda.Builtin.Maybe.html#173" data-hoverable="true" data-position="173" data-target-file="Agda.Builtin.Maybe.html">just</a> <a id="9386" href="Leios.Short.html#1661" class="Generalizable">s</a> <a id="9388" href="Leios.Short.html#B1-L1" class="Datatype Operator type-hoverable" data-original-href="Leios.Short.html#7093" data-hoverable="true" data-position="7093" data-target-file="Leios.Short.html">-⟦</a> <a id="9391" href="Leios.Protocol.html#B1-L36" class="InductiveConstructor type-hoverable" data-original-href="Leios.Protocol.html#1214" data-hoverable="true" data-position="1214" data-target-file="Leios.Protocol.html">SLOT</a> <a id="9396" href="Leios.Short.html#B1-L1" class="Datatype Operator type-hoverable" data-original-href="Leios.Short.html#7093" data-hoverable="true" data-position="7093" data-target-file="Leios.Short.html">/</a> <a id="9398" href="Leios.Protocol.html#B1-L41" class="InductiveConstructor type-hoverable" data-original-href="Leios.Protocol.html#1328" data-hoverable="true" data-position="1328" data-target-file="Leios.Protocol.html">EMPTY</a> <a id="9404" href="Leios.Short.html#B1-L1" class="Datatype Operator type-hoverable" data-original-href="Leios.Short.html#7093" data-hoverable="true" data-position="7093" data-target-file="Leios.Short.html">⟧⇀</a> <a id="9407" href="Leios.Protocol.html#B1-L91" class="Function type-hoverable" data-original-href="Leios.Protocol.html#2892" data-hoverable="true" data-position="2892" data-target-file="Leios.Protocol.html">addUpkeep</a> <a id="9417" class="Keyword">record</a> <a id="9424" href="Leios.Short.html#1661" class="Generalizable">s</a> <a id="9426" class="Symbol">{</a> <a id="9428" href="Leios.Protocol.html#B1-L57" class="Field type-hoverable" data-original-href="Leios.Protocol.html#1838" data-hoverable="true" data-position="1838" data-target-file="Leios.Protocol.html">BaseState</a> <a id="9438" class="Symbol">=</a> <a id="9440" href="Leios.Short.html#1766" class="Generalizable">bs'</a> <a id="9444" class="Symbol">}</a> <a id="9446" href="Leios.Short.html#B1-L2" class="InductiveConstructor type-hoverable" data-original-href="Leios.Short.html#1028" data-hoverable="true" data-position="1028" data-target-file="Leios.Short.html">Base</a></div></div></div><button class="copy-code-button" title="Copy code">
        <svg width="16" height="16" viewBox="0 0 16 16">
          <path fill="currentColor" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path fill="currentColor" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
        </svg>
      </button></pre>
<h4 id="protocol-rules">Protocol rules</h4>
<pre class="Agda has-copy-button" id="B18"><div class="code-container"><div class="line-numbers"><a href="#B18-L1" id="B18-L1" class="line-number" data-line-number="1" data-block-id="B18">1</a><a href="#B18-L2" id="B18-L2" class="line-number" data-line-number="2" data-block-id="B18">2</a><a href="#B18-L3" id="B18-L3" class="line-number" data-line-number="3" data-block-id="B18">3</a><a href="#B18-L4" id="B18-L4" class="line-number" data-line-number="4" data-block-id="B18">4</a></div><div class="code-content"><div id="B18-LC1" class="code-line">  <a id="_-⟦_/_⟧⇀_.Roles"></a><a id="9485" href="Leios.Short.html#B1-L1" class="InductiveConstructor type-hoverable" data-original-href="Leios.Short.html#9485" data-hoverable="true" data-position="9485" data-target-file="Leios.Short.html">Roles</a> <a id="9491" class="Symbol">:</a></div><div id="B18-LC2" class="code-line">        <a id="9501" href="Prelude.InferenceRules.html#B1-L689" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#56074" data-hoverable="true" data-position="56074" data-target-file="Prelude.InferenceRules.html">∙</a> <a id="9503" href="Leios.Short.html#1661" class="Generalizable">s</a> <a id="9505" href="Leios.Short.html#B1-L1" class="Datatype Operator type-hoverable" data-original-href="Leios.Short.html#3193" data-hoverable="true" data-position="3193" data-target-file="Leios.Short.html">↝</a> <a id="9507" href="Leios.Short.html#1663" class="Generalizable">s'</a></div><div id="B18-LC3" class="code-line">        <a id="9518" href="Prelude.InferenceRules.html#B1-L204" class="Function Operator type-hoverable" data-original-href="Prelude.InferenceRules.html#13801" data-hoverable="true" data-position="13801" data-target-file="Prelude.InferenceRules.html">─────────────────────────────</a></div><div id="B18-LC4" class="code-line">        <a id="9556" href="Agda.Builtin.Maybe.html#B1-L6" class="InductiveConstructor type-hoverable" data-original-href="Agda.Builtin.Maybe.html#173" data-hoverable="true" data-position="173" data-target-file="Agda.Builtin.Maybe.html">just</a> <a id="9561" href="Leios.Short.html#1661" class="Generalizable">s</a> <a id="9563" href="Leios.Short.html#B1-L1" class="Datatype Operator type-hoverable" data-original-href="Leios.Short.html#7093" data-hoverable="true" data-position="7093" data-target-file="Leios.Short.html">-⟦</a> <a id="9566" href="Leios.Protocol.html#B1-L36" class="InductiveConstructor type-hoverable" data-original-href="Leios.Protocol.html#1214" data-hoverable="true" data-position="1214" data-target-file="Leios.Protocol.html">SLOT</a> <a id="9571" href="Leios.Short.html#B1-L1" class="Datatype Operator type-hoverable" data-original-href="Leios.Short.html#7093" data-hoverable="true" data-position="7093" data-target-file="Leios.Short.html">/</a> <a id="9573" href="Leios.Protocol.html#B1-L41" class="InductiveConstructor type-hoverable" data-original-href="Leios.Protocol.html#1328" data-hoverable="true" data-position="1328" data-target-file="Leios.Protocol.html">EMPTY</a> <a id="9579" href="Leios.Short.html#B1-L1" class="Datatype Operator type-hoverable" data-original-href="Leios.Short.html#7093" data-hoverable="true" data-position="7093" data-target-file="Leios.Short.html">⟧⇀</a> <a id="9582" href="Leios.Short.html#1663" class="Generalizable">s'</a></div></div></div><button class="copy-code-button" title="Copy code">
        <svg width="16" height="16" viewBox="0 0 16 16">
          <path fill="currentColor" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path fill="currentColor" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
        </svg>
      </button></pre>


<script src="themeToggle.js" defer=""></script><script src="sidebarToggle.js" defer=""></script></div></div><script src="codeBlocks.js" defer=""></script><script src="search.js" defer=""></script><div id="type-preview-container" class="type-preview-container" style="display: none;"></div><script src="typePreview.js" defer=""></script></body></html>