## Linear Leios

<!--
<pre class="Agda"><a id="31" class="Symbol">{-#</a> <a id="35" class="Keyword">OPTIONS</a> <a id="43" class="Pragma">--safe</a> <a id="50" class="Pragma">--no-require-unique-meta-solutions</a> <a id="85" class="Symbol">#-}</a>
<a id="89" class="Keyword">open</a> <a id="94" class="Keyword">import</a> <a id="101" href="Leios.Prelude.html" class="Module">Leios.Prelude</a> <a id="115" class="Keyword">hiding</a> <a id="122" class="Symbol">(</a><a id="123" href="Function.Base.html#704" class="Function">id</a><a id="125" class="Symbol">;</a> <a id="127" href="Class.Applicative.Core.html#506" class="Function Operator">_⊗_</a><a id="130" class="Symbol">)</a>
<a id="132" class="Keyword">open</a> <a id="137" class="Keyword">import</a> <a id="144" href="Leios.FFD.html" class="Module">Leios.FFD</a>
<a id="154" class="Keyword">open</a> <a id="159" class="Keyword">import</a> <a id="166" href="Leios.SpecStructure.html" class="Module">Leios.SpecStructure</a>
<a id="186" class="Keyword">open</a> <a id="191" class="Keyword">import</a> <a id="198" href="Leios.Config.html" class="Module">Leios.Config</a>

<a id="212" class="Keyword">open</a> <a id="217" class="Keyword">import</a> <a id="224" href="Tactic.Defaults.html" class="Module">Tactic.Defaults</a>
<a id="240" class="Keyword">open</a> <a id="245" class="Keyword">import</a> <a id="252" href="Tactic.Derive.DecEq.html" class="Module">Tactic.Derive.DecEq</a>

<a id="273" class="Keyword">open</a> <a id="278" class="Keyword">import</a> <a id="285" href="CategoricalCrypto.html" class="Module">CategoricalCrypto</a> <a id="303" class="Keyword">hiding</a> <a id="310" class="Symbol">(</a><a id="311" href="CategoricalCrypto.Machine.Core.html#2179" class="Function">id</a><a id="313" class="Symbol">;</a> <a id="315" href="CategoricalCrypto.Machine.Core.html#4922" class="Function Operator">_∘_</a><a id="318" class="Symbol">)</a>
<a id="320" class="Keyword">open</a> <a id="325" class="Keyword">import</a> <a id="332" href="CategoricalCrypto.Channel.Selection.html" class="Module">CategoricalCrypto.Channel.Selection</a>

<a id="369" class="Keyword">module</a> <a id="376" href="Leios.Linear.html" class="Module">Leios.Linear</a> <a id="389" class="Symbol">(</a><a id="390" href="Leios.Linear.html#390" class="Bound">⋯</a> <a id="392" class="Symbol">:</a> <a id="394" href="Leios.SpecStructure.html#348" class="Record">SpecStructure</a><a id="407" class="Symbol">)</a>
  <a id="411" class="Symbol">(</a><a id="412" class="Keyword">let</a> <a id="416" class="Keyword">open</a> <a id="421" href="Leios.SpecStructure.html#348" class="Module">SpecStructure</a> <a id="435" href="Leios.Linear.html#390" class="Bound">⋯</a><a id="436" class="Symbol">)</a>
  <a id="440" class="Symbol">(</a><a id="441" href="Leios.Linear.html#441" class="Bound">params</a> <a id="448" class="Symbol">:</a> <a id="450" href="Leios.Config.html#778" class="Record">Params</a><a id="456" class="Symbol">)</a>
  <a id="460" class="Symbol">(</a><a id="461" href="Leios.Linear.html#461" class="Bound">Lhdr</a> <a id="466" href="Leios.Linear.html#466" class="Bound">Lvote</a> <a id="472" href="Leios.Linear.html#472" class="Bound">Ldiff</a> <a id="478" class="Symbol">:</a> <a id="480" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="481" class="Symbol">)</a>
  <a id="485" class="Symbol">(</a><a id="486" href="Leios.Linear.html#486" class="Bound">splitTxs</a> <a id="495" class="Symbol">:</a> <a id="497" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="502" href="Leios.Abstract.html#488" class="Function">Tx</a> <a id="505" class="Symbol">→</a> <a id="507" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="512" href="Leios.Abstract.html#488" class="Function">Tx</a> <a id="515" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="517" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="522" href="Leios.Abstract.html#488" class="Function">Tx</a><a id="524" class="Symbol">)</a>
  <a id="528" class="Symbol">(</a><a id="529" href="Leios.Linear.html#529" class="Bound">validityCheckTime</a> <a id="547" class="Symbol">:</a> <a id="549" href="Leios.Blocks.html#1236" class="Function">EndorserBlock</a> <a id="563" class="Symbol">→</a> <a id="565" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="566" class="Symbol">)</a> <a id="568" class="Keyword">where</a>
</pre>-->

This document is a specification of Linear Leios. It removes
concurrency at the transaction level by producing one (large) EB for
every Praos block.

In addition to the expected paramaters, we assume a two functions:

- `splitTxs`: produces a pair of a list of transactions that can be
  included in an RB and a list of transactions that can be included in
  an EB
- `validityCheckTime`: the time it takes to validate a given EB (in slots)

### Upkeep

A node that never produces a block even though it could is not
supposed to be an honest node, and we prevent that by tracking whether
a node has checked if it can make a block in a particular slot.
`LeiosState` contains a set of `SlotUpkeep` and we ensure that this
set contains all elements before we can advance to the next slot,
resetting this field to the empty set.

<pre class="Agda"><a id="1416" class="Keyword">data</a> <a id="SlotUpkeep"></a><a id="1421" href="Leios.Linear.html#1421" class="Datatype">SlotUpkeep</a> <a id="1432" class="Symbol">:</a> <a id="1434" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1439" class="Keyword">where</a>
  <a id="SlotUpkeep.Base"></a><a id="1447" href="Leios.Linear.html#1447" class="InductiveConstructor">Base</a> <a id="SlotUpkeep.EB-Role"></a><a id="1452" href="Leios.Linear.html#1452" class="InductiveConstructor">EB-Role</a> <a id="SlotUpkeep.VT-Role"></a><a id="1460" href="Leios.Linear.html#1460" class="InductiveConstructor">VT-Role</a> <a id="1468" class="Symbol">:</a> <a id="1470" href="Leios.Linear.html#1421" class="Datatype">SlotUpkeep</a>
</pre><!--
<pre class="Agda"><a id="1498" class="Keyword">unquoteDecl</a> <a id="DecEq-SlotUpkeep"></a><a id="1510" href="Leios.Linear.html#1510" class="Function">DecEq-SlotUpkeep</a> <a id="1527" class="Symbol">=</a> <a id="1529" href="Tactic.Derive.DecEq.html#5150" class="Function">derive-DecEq</a> <a id="1542" class="Symbol">((</a><a id="1544" class="Keyword">quote</a> <a id="1550" href="Leios.Linear.html#1421" class="Datatype">SlotUpkeep</a> <a id="1561" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1563" href="Leios.Linear.html#1510" class="Function">DecEq-SlotUpkeep</a><a id="1579" class="Symbol">)</a> <a id="1581" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1583" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="1585" class="Symbol">)</a>

<a id="1588" class="Keyword">open</a> <a id="1593" class="Keyword">import</a> <a id="1600" href="Leios.Protocol.html" class="Module">Leios.Protocol</a> <a id="1615" class="Symbol">(</a><a id="1616" href="Leios.Linear.html#390" class="Bound">⋯</a><a id="1617" class="Symbol">)</a> <a id="1619" href="Leios.Linear.html#1421" class="Datatype">SlotUpkeep</a> <a id="1630" href="Data.Empty.html#914" class="Function">⊥</a> <a id="1632" class="Keyword">public</a>
<a id="1639" class="Keyword">open</a> <a id="1644" href="Leios.Base.html#704" class="Module">BaseAbstract</a> <a id="1657" href="Leios.SpecStructure.html#856" class="Field">B&#39;</a> <a id="1660" class="Keyword">using</a> <a id="1666" class="Symbol">(</a><a id="1667" href="Leios.Base.html#739" class="Field">Cert</a><a id="1671" class="Symbol">;</a> <a id="1673" href="Leios.Base.html#805" class="Field">V-chkCerts</a><a id="1683" class="Symbol">;</a> <a id="1685" href="Leios.Base.html#759" class="Field">VTy</a><a id="1688" class="Symbol">;</a> <a id="1690" href="Leios.Base.html#778" class="Field">initSlot</a><a id="1698" class="Symbol">)</a>
<a id="1700" class="Keyword">open</a> <a id="1705" href="Leios.SpecStructure.html#1171" class="Module">FFD</a> <a id="1709" class="Keyword">hiding</a> <a id="1716" class="Symbol">(</a><a id="1717" href="Leios.FFD.html#654" class="Function Operator">_-⟦_/_⟧⇀_</a><a id="1726" class="Symbol">)</a>
<a id="1728" class="Keyword">open</a> <a id="1733" href="Leios.Blocks.html#2303" class="Module">GenFFD</a>

<a id="1741" class="Keyword">private</a> <a id="1749" class="Keyword">variable</a> <a id="1758" href="Leios.Linear.html#1758" class="Generalizable">s</a> <a id="1760" href="Leios.Linear.html#1760" class="Generalizable">s&#39;</a>   <a id="1765" class="Symbol">:</a> <a id="1767" href="Leios.Protocol.html#1542" class="Record">LeiosState</a>
                 <a id="1795" href="Leios.Linear.html#1795" class="Generalizable">ffds&#39;</a>  <a id="1802" class="Symbol">:</a> <a id="1804" href="Leios.FFD.html#600" class="Function">FFD.State</a>
                 <a id="1831" href="Leios.Linear.html#1831" class="Generalizable">π</a>      <a id="1838" class="Symbol">:</a> <a id="1840" href="Leios.Abstract.html#560" class="Function">VrfPf</a>
                 <a id="1863" href="Leios.Linear.html#1863" class="Generalizable">ks</a> <a id="1866" href="Leios.Linear.html#1866" class="Generalizable">ks&#39;</a> <a id="1870" class="Symbol">:</a> <a id="1872" href="Leios.KeyRegistration.html#472" class="Function">K.State</a>
                 <a id="1897" href="Leios.Linear.html#1897" class="Generalizable">msgs</a>   <a id="1904" class="Symbol">:</a> <a id="1906" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="1911" class="Symbol">(</a><a id="1912" href="Leios.FFD.html#176" class="Field">FFDAbstract.Header</a> <a id="1931" href="Leios.Blocks.html#2809" class="Function">ffdAbstract</a> <a id="1943" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="1945" href="Leios.FFD.html#183" class="Field">FFDAbstract.Body</a> <a id="1962" href="Leios.Blocks.html#2809" class="Function">ffdAbstract</a><a id="1973" class="Symbol">)</a>
                 <a id="1992" href="Leios.Linear.html#1992" class="Generalizable">i</a>      <a id="1999" class="Symbol">:</a> <a id="2001" href="Leios.FFD.html#358" class="Datatype">FFDAbstract.Input</a> <a id="2019" href="Leios.Blocks.html#2809" class="Function">ffdAbstract</a>
                 <a id="2048" href="Leios.Linear.html#2048" class="Generalizable">eb</a>     <a id="2055" class="Symbol">:</a> <a id="2057" href="Leios.Blocks.html#1236" class="Function">EndorserBlock</a>
                 <a id="2088" href="Leios.Linear.html#2088" class="Generalizable">ebs</a>    <a id="2095" class="Symbol">:</a> <a id="2097" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2102" href="Leios.Blocks.html#1236" class="Function">EndorserBlock</a>
                 <a id="2133" href="Leios.Linear.html#2133" class="Generalizable">rbs</a>    <a id="2140" class="Symbol">:</a> <a id="2142" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2147" href="Leios.Base.html#585" class="Record">RankingBlock</a>
                 <a id="2177" href="Leios.Linear.html#2177" class="Generalizable">txs</a>    <a id="2184" class="Symbol">:</a> <a id="2186" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2191" href="Leios.Abstract.html#488" class="Function">Tx</a>
                 <a id="2211" href="Leios.Linear.html#2211" class="Generalizable">V</a>      <a id="2218" class="Symbol">:</a> <a id="2220" href="Leios.Base.html#759" class="Function">VTy</a>
                 <a id="2241" href="Leios.Linear.html#2241" class="Generalizable">SD</a>     <a id="2248" class="Symbol">:</a> <a id="2250" href="Leios.Base.html#528" class="Function">StakeDistr</a>
                 <a id="2278" href="Leios.Linear.html#2278" class="Generalizable">pks</a>    <a id="2285" class="Symbol">:</a> <a id="2287" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2292" href="Leios.VRF.html#909" class="Function">PubKey</a>
                 <a id="2316" href="Leios.Linear.html#2316" class="Generalizable">cert</a>   <a id="2323" class="Symbol">:</a> <a id="2325" href="Leios.Abstract.html#656" class="Function">EBCert</a>
</pre>-->

### Block/Vote production

We now define the rules for block production given by the relation `_↝_`. These are split in two:

1. Positive rules, when we do need to create a block.
2. Negative rules, when we cannot create a block.

The purpose of the negative rules is to properly adjust the upkeep if
we cannot make a block.

Note that `_↝_`, starting with an empty upkeep can always make exactly
three steps corresponding to the three types of Leios specific blocks.

<pre class="Agda"><a id="toProposeEB"></a><a id="2818" href="Leios.Linear.html#2818" class="Function">toProposeEB</a> <a id="2830" class="Symbol">:</a> <a id="2832" href="Leios.Protocol.html#1542" class="Record">LeiosState</a> <a id="2843" class="Symbol">→</a> <a id="2845" href="Leios.Abstract.html#560" class="Function">VrfPf</a> <a id="2851" class="Symbol">→</a> <a id="2853" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="2859" href="Leios.Blocks.html#1236" class="Function">EndorserBlock</a>
<a id="2873" href="Leios.Linear.html#2818" class="Function">toProposeEB</a> <a id="2885" href="Leios.Linear.html#2885" class="Bound">s</a> <a id="2887" href="Leios.Linear.html#2887" class="Bound">π</a> <a id="2889" class="Symbol">=</a> <a id="2891" class="Keyword">let</a> <a id="2895" class="Keyword">open</a> <a id="2900" href="Leios.Protocol.html#1542" class="Module">LeiosState</a> <a id="2911" href="Leios.Linear.html#2885" class="Bound">s</a> <a id="2913" class="Keyword">in</a> <a id="2916" href="Function.Base.html#4061" class="Function Operator">case</a> <a id="2921" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="2927" class="Symbol">(</a><a id="2928" href="Leios.Linear.html#486" class="Bound">splitTxs</a> <a id="2937" href="Leios.Protocol.html#1676" class="Function">ToPropose</a><a id="2946" class="Symbol">)</a> <a id="2948" href="Function.Base.html#4061" class="Function Operator">of</a> <a id="2951" class="Symbol">λ</a> <a id="2953" class="Keyword">where</a>
  <a id="2961" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="2964" class="Symbol">→</a> <a id="2966" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
  <a id="2976" class="CatchallClause Symbol">_</a> <a id="2978" class="Symbol">→</a> <a id="2980" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="2985" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="2987" href="Leios.Blocks.html#1767" class="Function">mkEB</a> <a id="2992" href="Leios.Protocol.html#1909" class="Function">slot</a> <a id="2997" href="Leios.SpecStructure.html#612" class="Field">id</a> <a id="3000" href="Leios.Linear.html#2887" class="Bound">π</a> <a id="3002" href="Leios.SpecStructure.html#752" class="Field">sk-EB</a> <a id="3008" href="Leios.Protocol.html#1676" class="Function">ToPropose</a>

<a id="getCurrentEBHash"></a><a id="3019" href="Leios.Linear.html#3019" class="Function">getCurrentEBHash</a> <a id="3036" class="Symbol">:</a> <a id="3038" href="Leios.Protocol.html#1542" class="Record">LeiosState</a> <a id="3049" class="Symbol">→</a> <a id="3051" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="3057" href="Leios.Blocks.html#1007" class="Function">EBRef</a>
<a id="3063" href="Leios.Linear.html#3019" class="Function">getCurrentEBHash</a> <a id="3080" href="Leios.Linear.html#3080" class="Bound">s</a> <a id="3082" class="Symbol">=</a> <a id="3084" class="Keyword">let</a> <a id="3088" class="Keyword">open</a> <a id="3093" href="Leios.Protocol.html#1542" class="Module">LeiosState</a> <a id="3104" href="Leios.Linear.html#3080" class="Bound">s</a> <a id="3106" class="Keyword">in</a>
  <a id="3111" href="Leios.Base.html#641" class="Field">RankingBlock.announcedEB</a> <a id="3136" href="Leios.Protocol.html#2147" class="Function">currentRB</a>

<a id="isEquivocated"></a><a id="3147" href="Leios.Linear.html#3147" class="Function">isEquivocated</a> <a id="3161" class="Symbol">:</a> <a id="3163" href="Leios.Protocol.html#1542" class="Record">LeiosState</a> <a id="3174" class="Symbol">→</a> <a id="3176" href="Leios.Blocks.html#1236" class="Function">EndorserBlock</a> <a id="3190" class="Symbol">→</a> <a id="3192" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="3197" href="Leios.Linear.html#3147" class="Function">isEquivocated</a> <a id="3211" href="Leios.Linear.html#3211" class="Bound">s</a> <a id="3213" href="Leios.Linear.html#3213" class="Bound">eb</a> <a id="3216" class="Symbol">=</a> <a id="3218" href="Axiom.Set.html#9978" class="Function">Any</a> <a id="3222" class="Symbol">(</a><a id="3223" href="Leios.Blocks.html#812" class="Function">areEquivocated</a> <a id="3238" href="Leios.Linear.html#3213" class="Bound">eb</a><a id="3240" class="Symbol">)</a> <a id="3242" class="Symbol">(</a><a id="3243" href="Class.IsSet.html#419" class="Field">toSet</a> <a id="3249" class="Symbol">(</a><a id="3250" href="Leios.Protocol.html#2297" class="Function">LeiosState.EBs</a> <a id="3265" href="Leios.Linear.html#3211" class="Bound">s</a><a id="3266" class="Symbol">))</a>

<a id="rememberVote"></a><a id="3270" href="Leios.Linear.html#3270" class="Function">rememberVote</a> <a id="3283" class="Symbol">:</a> <a id="3285" href="Leios.Protocol.html#1542" class="Record">LeiosState</a> <a id="3296" class="Symbol">→</a> <a id="3298" href="Leios.Blocks.html#1236" class="Function">EndorserBlock</a> <a id="3312" class="Symbol">→</a> <a id="3314" href="Leios.Protocol.html#1542" class="Record">LeiosState</a>
<a id="3325" href="Leios.Linear.html#3270" class="Function">rememberVote</a> <a id="3338" href="Leios.Linear.html#3338" class="Bound">s</a><a id="3339" class="Symbol">@(</a><a id="3341" class="Keyword">record</a> <a id="3348" class="Symbol">{</a> <a id="3350" href="Leios.Protocol.html#1836" class="Field">VotedEBs</a> <a id="3359" class="Symbol">=</a> <a id="3361" href="Leios.Linear.html#3361" class="Bound">vebs</a> <a id="3366" class="Symbol">})</a> <a id="3369" href="Leios.Linear.html#3369" class="Bound">eb</a> <a id="3372" class="Symbol">=</a> <a id="3374" class="Keyword">record</a> <a id="3381" href="Leios.Linear.html#3338" class="Bound">s</a> <a id="3383" class="Symbol">{</a> <a id="3385" href="Leios.Protocol.html#1836" class="Field">VotedEBs</a> <a id="3394" class="Symbol">=</a> <a id="3396" href="Class.Hashable.html#167" class="Field">hash</a> <a id="3401" href="Leios.Linear.html#3369" class="Bound">eb</a> <a id="3404" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="3406" href="Leios.Linear.html#3361" class="Bound">vebs</a> <a id="3411" class="Symbol">}</a>

<a id="3414" class="Keyword">data</a> <a id="_↝_"></a><a id="3419" href="Leios.Linear.html#3419" class="Datatype Operator">_↝_</a> <a id="3423" class="Symbol">:</a> <a id="3425" href="Leios.Protocol.html#1542" class="Record">LeiosState</a> <a id="3436" class="Symbol">→</a> <a id="3438" href="Leios.Protocol.html#1542" class="Record">LeiosState</a> <a id="3449" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3451" href="Leios.FFD.html#358" class="Datatype">FFDAbstract.Input</a> <a id="3469" href="Leios.Blocks.html#2809" class="Function">ffdAbstract</a> <a id="3481" class="Symbol">→</a> <a id="3483" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3488" class="Keyword">where</a>
</pre>#### Positive rules

In this specification, we don't want to peek behind the base chain
abstraction. This means that we assume instead that the `canProduceEB`
predicate is satisfied if and only if we can make an RB. In that case,
we send out an EB with the transactions currently stored in the
mempool.

<pre class="Agda">  <a id="_↝_.EB-Role"></a><a id="3812" href="Leios.Linear.html#3812" class="InductiveConstructor">EB-Role</a> <a id="3820" class="Symbol">:</a> <a id="3822" class="Keyword">let</a> <a id="3826" class="Keyword">open</a> <a id="3831" href="Leios.Protocol.html#1542" class="Module">LeiosState</a> <a id="3842" href="Leios.Linear.html#1758" class="Generalizable">s</a> <a id="3844" class="Keyword">in</a>
          <a id="3857" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="3859" href="Leios.Linear.html#2818" class="Function">toProposeEB</a> <a id="3871" href="Leios.Linear.html#1758" class="Generalizable">s</a> <a id="3873" href="Leios.Linear.html#1831" class="Generalizable">π</a> <a id="3875" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="3877" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="3882" href="Leios.Linear.html#2048" class="Generalizable">eb</a>
          <a id="3895" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="3897" href="Leios.VRF.html#1847" class="Function">canProduceEB</a> <a id="3910" href="Leios.Protocol.html#1909" class="Function">slot</a> <a id="3915" href="Leios.SpecStructure.html#752" class="Field">sk-EB</a> <a id="3921" class="Symbol">(</a><a id="3922" href="Leios.Protocol.html#4500" class="Function">stake</a> <a id="3928" href="Leios.Linear.html#1758" class="Generalizable">s</a><a id="3929" class="Symbol">)</a> <a id="3931" href="Leios.Linear.html#1831" class="Generalizable">π</a>
          <a id="3943" href="Prelude.InferenceRules.html#12567" class="Function Operator">───────────────────────────────────────────────────────</a>
          <a id="4009" href="Leios.Linear.html#1758" class="Generalizable">s</a> <a id="4011" href="Leios.Linear.html#3419" class="Datatype Operator">↝</a> <a id="4013" class="Symbol">(</a><a id="4014" href="Leios.Protocol.html#3642" class="Function">addUpkeep</a> <a id="4024" href="Leios.Linear.html#1758" class="Generalizable">s</a> <a id="4026" href="Leios.Linear.html#1452" class="InductiveConstructor">EB-Role</a> <a id="4034" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4036" href="Leios.FFD.html#381" class="InductiveConstructor">Send</a> <a id="4041" class="Symbol">(</a><a id="4042" href="Leios.Blocks.html#2375" class="InductiveConstructor">ebHeader</a> <a id="4051" href="Leios.Linear.html#2048" class="Generalizable">eb</a><a id="4053" class="Symbol">)</a> <a id="4055" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="4062" class="Symbol">)</a>
</pre><pre class="Agda">  <a id="_↝_.VT-Role"></a><a id="4078" href="Leios.Linear.html#4078" class="InductiveConstructor">VT-Role</a> <a id="4086" class="Symbol">:</a> <a id="4088" class="Symbol">∀</a> <a id="4090" class="Symbol">{</a><a id="4091" href="Leios.Linear.html#4091" class="Bound">ebHash</a> <a id="4098" href="Leios.Linear.html#4098" class="Bound">slot&#39;</a><a id="4103" class="Symbol">}</a>
          <a id="4115" class="Symbol">→</a> <a id="4117" class="Keyword">let</a> <a id="4121" class="Keyword">open</a> <a id="4126" href="Leios.Protocol.html#1542" class="Module">LeiosState</a> <a id="4137" href="Leios.Linear.html#1758" class="Generalizable">s</a>
          <a id="4149" class="Keyword">in</a>
          <a id="4162" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="4164" href="Leios.Linear.html#3019" class="Function">getCurrentEBHash</a> <a id="4181" href="Leios.Linear.html#1758" class="Generalizable">s</a> <a id="4183" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="4185" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="4190" href="Leios.Linear.html#4091" class="Bound">ebHash</a>
          <a id="4207" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="4209" href="Data.List.Base.html#13327" class="Function">find</a> <a id="4214" class="Symbol">(λ</a> <a id="4217" class="Symbol">(_</a> <a id="4220" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4222" href="Leios.Linear.html#4222" class="Bound">eb&#39;</a><a id="4225" class="Symbol">)</a> <a id="4227" class="Symbol">→</a> <a id="4229" href="Class.Hashable.html#167" class="Field">hash</a> <a id="4234" href="Leios.Linear.html#4222" class="Bound">eb&#39;</a> <a id="4238" href="Class.DecEq.Core.html#168" class="Field Operator">≟</a> <a id="4240" href="Leios.Linear.html#4091" class="Bound">ebHash</a><a id="4246" class="Symbol">)</a> <a id="4248" href="Leios.Protocol.html#1788" class="Function">EBs&#39;</a> <a id="4253" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="4255" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="4260" class="Symbol">(</a><a id="4261" href="Leios.Linear.html#4098" class="Bound">slot&#39;</a> <a id="4267" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4269" href="Leios.Linear.html#2048" class="Generalizable">eb</a><a id="4271" class="Symbol">)</a>
          <a id="4283" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="4285" href="Class.Hashable.html#167" class="Field">hash</a> <a id="4290" href="Leios.Linear.html#2048" class="Generalizable">eb</a> <a id="4293" href="Class.IsSet.html#462" class="Function Operator">∉</a> <a id="4295" href="Leios.Protocol.html#1836" class="Function">VotedEBs</a>
          <a id="4314" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="4316" href="Relation.Nullary.Negation.Core.html#677" class="Function Operator">¬</a> <a id="4318" href="Leios.Linear.html#3147" class="Function">isEquivocated</a> <a id="4332" href="Leios.Linear.html#1758" class="Generalizable">s</a> <a id="4334" href="Leios.Linear.html#2048" class="Generalizable">eb</a>
          <a id="4347" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="4349" href="Leios.Protocol.html#6161" class="Function">isValid</a> <a id="4357" href="Leios.Linear.html#1758" class="Generalizable">s</a> <a id="4359" class="Symbol">(</a><a id="4360" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="4365" class="Symbol">(</a><a id="4366" href="Leios.Blocks.html#2375" class="InductiveConstructor">ebHeader</a> <a id="4375" href="Leios.Linear.html#2048" class="Generalizable">eb</a><a id="4377" class="Symbol">))</a>
          <a id="4390" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="4392" href="Leios.Linear.html#4098" class="Bound">slot&#39;</a> <a id="4398" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="4400" href="Leios.Blocks.html#629" class="Field">slotNumber</a> <a id="4411" href="Leios.Linear.html#2048" class="Generalizable">eb</a> <a id="4414" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="4416" href="Leios.Linear.html#461" class="Bound">Lhdr</a>
          <a id="4431" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="4433" href="Leios.Blocks.html#629" class="Field">slotNumber</a> <a id="4444" href="Leios.Linear.html#2048" class="Generalizable">eb</a> <a id="4447" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="4449" class="Number">3</a> <a id="4451" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="4453" href="Leios.Linear.html#461" class="Bound">Lhdr</a> <a id="4458" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="4460" href="Leios.Protocol.html#1909" class="Function">slot</a>
          <a id="4475" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="4477" href="Leios.Protocol.html#1909" class="Function">slot</a> <a id="4482" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="4484" href="Leios.Blocks.html#629" class="Field">slotNumber</a> <a id="4495" href="Leios.Linear.html#2048" class="Generalizable">eb</a> <a id="4498" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="4500" class="Symbol">(</a><a id="4501" class="Number">3</a> <a id="4503" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="4505" href="Leios.Linear.html#461" class="Bound">Lhdr</a> <a id="4510" href="Data.Nat.Base.html#5485" class="Function Operator">⊔</a> <a id="4512" href="Leios.Linear.html#529" class="Bound">validityCheckTime</a> <a id="4530" href="Leios.Linear.html#2048" class="Generalizable">eb</a><a id="4532" class="Symbol">)</a>
          <a id="4544" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="4546" href="Leios.Linear.html#529" class="Bound">validityCheckTime</a> <a id="4564" href="Leios.Linear.html#2048" class="Generalizable">eb</a> <a id="4567" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="4569" class="Number">3</a> <a id="4571" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="4573" href="Leios.Linear.html#461" class="Bound">Lhdr</a> <a id="4578" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="4580" href="Leios.Linear.html#466" class="Bound">Lvote</a>
          <a id="4596" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="4598" href="Leios.Blocks.html#1189" class="Field">EndorserBlockOSig.txs</a> <a id="4620" href="Leios.Linear.html#2048" class="Generalizable">eb</a> <a id="4623" href="Relation.Binary.PropositionalEquality.Core.html#1000" class="Function Operator">≢</a> <a id="4625" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>
          <a id="4638" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="4640" href="Leios.Protocol.html#3018" class="Function">needsUpkeep</a> <a id="4652" href="Leios.Linear.html#1460" class="InductiveConstructor">VT-Role</a>
          <a id="4670" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="4672" href="Leios.VRF.html#2451" class="Function">canProduceV</a> <a id="4684" class="Symbol">(</a><a id="4685" href="Leios.Blocks.html#629" class="Field">slotNumber</a> <a id="4696" href="Leios.Linear.html#2048" class="Generalizable">eb</a><a id="4698" class="Symbol">)</a> <a id="4700" href="Leios.SpecStructure.html#758" class="Field">sk-VT</a> <a id="4706" class="Symbol">(</a><a id="4707" href="Leios.Protocol.html#4500" class="Function">stake</a> <a id="4713" href="Leios.Linear.html#1758" class="Generalizable">s</a><a id="4714" class="Symbol">)</a>
          <a id="4726" href="Prelude.InferenceRules.html#12567" class="Function Operator">───────────────────────────────────────────────────────</a>
          <a id="4792" href="Leios.Linear.html#1758" class="Generalizable">s</a> <a id="4794" href="Leios.Linear.html#3419" class="Datatype Operator">↝</a> <a id="4796" class="Symbol">(</a> <a id="4798" href="Leios.Linear.html#3270" class="Function">rememberVote</a> <a id="4811" class="Symbol">(</a><a id="4812" href="Leios.Protocol.html#3642" class="Function">addUpkeep</a> <a id="4822" href="Leios.Linear.html#1758" class="Generalizable">s</a> <a id="4824" href="Leios.Linear.html#1460" class="InductiveConstructor">VT-Role</a><a id="4831" class="Symbol">)</a> <a id="4833" href="Leios.Linear.html#2048" class="Generalizable">eb</a>
              <a id="4850" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4852" href="Leios.FFD.html#381" class="InductiveConstructor">Send</a> <a id="4857" class="Symbol">(</a><a id="4858" href="Leios.Blocks.html#2413" class="InductiveConstructor">vtHeader</a> <a id="4867" href="Data.List.Base.html#4907" class="Function Operator">[</a> <a id="4869" href="Leios.Abstract.html#716" class="Function">vote</a> <a id="4874" href="Leios.SpecStructure.html#758" class="Field">sk-VT</a> <a id="4880" class="Symbol">(</a><a id="4881" href="Class.Hashable.html#167" class="Field">hash</a> <a id="4886" href="Leios.Linear.html#2048" class="Generalizable">eb</a><a id="4888" class="Symbol">)</a> <a id="4890" href="Data.List.Base.html#4907" class="Function Operator">]</a><a id="4891" class="Symbol">)</a> <a id="4893" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="4900" class="Symbol">)</a>
</pre>Predicate needed for slot transition. Special care needs to be taken when starting from
genesis.
<pre class="Agda"><a id="allDone"></a><a id="5011" href="Leios.Linear.html#5011" class="Function">allDone</a> <a id="5019" class="Symbol">:</a> <a id="5021" href="Leios.Protocol.html#1542" class="Record">LeiosState</a> <a id="5032" class="Symbol">→</a> <a id="5034" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="5039" href="Leios.Linear.html#5011" class="Function">allDone</a> <a id="5047" class="Keyword">record</a> <a id="5054" class="Symbol">{</a> <a id="5056" href="Leios.Protocol.html#1934" class="Field">Upkeep</a> <a id="5063" class="Symbol">=</a> <a id="5065" href="Leios.Linear.html#5065" class="Bound">u</a> <a id="5067" class="Symbol">}</a> <a id="5069" class="Symbol">=</a> <a id="5071" href="Leios.Linear.html#1460" class="InductiveConstructor">VT-Role</a> <a id="5079" href="abstract-set-theory.Prelude.html#563" class="Function Operator">∈ˡ</a> <a id="5082" href="Leios.Linear.html#5065" class="Bound">u</a> <a id="5084" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="5086" href="Leios.Linear.html#1452" class="InductiveConstructor">EB-Role</a> <a id="5094" href="abstract-set-theory.Prelude.html#563" class="Function Operator">∈ˡ</a> <a id="5097" href="Leios.Linear.html#5065" class="Bound">u</a> <a id="5099" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="5101" href="Leios.Linear.html#1447" class="InductiveConstructor">Base</a> <a id="5106" href="abstract-set-theory.Prelude.html#563" class="Function Operator">∈ˡ</a> <a id="5109" href="Leios.Linear.html#5065" class="Bound">u</a>
</pre>### Linear Leios transitions
The relation describing the transition given input and state

<pre class="Agda"><a id="5214" class="Keyword">open</a> <a id="5219" href="Leios.Protocol.html#7592" class="Module">Types</a> <a id="5225" href="Leios.Linear.html#441" class="Bound">params</a>
<a id="5232" class="Keyword">open</a> <a id="5237" href="Leios.Base.html#704" class="Module">BaseAbstract</a> <a id="5250" href="Leios.SpecStructure.html#856" class="Field">B&#39;</a>

<a id="5254" class="Keyword">data</a> <a id="_-⟦_/_⟧⇀_"></a><a id="5259" href="Leios.Linear.html#5259" class="Datatype Operator">_-⟦_/_⟧⇀_</a> <a id="5269" class="Symbol">:</a> <a id="5271" href="CategoricalCrypto.Machine.Core.html#776" class="Function">MachineType</a> <a id="5283" class="Symbol">(</a><a id="5284" href="Leios.Protocol.html#8298" class="Function">FFD</a> <a id="5288" href="CategoricalCrypto.Channel.Core.html#3393" class="Function Operator">⊗</a> <a id="5290" href="Leios.Base.html#2974" class="Function">BaseIO</a><a id="5296" class="Symbol">)</a> <a id="5298" class="Symbol">(</a><a id="5299" href="Leios.Protocol.html#8017" class="Function">IO</a> <a id="5302" href="CategoricalCrypto.Channel.Core.html#3393" class="Function Operator">⊗</a> <a id="5304" href="Leios.Protocol.html#8060" class="Function">Adv</a><a id="5307" class="Symbol">)</a> <a id="5309" href="Leios.Protocol.html#1542" class="Record">LeiosState</a> <a id="5320" class="Keyword">where</a>
</pre>#### Network and Ledger
<pre class="Agda">  <a id="_-⟦_/_⟧⇀_.Slot₁"></a><a id="5364" href="Leios.Linear.html#5364" class="InductiveConstructor">Slot₁</a> <a id="5370" class="Symbol">:</a> <a id="5372" class="Keyword">let</a> <a id="5376" class="Keyword">open</a> <a id="5381" href="Leios.Protocol.html#1542" class="Module">LeiosState</a> <a id="5392" href="Leios.Linear.html#1758" class="Generalizable">s</a> <a id="5394" class="Keyword">in</a>
        <a id="5405" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="5407" href="Leios.Linear.html#5011" class="Function">allDone</a> <a id="5415" href="Leios.Linear.html#1758" class="Generalizable">s</a>
        <a id="5425" href="Prelude.InferenceRules.html#11841" class="Function Operator">──────────────────────────────────────────────────────────────────</a>
        <a id="5500" href="Leios.Linear.html#1758" class="Generalizable">s</a> <a id="5502" href="Leios.Linear.html#5259" class="Datatype Operator">-⟦</a> <a id="5505" class="Symbol">(</a><a id="5506" href="CategoricalCrypto.Channel.Selection.html#734" class="InductiveConstructor">ϵ</a> <a id="5508" href="CategoricalCrypto.Channel.Selection.html#767" class="InductiveConstructor Operator">⊗R</a><a id="5510" class="Symbol">)</a> <a id="5512" href="CategoricalCrypto.Channel.Selection.html#767" class="InductiveConstructor Operator">⊗R</a> <a id="5515" href="CategoricalCrypto.Channel.Selection.html#1281" class="Function Operator">↑ᵢ</a> <a id="5518" href="Leios.Protocol.html#8162" class="InductiveConstructor">FFD-OUT</a> <a id="5526" href="Leios.Linear.html#1897" class="Generalizable">msgs</a> <a id="5531" href="Leios.Linear.html#5259" class="Datatype Operator">/</a> <a id="5533" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="5538" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="5540" class="Symbol">(</a><a id="5541" href="CategoricalCrypto.Channel.Selection.html#834" class="InductiveConstructor Operator">L⊗</a> <a id="5544" href="CategoricalCrypto.Channel.Selection.html#734" class="InductiveConstructor">ϵ</a><a id="5545" class="Symbol">)</a> <a id="5547" href="CategoricalCrypto.Channel.Selection.html#767" class="InductiveConstructor Operator">⊗R</a> <a id="5550" href="CategoricalCrypto.Channel.Selection.html#1378" class="Function Operator">↑ₒ</a> <a id="5553" href="Leios.Base.html#1982" class="InductiveConstructor">FTCH-LDG</a> <a id="5562" href="Leios.Linear.html#5259" class="Datatype Operator">⟧⇀</a>
          <a id="5575" class="Keyword">let</a> <a id="5579" href="Leios.Linear.html#5579" class="Bound">s&#39;</a> <a id="5582" class="Symbol">=</a> <a id="5584" href="Leios.Linear.html#1758" class="Generalizable">s</a> <a id="5586" href="Leios.Protocol.html#7098" class="Function Operator">↑</a> <a id="5588" href="Data.List.Base.html#10389" class="Function">L.filter</a> <a id="5597" class="Symbol">(</a><a id="5598" href="Leios.Protocol.html#6269" class="Function">isValid?</a> <a id="5607" href="Leios.Linear.html#1758" class="Generalizable">s</a><a id="5608" class="Symbol">)</a> <a id="5610" href="Leios.Linear.html#1897" class="Generalizable">msgs</a>
          <a id="5625" class="Keyword">in</a> <a id="5628" class="Keyword">record</a> <a id="5635" href="Leios.Linear.html#5579" class="Bound">s&#39;</a>
               <a id="5653" class="Symbol">{</a> <a id="5655" href="Leios.Protocol.html#1909" class="Field">slot</a>   <a id="5662" class="Symbol">=</a> <a id="5664" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="5668" href="Leios.Protocol.html#1909" class="Function">slot</a>
               <a id="5688" class="Symbol">;</a> <a id="5690" href="Leios.Protocol.html#1934" class="Field">Upkeep</a> <a id="5697" class="Symbol">=</a> <a id="5699" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>
               <a id="5717" class="Symbol">}</a>

  <a id="_-⟦_/_⟧⇀_.Slot₂"></a><a id="5722" href="Leios.Linear.html#5722" class="InductiveConstructor">Slot₂</a> <a id="5728" class="Symbol">:</a> <a id="5730" class="Keyword">let</a> <a id="5734" class="Keyword">open</a> <a id="5739" href="Leios.Protocol.html#1542" class="Module">LeiosState</a> <a id="5750" href="Leios.Linear.html#1758" class="Generalizable">s</a> <a id="5752" class="Keyword">in</a>
        <a id="5763" href="Prelude.InferenceRules.html#41140" class="Function Operator">───────────────────────────────────────────────────────────────────</a>
        <a id="5839" href="Leios.Linear.html#1758" class="Generalizable">s</a> <a id="5841" href="Leios.Linear.html#5259" class="Datatype Operator">-⟦</a> <a id="5844" class="Symbol">(</a><a id="5845" href="CategoricalCrypto.Channel.Selection.html#834" class="InductiveConstructor Operator">L⊗</a> <a id="5848" href="CategoricalCrypto.Channel.Selection.html#734" class="InductiveConstructor">ϵ</a><a id="5849" class="Symbol">)</a> <a id="5851" href="CategoricalCrypto.Channel.Selection.html#767" class="InductiveConstructor Operator">⊗R</a> <a id="5854" href="CategoricalCrypto.Channel.Selection.html#1281" class="Function Operator">↑ᵢ</a> <a id="5857" href="Leios.Base.html#2918" class="InductiveConstructor">BASE-LDG</a> <a id="5866" href="Leios.Linear.html#2133" class="Generalizable">rbs</a> <a id="5870" href="Leios.Linear.html#5259" class="Datatype Operator">/</a> <a id="5872" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="5880" href="Leios.Linear.html#5259" class="Datatype Operator">⟧⇀</a> <a id="5883" class="Keyword">record</a> <a id="5890" href="Leios.Linear.html#1758" class="Generalizable">s</a> <a id="5892" class="Symbol">{</a> <a id="5894" href="Leios.Protocol.html#1635" class="Field">RBs</a> <a id="5898" class="Symbol">=</a> <a id="5900" href="Leios.Linear.html#2133" class="Generalizable">rbs</a> <a id="5904" class="Symbol">}</a>
</pre><pre class="Agda">  <a id="_-⟦_/_⟧⇀_.Ftch"></a><a id="5920" href="Leios.Linear.html#5920" class="InductiveConstructor">Ftch</a> <a id="5925" class="Symbol">:</a> <a id="5927" class="Keyword">let</a> <a id="5931" class="Keyword">open</a> <a id="5936" href="Leios.Protocol.html#1542" class="Module">LeiosState</a> <a id="5947" href="Leios.Linear.html#1758" class="Generalizable">s</a> <a id="5949" class="Keyword">in</a>
       <a id="5959" href="Prelude.InferenceRules.html#40204" class="Function Operator">───────────────────────────────────────────────────────────────────────────</a>
       <a id="6042" href="Leios.Linear.html#1758" class="Generalizable">s</a> <a id="6044" href="Leios.Linear.html#5259" class="Datatype Operator">-⟦</a> <a id="6047" href="CategoricalCrypto.Channel.Selection.html#834" class="InductiveConstructor Operator">L⊗</a> <a id="6050" class="Symbol">(</a><a id="6051" href="CategoricalCrypto.Channel.Selection.html#734" class="InductiveConstructor">ϵ</a> <a id="6053" href="CategoricalCrypto.Channel.Selection.html#767" class="InductiveConstructor Operator">⊗R</a><a id="6055" class="Symbol">)</a> <a id="6057" href="CategoricalCrypto.Channel.Selection.html#901" class="InductiveConstructor Operator">ᵗ¹</a> <a id="6060" href="CategoricalCrypto.Channel.Selection.html#1378" class="Function Operator">↑ₒ</a> <a id="6063" href="Leios.Protocol.html#7948" class="InductiveConstructor">FetchLdgI</a> <a id="6073" href="Leios.Linear.html#5259" class="Datatype Operator">/</a> <a id="6075" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="6080" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="6082" href="CategoricalCrypto.Channel.Selection.html#834" class="InductiveConstructor Operator">L⊗</a> <a id="6085" class="Symbol">(</a><a id="6086" href="CategoricalCrypto.Channel.Selection.html#734" class="InductiveConstructor">ϵ</a> <a id="6088" href="CategoricalCrypto.Channel.Selection.html#767" class="InductiveConstructor Operator">⊗R</a><a id="6090" class="Symbol">)</a> <a id="6092" href="CategoricalCrypto.Channel.Selection.html#901" class="InductiveConstructor Operator">ᵗ¹</a> <a id="6095" href="CategoricalCrypto.Channel.Selection.html#1281" class="Function Operator">↑ᵢ</a> <a id="6098" href="Leios.Protocol.html#7971" class="InductiveConstructor">FetchLdgO</a> <a id="6108" href="Leios.Protocol.html#2780" class="Function">Ledger</a> <a id="6115" href="Leios.Linear.html#5259" class="Datatype Operator">⟧⇀</a> <a id="6118" href="Leios.Linear.html#1758" class="Generalizable">s</a>
</pre>#### Base chain

Note: Submitted data to the base chain is only taken into account
      if the party submitting is the block producer on the base chain
      for the given slot
<pre class="Agda">  <a id="_-⟦_/_⟧⇀_.Base₁"></a><a id="6312" href="Leios.Linear.html#6312" class="InductiveConstructor">Base₁</a>   <a id="6320" class="Symbol">:</a>
          <a id="6332" href="Prelude.InferenceRules.html#40204" class="Function Operator">───────────────────────────────────────────────────────────────────────────</a>
          <a id="6418" href="Leios.Linear.html#1758" class="Generalizable">s</a> <a id="6420" href="Leios.Linear.html#5259" class="Datatype Operator">-⟦</a> <a id="6423" href="CategoricalCrypto.Channel.Selection.html#834" class="InductiveConstructor Operator">L⊗</a> <a id="6426" class="Symbol">(</a><a id="6427" href="CategoricalCrypto.Channel.Selection.html#734" class="InductiveConstructor">ϵ</a> <a id="6429" href="CategoricalCrypto.Channel.Selection.html#901" class="InductiveConstructor Operator">ᵗ¹</a> <a id="6432" href="CategoricalCrypto.Channel.Selection.html#767" class="InductiveConstructor Operator">⊗R</a><a id="6434" class="Symbol">)</a> <a id="6436" href="CategoricalCrypto.Channel.Selection.html#901" class="InductiveConstructor Operator">ᵗ¹</a> <a id="6439" href="CategoricalCrypto.Channel.Selection.html#1281" class="Function Operator">↑ᵢ</a> <a id="6442" href="Leios.Protocol.html#7915" class="InductiveConstructor">SubmitTxs</a> <a id="6452" href="Leios.Linear.html#2177" class="Generalizable">txs</a> <a id="6456" href="Leios.Linear.html#5259" class="Datatype Operator">/</a> <a id="6458" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="6466" href="Leios.Linear.html#5259" class="Datatype Operator">⟧⇀</a> <a id="6469" class="Keyword">record</a> <a id="6476" href="Leios.Linear.html#1758" class="Generalizable">s</a> <a id="6478" class="Symbol">{</a> <a id="6480" href="Leios.Protocol.html#1676" class="Field">ToPropose</a> <a id="6490" class="Symbol">=</a> <a id="6492" href="Leios.Linear.html#2177" class="Generalizable">txs</a> <a id="6496" class="Symbol">}</a>

  <a id="_-⟦_/_⟧⇀_.Base₂"></a><a id="6501" href="Leios.Linear.html#6501" class="InductiveConstructor">Base₂</a>   <a id="6509" class="Symbol">:</a> <a id="6511" class="Keyword">let</a> <a id="6515" class="Keyword">open</a> <a id="6520" href="Leios.Protocol.html#1542" class="Module">LeiosState</a> <a id="6531" href="Leios.Linear.html#1758" class="Generalizable">s</a>
                <a id="6549" href="Leios.Linear.html#6549" class="Bound">currentCertEB</a> <a id="6563" class="Symbol">=</a> <a id="6565" href="Data.List.Base.html#13327" class="Function">find</a> <a id="6570" class="Symbol">(λ</a> <a id="6573" class="Symbol">(</a><a id="6574" href="Leios.Linear.html#6574" class="Bound">eb</a> <a id="6577" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6579" class="Symbol">_)</a> <a id="6582" class="Symbol">→</a>
                  <a id="6602" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a> <a id="6604" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="6609" class="Symbol">(</a><a id="6610" href="Class.Hashable.html#167" class="Field">hash</a> <a id="6615" href="Leios.Linear.html#6574" class="Bound">eb</a><a id="6617" class="Symbol">)</a> <a id="6619" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="6621" href="Leios.Linear.html#3019" class="Function">getCurrentEBHash</a> <a id="6638" href="Leios.Linear.html#1758" class="Generalizable">s</a>
                  <a id="6658" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="6660" href="Leios.Blocks.html#629" class="Field">slotNumber</a> <a id="6671" href="Leios.Linear.html#6574" class="Bound">eb</a> <a id="6674" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="6676" class="Number">3</a> <a id="6678" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="6680" href="Leios.Linear.html#461" class="Bound">Lhdr</a> <a id="6685" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="6687" href="Leios.Linear.html#466" class="Bound">Lvote</a> <a id="6693" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="6695" href="Leios.Linear.html#472" class="Bound">Ldiff</a> <a id="6701" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="6703" href="Leios.Protocol.html#1909" class="Function">slot</a> <a id="6708" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a><a id="6709" class="Symbol">)</a> <a id="6711" href="Leios.Protocol.html#3349" class="Function">ebsWithCert</a>
                <a id="6739" href="Leios.Linear.html#6739" class="Bound">rb</a> <a id="6742" class="Symbol">=</a> <a id="6744" class="Keyword">record</a>
                       <a id="6774" class="Symbol">{</a> <a id="6776" href="Leios.Base.html#619" class="Field">txs</a> <a id="6780" class="Symbol">=</a> <a id="6782" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="6788" class="Symbol">(</a><a id="6789" href="Leios.Linear.html#486" class="Bound">splitTxs</a> <a id="6798" href="Leios.Protocol.html#1676" class="Function">ToPropose</a><a id="6807" class="Symbol">)</a>
                       <a id="6832" class="Symbol">;</a> <a id="6834" href="Leios.Base.html#641" class="Field">announcedEB</a> <a id="6846" class="Symbol">=</a> <a id="6848" href="Class.Hashable.html#167" class="Field">hash</a> <a id="6853" href="Class.Functor.Core.html#242" class="Field Operator">&lt;$&gt;</a> <a id="6857" href="Leios.Linear.html#2818" class="Function">toProposeEB</a> <a id="6869" href="Leios.Linear.html#1758" class="Generalizable">s</a> <a id="6871" href="Leios.Linear.html#1831" class="Generalizable">π</a>
                       <a id="6896" class="Symbol">;</a> <a id="6898" href="Leios.Base.html#674" class="Field">ebCert</a> <a id="6905" class="Symbol">=</a> <a id="6907" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="6913" href="Class.Functor.Core.html#242" class="Field Operator">&lt;$&gt;</a> <a id="6917" href="Leios.Linear.html#6549" class="Bound">currentCertEB</a> <a id="6931" class="Symbol">}</a>
          <a id="6943" class="Keyword">in</a>
          <a id="6956" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="6958" href="Leios.Protocol.html#3018" class="Function">needsUpkeep</a> <a id="6970" href="Leios.Linear.html#1447" class="InductiveConstructor">Base</a>
          <a id="6985" href="Prelude.InferenceRules.html#11157" class="Function Operator">───────────────────────────────────────────────────────────────────────────</a>
          <a id="7071" href="Leios.Linear.html#1758" class="Generalizable">s</a> <a id="7073" href="Leios.Linear.html#5259" class="Datatype Operator">-⟦</a> <a id="7076" class="Symbol">(</a><a id="7077" href="CategoricalCrypto.Channel.Selection.html#734" class="InductiveConstructor">ϵ</a> <a id="7079" href="CategoricalCrypto.Channel.Selection.html#767" class="InductiveConstructor Operator">⊗R</a><a id="7081" class="Symbol">)</a> <a id="7083" href="CategoricalCrypto.Channel.Selection.html#767" class="InductiveConstructor Operator">⊗R</a> <a id="7086" href="CategoricalCrypto.Channel.Selection.html#1281" class="Function Operator">↑ᵢ</a> <a id="7089" href="Leios.Protocol.html#8253" class="InductiveConstructor">SLOT</a> <a id="7094" href="Leios.Linear.html#5259" class="Datatype Operator">/</a> <a id="7096" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="7101" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="7103" class="Symbol">(</a><a id="7104" href="CategoricalCrypto.Channel.Selection.html#834" class="InductiveConstructor Operator">L⊗</a> <a id="7107" href="CategoricalCrypto.Channel.Selection.html#734" class="InductiveConstructor">ϵ</a><a id="7108" class="Symbol">)</a> <a id="7110" href="CategoricalCrypto.Channel.Selection.html#767" class="InductiveConstructor Operator">⊗R</a> <a id="7113" href="CategoricalCrypto.Channel.Selection.html#1378" class="Function Operator">↑ₒ</a> <a id="7116" href="Leios.Base.html#1782" class="InductiveConstructor">SUBMIT</a> <a id="7123" href="Leios.Linear.html#6739" class="Bound">rb</a> <a id="7126" href="Leios.Linear.html#5259" class="Datatype Operator">⟧⇀</a> <a id="7129" href="Leios.Protocol.html#3642" class="Function">addUpkeep</a> <a id="7139" href="Leios.Linear.html#1758" class="Generalizable">s</a> <a id="7141" href="Leios.Linear.html#1447" class="InductiveConstructor">Base</a>
</pre>#### Protocol rules
<pre class="Agda">  <a id="_-⟦_/_⟧⇀_.Roles₁"></a><a id="7180" href="Leios.Linear.html#7180" class="InductiveConstructor">Roles₁</a> <a id="7187" class="Symbol">:</a>
         <a id="7198" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="7200" href="Leios.Linear.html#1758" class="Generalizable">s</a> <a id="7202" href="Leios.Linear.html#3419" class="Datatype Operator">↝</a> <a id="7204" class="Symbol">(</a><a id="7205" href="Leios.Linear.html#1760" class="Generalizable">s&#39;</a> <a id="7208" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7210" href="Leios.Linear.html#1992" class="Generalizable">i</a><a id="7211" class="Symbol">)</a>
         <a id="7222" href="Prelude.InferenceRules.html#12252" class="Function Operator">────────────────────────────────────────────────────────────</a>
         <a id="7292" href="Leios.Linear.html#1758" class="Generalizable">s</a> <a id="7294" href="Leios.Linear.html#5259" class="Datatype Operator">-⟦</a> <a id="7297" class="Symbol">(</a><a id="7298" href="CategoricalCrypto.Channel.Selection.html#734" class="InductiveConstructor">ϵ</a> <a id="7300" href="CategoricalCrypto.Channel.Selection.html#767" class="InductiveConstructor Operator">⊗R</a><a id="7302" class="Symbol">)</a> <a id="7304" href="CategoricalCrypto.Channel.Selection.html#767" class="InductiveConstructor Operator">⊗R</a> <a id="7307" href="CategoricalCrypto.Channel.Selection.html#1281" class="Function Operator">↑ᵢ</a> <a id="7310" href="Leios.Protocol.html#8253" class="InductiveConstructor">SLOT</a> <a id="7315" href="Leios.Linear.html#5259" class="Datatype Operator">/</a> <a id="7317" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="7322" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="7324" class="Symbol">(</a><a id="7325" href="CategoricalCrypto.Channel.Selection.html#734" class="InductiveConstructor">ϵ</a> <a id="7327" href="CategoricalCrypto.Channel.Selection.html#767" class="InductiveConstructor Operator">⊗R</a><a id="7329" class="Symbol">)</a> <a id="7331" href="CategoricalCrypto.Channel.Selection.html#767" class="InductiveConstructor Operator">⊗R</a> <a id="7334" href="CategoricalCrypto.Channel.Selection.html#1378" class="Function Operator">↑ₒ</a> <a id="7337" href="Leios.Protocol.html#8218" class="InductiveConstructor">FFD-IN</a> <a id="7344" href="Leios.Linear.html#1992" class="Generalizable">i</a> <a id="7346" href="Leios.Linear.html#5259" class="Datatype Operator">⟧⇀</a> <a id="7349" href="Leios.Linear.html#1760" class="Generalizable">s&#39;</a>

  <a id="_-⟦_/_⟧⇀_.Roles₂"></a><a id="7355" href="Leios.Linear.html#7355" class="InductiveConstructor">Roles₂</a> <a id="7362" class="Symbol">:</a> <a id="7364" class="Symbol">∀</a> <a id="7366" class="Symbol">{</a><a id="7367" href="Leios.Linear.html#7367" class="Bound">u</a><a id="7368" class="Symbol">}</a> <a id="7370" class="Symbol">→</a> <a id="7372" class="Keyword">let</a> <a id="7376" class="Keyword">open</a> <a id="7381" href="Leios.Protocol.html#1542" class="Module">LeiosState</a> <a id="7392" class="Keyword">in</a>
         <a id="7404" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="7406" href="Relation.Nullary.Negation.Core.html#677" class="Function Operator">¬</a> <a id="7408" class="Symbol">(</a><a id="7409" href="Data.Product.Base.html#1371" class="Function">∃[</a> <a id="7412" href="Leios.Linear.html#7412" class="Bound">s&#39;×i</a> <a id="7417" href="Data.Product.Base.html#1371" class="Function">]</a> <a id="7419" class="Symbol">(</a><a id="7420" href="Leios.Linear.html#1758" class="Generalizable">s</a> <a id="7422" href="Leios.Linear.html#3419" class="Datatype Operator">↝</a> <a id="7424" href="Leios.Linear.html#7412" class="Bound">s&#39;×i</a> <a id="7429" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="7431" href="Leios.Protocol.html#1934" class="Field">Upkeep</a> <a id="7438" class="Symbol">(</a><a id="7439" href="Leios.Protocol.html#3642" class="Function">addUpkeep</a> <a id="7449" href="Leios.Linear.html#1758" class="Generalizable">s</a> <a id="7451" href="Leios.Linear.html#7367" class="Bound">u</a><a id="7452" class="Symbol">)</a> <a id="7454" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="7456" href="Leios.Protocol.html#1934" class="Field">Upkeep</a> <a id="7463" class="Symbol">(</a><a id="7464" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="7470" href="Leios.Linear.html#7412" class="Bound">s&#39;×i</a><a id="7474" class="Symbol">)))</a>
         <a id="7487" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="7489" href="Leios.Protocol.html#3018" class="Function">needsUpkeep</a> <a id="7501" href="Leios.Linear.html#1758" class="Generalizable">s</a> <a id="7503" href="Leios.Linear.html#7367" class="Bound">u</a>
         <a id="7514" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="7516" href="Leios.Linear.html#7367" class="Bound">u</a> <a id="7518" href="Relation.Binary.PropositionalEquality.Core.html#1000" class="Function Operator">≢</a> <a id="7520" href="Leios.Linear.html#1447" class="InductiveConstructor">Base</a>
         <a id="7534" href="Prelude.InferenceRules.html#12857" class="Function Operator">──────────────────────────────────────────────────</a>
         <a id="7594" href="Leios.Linear.html#1758" class="Generalizable">s</a> <a id="7596" href="Leios.Linear.html#5259" class="Datatype Operator">-⟦</a> <a id="7599" class="Symbol">(</a><a id="7600" href="CategoricalCrypto.Channel.Selection.html#734" class="InductiveConstructor">ϵ</a> <a id="7602" href="CategoricalCrypto.Channel.Selection.html#767" class="InductiveConstructor Operator">⊗R</a><a id="7604" class="Symbol">)</a> <a id="7606" href="CategoricalCrypto.Channel.Selection.html#767" class="InductiveConstructor Operator">⊗R</a> <a id="7609" href="CategoricalCrypto.Channel.Selection.html#1281" class="Function Operator">↑ᵢ</a> <a id="7612" href="Leios.Protocol.html#8253" class="InductiveConstructor">SLOT</a> <a id="7617" href="Leios.Linear.html#5259" class="Datatype Operator">/</a> <a id="7619" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="7627" href="Leios.Linear.html#5259" class="Datatype Operator">⟧⇀</a> <a id="7630" href="Leios.Protocol.html#3642" class="Function">addUpkeep</a> <a id="7640" href="Leios.Linear.html#1758" class="Generalizable">s</a> <a id="7642" href="Leios.Linear.html#7367" class="Bound">u</a>
</pre><!--
<pre class="Agda"><a id="LinearLeios"></a><a id="7661" href="Leios.Linear.html#7661" class="Function">LinearLeios</a> <a id="7673" class="Symbol">:</a> <a id="7675" href="CategoricalCrypto.Machine.Core.html#875" class="Record">Machine</a> <a id="7683" class="Symbol">(</a><a id="7684" href="Leios.Protocol.html#8298" class="Function">FFD</a> <a id="7688" href="CategoricalCrypto.Channel.Core.html#3393" class="Function Operator">⊗</a> <a id="7690" href="Leios.Base.html#2974" class="Function">BaseIO</a><a id="7696" class="Symbol">)</a> <a id="7698" class="Symbol">(</a><a id="7699" href="Leios.Protocol.html#8017" class="Function">IO</a> <a id="7702" href="CategoricalCrypto.Channel.Core.html#3393" class="Function Operator">⊗</a> <a id="7704" href="Leios.Protocol.html#8060" class="Function">Adv</a><a id="7707" class="Symbol">)</a>
<a id="7709" href="Leios.Linear.html#7661" class="Function">LinearLeios</a> <a id="7721" class="Symbol">.</a><a id="7722" href="CategoricalCrypto.Machine.Core.html#979" class="Field">Machine.State</a> <a id="7736" class="Symbol">=</a> <a id="7738" href="Leios.Protocol.html#1542" class="Record">LeiosState</a>
<a id="7749" href="Leios.Linear.html#7661" class="Function">LinearLeios</a> <a id="7761" class="Symbol">.</a><a id="7762" href="CategoricalCrypto.Machine.Core.html#997" class="Field">Machine.stepRel</a> <a id="7778" class="Symbol">=</a> <a id="7780" href="Leios.Linear.html#5259" class="Datatype Operator">_-⟦_/_⟧⇀_</a>

<a id="7791" class="Keyword">open</a> <a id="7796" class="Keyword">import</a> <a id="7803" href="Prelude.STS.GenPremises.html" class="Module">Prelude.STS.GenPremises</a>

<a id="7828" class="Keyword">instance</a>
  <a id="Dec-isValid"></a><a id="7839" href="Leios.Linear.html#7839" class="Function">Dec-isValid</a> <a id="7851" class="Symbol">:</a> <a id="7853" class="Symbol">∀</a> <a id="7855" class="Symbol">{</a><a id="7856" href="Leios.Linear.html#7856" class="Bound">s</a> <a id="7858" href="Leios.Linear.html#7858" class="Bound">x</a><a id="7859" class="Symbol">}</a> <a id="7861" class="Symbol">→</a> <a id="7863" href="Leios.Protocol.html#6161" class="Function">isValid</a> <a id="7871" href="Leios.Linear.html#7856" class="Bound">s</a> <a id="7873" href="Leios.Linear.html#7858" class="Bound">x</a> <a id="7875" href="Class.Decidable.Core.html#217" class="Record Operator">⁇</a>
  <a id="7879" href="Leios.Linear.html#7839" class="Function">Dec-isValid</a> <a id="7891" class="Symbol">{</a><a id="7892" href="Leios.Linear.html#7892" class="Bound">s</a><a id="7893" class="Symbol">}</a> <a id="7895" class="Symbol">{</a><a id="7896" href="Leios.Linear.html#7896" class="Bound">x</a><a id="7897" class="Symbol">}</a> <a id="7899" class="Symbol">=</a> <a id="7901" href="Class.Decidable.Core.html#262" class="InductiveConstructor Operator">⁇</a> <a id="7903" href="Leios.Protocol.html#6269" class="Function">isValid?</a> <a id="7912" href="Leios.Linear.html#7892" class="Bound">s</a> <a id="7914" href="Leios.Linear.html#7896" class="Bound">x</a>

<a id="7917" class="Keyword">unquoteDecl</a> <a id="EB-Role-premises"></a><a id="7929" href="Leios.Linear.html#7929" class="Function">EB-Role-premises</a> <a id="7946" class="Symbol">=</a> <a id="7948" href="Prelude.STS.GenPremises.html#13070" class="Function">genPremises</a> <a id="7960" href="Leios.Linear.html#7929" class="Function">EB-Role-premises</a> <a id="7977" class="Symbol">(</a><a id="7978" class="Keyword">quote</a> <a id="7984" href="Leios.Linear.html#3812" class="InductiveConstructor">_↝_.EB-Role</a><a id="7995" class="Symbol">)</a>
<a id="7997" class="Keyword">unquoteDecl</a> <a id="VT-Role-premises"></a><a id="8009" href="Leios.Linear.html#8009" class="Function">VT-Role-premises</a> <a id="8026" class="Symbol">=</a> <a id="8028" href="Prelude.STS.GenPremises.html#13070" class="Function">genPremises</a> <a id="8040" href="Leios.Linear.html#8009" class="Function">VT-Role-premises</a> <a id="8057" class="Symbol">(</a><a id="8058" class="Keyword">quote</a> <a id="8064" href="Leios.Linear.html#4078" class="InductiveConstructor">_↝_.VT-Role</a><a id="8075" class="Symbol">)</a>

<a id="8078" class="Keyword">unquoteDecl</a> <a id="Slot₁-premises"></a><a id="8090" href="Leios.Linear.html#8090" class="Function">Slot₁-premises</a> <a id="8105" class="Symbol">=</a> <a id="8107" href="Prelude.STS.GenPremises.html#13070" class="Function">genPremises</a> <a id="8119" href="Leios.Linear.html#8090" class="Function">Slot₁-premises</a> <a id="8134" class="Symbol">(</a><a id="8135" class="Keyword">quote</a> <a id="8141" href="Leios.Linear.html#5364" class="InductiveConstructor">Slot₁</a><a id="8146" class="Symbol">)</a>
<a id="8148" class="Keyword">unquoteDecl</a> <a id="Slot₂-premises"></a><a id="8160" href="Leios.Linear.html#8160" class="Function">Slot₂-premises</a> <a id="8175" class="Symbol">=</a> <a id="8177" href="Prelude.STS.GenPremises.html#13070" class="Function">genPremises</a> <a id="8189" href="Leios.Linear.html#8160" class="Function">Slot₂-premises</a> <a id="8204" class="Symbol">(</a><a id="8205" class="Keyword">quote</a> <a id="8211" href="Leios.Linear.html#5722" class="InductiveConstructor">Slot₂</a><a id="8216" class="Symbol">)</a>
<a id="8218" class="Keyword">unquoteDecl</a> <a id="Base₁-premises"></a><a id="8230" href="Leios.Linear.html#8230" class="Function">Base₁-premises</a> <a id="8245" class="Symbol">=</a> <a id="8247" href="Prelude.STS.GenPremises.html#13070" class="Function">genPremises</a> <a id="8259" href="Leios.Linear.html#8230" class="Function">Base₁-premises</a> <a id="8274" class="Symbol">(</a><a id="8275" class="Keyword">quote</a> <a id="8281" href="Leios.Linear.html#6312" class="InductiveConstructor">Base₁</a><a id="8286" class="Symbol">)</a>
<a id="8288" class="Keyword">unquoteDecl</a> <a id="Base₂-premises"></a><a id="8300" href="Leios.Linear.html#8300" class="Function">Base₂-premises</a> <a id="8315" class="Symbol">=</a> <a id="8317" href="Prelude.STS.GenPremises.html#13070" class="Function">genPremises</a> <a id="8329" href="Leios.Linear.html#8300" class="Function">Base₂-premises</a> <a id="8344" class="Symbol">(</a><a id="8345" class="Keyword">quote</a> <a id="8351" href="Leios.Linear.html#6501" class="InductiveConstructor">Base₂</a><a id="8356" class="Symbol">)</a>

<a id="just≢nothing"></a><a id="8359" href="Leios.Linear.html#8359" class="Function">just≢nothing</a> <a id="8372" class="Symbol">:</a> <a id="8374" class="Symbol">∀</a> <a id="8376" class="Symbol">{</a><a id="8377" href="Leios.Linear.html#8377" class="Bound">ℓ</a><a id="8378" class="Symbol">}</a> <a id="8380" class="Symbol">{</a><a id="8381" href="Leios.Linear.html#8381" class="Bound">A</a> <a id="8383" class="Symbol">:</a> <a id="8385" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="8390" href="Leios.Linear.html#8377" class="Bound">ℓ</a><a id="8391" class="Symbol">}</a> <a id="8393" class="Symbol">{</a><a id="8394" href="Leios.Linear.html#8394" class="Bound">x</a><a id="8395" class="Symbol">}</a> <a id="8397" class="Symbol">→</a> <a id="8399" class="Symbol">(</a><a id="8400" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="8406" href="Leios.Linear.html#8381" class="Bound">A</a> <a id="8408" href="Function.Base.html#4505" class="Function Operator">∋</a> <a id="8410" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8415" href="Leios.Linear.html#8394" class="Bound">x</a><a id="8416" class="Symbol">)</a> <a id="8418" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="8420" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="8428" class="Symbol">→</a> <a id="8430" href="Data.Empty.html#914" class="Function">⊥</a>
<a id="8432" href="Leios.Linear.html#8359" class="Function">just≢nothing</a> <a id="8445" class="Symbol">=</a> <a id="8447" class="Symbol">λ</a> <a id="8449" class="Symbol">()</a>

<a id="nothing≢just"></a><a id="8453" href="Leios.Linear.html#8453" class="Function">nothing≢just</a> <a id="8466" class="Symbol">:</a> <a id="8468" class="Symbol">∀</a> <a id="8470" class="Symbol">{</a><a id="8471" href="Leios.Linear.html#8471" class="Bound">ℓ</a><a id="8472" class="Symbol">}</a> <a id="8474" class="Symbol">{</a><a id="8475" href="Leios.Linear.html#8475" class="Bound">A</a> <a id="8477" class="Symbol">:</a> <a id="8479" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="8484" href="Leios.Linear.html#8471" class="Bound">ℓ</a><a id="8485" class="Symbol">}</a> <a id="8487" class="Symbol">{</a><a id="8488" href="Leios.Linear.html#8488" class="Bound">x</a><a id="8489" class="Symbol">}</a> <a id="8491" class="Symbol">→</a> <a id="8493" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="8501" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="8503" class="Symbol">(</a><a id="8504" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="8510" href="Leios.Linear.html#8475" class="Bound">A</a> <a id="8512" href="Function.Base.html#4505" class="Function Operator">∋</a> <a id="8514" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8519" href="Leios.Linear.html#8488" class="Bound">x</a><a id="8520" class="Symbol">)</a> <a id="8522" class="Symbol">→</a> <a id="8524" href="Data.Empty.html#914" class="Function">⊥</a>
<a id="8526" href="Leios.Linear.html#8453" class="Function">nothing≢just</a> <a id="8539" class="Symbol">=</a> <a id="8541" class="Symbol">λ</a> <a id="8543" class="Symbol">()</a>

<a id="8547" class="Keyword">open</a> <a id="8552" class="Keyword">import</a> <a id="8559" href="Data.List.Properties.html" class="Module">Data.List.Properties</a>
<a id="8580" class="Keyword">open</a> <a id="8585" class="Keyword">import</a> <a id="8592" href="Data.Maybe.Properties.html" class="Module">Data.Maybe.Properties</a>
<a id="8614" class="Keyword">open</a> <a id="8619" class="Keyword">import</a> <a id="8626" href="Data.Product.Properties.html" class="Module">Data.Product.Properties</a>

<a id="P"></a><a id="8651" href="Leios.Linear.html#8651" class="Function">P</a> <a id="8653" class="Symbol">:</a> <a id="8655" href="Leios.Blocks.html#1007" class="Function">EBRef</a> <a id="8661" class="Symbol">→</a> <a id="8663" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="8665" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="8667" href="Leios.Blocks.html#1236" class="Function">EndorserBlock</a> <a id="8681" class="Symbol">→</a> <a id="8683" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="8688" href="Leios.Linear.html#8651" class="Function">P</a> <a id="8690" href="Leios.Linear.html#8690" class="Bound">h</a> <a id="8692" class="Symbol">(_</a> <a id="8695" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8697" href="Leios.Linear.html#8697" class="Bound">eb</a><a id="8699" class="Symbol">)</a> <a id="8701" class="Symbol">=</a> <a id="8703" href="Class.Hashable.html#167" class="Field">hash</a> <a id="8708" href="Leios.Linear.html#8697" class="Bound">eb</a> <a id="8711" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="8713" href="Leios.Linear.html#8690" class="Bound">h</a>

<a id="P?"></a><a id="8716" href="Leios.Linear.html#8716" class="Function">P?</a> <a id="8719" class="Symbol">:</a> <a id="8721" class="Symbol">(</a><a id="8722" href="Leios.Linear.html#8722" class="Bound">h</a> <a id="8724" class="Symbol">:</a> <a id="8726" href="Leios.Blocks.html#1007" class="Function">EBRef</a><a id="8731" class="Symbol">)</a> <a id="8733" class="Symbol">→</a> <a id="8735" class="Symbol">(</a><a id="8736" href="Leios.Linear.html#8736" class="Bound">(</a><a id="8737" href="Leios.Linear.html#8737" class="Bound">s</a> <a id="8739" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8741" href="Leios.Linear.html#8741" class="Bound">eb</a><a id="8743" href="Leios.Linear.html#8736" class="Bound">)</a> <a id="8745" class="Symbol">:</a> <a id="8747" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="8749" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="8751" href="Leios.Blocks.html#1236" class="Function">EndorserBlock</a><a id="8764" class="Symbol">)</a> <a id="8766" class="Symbol">→</a> <a id="8768" href="Relation.Nullary.Decidable.Core.html#1966" class="Record">Dec</a> <a id="8772" class="Symbol">(</a><a id="8773" href="Leios.Linear.html#8651" class="Function">P</a> <a id="8775" href="Leios.Linear.html#8722" class="Bound">h</a> <a id="8777" class="Symbol">(</a><a id="8778" href="Leios.Linear.html#8737" class="Bound">s</a> <a id="8780" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8782" href="Leios.Linear.html#8741" class="Bound">eb</a><a id="8784" class="Symbol">))</a>
<a id="8787" href="Leios.Linear.html#8716" class="Function">P?</a> <a id="8790" href="Leios.Linear.html#8790" class="Bound">h</a> <a id="8792" class="Symbol">(_</a> <a id="8795" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8797" href="Leios.Linear.html#8797" class="Bound">eb</a><a id="8799" class="Symbol">)</a> <a id="8801" class="Symbol">=</a> <a id="8803" href="Class.Hashable.html#167" class="Field">hash</a> <a id="8808" href="Leios.Linear.html#8797" class="Bound">eb</a> <a id="8811" href="Class.DecEq.Core.html#168" class="Field Operator">≟</a> <a id="8813" href="Leios.Linear.html#8790" class="Bound">h</a>

<a id="not-found"></a><a id="8816" href="Leios.Linear.html#8816" class="Function">not-found</a> <a id="8826" class="Symbol">:</a> <a id="8828" href="Leios.Protocol.html#1542" class="Record">LeiosState</a> <a id="8839" class="Symbol">→</a> <a id="8841" href="Leios.Blocks.html#1007" class="Function">EBRef</a> <a id="8847" class="Symbol">→</a> <a id="8849" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="8854" href="Leios.Linear.html#8816" class="Function">not-found</a> <a id="8864" href="Leios.Linear.html#8864" class="Bound">s</a> <a id="8866" href="Leios.Linear.html#8866" class="Bound">k</a> <a id="8868" class="Symbol">=</a> <a id="8870" href="Data.List.Base.html#13327" class="Function">find</a> <a id="8875" class="Symbol">(</a><a id="8876" href="Leios.Linear.html#8716" class="Function">P?</a> <a id="8879" href="Leios.Linear.html#8866" class="Bound">k</a><a id="8880" class="Symbol">)</a> <a id="8882" class="Symbol">(</a><a id="8883" href="Leios.Protocol.html#1788" class="Field">LeiosState.EBs&#39;</a> <a id="8899" href="Leios.Linear.html#8864" class="Bound">s</a><a id="8900" class="Symbol">)</a> <a id="8902" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="8904" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>

<a id="subst&#39;"></a><a id="8913" href="Leios.Linear.html#8913" class="Function">subst&#39;</a> <a id="8920" class="Symbol">:</a> <a id="8922" class="Symbol">∀</a> <a id="8924" class="Symbol">{</a><a id="8925" href="Leios.Linear.html#8925" class="Bound">s</a> <a id="8927" href="Leios.Linear.html#8927" class="Bound">ebHash</a> <a id="8934" href="Leios.Linear.html#8934" class="Bound">ebHash₁</a> <a id="8942" href="Leios.Linear.html#8942" class="Bound">slot&#39;</a> <a id="8948" href="Leios.Linear.html#8948" class="Bound">slot&#39;&#39;</a> <a id="8955" href="Leios.Linear.html#8955" class="Bound">eb</a> <a id="8958" href="Leios.Linear.html#8958" class="Bound">eb₁</a><a id="8961" class="Symbol">}</a>
  <a id="8965" class="Symbol">→</a> <a id="8967" href="Leios.Linear.html#3019" class="Function">getCurrentEBHash</a> <a id="8984" href="Leios.Linear.html#8925" class="Bound">s</a> <a id="8986" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="8988" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8993" href="Leios.Linear.html#8934" class="Bound">ebHash₁</a>
  <a id="9003" class="Symbol">→</a> <a id="9005" href="Data.List.Base.html#13327" class="Function">find</a> <a id="9010" class="Symbol">(λ</a> <a id="9013" class="Symbol">(_</a> <a id="9016" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9018" href="Leios.Linear.html#9018" class="Bound">eb&#39;</a><a id="9021" class="Symbol">)</a> <a id="9023" class="Symbol">→</a> <a id="9025" href="Class.Hashable.html#167" class="Field">hash</a> <a id="9030" href="Leios.Linear.html#9018" class="Bound">eb&#39;</a> <a id="9034" href="Class.DecEq.Core.html#168" class="Field Operator">≟</a> <a id="9036" href="Leios.Linear.html#8934" class="Bound">ebHash₁</a><a id="9043" class="Symbol">)</a> <a id="9045" class="Symbol">(</a><a id="9046" href="Leios.Protocol.html#1788" class="Field">LeiosState.EBs&#39;</a> <a id="9062" href="Leios.Linear.html#8925" class="Bound">s</a><a id="9063" class="Symbol">)</a> <a id="9065" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="9067" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9072" class="Symbol">(</a><a id="9073" href="Leios.Linear.html#8948" class="Bound">slot&#39;&#39;</a> <a id="9080" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9082" href="Leios.Linear.html#8958" class="Bound">eb₁</a><a id="9085" class="Symbol">)</a>
  <a id="9089" class="Symbol">→</a> <a id="9091" href="Leios.Linear.html#3019" class="Function">getCurrentEBHash</a> <a id="9108" href="Leios.Linear.html#8925" class="Bound">s</a> <a id="9110" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="9112" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9117" href="Leios.Linear.html#8927" class="Bound">ebHash</a>
  <a id="9126" class="Symbol">→</a> <a id="9128" href="Data.List.Base.html#13327" class="Function">find</a> <a id="9133" class="Symbol">(λ</a> <a id="9136" class="Symbol">(_</a> <a id="9139" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9141" href="Leios.Linear.html#9141" class="Bound">eb&#39;</a><a id="9144" class="Symbol">)</a> <a id="9146" class="Symbol">→</a> <a id="9148" href="Class.Hashable.html#167" class="Field">hash</a> <a id="9153" href="Leios.Linear.html#9141" class="Bound">eb&#39;</a> <a id="9157" href="Class.DecEq.Core.html#168" class="Field Operator">≟</a> <a id="9159" href="Leios.Linear.html#8927" class="Bound">ebHash</a><a id="9165" class="Symbol">)</a> <a id="9167" class="Symbol">(</a><a id="9168" href="Leios.Protocol.html#1788" class="Field">LeiosState.EBs&#39;</a> <a id="9184" href="Leios.Linear.html#8925" class="Bound">s</a><a id="9185" class="Symbol">)</a> <a id="9187" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="9189" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9194" class="Symbol">(</a><a id="9195" href="Leios.Linear.html#8942" class="Bound">slot&#39;</a> <a id="9201" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9203" href="Leios.Linear.html#8955" class="Bound">eb</a><a id="9205" class="Symbol">)</a>
  <a id="9209" class="Symbol">→</a> <a id="9211" class="Symbol">(</a><a id="9212" href="Leios.Linear.html#8958" class="Bound">eb₁</a> <a id="9216" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9218" href="Leios.Linear.html#8934" class="Bound">ebHash₁</a> <a id="9226" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9228" href="Leios.Linear.html#8948" class="Bound">slot&#39;&#39;</a><a id="9234" class="Symbol">)</a> <a id="9236" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="9238" class="Symbol">(</a><a id="9239" href="Leios.Linear.html#8955" class="Bound">eb</a> <a id="9242" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9244" href="Leios.Linear.html#8927" class="Bound">ebHash</a> <a id="9251" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9253" href="Leios.Linear.html#8942" class="Bound">slot&#39;</a><a id="9258" class="Symbol">)</a>
<a id="9260" href="Leios.Linear.html#8913" class="Function">subst&#39;</a> <a id="9267" class="Symbol">{</a><a id="9268" href="Leios.Linear.html#9268" class="Bound">s</a><a id="9269" class="Symbol">}</a> <a id="9271" class="Symbol">{</a><a id="9272" class="Argument">ebHash</a> <a id="9279" class="Symbol">=</a> <a id="9281" href="Leios.Linear.html#9281" class="Bound">ebHash</a><a id="9287" class="Symbol">}</a> <a id="9289" class="Symbol">{</a><a id="9290" class="Argument">eb</a> <a id="9293" class="Symbol">=</a> <a id="9295" href="Leios.Linear.html#9295" class="Bound">eb</a><a id="9297" class="Symbol">}</a> <a id="9299" href="Leios.Linear.html#9299" class="Bound">eq₁₁</a> <a id="9304" href="Leios.Linear.html#9304" class="Bound">eq₁₂</a> <a id="9309" href="Leios.Linear.html#9309" class="Bound">eq₂₁</a> <a id="9314" href="Leios.Linear.html#9314" class="Bound">eq₂₂</a>
  <a id="9321" class="Keyword">with</a> <a id="9326" href="Leios.Linear.html#3019" class="Function">getCurrentEBHash</a> <a id="9343" href="Leios.Linear.html#9268" class="Bound">s</a> <a id="9345" class="Symbol">|</a> <a id="9347" href="Leios.Linear.html#9299" class="Bound">eq₁₁</a> <a id="9352" class="Symbol">|</a> <a id="9354" href="Leios.Linear.html#9309" class="Bound">eq₂₁</a>
<a id="9359" class="Symbol">...</a> <a id="9363" class="Symbol">|</a> <a id="9365" class="Symbol">_</a> <a id="9367" class="Symbol">|</a> <a id="9369" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="9374" class="Symbol">|</a> <a id="9376" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
  <a id="9383" class="Keyword">with</a> <a id="9388" href="Data.List.Base.html#13327" class="Function">find</a> <a id="9393" class="Symbol">(λ</a> <a id="9396" class="Symbol">(_</a> <a id="9399" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9401" href="Leios.Linear.html#9401" class="Bound">eb&#39;</a><a id="9404" class="Symbol">)</a> <a id="9406" class="Symbol">→</a> <a id="9408" href="Class.Hashable.html#167" class="Field">hash</a> <a id="9413" href="Leios.Linear.html#9401" class="Bound">eb&#39;</a> <a id="9417" href="Class.DecEq.Core.html#168" class="Field Operator">≟</a> <a id="9419" class="Bound">ebHash</a><a id="9425" class="Symbol">)</a> <a id="9427" class="Symbol">(</a><a id="9428" href="Leios.Protocol.html#1788" class="Field">LeiosState.EBs&#39;</a> <a id="9444" class="Bound">s</a><a id="9445" class="Symbol">)</a> <a id="9447" class="Symbol">|</a> <a id="9449" class="Bound">eq₁₂</a> <a id="9454" class="Symbol">|</a> <a id="9456" class="Bound">eq₂₂</a>
<a id="9461" class="Symbol">...</a> <a id="9465" class="Symbol">|</a> <a id="9467" class="Symbol">_</a> <a id="9469" class="Symbol">|</a> <a id="9471" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="9476" class="Symbol">|</a> <a id="9478" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="9483" class="Symbol">=</a> <a id="9485" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

<a id="Base≢EB-Role"></a><a id="9491" href="Leios.Linear.html#9491" class="Function">Base≢EB-Role</a> <a id="9504" class="Symbol">:</a> <a id="9506" href="Leios.Linear.html#1447" class="InductiveConstructor">SlotUpkeep.Base</a> <a id="9522" href="Relation.Binary.PropositionalEquality.Core.html#1000" class="Function Operator">≢</a> <a id="9524" href="Leios.Linear.html#1452" class="InductiveConstructor">SlotUpkeep.EB-Role</a>
<a id="9543" href="Leios.Linear.html#9491" class="Function">Base≢EB-Role</a> <a id="9556" class="Symbol">=</a> <a id="9558" class="Symbol">λ</a> <a id="9560" class="Symbol">()</a>

<a id="Base≢VT-Role"></a><a id="9564" href="Leios.Linear.html#9564" class="Function">Base≢VT-Role</a> <a id="9577" class="Symbol">:</a> <a id="9579" href="Leios.Linear.html#1447" class="InductiveConstructor">SlotUpkeep.Base</a> <a id="9595" href="Relation.Binary.PropositionalEquality.Core.html#1000" class="Function Operator">≢</a> <a id="9597" href="Leios.Linear.html#1460" class="InductiveConstructor">SlotUpkeep.VT-Role</a>
<a id="9616" href="Leios.Linear.html#9564" class="Function">Base≢VT-Role</a> <a id="9629" class="Symbol">=</a> <a id="9631" class="Symbol">λ</a> <a id="9633" class="Symbol">()</a>

<a id="π-unique"></a><a id="9637" href="Leios.Linear.html#9637" class="Function">π-unique</a> <a id="9646" class="Symbol">:</a> <a id="9648" class="Symbol">∀</a> <a id="9650" class="Symbol">{</a><a id="9651" href="Leios.Linear.html#9651" class="Bound">s</a> <a id="9653" href="Leios.Linear.html#9653" class="Bound">π</a><a id="9654" class="Symbol">}</a> <a id="9656" class="Symbol">→</a> <a id="9658" href="Leios.VRF.html#1847" class="Function">canProduceEB</a> <a id="9671" class="Symbol">(</a><a id="9672" href="Leios.Protocol.html#1909" class="Field">LeiosState.slot</a> <a id="9688" href="Leios.Linear.html#9651" class="Bound">s</a><a id="9689" class="Symbol">)</a> <a id="9691" href="Leios.SpecStructure.html#752" class="Field">sk-EB</a> <a id="9697" class="Symbol">(</a><a id="9698" href="Leios.Protocol.html#4500" class="Function">stake</a> <a id="9704" href="Leios.Linear.html#9651" class="Bound">s</a><a id="9705" class="Symbol">)</a> <a id="9707" href="Leios.Linear.html#9653" class="Bound">π</a> <a id="9709" class="Symbol">→</a> <a id="9711" href="Leios.Linear.html#9653" class="Bound">π</a> <a id="9713" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="9715" class="Symbol">(</a><a id="9716" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="9722" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="9724" href="Leios.VRF.html#682" class="Function">eval</a> <a id="9729" href="Leios.SpecStructure.html#752" class="Field">sk-EB</a> <a id="9735" class="Symbol">(</a><a id="9736" href="Leios.VRF.html#1189" class="Function">genEBInput</a> <a id="9747" class="Symbol">(</a><a id="9748" href="Leios.Protocol.html#1909" class="Field">LeiosState.slot</a> <a id="9764" href="Leios.Linear.html#9651" class="Bound">s</a><a id="9765" class="Symbol">)))</a>
<a id="9769" href="Leios.Linear.html#9637" class="Function">π-unique</a> <a id="9778" class="Symbol">(_</a> <a id="9781" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9783" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="9787" class="Symbol">)</a> <a id="9789" class="Symbol">=</a> <a id="9791" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

<a id="9797" class="Keyword">instance</a>

  <a id="Dec-↝"></a><a id="9809" href="Leios.Linear.html#9809" class="Function">Dec-↝</a> <a id="9815" class="Symbol">:</a> <a id="9817" class="Symbol">∀</a> <a id="9819" class="Symbol">{</a><a id="9820" href="Leios.Linear.html#9820" class="Bound">s</a> <a id="9822" href="Leios.Linear.html#9822" class="Bound">u</a><a id="9823" class="Symbol">}</a> <a id="9825" class="Symbol">→</a> <a id="9827" class="Symbol">(</a><a id="9828" href="Data.Product.Base.html#1371" class="Function">∃[</a> <a id="9831" href="Leios.Linear.html#9831" class="Bound">s&#39;×i</a> <a id="9836" href="Data.Product.Base.html#1371" class="Function">]</a> <a id="9838" class="Symbol">(</a><a id="9839" href="Leios.Linear.html#9820" class="Bound">s</a> <a id="9841" href="Leios.Linear.html#3419" class="Datatype Operator">↝</a> <a id="9843" href="Leios.Linear.html#9831" class="Bound">s&#39;×i</a> <a id="9848" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="9850" class="Symbol">(</a><a id="9851" href="Leios.Linear.html#9822" class="Bound">u</a> <a id="9853" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="9855" href="Leios.Protocol.html#1934" class="Field">LeiosState.Upkeep</a> <a id="9873" href="Leios.Linear.html#9820" class="Bound">s</a><a id="9874" class="Symbol">)</a> <a id="9876" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="9878" href="Leios.Protocol.html#1934" class="Field">LeiosState.Upkeep</a> <a id="9896" class="Symbol">(</a><a id="9897" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="9903" href="Leios.Linear.html#9831" class="Bound">s&#39;×i</a><a id="9907" class="Symbol">)))</a> <a id="9911" href="Class.Decidable.Core.html#217" class="Record Operator">⁇</a>
  <a id="9915" href="Leios.Linear.html#9809" class="Function">Dec-↝</a> <a id="9921" class="Symbol">{</a><a id="9922" href="Leios.Linear.html#9922" class="Bound">s</a><a id="9923" class="Symbol">}</a> <a id="9925" class="Symbol">{</a><a id="9926" href="Leios.Linear.html#1452" class="InductiveConstructor">EB-Role</a><a id="9933" class="Symbol">}</a> <a id="9935" class="Symbol">.</a><a id="9936" href="Class.Decidable.Core.html#273" class="Field">dec</a>
    <a id="9944" class="Keyword">with</a> <a id="9949" href="Leios.Linear.html#2818" class="Function">toProposeEB</a> <a id="9961" href="Leios.Linear.html#9922" class="Bound">s</a> <a id="9963" class="Symbol">(</a><a id="9964" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="9970" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="9972" href="Leios.VRF.html#682" class="Function">eval</a> <a id="9977" href="Leios.SpecStructure.html#752" class="Field">sk-EB</a> <a id="9983" class="Symbol">(</a><a id="9984" href="Leios.VRF.html#1189" class="Function">genEBInput</a> <a id="9995" class="Symbol">(</a><a id="9996" href="Leios.Protocol.html#1909" class="Field">LeiosState.slot</a> <a id="10012" href="Leios.Linear.html#9922" class="Bound">s</a><a id="10013" class="Symbol">)))</a> <a id="10017" class="Keyword">in</a> <a id="10020" class="Argument">eq₁</a>
  <a id="10026" class="Symbol">...</a> <a id="10030" class="Symbol">|</a> <a id="10032" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="10040" class="Symbol">=</a> <a id="10042" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="10045" class="Symbol">λ</a> <a id="10047" class="Keyword">where</a>
    <a id="10057" class="Symbol">(_</a> <a id="10060" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10062" href="Leios.Linear.html#3812" class="InductiveConstructor">EB-Role</a> <a id="10070" class="Symbol">{</a><a id="10071" class="Argument">π</a> <a id="10073" class="Symbol">=</a> <a id="10075" href="Leios.Linear.html#10075" class="Bound">π</a><a id="10076" class="Symbol">}</a> <a id="10078" class="Symbol">(</a><a id="10079" href="Leios.Linear.html#10079" class="Bound">p</a> <a id="10081" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10083" href="Leios.Linear.html#10083" class="Bound">a</a><a id="10084" class="Symbol">)</a> <a id="10086" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10088" href="Leios.Linear.html#10088" class="Bound">b</a><a id="10089" class="Symbol">)</a> <a id="10091" class="Symbol">→</a>
      <a id="10099" href="Function.Base.html#4061" class="Function Operator">case</a> <a id="10104" class="Symbol">(</a><a id="10105" href="Leios.Linear.html#10075" class="Bound">π</a> <a id="10107" href="Class.DecEq.Core.html#168" class="Field Operator">≟</a> <a id="10109" class="Symbol">(</a><a id="10110" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="10116" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="10118" href="Leios.VRF.html#682" class="Function">eval</a> <a id="10123" href="Leios.SpecStructure.html#752" class="Field">sk-EB</a> <a id="10129" class="Symbol">(</a><a id="10130" href="Leios.VRF.html#1189" class="Function">genEBInput</a> <a id="10141" class="Symbol">(</a><a id="10142" href="Leios.Protocol.html#1909" class="Field">LeiosState.slot</a> <a id="10158" class="Bound">s</a><a id="10159" class="Symbol">))))</a> <a id="10164" href="Function.Base.html#4061" class="Function Operator">of</a> <a id="10167" class="Symbol">λ</a>
        <a id="10177" class="Symbol">{</a> <a id="10179" class="Symbol">(</a><a id="10180" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="10184" href="Leios.Linear.html#10184" class="Bound">q</a><a id="10185" class="Symbol">)</a> <a id="10187" class="Symbol">→</a> <a id="10189" href="Leios.Linear.html#8453" class="Function">nothing≢just</a> <a id="10202" class="Symbol">(</a><a id="10203" href="Relation.Binary.PropositionalEquality.Core.html#2080" class="Function">trans</a> <a id="10209" class="Symbol">(</a><a id="10210" href="Relation.Binary.PropositionalEquality.Core.html#2035" class="Function">sym</a> <a id="10214" href="Leios.Linear.html#10020" class="Bound">eq₁</a><a id="10217" class="Symbol">)</a> <a id="10219" class="Symbol">(</a><a id="10220" href="Relation.Binary.PropositionalEquality.Core.html#2131" class="Function">subst</a> <a id="10226" class="Symbol">(λ</a> <a id="10229" href="Leios.Linear.html#10229" class="Bound">x</a> <a id="10231" class="Symbol">→</a> <a id="10233" href="Leios.Linear.html#2818" class="Function">toProposeEB</a> <a id="10245" class="Bound">s</a> <a id="10247" href="Leios.Linear.html#10229" class="Bound">x</a> <a id="10249" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="10251" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="10256" class="Symbol">_)</a> <a id="10259" href="Leios.Linear.html#10184" class="Bound">q</a> <a id="10261" href="Leios.Linear.html#10079" class="Bound">p</a><a id="10262" class="Symbol">))</a> <a id="10265" class="Symbol">;</a>
          <a id="10277" class="Symbol">(</a><a id="10278" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="10281" href="Leios.Linear.html#10281" class="Bound">¬q</a><a id="10283" class="Symbol">)</a> <a id="10285" class="Symbol">→</a> <a id="10287" href="Relation.Nullary.Negation.Core.html#1289" class="Function">contradiction</a> <a id="10301" class="Symbol">(</a><a id="10302" href="Leios.Linear.html#9637" class="Function">π-unique</a> <a id="10311" class="Symbol">{</a><a id="10312" class="Bound">s</a><a id="10313" class="Symbol">}</a> <a id="10315" class="Symbol">{</a><a id="10316" href="Leios.Linear.html#10075" class="Bound">π</a><a id="10317" class="Symbol">}</a> <a id="10319" href="Leios.Linear.html#10083" class="Bound">a</a><a id="10320" class="Symbol">)</a> <a id="10322" href="Leios.Linear.html#10281" class="Bound">¬q</a>
        <a id="10333" class="Symbol">}</a>
  <a id="10337" class="Symbol">...</a> <a id="10341" class="Symbol">|</a> <a id="10343" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="10348" href="Leios.Linear.html#10348" class="Bound">eb</a>
    <a id="10355" class="Keyword">with</a> <a id="10360" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a> <a id="10362" href="Leios.VRF.html#1847" class="Function">canProduceEB</a> <a id="10375" class="Symbol">(</a><a id="10376" href="Leios.Protocol.html#1909" class="Field">LeiosState.slot</a> <a id="10392" class="Bound">s</a><a id="10393" class="Symbol">)</a> <a id="10395" href="Leios.SpecStructure.html#752" class="Field">sk-EB</a> <a id="10401" class="Symbol">(</a><a id="10402" href="Leios.Protocol.html#4500" class="Function">stake</a> <a id="10408" class="Bound">s</a><a id="10409" class="Symbol">)</a> <a id="10411" class="Symbol">_</a> <a id="10413" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a>
  <a id="10417" class="Symbol">...</a> <a id="10421" class="Symbol">|</a> <a id="10423" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="10427" href="Leios.Linear.html#10427" class="Bound">q</a> <a id="10429" class="Symbol">=</a> <a id="10431" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="10435" class="Symbol">(_</a> <a id="10438" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10440" href="Leios.Linear.html#3812" class="InductiveConstructor">EB-Role</a> <a id="10448" class="Symbol">(</a><a id="10449" href="Leios.Linear.html#10020" class="Bound">eq₁</a> <a id="10453" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10455" href="Leios.Linear.html#10427" class="Bound">q</a><a id="10456" class="Symbol">)</a> <a id="10458" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10460" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="10464" class="Symbol">)</a>
  <a id="10468" class="Symbol">...</a> <a id="10472" class="Symbol">|</a> <a id="10474" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="10477" href="Leios.Linear.html#10477" class="Bound">¬q</a> <a id="10480" class="Symbol">=</a> <a id="10482" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="10485" class="Symbol">λ</a> <a id="10487" class="Keyword">where</a>
    <a id="10497" class="Symbol">(_</a> <a id="10500" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10502" href="Leios.Linear.html#3812" class="InductiveConstructor">EB-Role</a> <a id="10510" class="Symbol">{</a><a id="10511" class="Argument">π</a> <a id="10513" class="Symbol">=</a> <a id="10515" href="Leios.Linear.html#10515" class="Bound">π</a><a id="10516" class="Symbol">}</a> <a id="10518" class="Symbol">(</a><a id="10519" href="Leios.Linear.html#10519" class="Bound">a</a> <a id="10521" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10523" href="Leios.Linear.html#10523" class="Bound">q</a><a id="10524" class="Symbol">)</a> <a id="10526" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10528" href="Leios.Linear.html#10528" class="Bound">b</a><a id="10529" class="Symbol">)</a> <a id="10531" class="Symbol">→</a>
      <a id="10539" href="Function.Base.html#4061" class="Function Operator">case</a> <a id="10544" class="Symbol">(</a><a id="10545" href="Leios.Linear.html#10515" class="Bound">π</a> <a id="10547" href="Class.DecEq.Core.html#168" class="Field Operator">≟</a> <a id="10549" class="Symbol">(</a><a id="10550" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="10556" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="10558" href="Leios.VRF.html#682" class="Function">eval</a> <a id="10563" href="Leios.SpecStructure.html#752" class="Field">sk-EB</a> <a id="10569" class="Symbol">(</a><a id="10570" href="Leios.VRF.html#1189" class="Function">genEBInput</a> <a id="10581" class="Symbol">(</a><a id="10582" href="Leios.Protocol.html#1909" class="Field">LeiosState.slot</a> <a id="10598" class="Bound">s</a><a id="10599" class="Symbol">))))</a> <a id="10604" href="Function.Base.html#4061" class="Function Operator">of</a> <a id="10607" class="Symbol">λ</a>
        <a id="10617" class="Symbol">{</a> <a id="10619" class="Symbol">(</a><a id="10620" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="10624" href="Leios.Linear.html#10624" class="Bound">r</a><a id="10625" class="Symbol">)</a> <a id="10627" class="Symbol">→</a> <a id="10629" href="Leios.Linear.html#10477" class="Bound">¬q</a> <a id="10632" class="Symbol">(</a><a id="10633" href="Relation.Binary.PropositionalEquality.Core.html#2131" class="Function">subst</a> <a id="10639" class="Symbol">(λ</a> <a id="10642" href="Leios.Linear.html#10642" class="Bound">x</a> <a id="10644" class="Symbol">→</a> <a id="10646" href="Leios.VRF.html#1847" class="Function">canProduceEB</a> <a id="10659" class="Symbol">(</a><a id="10660" href="Leios.Protocol.html#1909" class="Field">LeiosState.slot</a> <a id="10676" class="Bound">s</a><a id="10677" class="Symbol">)</a> <a id="10679" href="Leios.SpecStructure.html#752" class="Field">sk-EB</a> <a id="10685" class="Symbol">(</a><a id="10686" href="Leios.Protocol.html#4500" class="Function">stake</a> <a id="10692" class="Bound">s</a><a id="10693" class="Symbol">)</a> <a id="10695" href="Leios.Linear.html#10642" class="Bound">x</a><a id="10696" class="Symbol">)</a> <a id="10698" href="Leios.Linear.html#10624" class="Bound">r</a> <a id="10700" href="Leios.Linear.html#10523" class="Bound">q</a><a id="10701" class="Symbol">)</a> <a id="10703" class="Symbol">;</a>
          <a id="10715" class="Symbol">(</a><a id="10716" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="10719" href="Leios.Linear.html#10719" class="Bound">¬r</a><a id="10721" class="Symbol">)</a> <a id="10723" class="Symbol">→</a> <a id="10725" href="Relation.Nullary.Negation.Core.html#1289" class="Function">contradiction</a> <a id="10739" class="Symbol">(</a><a id="10740" href="Leios.Linear.html#9637" class="Function">π-unique</a> <a id="10749" class="Symbol">{</a><a id="10750" class="Bound">s</a><a id="10751" class="Symbol">}</a> <a id="10753" class="Symbol">{</a><a id="10754" href="Leios.Linear.html#10515" class="Bound">π</a><a id="10755" class="Symbol">}</a> <a id="10757" href="Leios.Linear.html#10523" class="Bound">q</a><a id="10758" class="Symbol">)</a> <a id="10760" href="Leios.Linear.html#10719" class="Bound">¬r</a>
        <a id="10771" class="Symbol">}</a>
  <a id="10775" href="Leios.Linear.html#9809" class="Function">Dec-↝</a> <a id="10781" class="Symbol">{</a><a id="10782" href="Leios.Linear.html#10782" class="Bound">s</a><a id="10783" class="Symbol">}</a> <a id="10785" class="Symbol">{</a><a id="10786" href="Leios.Linear.html#1460" class="InductiveConstructor">VT-Role</a><a id="10793" class="Symbol">}</a> <a id="10795" class="Symbol">.</a><a id="10796" href="Class.Decidable.Core.html#273" class="Field">dec</a>
    <a id="10804" class="Keyword">with</a> <a id="10809" href="Leios.Linear.html#3019" class="Function">getCurrentEBHash</a> <a id="10826" href="Leios.Linear.html#10782" class="Bound">s</a> <a id="10828" class="Keyword">in</a> <a id="10831" class="Argument">eq₂</a>
  <a id="10837" class="Symbol">...</a> <a id="10841" class="Symbol">|</a> <a id="10843" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="10851" class="Symbol">=</a> <a id="10853" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="10856" class="Symbol">λ</a> <a id="10858" class="Keyword">where</a> <a id="10864" class="Symbol">(_</a> <a id="10867" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10869" href="Leios.Linear.html#4078" class="InductiveConstructor">VT-Role</a> <a id="10877" class="Symbol">(</a><a id="10878" href="Leios.Linear.html#10878" class="Bound">p</a> <a id="10880" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10882" class="Symbol">_)</a> <a id="10885" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10887" class="Symbol">_)</a> <a id="10890" class="Symbol">→</a> <a id="10892" href="Leios.Linear.html#8453" class="Function">nothing≢just</a> <a id="10905" class="Symbol">(</a><a id="10906" href="Relation.Binary.PropositionalEquality.Core.html#2080" class="Function">trans</a> <a id="10912" class="Symbol">(</a><a id="10913" href="Relation.Binary.PropositionalEquality.Core.html#2035" class="Function">sym</a> <a id="10917" href="Leios.Linear.html#10831" class="Bound">eq₂</a><a id="10920" class="Symbol">)</a> <a id="10922" href="Leios.Linear.html#10878" class="Bound">p</a><a id="10923" class="Symbol">)</a>
  <a id="10927" class="Symbol">...</a> <a id="10931" class="Symbol">|</a> <a id="10933" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="10938" href="Leios.Linear.html#10938" class="Bound">ebHash</a>
    <a id="10949" class="Keyword">with</a> <a id="10954" href="Data.List.Base.html#13327" class="Function">find</a> <a id="10959" class="Symbol">(λ</a> <a id="10962" class="Symbol">(_</a> <a id="10965" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10967" href="Leios.Linear.html#10967" class="Bound">eb&#39;</a><a id="10970" class="Symbol">)</a> <a id="10972" class="Symbol">→</a> <a id="10974" href="Class.Hashable.html#167" class="Field">hash</a> <a id="10979" href="Leios.Linear.html#10967" class="Bound">eb&#39;</a> <a id="10983" href="Class.DecEq.Core.html#168" class="Field Operator">≟</a> <a id="10985" href="Leios.Linear.html#10938" class="Bound">ebHash</a><a id="10991" class="Symbol">)</a> <a id="10993" class="Symbol">(</a><a id="10994" href="Leios.Protocol.html#1788" class="Field">LeiosState.EBs&#39;</a> <a id="11010" class="Bound">s</a><a id="11011" class="Symbol">)</a> <a id="11013" class="Keyword">in</a> <a id="11016" class="Argument">eq₃</a>
  <a id="11022" class="Symbol">...</a> <a id="11026" class="Symbol">|</a> <a id="11028" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="11036" class="Symbol">=</a> <a id="11038" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="11041" class="Symbol">λ</a> <a id="11043" class="Keyword">where</a>
    <a id="11053" class="Symbol">(_</a> <a id="11056" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="11058" href="Leios.Linear.html#4078" class="InductiveConstructor">VT-Role</a> <a id="11066" class="Symbol">(</a><a id="11067" href="Leios.Linear.html#11067" class="Bound">x</a> <a id="11069" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="11071" href="Leios.Linear.html#11071" class="Bound">y</a> <a id="11073" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="11075" class="Symbol">_)</a> <a id="11078" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="11080" class="Symbol">_)</a> <a id="11083" class="Symbol">→</a>
      <a id="11091" class="Keyword">let</a> <a id="11095" href="Leios.Linear.html#11095" class="Bound">ji</a> <a id="11098" class="Symbol">=</a> <a id="11100" href="Data.Maybe.Properties.html#1342" class="Function">just-injective</a> <a id="11115" class="Symbol">(</a><a id="11116" href="Relation.Binary.PropositionalEquality.Core.html#2080" class="Function">trans</a> <a id="11122" class="Symbol">(</a><a id="11123" href="Relation.Binary.PropositionalEquality.Core.html#2035" class="Function">sym</a> <a id="11127" href="Leios.Linear.html#11067" class="Bound">x</a><a id="11128" class="Symbol">)</a> <a id="11130" href="Leios.Linear.html#10831" class="Bound">eq₂</a><a id="11133" class="Symbol">)</a>
      <a id="11141" class="Keyword">in</a> <a id="11144" href="Leios.Linear.html#8359" class="Function">just≢nothing</a> <a id="11157" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="11159" href="Relation.Binary.PropositionalEquality.Core.html#2080" class="Function">trans</a> <a id="11165" class="Symbol">(</a><a id="11166" href="Relation.Binary.PropositionalEquality.Core.html#2035" class="Function">sym</a> <a id="11170" href="Leios.Linear.html#11071" class="Bound">y</a><a id="11171" class="Symbol">)</a> <a id="11173" class="Symbol">(</a><a id="11174" href="Relation.Binary.PropositionalEquality.Core.html#2131" class="Function">subst</a> <a id="11180" class="Symbol">(</a><a id="11181" href="Leios.Linear.html#8816" class="Function">not-found</a> <a id="11191" class="Bound">s</a><a id="11192" class="Symbol">)</a> <a id="11194" class="Symbol">(</a><a id="11195" href="Relation.Binary.PropositionalEquality.Core.html#2035" class="Function">sym</a> <a id="11199" href="Leios.Linear.html#11095" class="Bound">ji</a><a id="11201" class="Symbol">)</a> <a id="11203" href="Leios.Linear.html#11016" class="Bound">eq₃</a><a id="11206" class="Symbol">)</a>
  <a id="11210" class="Symbol">...</a> <a id="11214" class="Symbol">|</a> <a id="11216" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="11221" class="Symbol">(</a><a id="11222" href="Leios.Linear.html#11222" class="Bound">slot&#39;</a> <a id="11228" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="11230" href="Leios.Linear.html#11230" class="Bound">eb</a><a id="11232" class="Symbol">)</a>
    <a id="11238" class="Keyword">with</a> <a id="11243" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a> <a id="11245" href="Leios.Linear.html#8009" class="Function">VT-Role-premises</a> <a id="11262" class="Symbol">{</a><a id="11263" class="Bound">s</a><a id="11264" class="Symbol">}</a> <a id="11266" class="Symbol">{</a><a id="11267" href="Leios.Linear.html#11230" class="Bound">eb</a><a id="11269" class="Symbol">}</a> <a id="11271" class="Symbol">{</a><a id="11272" class="Bound">ebHash</a><a id="11278" class="Symbol">}</a> <a id="11280" class="Symbol">{</a><a id="11281" href="Leios.Linear.html#11222" class="Bound">slot&#39;</a><a id="11286" class="Symbol">}</a> <a id="11288" class="Symbol">.</a><a id="11289" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="11295" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a>
  <a id="11299" class="Symbol">...</a> <a id="11303" class="Symbol">|</a> <a id="11305" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="11309" href="Leios.Linear.html#11309" class="Bound">p</a> <a id="11311" class="Symbol">=</a> <a id="11313" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="11317" class="Symbol">((</a><a id="11319" href="Leios.Linear.html#3270" class="Function">rememberVote</a> <a id="11332" class="Symbol">(</a><a id="11333" href="Leios.Protocol.html#3642" class="Function">addUpkeep</a> <a id="11343" class="Bound">s</a> <a id="11345" href="Leios.Linear.html#1460" class="InductiveConstructor">VT-Role</a><a id="11352" class="Symbol">)</a> <a id="11354" class="Bound">eb</a> <a id="11357" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="11359" href="Leios.FFD.html#381" class="InductiveConstructor">Send</a> <a id="11364" class="Symbol">(</a><a id="11365" href="Leios.Blocks.html#2413" class="InductiveConstructor">vtHeader</a> <a id="11374" href="Data.List.Base.html#4907" class="Function Operator">[</a> <a id="11376" href="Leios.Abstract.html#716" class="Function">vote</a> <a id="11381" href="Leios.SpecStructure.html#758" class="Field">sk-VT</a> <a id="11387" class="Symbol">(</a><a id="11388" href="Class.Hashable.html#167" class="Field">hash</a> <a id="11393" class="Bound">eb</a><a id="11395" class="Symbol">)</a> <a id="11397" href="Data.List.Base.html#4907" class="Function Operator">]</a><a id="11398" class="Symbol">)</a> <a id="11400" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="11407" class="Symbol">)</a> <a id="11409" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a>
                      <a id="11433" href="Leios.Linear.html#4078" class="InductiveConstructor">VT-Role</a> <a id="11441" href="Leios.Linear.html#11309" class="Bound">p</a> <a id="11443" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="11445" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="11449" class="Symbol">)</a>
  <a id="11453" class="Symbol">...</a> <a id="11457" class="Symbol">|</a> <a id="11459" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="11462" href="Leios.Linear.html#11462" class="Bound">¬p</a> <a id="11465" class="Symbol">=</a> <a id="11467" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="11470" class="Symbol">λ</a> <a id="11472" class="Keyword">where</a> <a id="11478" class="Symbol">(_</a> <a id="11481" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="11483" href="Leios.Linear.html#4078" class="InductiveConstructor">VT-Role</a> <a id="11491" class="Symbol">(</a><a id="11492" href="Leios.Linear.html#11492" class="Bound">x</a> <a id="11494" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="11496" href="Leios.Linear.html#11496" class="Bound">y</a> <a id="11498" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="11500" href="Leios.Linear.html#11500" class="Bound">p</a><a id="11501" class="Symbol">)</a> <a id="11503" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="11505" class="Symbol">_)</a> <a id="11508" class="Symbol">→</a> <a id="11510" href="Leios.Linear.html#11462" class="Bound">¬p</a> <a id="11513" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="11515" href="Relation.Binary.PropositionalEquality.Core.html#2131" class="Function">subst</a>
                             <a id="11550" class="Symbol">(λ</a> <a id="11553" class="Keyword">where</a> <a id="11559" class="Symbol">(</a><a id="11560" href="Leios.Linear.html#11560" class="Bound">eb</a> <a id="11563" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="11565" href="Leios.Linear.html#11565" class="Bound">ebHash</a> <a id="11572" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="11574" href="Leios.Linear.html#11574" class="Bound">slot</a><a id="11578" class="Symbol">)</a> <a id="11580" class="Symbol">→</a> <a id="11582" href="Leios.Linear.html#8009" class="Function">VT-Role-premises</a> <a id="11599" class="Symbol">{</a><a id="11600" class="Bound">s</a><a id="11601" class="Symbol">}</a> <a id="11603" class="Symbol">{</a><a id="11604" href="Leios.Linear.html#11560" class="Bound">eb</a><a id="11606" class="Symbol">}</a> <a id="11608" class="Symbol">{</a><a id="11609" href="Leios.Linear.html#11565" class="Bound">ebHash</a><a id="11615" class="Symbol">}</a> <a id="11617" class="Symbol">{</a><a id="11618" href="Leios.Linear.html#11574" class="Bound">slot</a><a id="11622" class="Symbol">}</a> <a id="11624" class="Symbol">.</a><a id="11625" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="11630" class="Symbol">)</a>
                             <a id="11661" class="Symbol">(</a><a id="11662" href="Leios.Linear.html#8913" class="Function">subst&#39;</a> <a id="11669" class="Symbol">{</a><a id="11670" class="Bound">s</a><a id="11671" class="Symbol">}</a> <a id="11673" href="Leios.Linear.html#11492" class="Bound">x</a> <a id="11675" href="Leios.Linear.html#11496" class="Bound">y</a> <a id="11677" href="Leios.Linear.html#10831" class="Bound">eq₂</a> <a id="11681" href="Leios.Linear.html#11016" class="Bound">eq₃</a><a id="11684" class="Symbol">)</a> <a id="11686" class="Symbol">(</a><a id="11687" href="Leios.Linear.html#11492" class="Bound">x</a> <a id="11689" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="11691" href="Leios.Linear.html#11496" class="Bound">y</a> <a id="11693" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="11695" href="Leios.Linear.html#11500" class="Bound">p</a><a id="11696" class="Symbol">)</a>
  <a id="11700" href="Leios.Linear.html#9809" class="Function">Dec-↝</a> <a id="11706" class="Symbol">{</a><a id="11707" href="Leios.Linear.html#11707" class="Bound">s</a><a id="11708" class="Symbol">}</a> <a id="11710" class="Symbol">{</a><a id="11711" href="Leios.Linear.html#1447" class="InductiveConstructor">Base</a><a id="11715" class="Symbol">}</a> <a id="11717" class="Symbol">.</a><a id="11718" href="Class.Decidable.Core.html#273" class="Field">dec</a> <a id="11722" class="Symbol">=</a> <a id="11724" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="11727" class="Symbol">λ</a> <a id="11729" class="Keyword">where</a>
    <a id="11739" class="Symbol">(_</a> <a id="11742" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="11744" href="Leios.Linear.html#3812" class="InductiveConstructor">EB-Role</a> <a id="11752" class="Symbol">_</a> <a id="11754" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="11756" href="Leios.Linear.html#11756" class="Bound">x</a><a id="11757" class="Symbol">)</a> <a id="11759" class="Symbol">→</a> <a id="11761" href="Leios.Linear.html#9491" class="Function">Base≢EB-Role</a> <a id="11774" class="Symbol">(</a><a id="11775" href="Data.List.Properties.html#2946" class="Function">∷-injectiveˡ</a> <a id="11788" class="Symbol">(</a><a id="11789" href="Relation.Binary.PropositionalEquality.Core.html#2080" class="Function">trans</a> <a id="11795" href="Leios.Linear.html#11756" class="Bound">x</a> <a id="11797" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="11801" class="Symbol">))</a>
    <a id="11808" class="Symbol">(_</a> <a id="11811" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="11813" href="Leios.Linear.html#4078" class="InductiveConstructor">VT-Role</a> <a id="11821" class="Symbol">_</a> <a id="11823" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="11825" href="Leios.Linear.html#11825" class="Bound">x</a><a id="11826" class="Symbol">)</a> <a id="11828" class="Symbol">→</a> <a id="11830" href="Leios.Linear.html#9564" class="Function">Base≢VT-Role</a> <a id="11843" class="Symbol">(</a><a id="11844" href="Data.List.Properties.html#2946" class="Function">∷-injectiveˡ</a> <a id="11857" class="Symbol">(</a><a id="11858" href="Relation.Binary.PropositionalEquality.Core.html#2080" class="Function">trans</a> <a id="11864" href="Leios.Linear.html#11825" class="Bound">x</a> <a id="11866" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="11870" class="Symbol">))</a>

<a id="11874" class="Keyword">unquoteDecl</a> <a id="Roles₂-premises"></a><a id="11886" href="Leios.Linear.html#11886" class="Function">Roles₂-premises</a> <a id="11902" class="Symbol">=</a> <a id="11904" href="Prelude.STS.GenPremises.html#13070" class="Function">genPremises</a> <a id="11916" href="Leios.Linear.html#11886" class="Function">Roles₂-premises</a> <a id="11932" class="Symbol">(</a><a id="11933" class="Keyword">quote</a> <a id="11939" href="Leios.Linear.html#7355" class="InductiveConstructor">Roles₂</a><a id="11945" class="Symbol">)</a>
</pre>-->
