## Short-Pipeline Leios

<!--
<pre class="Agda"><a id="39" class="Symbol">{-#</a> <a id="43" class="Keyword">OPTIONS</a> <a id="51" class="Pragma">--safe</a> <a id="58" class="Symbol">#-}</a>
<a id="62" class="Keyword">open</a> <a id="67" class="Keyword">import</a> <a id="74" href="Leios.Prelude.html" class="Module">Leios.Prelude</a> <a id="88" class="Keyword">hiding</a> <a id="95" class="Symbol">(</a><a id="96" href="Function.Base.html#704" class="Function">id</a><a id="98" class="Symbol">;</a> <a id="100" href="Class.Applicative.Core.html#497" class="Function Operator">_⊗_</a><a id="103" class="Symbol">)</a>
<a id="105" class="Keyword">open</a> <a id="110" class="Keyword">import</a> <a id="117" href="Leios.FFD.html" class="Module">Leios.FFD</a>
<a id="127" class="Keyword">open</a> <a id="132" class="Keyword">import</a> <a id="139" href="Leios.SpecStructure.html" class="Module">Leios.SpecStructure</a>
<a id="159" class="Keyword">open</a> <a id="164" class="Keyword">import</a> <a id="171" href="Leios.Config.html" class="Module">Leios.Config</a>

<a id="185" class="Keyword">open</a> <a id="190" class="Keyword">import</a> <a id="197" href="Tactic.Defaults.html" class="Module">Tactic.Defaults</a>
<a id="213" class="Keyword">open</a> <a id="218" class="Keyword">import</a> <a id="225" href="Tactic.Derive.DecEq.html" class="Module">Tactic.Derive.DecEq</a>

<a id="246" class="Keyword">open</a> <a id="251" class="Keyword">import</a> <a id="258" href="CategoricalCrypto.html" class="Module">CategoricalCrypto</a> <a id="276" class="Keyword">hiding</a> <a id="283" class="Symbol">(</a><a id="284" href="CategoricalCrypto.Machine.Core.html#2110" class="Function">id</a><a id="286" class="Symbol">;</a> <a id="288" href="CategoricalCrypto.Machine.Core.html#4835" class="Function Operator">_∘_</a><a id="291" class="Symbol">)</a>
<a id="293" class="Keyword">open</a> <a id="298" class="Keyword">import</a> <a id="305" href="CategoricalCrypto.Channel.Selection.html" class="Module">CategoricalCrypto.Channel.Selection</a>

<a id="342" class="Keyword">module</a> <a id="349" href="Leios.Short.html" class="Module">Leios.Short</a> <a id="361" class="Symbol">(</a><a id="362" href="Leios.Short.html#362" class="Bound">⋯</a> <a id="364" class="Symbol">:</a> <a id="366" href="Leios.SpecStructure.html#286" class="Record">SpecStructure</a> <a id="380" class="Number">1</a><a id="381" class="Symbol">)</a>
  <a id="385" class="Symbol">(</a><a id="386" class="Keyword">let</a> <a id="390" class="Keyword">open</a> <a id="395" href="Leios.SpecStructure.html#286" class="Module">SpecStructure</a> <a id="409" href="Leios.Short.html#362" class="Bound">⋯</a> <a id="411" class="Keyword">renaming</a> <a id="420" class="Symbol">(</a><a id="421" href="Leios.Voting.html#203" class="Function">isVoteCertified</a> <a id="437" class="Symbol">to</a> <a id="440" class="Function">isVoteCertified&#39;</a><a id="456" class="Symbol">))</a>
  <a id="461" class="Symbol">(</a><a id="462" href="Leios.Short.html#462" class="Bound">params</a> <a id="469" class="Symbol">:</a> <a id="471" href="Leios.Config.html#923" class="Record">Params</a><a id="477" class="Symbol">)</a> <a id="479" class="Keyword">where</a>
</pre>-->

This document is a specification of Short-Pipeline Leios, usually
abbreviated as Short Leios. On a high level, the pipeline looks like this:

1. If elected, propose IB
2. Wait
3. Wait
4. If elected, propose EB
5. If elected, vote
   If elected, propose RB

### Upkeep

A node that never produces a block even though it could is not
supposed to be an honest node, and we prevent that by tracking whether
a node has checked if it can make a block in a particular slot.
`LeiosState` contains a set of `SlotUpkeep` and we ensure that this
set contains all elements before we can advance to the next slot,
resetting this field to the empty set.

<pre class="Agda"><a id="1143" class="Keyword">data</a> <a id="SlotUpkeep"></a><a id="1148" href="Leios.Short.html#1148" class="Datatype">SlotUpkeep</a> <a id="1159" class="Symbol">:</a> <a id="1161" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1166" class="Keyword">where</a>
  <a id="SlotUpkeep.Base"></a><a id="1174" href="Leios.Short.html#1174" class="InductiveConstructor">Base</a> <a id="SlotUpkeep.IB-Role"></a><a id="1179" href="Leios.Short.html#1179" class="InductiveConstructor">IB-Role</a> <a id="SlotUpkeep.EB-Role"></a><a id="1187" href="Leios.Short.html#1187" class="InductiveConstructor">EB-Role</a> <a id="1195" class="Symbol">:</a> <a id="1197" href="Leios.Short.html#1148" class="Datatype">SlotUpkeep</a>

<a id="1209" class="Keyword">unquoteDecl</a> <a id="DecEq-SlotUpkeep"></a><a id="1221" href="Leios.Short.html#1221" class="Function">DecEq-SlotUpkeep</a> <a id="1238" class="Symbol">=</a> <a id="1240" href="Tactic.Derive.DecEq.html#3512" class="Function">derive-DecEq</a> <a id="1253" class="Symbol">((</a><a id="1255" class="Keyword">quote</a> <a id="1261" href="Leios.Short.html#1148" class="Datatype">SlotUpkeep</a> <a id="1272" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1274" href="Leios.Short.html#1221" class="Function">DecEq-SlotUpkeep</a><a id="1290" class="Symbol">)</a> <a id="1292" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1294" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="1296" class="Symbol">)</a>
</pre><!--
<pre class="Agda"><a id="1315" class="Keyword">data</a> <a id="StageUpkeep"></a><a id="1320" href="Leios.Short.html#1320" class="Datatype">StageUpkeep</a> <a id="1332" class="Symbol">:</a> <a id="1334" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1339" class="Keyword">where</a>
  <a id="StageUpkeep.VT-Role"></a><a id="1347" href="Leios.Short.html#1347" class="InductiveConstructor">VT-Role</a> <a id="1355" class="Symbol">:</a> <a id="1357" href="Leios.Short.html#1320" class="Datatype">StageUpkeep</a>

<a id="1370" class="Keyword">unquoteDecl</a> <a id="DecEq-StageUpkeep"></a><a id="1382" href="Leios.Short.html#1382" class="Function">DecEq-StageUpkeep</a> <a id="1400" class="Symbol">=</a> <a id="1402" href="Tactic.Derive.DecEq.html#3512" class="Function">derive-DecEq</a> <a id="1415" class="Symbol">((</a><a id="1417" class="Keyword">quote</a> <a id="1423" href="Leios.Short.html#1320" class="Datatype">StageUpkeep</a> <a id="1435" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1437" href="Leios.Short.html#1382" class="Function">DecEq-StageUpkeep</a><a id="1454" class="Symbol">)</a> <a id="1456" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1458" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="1460" class="Symbol">)</a>
</pre><pre class="Agda"><a id="1474" class="Keyword">open</a> <a id="1479" class="Keyword">import</a> <a id="1486" href="Leios.Protocol.html" class="Module">Leios.Protocol</a> <a id="1501" class="Symbol">(</a><a id="1502" href="Leios.Short.html#362" class="Bound">⋯</a><a id="1503" class="Symbol">)</a> <a id="1505" href="Leios.Short.html#1148" class="Datatype">SlotUpkeep</a> <a id="1516" href="Leios.Short.html#1320" class="Datatype">StageUpkeep</a> <a id="1528" class="Keyword">public</a>

<a id="1536" class="Keyword">open</a> <a id="1541" href="Leios.Base.html#636" class="Module">BaseAbstract</a> <a id="1554" href="Leios.SpecStructure.html#835" class="Field">B&#39;</a> <a id="1557" class="Keyword">using</a> <a id="1563" class="Symbol">(</a><a id="1564" href="Leios.Base.html#671" class="Field">Cert</a><a id="1568" class="Symbol">;</a> <a id="1570" href="Leios.Base.html#737" class="Field">V-chkCerts</a><a id="1580" class="Symbol">;</a> <a id="1582" href="Leios.Base.html#691" class="Field">VTy</a><a id="1585" class="Symbol">;</a> <a id="1587" href="Leios.Base.html#710" class="Field">initSlot</a><a id="1595" class="Symbol">)</a>
<a id="1597" class="Keyword">open</a> <a id="1602" href="Leios.SpecStructure.html#1203" class="Module">FFD</a> <a id="1606" class="Keyword">hiding</a> <a id="1613" class="Symbol">(</a><a id="1614" href="Leios.FFD.html#562" class="Function Operator">_-⟦_/_⟧⇀_</a><a id="1623" class="Symbol">)</a>
<a id="1625" class="Keyword">open</a> <a id="1630" href="Leios.Blocks.html#4563" class="Module">GenFFD</a>
</pre><pre class="Agda"><a id="isVoteCertified"></a><a id="1649" href="Leios.Short.html#1649" class="Function">isVoteCertified</a> <a id="1665" class="Symbol">:</a> <a id="1667" href="Leios.Protocol.html#1513" class="Record">LeiosState</a> <a id="1678" class="Symbol">→</a> <a id="1680" href="Leios.Blocks.html#3246" class="Function">EndorserBlock</a> <a id="1694" class="Symbol">→</a> <a id="1696" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="1701" href="Leios.Short.html#1649" class="Function">isVoteCertified</a> <a id="1717" href="Leios.Short.html#1717" class="Bound">s</a> <a id="1719" href="Leios.Short.html#1719" class="Bound">eb</a> <a id="1722" class="Symbol">=</a> <a id="1724" href="Leios.Short.html#440" class="Function">isVoteCertified&#39;</a> <a id="1741" class="Symbol">(</a><a id="1742" href="Leios.Protocol.html#2092" class="Field">LeiosState.votingState</a> <a id="1765" href="Leios.Short.html#1717" class="Bound">s</a><a id="1766" class="Symbol">)</a> <a id="1768" class="Symbol">(</a><a id="1769" href="Data.Fin.Patterns.html#399" class="InductiveConstructor">0F</a> <a id="1772" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1774" href="Leios.Short.html#1719" class="Bound">eb</a><a id="1776" class="Symbol">)</a>
</pre><pre class="Agda"><a id="1790" class="Keyword">private</a> <a id="1798" class="Keyword">variable</a> <a id="1807" href="Leios.Short.html#1807" class="Generalizable">s</a> <a id="1809" href="Leios.Short.html#1809" class="Generalizable">s&#39;</a>   <a id="1814" class="Symbol">:</a> <a id="1816" href="Leios.Protocol.html#1513" class="Record">LeiosState</a>
                 <a id="1844" href="Leios.Short.html#1844" class="Generalizable">ffds&#39;</a>  <a id="1851" class="Symbol">:</a> <a id="1853" href="Leios.FFD.html#508" class="Function">FFD.State</a>
                 <a id="1880" href="Leios.Short.html#1880" class="Generalizable">π</a>      <a id="1887" class="Symbol">:</a> <a id="1889" href="Leios.Abstract.html#578" class="Function">VrfPf</a>
                 <a id="1912" href="Leios.Short.html#1912" class="Generalizable">bs&#39;</a>    <a id="1919" class="Symbol">:</a> <a id="1921" href="Leios.Base.html#3313" class="Function">B.State</a>
                 <a id="1946" href="Leios.Short.html#1946" class="Generalizable">ks</a> <a id="1949" href="Leios.Short.html#1949" class="Generalizable">ks&#39;</a> <a id="1953" class="Symbol">:</a> <a id="1955" href="Leios.KeyRegistration.html#453" class="Function">K.State</a>
                 <a id="1980" href="Leios.Short.html#1980" class="Generalizable">msgs</a>   <a id="1987" class="Symbol">:</a> <a id="1989" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="1994" class="Symbol">(</a><a id="1995" href="Leios.FFD.html#117" class="Field">FFDAbstract.Header</a> <a id="2014" href="Leios.Blocks.html#5611" class="Function">ffdAbstract</a> <a id="2026" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="2028" href="Leios.FFD.html#124" class="Field">FFDAbstract.Body</a> <a id="2045" href="Leios.Blocks.html#5611" class="Function">ffdAbstract</a><a id="2056" class="Symbol">)</a>
                 <a id="2075" href="Leios.Short.html#2075" class="Generalizable">i</a>      <a id="2082" class="Symbol">:</a> <a id="2084" href="Leios.FFD.html#288" class="Datatype">FFDAbstract.Input</a> <a id="2102" href="Leios.Blocks.html#5611" class="Function">ffdAbstract</a>
                 <a id="2131" href="Leios.Short.html#2131" class="Generalizable">eb</a>     <a id="2138" class="Symbol">:</a> <a id="2140" href="Leios.Blocks.html#3246" class="Function">EndorserBlock</a>
                 <a id="2171" href="Leios.Short.html#2171" class="Generalizable">ebs</a>    <a id="2178" class="Symbol">:</a> <a id="2180" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2185" href="Leios.Blocks.html#3246" class="Function">EndorserBlock</a>
                 <a id="2216" href="Leios.Short.html#2216" class="Generalizable">rbs</a>    <a id="2223" class="Symbol">:</a> <a id="2225" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2230" href="Leios.Base.html#517" class="Record">RankingBlock</a>
                 <a id="2260" href="Leios.Short.html#2260" class="Generalizable">txs</a>    <a id="2267" class="Symbol">:</a> <a id="2269" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2274" href="Leios.Abstract.html#457" class="Function">Tx</a>
                 <a id="2294" href="Leios.Short.html#2294" class="Generalizable">V</a>      <a id="2301" class="Symbol">:</a> <a id="2303" href="Leios.Base.html#691" class="Function">VTy</a>
                 <a id="2324" href="Leios.Short.html#2324" class="Generalizable">SD</a>     <a id="2331" class="Symbol">:</a> <a id="2333" href="Leios.Base.html#460" class="Function">StakeDistr</a>
                 <a id="2361" href="Leios.Short.html#2361" class="Generalizable">pks</a>    <a id="2368" class="Symbol">:</a> <a id="2370" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2375" href="Leios.VRF.html#911" class="Function">PubKey</a>
                 <a id="2399" href="Leios.Short.html#2399" class="Generalizable">cert</a>   <a id="2406" class="Symbol">:</a> <a id="2408" href="Leios.Abstract.html#601" class="Function">EBCert</a>
</pre>-->
### Block/Vote production

IBs from the last 3 pipelines are directly included in the EB, when the late IB inclusion
flag is set
<pre class="Agda"><a id="IBSelection"></a><a id="2560" href="Leios.Short.html#2560" class="Function">IBSelection</a> <a id="2572" class="Symbol">:</a> <a id="2574" href="Leios.Protocol.html#1513" class="Record">LeiosState</a> <a id="2585" class="Symbol">→</a> <a id="2587" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a> <a id="2592" class="Symbol">→</a> <a id="2594" href="Leios.Blocks.html#1518" class="Record">InputBlock</a> <a id="2605" class="Symbol">→</a> <a id="2607" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="2612" href="Leios.Short.html#2560" class="Function">IBSelection</a> <a id="2624" href="Leios.Short.html#2624" class="Bound">s</a> <a id="2626" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a> <a id="2632" class="Symbol">=</a> <a id="2634" href="Leios.Blocks.html#770" class="Function Operator">_∈ᴮ</a> <a id="2638" href="Leios.Prelude.html#1209" class="Function">slice</a> <a id="2644" href="Leios.Abstract.html#1002" class="Function">L</a> <a id="2646" class="Symbol">(</a><a id="2647" href="Leios.Protocol.html#1919" class="Field">LeiosState.slot</a> <a id="2663" href="Leios.Short.html#2624" class="Bound">s</a><a id="2664" class="Symbol">)</a> <a id="2666" class="Number">3</a>
<a id="2668" href="Leios.Short.html#2560" class="Function">IBSelection</a> <a id="2680" href="Leios.Short.html#2680" class="Bound">s</a> <a id="2682" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>  <a id="2688" class="Symbol">=</a> <a id="2690" href="Leios.Blocks.html#770" class="Function Operator">_∈ᴮ</a> <a id="2694" href="Leios.Prelude.html#1475" class="Function">slices</a> <a id="2701" href="Leios.Abstract.html#1002" class="Function">L</a> <a id="2703" class="Symbol">(</a><a id="2704" href="Leios.Protocol.html#1919" class="Field">LeiosState.slot</a> <a id="2720" href="Leios.Short.html#2680" class="Bound">s</a><a id="2721" class="Symbol">)</a> <a id="2723" class="Number">3</a> <a id="2725" class="Number">6</a>

<a id="IBSelection?"></a><a id="2728" href="Leios.Short.html#2728" class="Function">IBSelection?</a> <a id="2741" class="Symbol">:</a> <a id="2743" class="Symbol">(</a><a id="2744" href="Leios.Short.html#2744" class="Bound">s</a> <a id="2746" class="Symbol">:</a> <a id="2748" href="Leios.Protocol.html#1513" class="Record">LeiosState</a><a id="2758" class="Symbol">)</a> <a id="2760" class="Symbol">→</a> <a id="2762" class="Symbol">(</a><a id="2763" href="Leios.Short.html#2763" class="Bound">b</a> <a id="2765" class="Symbol">:</a> <a id="2767" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a><a id="2771" class="Symbol">)</a> <a id="2773" class="Symbol">→</a> <a id="2775" class="Symbol">(</a><a id="2776" href="Leios.Short.html#2776" class="Bound">ib</a> <a id="2779" class="Symbol">:</a> <a id="2781" href="Leios.Blocks.html#1518" class="Record">InputBlock</a><a id="2791" class="Symbol">)</a> <a id="2793" class="Symbol">→</a> <a id="2795" href="Relation.Nullary.Decidable.Core.html#1861" class="Record">Dec</a> <a id="2799" class="Symbol">(</a><a id="2800" href="Leios.Short.html#2560" class="Function">IBSelection</a> <a id="2812" href="Leios.Short.html#2744" class="Bound">s</a> <a id="2814" href="Leios.Short.html#2763" class="Bound">b</a> <a id="2816" href="Leios.Short.html#2776" class="Bound">ib</a><a id="2818" class="Symbol">)</a>
<a id="2820" href="Leios.Short.html#2728" class="Function">IBSelection?</a> <a id="2833" href="Leios.Short.html#2833" class="Bound">s</a> <a id="2835" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a> <a id="2841" href="Leios.Short.html#2841" class="Bound">ib</a> <a id="2844" class="Symbol">=</a> <a id="2846" href="Leios.Blocks.html#640" class="Field">slotNumber</a> <a id="2857" href="Leios.Short.html#2841" class="Bound">ib</a> <a id="2860" href="Axiom.Set.html#10771" class="Function Operator">∈?</a> <a id="2863" href="Leios.Prelude.html#1209" class="Function">slice</a> <a id="2869" href="Leios.Abstract.html#1002" class="Function">L</a> <a id="2871" class="Symbol">(</a><a id="2872" href="Leios.Protocol.html#1919" class="Field">LeiosState.slot</a> <a id="2888" href="Leios.Short.html#2833" class="Bound">s</a><a id="2889" class="Symbol">)</a> <a id="2891" class="Number">3</a>
<a id="2893" href="Leios.Short.html#2728" class="Function">IBSelection?</a> <a id="2906" href="Leios.Short.html#2906" class="Bound">s</a> <a id="2908" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="2913" href="Leios.Short.html#2913" class="Bound">ib</a>  <a id="2917" class="Symbol">=</a> <a id="2919" href="Leios.Blocks.html#640" class="Field">slotNumber</a> <a id="2930" href="Leios.Short.html#2913" class="Bound">ib</a> <a id="2933" href="Axiom.Set.html#10771" class="Function Operator">∈?</a> <a id="2936" href="Leios.Prelude.html#1475" class="Function">slices</a> <a id="2943" href="Leios.Abstract.html#1002" class="Function">L</a> <a id="2945" class="Symbol">(</a><a id="2946" href="Leios.Protocol.html#1919" class="Field">LeiosState.slot</a> <a id="2962" href="Leios.Short.html#2906" class="Bound">s</a><a id="2963" class="Symbol">)</a> <a id="2965" class="Number">3</a> <a id="2967" class="Number">6</a>
</pre>We now define the rules for block production given by the relation `_↝_`. These are split in two:

1. Positive rules, when we do need to create a block.
2. Negative rules, when we cannot create a block.

The purpose of the negative rules is to properly adjust the upkeep if
we cannot make a block.

Note that `_↝_`, starting with an empty upkeep can always make exactly
three steps corresponding to the three types of Leios specific blocks.

<pre class="Agda"><a id="3423" class="Keyword">data</a> <a id="_↝_"></a><a id="3428" href="Leios.Short.html#3428" class="Datatype Operator">_↝_</a> <a id="3432" class="Symbol">:</a> <a id="3434" href="Leios.Protocol.html#1513" class="Record">LeiosState</a> <a id="3445" class="Symbol">→</a> <a id="3447" href="Leios.Protocol.html#1513" class="Record">LeiosState</a> <a id="3458" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3460" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="3466" class="Symbol">(</a><a id="3467" href="Leios.FFD.html#288" class="Datatype">FFDAbstract.Input</a> <a id="3485" href="Leios.Blocks.html#5611" class="Function">ffdAbstract</a><a id="3496" class="Symbol">)</a> <a id="3498" class="Symbol">→</a> <a id="3500" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3505" class="Keyword">where</a>
</pre>#### Positive rules
<pre class="Agda">  <a id="_↝_.IB-Role"></a><a id="3545" href="Leios.Short.html#3545" class="InductiveConstructor">IB-Role</a> <a id="3553" class="Symbol">:</a> <a id="3555" class="Keyword">let</a> <a id="3559" class="Keyword">open</a> <a id="3564" href="Leios.Protocol.html#1513" class="Module">LeiosState</a> <a id="3575" href="Leios.Short.html#1807" class="Generalizable">s</a>
                <a id="3593" href="Leios.Short.html#3593" class="Bound">b</a> <a id="3595" class="Symbol">=</a> <a id="3597" href="Leios.Blocks.html#4766" class="InductiveConstructor">ibBody</a> <a id="3604" class="Symbol">(</a><a id="3605" class="Keyword">record</a> <a id="3612" class="Symbol">{</a> <a id="3614" href="Leios.Blocks.html#1496" class="Field">txs</a> <a id="3618" class="Symbol">=</a> <a id="3620" href="Leios.Protocol.html#1647" class="Function">ToPropose</a> <a id="3630" class="Symbol">})</a>
                <a id="3649" href="Leios.Short.html#3649" class="Bound">h</a> <a id="3651" class="Symbol">=</a> <a id="3653" href="Leios.Blocks.html#4635" class="InductiveConstructor">ibHeader</a> <a id="3662" class="Symbol">(</a><a id="3663" href="Leios.Blocks.html#2311" class="Function">mkIBHeader</a> <a id="3674" href="Leios.Protocol.html#1919" class="Function">slot</a> <a id="3679" href="Leios.SpecStructure.html#601" class="Field">id</a> <a id="3682" href="Leios.Short.html#1880" class="Generalizable">π</a> <a id="3684" href="Leios.SpecStructure.html#730" class="Field">sk-IB</a> <a id="3690" href="Leios.Protocol.html#1647" class="Function">ToPropose</a><a id="3699" class="Symbol">)</a>
          <a id="3711" class="Keyword">in</a>
          <a id="3724" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="3726" href="Leios.VRF.html#1245" class="Function">canProduceIB</a> <a id="3739" href="Leios.Protocol.html#1919" class="Function">slot</a> <a id="3744" href="Leios.SpecStructure.html#730" class="Field">sk-IB</a> <a id="3750" class="Symbol">(</a><a id="3751" href="Leios.Protocol.html#4654" class="Function">stake</a> <a id="3757" href="Leios.Short.html#1807" class="Generalizable">s</a><a id="3758" class="Symbol">)</a> <a id="3760" href="Leios.Short.html#1880" class="Generalizable">π</a>
          <a id="3772" href="Prelude.InferenceRules.html#11316" class="Function Operator">─────────────────────────────────────────────────────────────────────────</a>
          <a id="3856" href="Leios.Short.html#1807" class="Generalizable">s</a> <a id="3858" href="Leios.Short.html#3428" class="Datatype Operator">↝</a> <a id="3860" class="Symbol">(</a><a id="3861" href="Leios.Protocol.html#3730" class="Function">addUpkeep</a> <a id="3871" href="Leios.Short.html#1807" class="Generalizable">s</a> <a id="3873" href="Leios.Short.html#1179" class="InductiveConstructor">IB-Role</a> <a id="3881" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3883" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="3888" class="Symbol">(</a><a id="3889" href="Leios.FFD.html#311" class="InductiveConstructor">Send</a> <a id="3894" href="Leios.Short.html#3649" class="Bound">h</a> <a id="3896" class="Symbol">(</a><a id="3897" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="3902" href="Leios.Short.html#3593" class="Bound">b</a><a id="3903" class="Symbol">)))</a>
</pre>When η = 0 there is no indirect ledger inclusion; in case η > 0 earlier EBs might
be referenced (Full-Short Leios).
<pre class="Agda">  <a id="_↝_.EB-Role"></a><a id="4037" href="Leios.Short.html#4037" class="InductiveConstructor">EB-Role</a> <a id="4045" class="Symbol">:</a> <a id="4047" class="Keyword">let</a> <a id="4051" class="Keyword">open</a> <a id="4056" href="Leios.Protocol.html#1513" class="Module">LeiosState</a> <a id="4067" href="Leios.Short.html#1807" class="Generalizable">s</a>
                <a id="4085" href="Leios.Short.html#4085" class="Bound">ibs</a> <a id="4089" class="Symbol">=</a> <a id="4091" href="Data.List.Base.html#10687" class="Function">L.filter</a> <a id="4100" class="Symbol">(</a><a id="4101" href="Leios.Short.html#2728" class="Function">IBSelection?</a> <a id="4114" href="Leios.Short.html#1807" class="Generalizable">s</a> <a id="4116" href="Leios.Abstract.html#1064" class="Function">Late-IB-Inclusion</a><a id="4133" class="Symbol">)</a> <a id="4135" href="Leios.Protocol.html#1678" class="Function">IBs</a>
                <a id="4155" href="Leios.Short.html#4155" class="Bound">LI</a>  <a id="4159" class="Symbol">=</a> <a id="4161" href="abstract-set-theory.Prelude.html#1824" class="Function">map</a> <a id="4165" href="Leios.Blocks.html#2717" class="Function">getIBRef</a> <a id="4174" href="Leios.Short.html#4085" class="Bound">ibs</a>
                <a id="4194" href="Leios.Short.html#4194" class="Bound">LE</a>  <a id="4198" class="Symbol">=</a> <a id="4200" href="abstract-set-theory.Prelude.html#1824" class="Function">map</a> <a id="4204" href="Leios.Blocks.html#4281" class="Function">getEBRef</a> <a id="4213" href="Leios.Short.html#2171" class="Generalizable">ebs</a>
                <a id="4233" href="Leios.Short.html#4233" class="Bound">h</a>   <a id="4237" class="Symbol">=</a> <a id="4239" href="Leios.Blocks.html#3777" class="Function">mkEB</a> <a id="4244" href="Leios.Protocol.html#1919" class="Function">slot</a> <a id="4249" href="Leios.SpecStructure.html#601" class="Field">id</a> <a id="4252" href="Leios.Short.html#1880" class="Generalizable">π</a> <a id="4254" href="Leios.SpecStructure.html#736" class="Field">sk-EB</a> <a id="4260" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="4263" href="Leios.Short.html#4155" class="Bound">LI</a> <a id="4266" href="Leios.Short.html#4194" class="Bound">LE</a>
                <a id="4285" href="Leios.Short.html#4285" class="Bound">P</a>   <a id="4289" class="Symbol">=</a> <a id="4291" class="Symbol">λ</a> <a id="4293" href="Leios.Short.html#4293" class="Bound">x</a> <a id="4295" class="Symbol">→</a> <a id="4297" href="Leios.Short.html#1649" class="Function">isVoteCertified</a> <a id="4313" href="Leios.Short.html#1807" class="Generalizable">s</a> <a id="4315" href="Leios.Short.html#4293" class="Bound">x</a>
                         <a id="4342" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="4344" href="Leios.Short.html#4293" class="Bound">x</a> <a id="4346" href="abstract-set-theory.Prelude.html#563" class="Function Operator">∈ˡ</a> <a id="4349" href="Leios.Protocol.html#2379" class="Function">EBs</a>
                         <a id="4378" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="4380" href="Leios.Short.html#4293" class="Bound">x</a> <a id="4382" href="Leios.Blocks.html#770" class="Function Operator">∈ᴮ</a> <a id="4385" href="Leios.Prelude.html#1475" class="Function">slices</a> <a id="4392" href="Leios.Abstract.html#1002" class="Function">L</a> <a id="4394" href="Leios.Protocol.html#1919" class="Function">slot</a> <a id="4399" class="Number">2</a> <a id="4401" class="Symbol">(</a><a id="4402" class="Number">3</a> <a id="4404" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="4406" href="Leios.Abstract.html#1050" class="Function">η</a> <a id="4408" href="Data.Nat.Base.html#7096" class="Function Operator">/</a> <a id="4410" href="Leios.Abstract.html#1002" class="Function">L</a><a id="4411" class="Symbol">)</a>
                <a id="4429" href="Leios.Short.html#4429" class="Bound">slots</a> <a id="4435" class="Symbol">=</a> <a id="4437" href="abstract-set-theory.Prelude.html#1824" class="Function">map</a> <a id="4441" href="Leios.Blocks.html#640" class="Field">slotNumber</a>
          <a id="4462" class="Keyword">in</a>
          <a id="4475" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="4477" href="Leios.Protocol.html#3088" class="Function">needsUpkeep</a> <a id="4489" href="Leios.Short.html#1187" class="InductiveConstructor">EB-Role</a>
          <a id="4507" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="4509" href="Leios.VRF.html#1849" class="Function">canProduceEB</a> <a id="4522" href="Leios.Protocol.html#1919" class="Function">slot</a> <a id="4527" href="Leios.SpecStructure.html#736" class="Field">sk-EB</a> <a id="4533" class="Symbol">(</a><a id="4534" href="Leios.Protocol.html#4654" class="Function">stake</a> <a id="4540" href="Leios.Short.html#1807" class="Generalizable">s</a><a id="4541" class="Symbol">)</a> <a id="4543" href="Leios.Short.html#1880" class="Generalizable">π</a>
          <a id="4555" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="4557" href="Data.List.Relation.Unary.All.html#1639" class="Datatype">All.All</a> <a id="4565" href="Leios.Short.html#4285" class="Bound">P</a> <a id="4567" href="Leios.Short.html#2171" class="Generalizable">ebs</a>
          <a id="4581" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="4583" href="Data.List.Relation.Unary.Unique.Setoid.html#785" class="Datatype">Unique</a> <a id="4590" class="Symbol">(</a><a id="4591" href="Leios.Short.html#4429" class="Bound">slots</a> <a id="4597" href="Leios.Short.html#2171" class="Generalizable">ebs</a><a id="4600" class="Symbol">)</a> <a id="4602" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="4604" href="Axiom.Set.html#5718" class="Function">fromList</a> <a id="4613" class="Symbol">(</a><a id="4614" href="Leios.Short.html#4429" class="Bound">slots</a> <a id="4620" href="Leios.Short.html#2171" class="Generalizable">ebs</a><a id="4623" class="Symbol">)</a> <a id="4625" href="Axiom.Set.html#2587" class="Function Operator">≡ᵉ</a> <a id="4628" href="Axiom.Set.html#5718" class="Function">fromList</a> <a id="4637" class="Symbol">(</a><a id="4638" href="Leios.Short.html#4429" class="Bound">slots</a> <a id="4644" class="Symbol">(</a><a id="4645" href="Leios.Prelude.html#1588" class="Function">filter</a> <a id="4652" href="Leios.Short.html#4285" class="Bound">P</a> <a id="4654" href="Leios.Protocol.html#2379" class="Function">EBs</a><a id="4657" class="Symbol">))</a>
          <a id="4670" href="Prelude.InferenceRules.html#11316" class="Function Operator">─────────────────────────────────────────────────────────────────────────</a>
          <a id="4754" href="Leios.Short.html#1807" class="Generalizable">s</a> <a id="4756" href="Leios.Short.html#3428" class="Datatype Operator">↝</a> <a id="4758" class="Symbol">(</a><a id="4759" href="Leios.Protocol.html#3730" class="Function">addUpkeep</a> <a id="4769" href="Leios.Short.html#1807" class="Generalizable">s</a> <a id="4771" href="Leios.Short.html#1187" class="InductiveConstructor">EB-Role</a> <a id="4779" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4781" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="4786" class="Symbol">(</a><a id="4787" href="Leios.FFD.html#311" class="InductiveConstructor">Send</a> <a id="4792" class="Symbol">(</a><a id="4793" href="Leios.Blocks.html#4668" class="InductiveConstructor">ebHeader</a> <a id="4802" href="Leios.Short.html#4233" class="Bound">h</a><a id="4803" class="Symbol">)</a> <a id="4805" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="4812" class="Symbol">))</a>
</pre><pre class="Agda">  <a id="_↝_.VT-Role"></a><a id="4829" href="Leios.Short.html#4829" class="InductiveConstructor">VT-Role</a> <a id="4837" class="Symbol">:</a> <a id="4839" class="Keyword">let</a> <a id="4843" class="Keyword">open</a> <a id="4848" href="Leios.Protocol.html#1513" class="Module">LeiosState</a> <a id="4859" href="Leios.Short.html#1807" class="Generalizable">s</a>
                <a id="4877" href="Leios.Short.html#4877" class="Bound">EBs&#39;</a> <a id="4882" class="Symbol">=</a> <a id="4884" href="Leios.Prelude.html#1588" class="Function">filter</a> <a id="4891" class="Symbol">(</a><a id="4892" href="Leios.Protocol.html#8190" class="Function">allIBRefsKnown</a> <a id="4907" href="Leios.Short.html#1807" class="Generalizable">s</a><a id="4908" class="Symbol">)</a> <a id="4910" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="4912" href="Leios.Prelude.html#1588" class="Function">filter</a> <a id="4919" class="Symbol">(</a><a id="4920" href="Leios.Blocks.html#770" class="Function Operator">_∈ᴮ</a> <a id="4924" href="Leios.Prelude.html#1209" class="Function">slice</a> <a id="4930" href="Leios.Abstract.html#1002" class="Function">L</a> <a id="4932" href="Leios.Protocol.html#1919" class="Function">slot</a> <a id="4937" class="Number">1</a><a id="4938" class="Symbol">)</a> <a id="4940" href="Leios.Protocol.html#2379" class="Function">EBs</a>
                <a id="4960" href="Leios.Short.html#4960" class="Bound">votes</a> <a id="4966" class="Symbol">=</a> <a id="4968" href="abstract-set-theory.Prelude.html#1824" class="Function">map</a> <a id="4972" class="Symbol">(</a><a id="4973" href="Leios.Abstract.html#844" class="Function">vote</a> <a id="4978" href="Leios.SpecStructure.html#742" class="Field">sk-VT</a> <a id="4984" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="4986" href="Class.Hashable.html#167" class="Field">hash</a><a id="4990" class="Symbol">)</a> <a id="4992" href="Leios.Short.html#4877" class="Bound">EBs&#39;</a>
          <a id="5007" class="Keyword">in</a>
          <a id="5020" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="5022" href="Leios.Protocol.html#3150" class="Function">needsUpkeep-Stage</a> <a id="5040" href="Leios.Short.html#1347" class="InductiveConstructor">VT-Role</a>
          <a id="5058" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="5060" href="Leios.VRF.html#2453" class="Function">canProduceV</a> <a id="5072" href="Leios.Protocol.html#1919" class="Function">slot</a> <a id="5077" href="Leios.SpecStructure.html#742" class="Field">sk-VT</a> <a id="5083" class="Symbol">(</a><a id="5084" href="Leios.Protocol.html#4654" class="Function">stake</a> <a id="5090" href="Leios.Short.html#1807" class="Generalizable">s</a><a id="5091" class="Symbol">)</a>
          <a id="5103" href="Prelude.InferenceRules.html#11316" class="Function Operator">─────────────────────────────────────────────────────────────────────────</a>
          <a id="5187" href="Leios.Short.html#1807" class="Generalizable">s</a> <a id="5189" href="Leios.Short.html#3428" class="Datatype Operator">↝</a> <a id="5191" class="Symbol">(</a><a id="5192" href="Leios.Protocol.html#3896" class="Function">addUpkeep-Stage</a> <a id="5208" href="Leios.Short.html#1807" class="Generalizable">s</a> <a id="5210" href="Leios.Short.html#1347" class="InductiveConstructor">VT-Role</a> <a id="5218" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5220" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="5225" class="Symbol">(</a><a id="5226" href="Leios.FFD.html#311" class="InductiveConstructor">Send</a> <a id="5231" class="Symbol">(</a><a id="5232" href="Leios.Blocks.html#4706" class="InductiveConstructor">vtHeader</a> <a id="5241" href="Leios.Short.html#4960" class="Bound">votes</a><a id="5246" class="Symbol">)</a> <a id="5248" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="5255" class="Symbol">))</a>
</pre>#### Negative rules
<pre class="Agda">  <a id="_↝_.No-IB-Role"></a><a id="5292" href="Leios.Short.html#5292" class="InductiveConstructor">No-IB-Role</a> <a id="5303" class="Symbol">:</a> <a id="5305" class="Keyword">let</a> <a id="5309" class="Keyword">open</a> <a id="5314" href="Leios.Protocol.html#1513" class="Module">LeiosState</a> <a id="5325" href="Leios.Short.html#1807" class="Generalizable">s</a> <a id="5327" class="Keyword">in</a>
             <a id="5343" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="5345" href="Leios.Protocol.html#3088" class="Function">needsUpkeep</a> <a id="5357" href="Leios.Short.html#1179" class="InductiveConstructor">IB-Role</a>
             <a id="5378" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="5380" class="Symbol">(∀</a> <a id="5383" href="Leios.Short.html#5383" class="Bound">π</a> <a id="5385" class="Symbol">→</a> <a id="5387" href="Relation.Nullary.Negation.Core.html#658" class="Function Operator">¬</a> <a id="5389" href="Leios.VRF.html#1245" class="Function">canProduceIB</a> <a id="5402" href="Leios.Protocol.html#1919" class="Function">slot</a> <a id="5407" href="Leios.SpecStructure.html#730" class="Field">sk-IB</a> <a id="5413" class="Symbol">(</a><a id="5414" href="Leios.Protocol.html#4654" class="Function">stake</a> <a id="5420" href="Leios.Short.html#1807" class="Generalizable">s</a><a id="5421" class="Symbol">)</a> <a id="5423" href="Leios.Short.html#5383" class="Bound">π</a><a id="5424" class="Symbol">)</a>
             <a id="5439" href="Prelude.InferenceRules.html#13122" class="Function Operator">─────────────────────────────────────────────</a>
             <a id="5498" href="Leios.Short.html#1807" class="Generalizable">s</a> <a id="5500" href="Leios.Short.html#3428" class="Datatype Operator">↝</a> <a id="5502" class="Symbol">(</a><a id="5503" href="Leios.Protocol.html#3730" class="Function">addUpkeep</a> <a id="5513" href="Leios.Short.html#1807" class="Generalizable">s</a> <a id="5515" href="Leios.Short.html#1179" class="InductiveConstructor">IB-Role</a> <a id="5523" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5525" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="5532" class="Symbol">)</a>
</pre><pre class="Agda">  <a id="_↝_.No-EB-Role"></a><a id="5548" href="Leios.Short.html#5548" class="InductiveConstructor">No-EB-Role</a> <a id="5559" class="Symbol">:</a> <a id="5561" class="Keyword">let</a> <a id="5565" class="Keyword">open</a> <a id="5570" href="Leios.Protocol.html#1513" class="Module">LeiosState</a> <a id="5581" href="Leios.Short.html#1807" class="Generalizable">s</a> <a id="5583" class="Keyword">in</a>
             <a id="5599" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="5601" href="Leios.Protocol.html#3088" class="Function">needsUpkeep</a> <a id="5613" href="Leios.Short.html#1187" class="InductiveConstructor">EB-Role</a>
             <a id="5634" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="5636" class="Symbol">(∀</a> <a id="5639" href="Leios.Short.html#5639" class="Bound">π</a> <a id="5641" class="Symbol">→</a> <a id="5643" href="Relation.Nullary.Negation.Core.html#658" class="Function Operator">¬</a> <a id="5645" href="Leios.VRF.html#1849" class="Function">canProduceEB</a> <a id="5658" href="Leios.Protocol.html#1919" class="Function">slot</a> <a id="5663" href="Leios.SpecStructure.html#736" class="Field">sk-EB</a> <a id="5669" class="Symbol">(</a><a id="5670" href="Leios.Protocol.html#4654" class="Function">stake</a> <a id="5676" href="Leios.Short.html#1807" class="Generalizable">s</a><a id="5677" class="Symbol">)</a> <a id="5679" href="Leios.Short.html#5639" class="Bound">π</a><a id="5680" class="Symbol">)</a>
             <a id="5695" href="Prelude.InferenceRules.html#13122" class="Function Operator">─────────────────────────────────────────────</a>
             <a id="5754" href="Leios.Short.html#1807" class="Generalizable">s</a> <a id="5756" href="Leios.Short.html#3428" class="Datatype Operator">↝</a> <a id="5758" class="Symbol">(</a><a id="5759" href="Leios.Protocol.html#3730" class="Function">addUpkeep</a> <a id="5769" href="Leios.Short.html#1807" class="Generalizable">s</a> <a id="5771" href="Leios.Short.html#1187" class="InductiveConstructor">EB-Role</a> <a id="5779" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5781" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="5788" class="Symbol">)</a>
</pre><pre class="Agda">  <a id="_↝_.No-VT-Role"></a><a id="5804" href="Leios.Short.html#5804" class="InductiveConstructor">No-VT-Role</a> <a id="5815" class="Symbol">:</a> <a id="5817" class="Keyword">let</a> <a id="5821" class="Keyword">open</a> <a id="5826" href="Leios.Protocol.html#1513" class="Module">LeiosState</a> <a id="5837" href="Leios.Short.html#1807" class="Generalizable">s</a> <a id="5839" class="Keyword">in</a>
             <a id="5855" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="5857" href="Leios.Protocol.html#3150" class="Function">needsUpkeep-Stage</a> <a id="5875" href="Leios.Short.html#1347" class="InductiveConstructor">VT-Role</a>
             <a id="5896" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="5898" href="Relation.Nullary.Negation.Core.html#658" class="Function Operator">¬</a> <a id="5900" href="Leios.VRF.html#2453" class="Function">canProduceV</a> <a id="5912" href="Leios.Protocol.html#1919" class="Function">slot</a> <a id="5917" href="Leios.SpecStructure.html#742" class="Field">sk-VT</a> <a id="5923" class="Symbol">(</a><a id="5924" href="Leios.Protocol.html#4654" class="Function">stake</a> <a id="5930" href="Leios.Short.html#1807" class="Generalizable">s</a><a id="5931" class="Symbol">)</a>
             <a id="5946" href="Prelude.InferenceRules.html#13122" class="Function Operator">─────────────────────────────────────────────</a>
             <a id="6005" href="Leios.Short.html#1807" class="Generalizable">s</a> <a id="6007" href="Leios.Short.html#3428" class="Datatype Operator">↝</a> <a id="6009" class="Symbol">(</a><a id="6010" href="Leios.Protocol.html#3896" class="Function">addUpkeep-Stage</a> <a id="6026" href="Leios.Short.html#1807" class="Generalizable">s</a> <a id="6028" href="Leios.Short.html#1347" class="InductiveConstructor">VT-Role</a> <a id="6036" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6038" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="6045" class="Symbol">)</a>
</pre>### Uniform short-pipeline
<pre class="Agda"><a id="stage"></a><a id="6086" href="Leios.Short.html#6086" class="Function">stage</a> <a id="6092" class="Symbol">:</a> <a id="6094" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="6096" class="Symbol">→</a> <a id="6098" class="Symbol">⦃</a> <a id="6100" href="Leios.Short.html#6100" class="Bound">_</a> <a id="6102" class="Symbol">:</a> <a id="6104" href="Data.Nat.Base.html#3260" class="Record">NonZero</a> <a id="6112" href="Leios.Abstract.html#1002" class="Function">L</a> <a id="6114" class="Symbol">⦄</a> <a id="6116" class="Symbol">→</a> <a id="6118" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
<a id="6120" href="Leios.Short.html#6086" class="Function">stage</a> <a id="6126" href="Leios.Short.html#6126" class="Bound">s</a> <a id="6128" class="Symbol">=</a> <a id="6130" href="Leios.Short.html#6126" class="Bound">s</a> <a id="6132" href="Data.Nat.Base.html#7096" class="Function Operator">/</a> <a id="6134" href="Leios.Abstract.html#1002" class="Function">L</a>

<a id="beginningOfStage"></a><a id="6137" href="Leios.Short.html#6137" class="Function">beginningOfStage</a> <a id="6154" class="Symbol">:</a> <a id="6156" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="6158" class="Symbol">→</a> <a id="6160" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="6165" href="Leios.Short.html#6137" class="Function">beginningOfStage</a> <a id="6182" href="Leios.Short.html#6182" class="Bound">s</a> <a id="6184" class="Symbol">=</a> <a id="6186" href="Leios.Short.html#6086" class="Function">stage</a> <a id="6192" href="Leios.Short.html#6182" class="Bound">s</a> <a id="6194" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="6196" href="Leios.Abstract.html#1002" class="Function">L</a> <a id="6198" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="6200" href="Leios.Short.html#6182" class="Bound">s</a>

<a id="endOfStage"></a><a id="6203" href="Leios.Short.html#6203" class="Function">endOfStage</a> <a id="6214" class="Symbol">:</a> <a id="6216" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="6218" class="Symbol">→</a> <a id="6220" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="6225" href="Leios.Short.html#6203" class="Function">endOfStage</a> <a id="6236" href="Leios.Short.html#6236" class="Bound">s</a> <a id="6238" class="Symbol">=</a> <a id="6240" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="6244" class="Symbol">(</a><a id="6245" href="Leios.Short.html#6086" class="Function">stage</a> <a id="6251" href="Leios.Short.html#6236" class="Bound">s</a><a id="6252" class="Symbol">)</a> <a id="6254" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="6256" href="Leios.Short.html#6086" class="Function">stage</a> <a id="6262" class="Symbol">(</a><a id="6263" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="6267" href="Leios.Short.html#6236" class="Bound">s</a><a id="6268" class="Symbol">)</a>
</pre>Predicate needed for slot transition. Special care needs to be taken when starting from
genesis.
<pre class="Agda"><a id="allDone"></a><a id="6379" href="Leios.Short.html#6379" class="Function">allDone</a> <a id="6387" class="Symbol">:</a> <a id="6389" href="Leios.Protocol.html#1513" class="Record">LeiosState</a> <a id="6400" class="Symbol">→</a> <a id="6402" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="6407" href="Leios.Short.html#6379" class="Function">allDone</a> <a id="6415" class="Keyword">record</a> <a id="6422" class="Symbol">{</a> <a id="6424" href="Leios.Protocol.html#1919" class="Field">slot</a> <a id="6429" class="Symbol">=</a> <a id="6431" href="Leios.Short.html#6431" class="Bound">s</a> <a id="6433" class="Symbol">;</a> <a id="6435" href="Leios.Protocol.html#2016" class="Field">Upkeep</a> <a id="6442" class="Symbol">=</a> <a id="6444" href="Leios.Short.html#6444" class="Bound">u</a> <a id="6446" class="Symbol">;</a> <a id="6448" href="Leios.Protocol.html#2055" class="Field">Upkeep-Stage</a> <a id="6461" class="Symbol">=</a> <a id="6463" href="Leios.Short.html#6463" class="Bound">v</a> <a id="6465" class="Symbol">}</a> <a id="6467" class="Symbol">=</a>
  <a id="6471" class="Comment">-- bootstrapping</a>
    <a id="6492" class="Symbol">(</a><a id="6493" href="Leios.Short.html#6086" class="Function">stage</a> <a id="6499" href="Leios.Short.html#6431" class="Bound">s</a> <a id="6501" href="Class.HasOrder.Core.html#555" class="Field Operator">&lt;</a> <a id="6503" class="Number">3</a> <a id="6505" href="Data.Product.Base.html#1618" class="Function Operator">×</a>                        <a id="6530" href="Leios.Short.html#1179" class="InductiveConstructor">IB-Role</a> <a id="6538" href="abstract-set-theory.Prelude.html#563" class="Function Operator">∈ˡ</a> <a id="6541" href="Leios.Short.html#6444" class="Bound">u</a>                <a id="6558" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="6560" href="Leios.Short.html#1174" class="InductiveConstructor">Base</a> <a id="6565" href="abstract-set-theory.Prelude.html#563" class="Function Operator">∈ˡ</a> <a id="6568" href="Leios.Short.html#6444" class="Bound">u</a><a id="6569" class="Symbol">)</a>
  <a id="6573" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="6575" class="Symbol">(</a><a id="6576" href="Leios.Short.html#6086" class="Function">stage</a> <a id="6582" href="Leios.Short.html#6431" class="Bound">s</a> <a id="6584" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="6586" class="Number">3</a> <a id="6588" href="Data.Product.Base.html#1618" class="Function Operator">×</a>   <a id="6592" href="Leios.Short.html#6137" class="Function">beginningOfStage</a> <a id="6609" href="Leios.Short.html#6431" class="Bound">s</a> <a id="6611" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="6613" href="Leios.Short.html#1179" class="InductiveConstructor">IB-Role</a> <a id="6621" href="abstract-set-theory.Prelude.html#563" class="Function Operator">∈ˡ</a> <a id="6624" href="Leios.Short.html#6444" class="Bound">u</a> <a id="6626" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="6628" href="Leios.Short.html#1187" class="InductiveConstructor">EB-Role</a> <a id="6636" href="abstract-set-theory.Prelude.html#563" class="Function Operator">∈ˡ</a> <a id="6639" href="Leios.Short.html#6444" class="Bound">u</a> <a id="6641" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="6643" href="Leios.Short.html#1174" class="InductiveConstructor">Base</a> <a id="6648" href="abstract-set-theory.Prelude.html#563" class="Function Operator">∈ˡ</a> <a id="6651" href="Leios.Short.html#6444" class="Bound">u</a><a id="6652" class="Symbol">)</a>
  <a id="6656" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="6658" class="Symbol">(</a><a id="6659" href="Leios.Short.html#6086" class="Function">stage</a> <a id="6665" href="Leios.Short.html#6431" class="Bound">s</a> <a id="6667" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="6669" class="Number">3</a> <a id="6671" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="6673" href="Relation.Nullary.Negation.Core.html#658" class="Function Operator">¬</a> <a id="6675" href="Leios.Short.html#6137" class="Function">beginningOfStage</a> <a id="6692" href="Leios.Short.html#6431" class="Bound">s</a> <a id="6694" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="6696" href="Leios.Short.html#1179" class="InductiveConstructor">IB-Role</a> <a id="6704" href="abstract-set-theory.Prelude.html#563" class="Function Operator">∈ˡ</a> <a id="6707" href="Leios.Short.html#6444" class="Bound">u</a>                <a id="6724" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="6726" href="Leios.Short.html#1174" class="InductiveConstructor">Base</a> <a id="6731" href="abstract-set-theory.Prelude.html#563" class="Function Operator">∈ˡ</a> <a id="6734" href="Leios.Short.html#6444" class="Bound">u</a><a id="6735" class="Symbol">)</a>
  <a id="6739" class="Comment">-- done</a>
  <a id="6749" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="6751" class="Symbol">(</a><a id="6752" href="Leios.Short.html#6086" class="Function">stage</a> <a id="6758" href="Leios.Short.html#6431" class="Bound">s</a> <a id="6760" href="Class.HasOrder.Core.html#748" class="Function Operator">&gt;</a> <a id="6762" class="Number">3</a> <a id="6764" href="Data.Product.Base.html#1618" class="Function Operator">×</a>   <a id="6768" href="Leios.Short.html#6137" class="Function">beginningOfStage</a> <a id="6785" href="Leios.Short.html#6431" class="Bound">s</a> <a id="6787" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="6789" href="Leios.Short.html#1179" class="InductiveConstructor">IB-Role</a> <a id="6797" href="abstract-set-theory.Prelude.html#563" class="Function Operator">∈ˡ</a> <a id="6800" href="Leios.Short.html#6444" class="Bound">u</a> <a id="6802" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="6804" href="Leios.Short.html#1187" class="InductiveConstructor">EB-Role</a> <a id="6812" href="abstract-set-theory.Prelude.html#563" class="Function Operator">∈ˡ</a> <a id="6815" href="Leios.Short.html#6444" class="Bound">u</a> <a id="6817" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="6819" href="Leios.Short.html#1174" class="InductiveConstructor">Base</a> <a id="6824" href="abstract-set-theory.Prelude.html#563" class="Function Operator">∈ˡ</a> <a id="6827" href="Leios.Short.html#6444" class="Bound">u</a><a id="6828" class="Symbol">)</a>
  <a id="6832" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="6834" class="Symbol">(</a><a id="6835" href="Leios.Short.html#6086" class="Function">stage</a> <a id="6841" href="Leios.Short.html#6431" class="Bound">s</a> <a id="6843" href="Class.HasOrder.Core.html#748" class="Function Operator">&gt;</a> <a id="6845" class="Number">3</a> <a id="6847" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="6849" href="Relation.Nullary.Negation.Core.html#658" class="Function Operator">¬</a> <a id="6851" href="Leios.Short.html#6137" class="Function">beginningOfStage</a> <a id="6868" href="Leios.Short.html#6431" class="Bound">s</a> <a id="6870" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="6872" href="Leios.Short.html#1179" class="InductiveConstructor">IB-Role</a> <a id="6880" href="abstract-set-theory.Prelude.html#563" class="Function Operator">∈ˡ</a> <a id="6883" href="Leios.Short.html#6444" class="Bound">u</a>                <a id="6900" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="6902" href="Leios.Short.html#1174" class="InductiveConstructor">Base</a> <a id="6907" href="abstract-set-theory.Prelude.html#563" class="Function Operator">∈ˡ</a> <a id="6910" href="Leios.Short.html#6444" class="Bound">u</a><a id="6911" class="Symbol">)</a> <a id="6913" href="Data.Product.Base.html#1618" class="Function Operator">×</a>
       <a id="6922" class="Symbol">(((</a>  <a id="6927" href="Leios.Short.html#6203" class="Function">endOfStage</a> <a id="6938" href="Leios.Short.html#6431" class="Bound">s</a> <a id="6940" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="6942" href="Leios.Short.html#6463" class="Bound">v</a> <a id="6944" href="Axiom.Set.html#2587" class="Function Operator">≡ᵉ</a> <a id="6947" href="Axiom.Set.html#5718" class="Function">fromList</a> <a id="6956" class="Symbol">(</a><a id="6957" href="Leios.Short.html#1347" class="InductiveConstructor">VT-Role</a> <a id="6965" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6967" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="6969" class="Symbol">))</a>
       <a id="6979" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="6981" class="Symbol">(</a><a id="6982" href="Relation.Nullary.Negation.Core.html#658" class="Function Operator">¬</a> <a id="6984" href="Leios.Short.html#6203" class="Function">endOfStage</a> <a id="6995" href="Leios.Short.html#6431" class="Bound">s</a><a id="6996" class="Symbol">)))</a>
</pre>### (Full-)Short Leios transitions
The relation describing the transition given input and state
#### Initialization
<pre class="Agda"><a id="7128" class="Keyword">open</a> <a id="7133" href="Leios.Protocol.html#10190" class="Module">Types</a> <a id="7139" href="Leios.Short.html#462" class="Bound">params</a>

<a id="7147" class="Keyword">data</a> <a id="_⊢_"></a><a id="7152" href="Leios.Short.html#7152" class="Datatype Operator">_⊢_</a> <a id="7156" class="Symbol">:</a> <a id="7158" href="Leios.Base.html#691" class="Function">VTy</a> <a id="7162" class="Symbol">→</a> <a id="7164" href="Leios.Protocol.html#1513" class="Record">LeiosState</a> <a id="7175" class="Symbol">→</a> <a id="7177" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="7182" class="Keyword">where</a>
  <a id="_⊢_.Init"></a><a id="7190" href="Leios.Short.html#7190" class="InductiveConstructor">Init</a> <a id="7195" class="Symbol">:</a>
       <a id="7204" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="7206" href="Leios.Short.html#1946" class="Generalizable">ks</a> <a id="7209" href="Leios.KeyRegistration.html#476" class="Function Operator">K.-⟦</a> <a id="7214" href="Leios.KeyRegistration.html#302" class="InductiveConstructor">K.INIT</a> <a id="7221" href="Leios.SpecStructure.html#766" class="Field">pk-IB</a> <a id="7227" href="Leios.SpecStructure.html#772" class="Field">pk-EB</a> <a id="7233" href="Leios.SpecStructure.html#778" class="Field">pk-VT</a> <a id="7239" href="Leios.KeyRegistration.html#476" class="Function Operator">/</a> <a id="7241" href="Leios.KeyRegistration.html#374" class="InductiveConstructor">K.PUBKEYS</a> <a id="7251" href="Leios.Short.html#2361" class="Generalizable">pks</a> <a id="7255" href="Leios.KeyRegistration.html#476" class="Function Operator">⟧⇀</a> <a id="7258" href="Leios.Short.html#1949" class="Generalizable">ks&#39;</a>
       <a id="7269" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="7271" href="Leios.SpecStructure.html#904" class="Field">initBaseState</a> <a id="7285" href="Leios.Base.html#3336" class="Function Operator">B.-⟦</a> <a id="7290" href="Leios.Base.html#1450" class="InductiveConstructor">B.INIT</a> <a id="7297" class="Symbol">(</a><a id="7298" href="Leios.Base.html#737" class="Function">V-chkCerts</a> <a id="7309" href="Leios.Short.html#2361" class="Generalizable">pks</a><a id="7312" class="Symbol">)</a> <a id="7314" href="Leios.Base.html#3336" class="Function Operator">/</a> <a id="7316" href="Leios.Base.html#2651" class="InductiveConstructor">B.STAKE</a> <a id="7324" href="Leios.Short.html#2324" class="Generalizable">SD</a> <a id="7327" href="Leios.Base.html#3336" class="Function Operator">⟧⇀</a> <a id="7330" href="Leios.Short.html#1912" class="Generalizable">bs&#39;</a> <a id="7334" class="Comment">-- TODO: replace this line</a>
       <a id="7368" href="Prelude.InferenceRules.html#11982" class="Function Operator">────────────────────────────────────────────────────────────────</a>
       <a id="7440" href="Leios.Short.html#2294" class="Generalizable">V</a> <a id="7442" href="Leios.Short.html#7152" class="Datatype Operator">⊢</a> <a id="7444" href="Leios.Protocol.html#4049" class="Function">initLeiosState</a> <a id="7459" href="Leios.Short.html#2294" class="Generalizable">V</a> <a id="7461" href="Leios.Short.html#2324" class="Generalizable">SD</a> <a id="7464" href="Leios.Short.html#2361" class="Generalizable">pks</a>
</pre><pre class="Agda"><a id="7480" class="Keyword">data</a> <a id="_-⟦_/_⟧⇀_"></a><a id="7485" href="Leios.Short.html#7485" class="Datatype Operator">_-⟦_/_⟧⇀_</a> <a id="7495" class="Symbol">:</a> <a id="7497" href="CategoricalCrypto.Machine.Core.html#776" class="Function">MachineType</a> <a id="7509" class="Symbol">(</a><a id="7510" href="Leios.Protocol.html#10909" class="Function">FFD</a> <a id="7514" href="CategoricalCrypto.Channel.Core.html#3164" class="Function Operator">⊗</a> <a id="7516" href="Leios.Protocol.html#11097" class="Function">BaseC</a><a id="7521" class="Symbol">)</a> <a id="7523" class="Symbol">(</a><a id="7524" href="Leios.Protocol.html#10628" class="Function">IO</a> <a id="7527" href="CategoricalCrypto.Channel.Core.html#3164" class="Function Operator">⊗</a> <a id="7529" href="Leios.Protocol.html#10671" class="Function">Adv</a><a id="7532" class="Symbol">)</a> <a id="7534" href="Leios.Protocol.html#1513" class="Record">LeiosState</a> <a id="7545" class="Keyword">where</a>
</pre>#### Network and Ledger
<pre class="Agda">  <a id="_-⟦_/_⟧⇀_.Slot₁"></a><a id="7589" href="Leios.Short.html#7589" class="InductiveConstructor">Slot₁</a> <a id="7595" class="Symbol">:</a> <a id="7597" class="Keyword">let</a> <a id="7601" class="Keyword">open</a> <a id="7606" href="Leios.Protocol.html#1513" class="Module">LeiosState</a> <a id="7617" href="Leios.Short.html#1807" class="Generalizable">s</a> <a id="7619" class="Keyword">in</a>
        <a id="7630" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="7632" href="Leios.Short.html#6379" class="Function">allDone</a> <a id="7640" href="Leios.Short.html#1807" class="Generalizable">s</a>
        <a id="7650" href="Prelude.InferenceRules.html#11316" class="Function Operator">─────────────────────────────────────────────────────────────────────────</a>
        <a id="7732" href="Leios.Short.html#1807" class="Generalizable">s</a> <a id="7734" href="Leios.Short.html#7485" class="Datatype Operator">-⟦</a> <a id="7737" class="Symbol">(</a><a id="7738" href="CategoricalCrypto.Channel.Selection.html#734" class="InductiveConstructor">ϵ</a> <a id="7740" href="CategoricalCrypto.Channel.Selection.html#767" class="InductiveConstructor Operator">⊗R</a><a id="7742" class="Symbol">)</a> <a id="7744" href="CategoricalCrypto.Channel.Selection.html#767" class="InductiveConstructor Operator">⊗R</a> <a id="7747" href="CategoricalCrypto.Channel.Selection.html#1281" class="Function Operator">↑ᵢ</a> <a id="7750" href="Leios.Protocol.html#10773" class="InductiveConstructor">FFD-OUT</a> <a id="7758" href="Leios.Short.html#1980" class="Generalizable">msgs</a> <a id="7763" href="Leios.Short.html#7485" class="Datatype Operator">/</a> <a id="7765" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="7770" class="Symbol">((</a><a id="7772" href="CategoricalCrypto.Channel.Selection.html#834" class="InductiveConstructor Operator">L⊗</a> <a id="7775" href="CategoricalCrypto.Channel.Selection.html#734" class="InductiveConstructor">ϵ</a><a id="7776" class="Symbol">)</a> <a id="7778" href="CategoricalCrypto.Channel.Selection.html#767" class="InductiveConstructor Operator">⊗R</a> <a id="7781" href="CategoricalCrypto.Channel.Selection.html#1296" class="Function Operator">↑ₒ</a> <a id="7784" href="Leios.Protocol.html#10990" class="InductiveConstructor">FTCH-LDG</a><a id="7792" class="Symbol">)</a> <a id="7794" href="Leios.Short.html#7485" class="Datatype Operator">⟧⇀</a> <a id="7797" class="Keyword">record</a> <a id="7804" href="Leios.Short.html#1807" class="Generalizable">s</a>
            <a id="7818" class="Symbol">{</a> <a id="7820" href="Leios.Protocol.html#1919" class="Field">slot</a>         <a id="7833" class="Symbol">=</a> <a id="7835" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="7839" href="Leios.Protocol.html#1919" class="Function">slot</a>
            <a id="7856" class="Symbol">;</a> <a id="7858" href="Leios.Protocol.html#2016" class="Field">Upkeep</a>       <a id="7871" class="Symbol">=</a> <a id="7873" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>
            <a id="7888" class="Symbol">;</a> <a id="7890" href="Leios.Protocol.html#2055" class="Field">Upkeep-Stage</a> <a id="7903" class="Symbol">=</a> <a id="7905" href="Class.Decidable.Core.html#593" class="Function Operator">ifᵈ</a> <a id="7909" class="Symbol">(</a><a id="7910" href="Leios.Short.html#6203" class="Function">endOfStage</a> <a id="7921" href="Leios.Protocol.html#1919" class="Function">slot</a><a id="7925" class="Symbol">)</a> <a id="7927" href="Class.Decidable.Core.html#593" class="Function Operator">then</a> <a id="7932" href="Class.HasEmptySet.html#287" class="Field">∅</a> <a id="7934" href="Class.Decidable.Core.html#593" class="Function Operator">else</a> <a id="7939" href="Leios.Protocol.html#2055" class="Function">Upkeep-Stage</a>
            <a id="7964" class="Symbol">}</a> <a id="7966" href="Leios.Protocol.html#9696" class="Function Operator">↑</a> <a id="7968" href="Data.List.Base.html#10687" class="Function">L.filter</a> <a id="7977" class="Symbol">(</a><a id="7978" href="Leios.Protocol.html#7929" class="Function">isValid?</a> <a id="7987" href="Leios.Short.html#1807" class="Generalizable">s</a><a id="7988" class="Symbol">)</a> <a id="7990" href="Leios.Short.html#1980" class="Generalizable">msgs</a>

  <a id="_-⟦_/_⟧⇀_.Slot₂"></a><a id="7998" href="Leios.Short.html#7998" class="InductiveConstructor">Slot₂</a> <a id="8004" class="Symbol">:</a> <a id="8006" class="Keyword">let</a> <a id="8010" class="Keyword">open</a> <a id="8015" href="Leios.Protocol.html#1513" class="Module">LeiosState</a> <a id="8026" href="Leios.Short.html#1807" class="Generalizable">s</a> <a id="8028" class="Keyword">in</a>
        <a id="8039" href="Prelude.InferenceRules.html#41257" class="Function Operator">──────────────────────────────────────────────────────────────────</a>
        <a id="8114" href="Leios.Short.html#1807" class="Generalizable">s</a> <a id="8116" href="Leios.Short.html#7485" class="Datatype Operator">-⟦</a> <a id="8119" class="Symbol">(</a><a id="8120" href="CategoricalCrypto.Channel.Selection.html#834" class="InductiveConstructor Operator">L⊗</a> <a id="8123" href="CategoricalCrypto.Channel.Selection.html#734" class="InductiveConstructor">ϵ</a><a id="8124" class="Symbol">)</a> <a id="8126" href="CategoricalCrypto.Channel.Selection.html#767" class="InductiveConstructor Operator">⊗R</a> <a id="8129" href="CategoricalCrypto.Channel.Selection.html#1281" class="Function Operator">↑ᵢ</a> <a id="8132" href="Leios.Protocol.html#11053" class="InductiveConstructor">BASE-LDG</a> <a id="8141" href="Leios.Short.html#2216" class="Generalizable">rbs</a> <a id="8145" href="Leios.Short.html#7485" class="Datatype Operator">/</a> <a id="8147" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="8155" href="Leios.Short.html#7485" class="Datatype Operator">⟧⇀</a> <a id="8158" class="Keyword">record</a> <a id="8165" href="Leios.Short.html#1807" class="Generalizable">s</a> <a id="8167" class="Symbol">{</a> <a id="8169" href="Leios.Protocol.html#1606" class="Field">RBs</a> <a id="8173" class="Symbol">=</a> <a id="8175" href="Leios.Short.html#2216" class="Generalizable">rbs</a> <a id="8179" class="Symbol">}</a>
</pre><pre class="Agda">  <a id="_-⟦_/_⟧⇀_.Ftch"></a><a id="8195" href="Leios.Short.html#8195" class="InductiveConstructor">Ftch</a> <a id="8200" class="Symbol">:</a>
       <a id="8209" href="Prelude.InferenceRules.html#38449" class="Function Operator">──────────────────────────────────────────────────────────────────────────────────────────</a>
       <a id="8307" href="Leios.Short.html#1807" class="Generalizable">s</a> <a id="8309" href="Leios.Short.html#7485" class="Datatype Operator">-⟦</a> <a id="8312" href="CategoricalCrypto.Channel.Selection.html#834" class="InductiveConstructor Operator">L⊗</a> <a id="8315" class="Symbol">(</a><a id="8316" href="CategoricalCrypto.Channel.Selection.html#734" class="InductiveConstructor">ϵ</a> <a id="8318" href="CategoricalCrypto.Channel.Selection.html#901" class="InductiveConstructor Operator">ᵗ¹</a> <a id="8321" href="CategoricalCrypto.Channel.Selection.html#767" class="InductiveConstructor Operator">⊗R</a><a id="8323" class="Symbol">)</a> <a id="8325" href="CategoricalCrypto.Channel.Selection.html#901" class="InductiveConstructor Operator">ᵗ¹</a> <a id="8328" href="CategoricalCrypto.Channel.Selection.html#1281" class="Function Operator">↑ᵢ</a> <a id="8331" href="Leios.Protocol.html#10559" class="InductiveConstructor">FetchLdgI</a> <a id="8341" href="Leios.Short.html#7485" class="Datatype Operator">/</a> <a id="8343" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8348" class="Symbol">(</a><a id="8349" href="CategoricalCrypto.Channel.Selection.html#834" class="InductiveConstructor Operator">L⊗</a> <a id="8352" class="Symbol">(</a><a id="8353" href="CategoricalCrypto.Channel.Selection.html#734" class="InductiveConstructor">ϵ</a> <a id="8355" href="CategoricalCrypto.Channel.Selection.html#767" class="InductiveConstructor Operator">⊗R</a><a id="8357" class="Symbol">)</a> <a id="8359" href="CategoricalCrypto.Channel.Selection.html#901" class="InductiveConstructor Operator">ᵗ¹</a> <a id="8362" href="CategoricalCrypto.Channel.Selection.html#1281" class="Function Operator">↑ᵢ</a> <a id="8365" href="Leios.Protocol.html#10582" class="InductiveConstructor">FetchLdgO</a> <a id="8375" class="Symbol">(</a><a id="8376" href="Leios.Protocol.html#2937" class="Function">LeiosState.Ledger</a> <a id="8394" href="Leios.Short.html#1807" class="Generalizable">s</a><a id="8395" class="Symbol">))</a> <a id="8398" href="Leios.Short.html#7485" class="Datatype Operator">⟧⇀</a> <a id="8401" href="Leios.Short.html#1807" class="Generalizable">s</a>
</pre>#### Base chain

Note: Submitted data to the base chain is only taken into account
      if the party submitting is the block producer on the base chain
      for the given slot
<pre class="Agda">  <a id="_-⟦_/_⟧⇀_.Base₁"></a><a id="8595" href="Leios.Short.html#8595" class="InductiveConstructor">Base₁</a>   <a id="8603" class="Symbol">:</a>
          <a id="8615" href="Prelude.InferenceRules.html#40204" class="Function Operator">───────────────────────────────────────────────────────────────────────────</a>
          <a id="8701" href="Leios.Short.html#1807" class="Generalizable">s</a> <a id="8703" href="Leios.Short.html#7485" class="Datatype Operator">-⟦</a> <a id="8706" href="CategoricalCrypto.Channel.Selection.html#834" class="InductiveConstructor Operator">L⊗</a> <a id="8709" class="Symbol">(</a><a id="8710" href="CategoricalCrypto.Channel.Selection.html#734" class="InductiveConstructor">ϵ</a> <a id="8712" href="CategoricalCrypto.Channel.Selection.html#901" class="InductiveConstructor Operator">ᵗ¹</a> <a id="8715" href="CategoricalCrypto.Channel.Selection.html#767" class="InductiveConstructor Operator">⊗R</a><a id="8717" class="Symbol">)</a> <a id="8719" href="CategoricalCrypto.Channel.Selection.html#901" class="InductiveConstructor Operator">ᵗ¹</a> <a id="8722" href="CategoricalCrypto.Channel.Selection.html#1281" class="Function Operator">↑ᵢ</a> <a id="8725" href="Leios.Protocol.html#10526" class="InductiveConstructor">SubmitTxs</a> <a id="8735" href="Leios.Short.html#2260" class="Generalizable">txs</a> <a id="8739" href="Leios.Short.html#7485" class="Datatype Operator">/</a> <a id="8741" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="8749" href="Leios.Short.html#7485" class="Datatype Operator">⟧⇀</a> <a id="8752" class="Keyword">record</a> <a id="8759" href="Leios.Short.html#1807" class="Generalizable">s</a> <a id="8761" class="Symbol">{</a> <a id="8763" href="Leios.Protocol.html#1647" class="Field">ToPropose</a> <a id="8773" class="Symbol">=</a> <a id="8775" href="Leios.Short.html#2260" class="Generalizable">txs</a> <a id="8779" class="Symbol">}</a>
</pre><pre class="Agda">  <a id="_-⟦_/_⟧⇀_.Base₂a"></a><a id="8795" href="Leios.Short.html#8795" class="InductiveConstructor">Base₂a</a>  <a id="8803" class="Symbol">:</a> <a id="8805" class="Keyword">let</a> <a id="8809" class="Keyword">open</a> <a id="8814" href="Leios.Protocol.html#1513" class="Module">LeiosState</a> <a id="8825" href="Leios.Short.html#1807" class="Generalizable">s</a> <a id="8827" class="Keyword">in</a>
          <a id="8840" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="8842" href="Leios.Protocol.html#3088" class="Function">needsUpkeep</a> <a id="8854" href="Leios.Short.html#1174" class="InductiveConstructor">Base</a>
          <a id="8869" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="8871" class="Symbol">(</a><a id="8872" href="Leios.Short.html#2131" class="Generalizable">eb</a> <a id="8875" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8877" href="Leios.Short.html#2399" class="Generalizable">cert</a><a id="8881" class="Symbol">)</a> <a id="8883" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="8885" href="Leios.Prelude.html#1588" class="Function">filter</a> <a id="8892" class="Symbol">(λ</a> <a id="8895" class="Symbol">(</a><a id="8896" href="Leios.Short.html#8896" class="Bound">x</a> <a id="8898" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8900" class="Symbol">_)</a> <a id="8903" class="Symbol">→</a> <a id="8905" href="Leios.Short.html#8896" class="Bound">x</a> <a id="8907" href="Leios.Blocks.html#770" class="Function Operator">∈ᴮ</a> <a id="8910" href="Leios.Prelude.html#1209" class="Function">slice</a> <a id="8916" href="Leios.Abstract.html#1002" class="Function">L</a> <a id="8918" href="Leios.Protocol.html#1919" class="Function">slot</a> <a id="8923" class="Number">2</a><a id="8924" class="Symbol">)</a> <a id="8926" class="Symbol">(</a><a id="8927" href="Leios.Protocol.html#3421" class="Function">ebsWithCert</a> <a id="8939" href="Leios.Prelude.html#726" class="InductiveConstructor">fzero</a><a id="8944" class="Symbol">)</a>
          <a id="8956" href="Prelude.InferenceRules.html#10481" class="Function Operator">───────────────────────────────────────────────────────────────────────────────────</a>
          <a id="9050" href="Leios.Short.html#1807" class="Generalizable">s</a> <a id="9052" href="Leios.Short.html#7485" class="Datatype Operator">-⟦</a> <a id="9055" class="Symbol">(</a><a id="9056" href="CategoricalCrypto.Channel.Selection.html#734" class="InductiveConstructor">ϵ</a> <a id="9058" href="CategoricalCrypto.Channel.Selection.html#767" class="InductiveConstructor Operator">⊗R</a><a id="9060" class="Symbol">)</a> <a id="9062" href="CategoricalCrypto.Channel.Selection.html#767" class="InductiveConstructor Operator">⊗R</a> <a id="9065" href="CategoricalCrypto.Channel.Selection.html#1281" class="Function Operator">↑ᵢ</a> <a id="9068" href="Leios.Protocol.html#10864" class="InductiveConstructor">SLOT</a> <a id="9073" href="Leios.Short.html#7485" class="Datatype Operator">/</a> <a id="9075" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9080" class="Symbol">((</a><a id="9082" href="CategoricalCrypto.Channel.Selection.html#834" class="InductiveConstructor Operator">L⊗</a> <a id="9085" href="CategoricalCrypto.Channel.Selection.html#734" class="InductiveConstructor">ϵ</a><a id="9086" class="Symbol">)</a> <a id="9088" href="CategoricalCrypto.Channel.Selection.html#767" class="InductiveConstructor Operator">⊗R</a> <a id="9091" href="CategoricalCrypto.Channel.Selection.html#1296" class="Function Operator">↑ₒ</a> <a id="9094" href="Leios.Protocol.html#11014" class="InductiveConstructor">SUBMIT</a> <a id="9101" class="Keyword">record</a> <a id="9108" class="Symbol">{</a> <a id="9110" href="Leios.Base.html#551" class="Field">txs</a> <a id="9114" class="Symbol">=</a> <a id="9116" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="9119" class="Symbol">;</a> <a id="9121" href="Leios.Base.html#573" class="Field">announcedEB</a> <a id="9133" class="Symbol">=</a> <a id="9135" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="9143" class="Symbol">;</a> <a id="9145" href="Leios.Base.html#606" class="Field">ebCert</a> <a id="9152" class="Symbol">=</a> <a id="9154" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9159" href="Leios.Short.html#2399" class="Generalizable">cert</a> <a id="9164" class="Symbol">})</a> <a id="9167" href="Leios.Short.html#7485" class="Datatype Operator">⟧⇀</a>
            <a id="9182" href="Leios.Protocol.html#3730" class="Function">addUpkeep</a> <a id="9192" href="Leios.Short.html#1807" class="Generalizable">s</a> <a id="9194" href="Leios.Short.html#1174" class="InductiveConstructor">Base</a>

  <a id="_-⟦_/_⟧⇀_.Base₂b"></a><a id="9202" href="Leios.Short.html#9202" class="InductiveConstructor">Base₂b</a>  <a id="9210" class="Symbol">:</a> <a id="9212" class="Keyword">let</a> <a id="9216" class="Keyword">open</a> <a id="9221" href="Leios.Protocol.html#1513" class="Module">LeiosState</a> <a id="9232" href="Leios.Short.html#1807" class="Generalizable">s</a> <a id="9234" class="Keyword">in</a>
          <a id="9247" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="9249" href="Leios.Protocol.html#3088" class="Function">needsUpkeep</a> <a id="9261" href="Leios.Short.html#1174" class="InductiveConstructor">Base</a>
          <a id="9276" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="9278" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="9281" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="9283" href="Leios.Prelude.html#1588" class="Function">filter</a> <a id="9290" class="Symbol">(λ</a> <a id="9293" href="Leios.Short.html#9293" class="Bound">x</a> <a id="9295" class="Symbol">→</a> <a id="9297" href="Leios.Short.html#1649" class="Function">isVoteCertified</a> <a id="9313" href="Leios.Short.html#1807" class="Generalizable">s</a> <a id="9315" href="Leios.Short.html#9293" class="Bound">x</a> <a id="9317" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="9319" href="Leios.Short.html#9293" class="Bound">x</a> <a id="9321" href="Leios.Blocks.html#770" class="Function Operator">∈ᴮ</a> <a id="9324" href="Leios.Prelude.html#1209" class="Function">slice</a> <a id="9330" href="Leios.Abstract.html#1002" class="Function">L</a> <a id="9332" href="Leios.Protocol.html#1919" class="Function">slot</a> <a id="9337" class="Number">2</a><a id="9338" class="Symbol">)</a> <a id="9340" href="Leios.Protocol.html#2379" class="Function">EBs</a>
          <a id="9354" href="Prelude.InferenceRules.html#9837" class="Function Operator">──────────────────────────────────────────────────────────────────────────────────────────</a>
          <a id="9455" href="Leios.Short.html#1807" class="Generalizable">s</a> <a id="9457" href="Leios.Short.html#7485" class="Datatype Operator">-⟦</a> <a id="9460" class="Symbol">(</a><a id="9461" href="CategoricalCrypto.Channel.Selection.html#734" class="InductiveConstructor">ϵ</a> <a id="9463" href="CategoricalCrypto.Channel.Selection.html#767" class="InductiveConstructor Operator">⊗R</a><a id="9465" class="Symbol">)</a> <a id="9467" href="CategoricalCrypto.Channel.Selection.html#767" class="InductiveConstructor Operator">⊗R</a> <a id="9470" href="CategoricalCrypto.Channel.Selection.html#1281" class="Function Operator">↑ᵢ</a> <a id="9473" href="Leios.Protocol.html#10864" class="InductiveConstructor">SLOT</a> <a id="9478" href="Leios.Short.html#7485" class="Datatype Operator">/</a> <a id="9480" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9485" class="Symbol">((</a><a id="9487" href="CategoricalCrypto.Channel.Selection.html#834" class="InductiveConstructor Operator">L⊗</a> <a id="9490" href="CategoricalCrypto.Channel.Selection.html#734" class="InductiveConstructor">ϵ</a><a id="9491" class="Symbol">)</a> <a id="9493" href="CategoricalCrypto.Channel.Selection.html#767" class="InductiveConstructor Operator">⊗R</a> <a id="9496" href="CategoricalCrypto.Channel.Selection.html#1296" class="Function Operator">↑ₒ</a> <a id="9499" href="Leios.Protocol.html#11014" class="InductiveConstructor">SUBMIT</a> <a id="9506" class="Keyword">record</a> <a id="9513" class="Symbol">{</a> <a id="9515" href="Leios.Base.html#551" class="Field">txs</a> <a id="9519" class="Symbol">=</a> <a id="9521" href="Leios.Protocol.html#1647" class="Function">ToPropose</a> <a id="9531" class="Symbol">;</a> <a id="9533" href="Leios.Base.html#573" class="Field">announcedEB</a> <a id="9545" class="Symbol">=</a> <a id="9547" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="9555" class="Symbol">;</a> <a id="9557" href="Leios.Base.html#606" class="Field">ebCert</a> <a id="9564" class="Symbol">=</a> <a id="9566" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="9574" class="Symbol">})</a> <a id="9577" href="Leios.Short.html#7485" class="Datatype Operator">⟧⇀</a>
            <a id="9592" href="Leios.Protocol.html#3730" class="Function">addUpkeep</a> <a id="9602" href="Leios.Short.html#1807" class="Generalizable">s</a> <a id="9604" href="Leios.Short.html#1174" class="InductiveConstructor">Base</a>
</pre>#### Protocol rules
<pre class="Agda">  <a id="_-⟦_/_⟧⇀_.Roles₁"></a><a id="9643" href="Leios.Short.html#9643" class="InductiveConstructor">Roles₁</a> <a id="9650" class="Symbol">:</a>
         <a id="9661" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="9663" href="Leios.Short.html#1807" class="Generalizable">s</a> <a id="9665" href="Leios.Short.html#3428" class="Datatype Operator">↝</a> <a id="9667" class="Symbol">(</a><a id="9668" href="Leios.Short.html#1809" class="Generalizable">s&#39;</a> <a id="9671" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9673" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9678" href="Leios.Short.html#2075" class="Generalizable">i</a><a id="9679" class="Symbol">)</a>
         <a id="9690" href="Prelude.InferenceRules.html#12317" class="Function Operator">───────────────────────────────────────────────────────────</a>
         <a id="9759" href="Leios.Short.html#1807" class="Generalizable">s</a> <a id="9761" href="Leios.Short.html#7485" class="Datatype Operator">-⟦</a> <a id="9764" class="Symbol">(</a><a id="9765" href="CategoricalCrypto.Channel.Selection.html#734" class="InductiveConstructor">ϵ</a> <a id="9767" href="CategoricalCrypto.Channel.Selection.html#767" class="InductiveConstructor Operator">⊗R</a><a id="9769" class="Symbol">)</a> <a id="9771" href="CategoricalCrypto.Channel.Selection.html#767" class="InductiveConstructor Operator">⊗R</a> <a id="9774" href="CategoricalCrypto.Channel.Selection.html#1281" class="Function Operator">↑ᵢ</a> <a id="9777" href="Leios.Protocol.html#10864" class="InductiveConstructor">SLOT</a> <a id="9782" href="Leios.Short.html#7485" class="Datatype Operator">/</a> <a id="9784" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9789" class="Symbol">((</a><a id="9791" href="CategoricalCrypto.Channel.Selection.html#734" class="InductiveConstructor">ϵ</a> <a id="9793" href="CategoricalCrypto.Channel.Selection.html#767" class="InductiveConstructor Operator">⊗R</a><a id="9795" class="Symbol">)</a> <a id="9797" href="CategoricalCrypto.Channel.Selection.html#767" class="InductiveConstructor Operator">⊗R</a> <a id="9800" href="CategoricalCrypto.Channel.Selection.html#1296" class="Function Operator">↑ₒ</a> <a id="9803" href="Leios.Protocol.html#10829" class="InductiveConstructor">FFD-IN</a> <a id="9810" href="Leios.Short.html#2075" class="Generalizable">i</a><a id="9811" class="Symbol">)</a> <a id="9813" href="Leios.Short.html#7485" class="Datatype Operator">⟧⇀</a> <a id="9816" href="Leios.Short.html#1809" class="Generalizable">s&#39;</a>

  <a id="_-⟦_/_⟧⇀_.Roles₂"></a><a id="9822" href="Leios.Short.html#9822" class="InductiveConstructor">Roles₂</a> <a id="9829" class="Symbol">:</a>
         <a id="9840" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="9842" href="Leios.Short.html#1807" class="Generalizable">s</a> <a id="9844" href="Leios.Short.html#3428" class="Datatype Operator">↝</a> <a id="9846" class="Symbol">(</a><a id="9847" href="Leios.Short.html#1809" class="Generalizable">s&#39;</a> <a id="9850" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9852" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="9859" class="Symbol">)</a>
         <a id="9870" href="Prelude.InferenceRules.html#13494" class="Function Operator">─────────────────────────────────────</a>
         <a id="9917" href="Leios.Short.html#1807" class="Generalizable">s</a> <a id="9919" href="Leios.Short.html#7485" class="Datatype Operator">-⟦</a> <a id="9922" class="Symbol">(</a><a id="9923" href="CategoricalCrypto.Channel.Selection.html#734" class="InductiveConstructor">ϵ</a> <a id="9925" href="CategoricalCrypto.Channel.Selection.html#767" class="InductiveConstructor Operator">⊗R</a><a id="9927" class="Symbol">)</a> <a id="9929" href="CategoricalCrypto.Channel.Selection.html#767" class="InductiveConstructor Operator">⊗R</a> <a id="9932" href="CategoricalCrypto.Channel.Selection.html#1281" class="Function Operator">↑ᵢ</a> <a id="9935" href="Leios.Protocol.html#10864" class="InductiveConstructor">SLOT</a> <a id="9940" href="Leios.Short.html#7485" class="Datatype Operator">/</a> <a id="9942" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="9950" href="Leios.Short.html#7485" class="Datatype Operator">⟧⇀</a> <a id="9953" href="Leios.Short.html#1809" class="Generalizable">s&#39;</a>
</pre><!--
<pre class="Agda"><a id="ShortLeios"></a><a id="9973" href="Leios.Short.html#9973" class="Function">ShortLeios</a> <a id="9984" class="Symbol">:</a> <a id="9986" href="CategoricalCrypto.Machine.Core.html#875" class="Record">Machine</a> <a id="9994" class="Symbol">(</a><a id="9995" href="Leios.Protocol.html#10909" class="Function">FFD</a> <a id="9999" href="CategoricalCrypto.Channel.Core.html#3164" class="Function Operator">⊗</a> <a id="10001" href="Leios.Protocol.html#11097" class="Function">BaseC</a><a id="10006" class="Symbol">)</a> <a id="10008" class="Symbol">(</a><a id="10009" href="Leios.Protocol.html#10628" class="Function">IO</a> <a id="10012" href="CategoricalCrypto.Channel.Core.html#3164" class="Function Operator">⊗</a> <a id="10014" href="Leios.Protocol.html#10671" class="Function">Adv</a><a id="10017" class="Symbol">)</a>
<a id="10019" href="Leios.Short.html#9973" class="Function">ShortLeios</a> <a id="10030" class="Symbol">.</a><a id="10031" href="CategoricalCrypto.Machine.Core.html#979" class="Field">Machine.State</a> <a id="10045" class="Symbol">=</a> <a id="10047" href="Leios.Protocol.html#1513" class="Record">LeiosState</a>
<a id="10058" href="Leios.Short.html#9973" class="Function">ShortLeios</a> <a id="10069" class="Symbol">.</a><a id="10070" href="CategoricalCrypto.Machine.Core.html#997" class="Field">Machine.stepRel</a> <a id="10086" class="Symbol">=</a> <a id="10088" href="Leios.Short.html#7485" class="Datatype Operator">_-⟦_/_⟧⇀_</a>

<a id="10099" class="Keyword">open</a> <a id="10104" class="Keyword">import</a> <a id="10111" href="Prelude.STS.GenPremises.html" class="Module">Prelude.STS.GenPremises</a>

<a id="10136" class="Keyword">unquoteDecl</a> <a id="IB-Role-premises"></a><a id="10148" href="Leios.Short.html#10148" class="Function">IB-Role-premises</a> <a id="10165" class="Symbol">=</a> <a id="10167" href="Prelude.STS.GenPremises.html#13520" class="Function">genPremises</a> <a id="10179" href="Leios.Short.html#10148" class="Function">IB-Role-premises</a> <a id="10196" class="Symbol">(</a><a id="10197" class="Keyword">quote</a> <a id="10203" href="Leios.Short.html#3545" class="InductiveConstructor">_↝_.IB-Role</a><a id="10214" class="Symbol">)</a>
<a id="10216" class="Keyword">unquoteDecl</a> <a id="EB-Role-premises"></a><a id="10228" href="Leios.Short.html#10228" class="Function">EB-Role-premises</a> <a id="10245" class="Symbol">=</a> <a id="10247" href="Prelude.STS.GenPremises.html#13520" class="Function">genPremises</a> <a id="10259" href="Leios.Short.html#10228" class="Function">EB-Role-premises</a> <a id="10276" class="Symbol">(</a><a id="10277" class="Keyword">quote</a> <a id="10283" href="Leios.Short.html#4037" class="InductiveConstructor">_↝_.EB-Role</a><a id="10294" class="Symbol">)</a>
<a id="10296" class="Keyword">unquoteDecl</a> <a id="VT-Role-premises"></a><a id="10308" href="Leios.Short.html#10308" class="Function">VT-Role-premises</a> <a id="10325" class="Symbol">=</a> <a id="10327" href="Prelude.STS.GenPremises.html#13520" class="Function">genPremises</a> <a id="10339" href="Leios.Short.html#10308" class="Function">VT-Role-premises</a> <a id="10356" class="Symbol">(</a><a id="10357" class="Keyword">quote</a> <a id="10363" href="Leios.Short.html#4829" class="InductiveConstructor">_↝_.VT-Role</a><a id="10374" class="Symbol">)</a>

<a id="10377" class="Keyword">unquoteDecl</a> <a id="No-IB-Role-premises"></a><a id="10389" href="Leios.Short.html#10389" class="Function">No-IB-Role-premises</a> <a id="10409" class="Symbol">=</a> <a id="10411" href="Prelude.STS.GenPremises.html#13520" class="Function">genPremises</a> <a id="10423" href="Leios.Short.html#10389" class="Function">No-IB-Role-premises</a> <a id="10443" class="Symbol">(</a><a id="10444" class="Keyword">quote</a> <a id="10450" href="Leios.Short.html#5292" class="InductiveConstructor">No-IB-Role</a><a id="10460" class="Symbol">)</a>
<a id="10462" class="Keyword">unquoteDecl</a> <a id="No-EB-Role-premises"></a><a id="10474" href="Leios.Short.html#10474" class="Function">No-EB-Role-premises</a> <a id="10494" class="Symbol">=</a> <a id="10496" href="Prelude.STS.GenPremises.html#13520" class="Function">genPremises</a> <a id="10508" href="Leios.Short.html#10474" class="Function">No-EB-Role-premises</a> <a id="10528" class="Symbol">(</a><a id="10529" class="Keyword">quote</a> <a id="10535" href="Leios.Short.html#5548" class="InductiveConstructor">No-EB-Role</a><a id="10545" class="Symbol">)</a>
<a id="10547" class="Keyword">unquoteDecl</a> <a id="No-VT-Role-premises"></a><a id="10559" href="Leios.Short.html#10559" class="Function">No-VT-Role-premises</a> <a id="10579" class="Symbol">=</a> <a id="10581" href="Prelude.STS.GenPremises.html#13520" class="Function">genPremises</a> <a id="10593" href="Leios.Short.html#10559" class="Function">No-VT-Role-premises</a> <a id="10613" class="Symbol">(</a><a id="10614" class="Keyword">quote</a> <a id="10620" href="Leios.Short.html#5804" class="InductiveConstructor">No-VT-Role</a><a id="10630" class="Symbol">)</a>

<a id="10633" class="Keyword">unquoteDecl</a> <a id="Slot₁-premises"></a><a id="10645" href="Leios.Short.html#10645" class="Function">Slot₁-premises</a> <a id="10660" class="Symbol">=</a> <a id="10662" href="Prelude.STS.GenPremises.html#13520" class="Function">genPremises</a> <a id="10674" href="Leios.Short.html#10645" class="Function">Slot₁-premises</a> <a id="10689" class="Symbol">(</a><a id="10690" class="Keyword">quote</a> <a id="10696" href="Leios.Short.html#7589" class="InductiveConstructor">Slot₁</a><a id="10701" class="Symbol">)</a>
<a id="10703" class="Keyword">unquoteDecl</a> <a id="Slot₂-premises"></a><a id="10715" href="Leios.Short.html#10715" class="Function">Slot₂-premises</a> <a id="10730" class="Symbol">=</a> <a id="10732" href="Prelude.STS.GenPremises.html#13520" class="Function">genPremises</a> <a id="10744" href="Leios.Short.html#10715" class="Function">Slot₂-premises</a> <a id="10759" class="Symbol">(</a><a id="10760" class="Keyword">quote</a> <a id="10766" href="Leios.Short.html#7998" class="InductiveConstructor">Slot₂</a><a id="10771" class="Symbol">)</a>
<a id="10773" class="Keyword">unquoteDecl</a> <a id="Base₁-premises"></a><a id="10785" href="Leios.Short.html#10785" class="Function">Base₁-premises</a> <a id="10800" class="Symbol">=</a> <a id="10802" href="Prelude.STS.GenPremises.html#13520" class="Function">genPremises</a> <a id="10814" href="Leios.Short.html#10785" class="Function">Base₁-premises</a> <a id="10829" class="Symbol">(</a><a id="10830" class="Keyword">quote</a> <a id="10836" href="Leios.Short.html#8595" class="InductiveConstructor">Base₁</a><a id="10841" class="Symbol">)</a>
<a id="10843" class="Keyword">unquoteDecl</a> <a id="Base₂b-premises"></a><a id="10855" href="Leios.Short.html#10855" class="Function">Base₂b-premises</a> <a id="10871" class="Symbol">=</a> <a id="10873" href="Prelude.STS.GenPremises.html#13520" class="Function">genPremises</a> <a id="10885" href="Leios.Short.html#10855" class="Function">Base₂b-premises</a> <a id="10901" class="Symbol">(</a><a id="10902" class="Keyword">quote</a> <a id="10908" href="Leios.Short.html#9202" class="InductiveConstructor">Base₂b</a><a id="10914" class="Symbol">)</a>
</pre>--!>
