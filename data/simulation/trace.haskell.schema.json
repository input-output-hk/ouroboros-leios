{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "definitions": {
    "BlockRef": {
      "properties": {
        "id": {
          "type": "string"
        }
      },
      "required": ["id"],
      "type": "object"
    },
    "Endorsement": {
      "properties": {
        "eb": {
          "$ref": "#/definitions/BlockRef"
        }
      },
      "required": ["eb"],
      "type": "object"
    },
    "EnteredStateBlock": {
      "properties": {
        "id": {
          "type": "string"
        },
        "node": {
          "type": "string"
        },
        "slot": {
          "type": "number"
        },
        "type": {
          "enum": [
            "EBEnteredState",
            "EBGenerated",
            "IBEnteredState",
            "IBGenerated",
            "RBEnteredState",
            "RBGenerated",
            "VTBundleEnteredState",
            "VTBundleGenerated"
          ],
          "type": "string"
        }
      },
      "required": ["id", "node", "slot", "type"],
      "type": "object"
    },
    "GeneratedEndorserBlock": {
      "properties": {
        "id": {
          "type": "string"
        },
        "input_blocks": {
          "items": {
            "$ref": "#/definitions/BlockRef"
          },
          "type": "array"
        },
        "producer": {
          "type": "string"
        },
        "size_bytes": {
          "type": "number"
        },
        "slot": {
          "type": "number"
        },
        "type": {
          "enum": [
            "EBEnteredState",
            "EBGenerated",
            "IBEnteredState",
            "IBGenerated",
            "RBEnteredState",
            "RBGenerated",
            "VTBundleEnteredState",
            "VTBundleGenerated"
          ],
          "type": "string"
        }
      },
      "required": [
        "id",
        "input_blocks",
        "producer",
        "size_bytes",
        "slot",
        "type"
      ],
      "type": "object"
    },
    "GeneratedInputBlock": {
      "properties": {
        "id": {
          "type": "string"
        },
        "payload_bytes": {
          "type": "number"
        },
        "producer": {
          "type": "string"
        },
        "rb_ref": {
          "type": "string"
        },
        "size_bytes": {
          "type": "number"
        },
        "slot": {
          "type": "number"
        },
        "type": {
          "enum": [
            "EBEnteredState",
            "EBGenerated",
            "IBEnteredState",
            "IBGenerated",
            "RBEnteredState",
            "RBGenerated",
            "VTBundleEnteredState",
            "VTBundleGenerated"
          ],
          "type": "string"
        }
      },
      "required": ["id", "producer", "size_bytes", "slot", "type"],
      "type": "object"
    },
    "GeneratedRankingBlock": {
      "properties": {
        "endorsement": {
          "$ref": "#/definitions/Endorsement"
        },
        "endorsements": {
          "items": {
            "$ref": "#/definitions/Endorsement"
          },
          "type": "array"
        },
        "id": {
          "type": "string"
        },
        "parent": {
          "properties": {
            "id": {
              "type": "string"
            }
          },
          "required": ["id"],
          "type": "object"
        },
        "payload_bytes": {
          "type": "number"
        },
        "producer": {
          "type": "string"
        },
        "size_bytes": {
          "type": "number"
        },
        "slot": {
          "type": "number"
        },
        "type": {
          "enum": [
            "EBEnteredState",
            "EBGenerated",
            "IBEnteredState",
            "IBGenerated",
            "RBEnteredState",
            "RBGenerated",
            "VTBundleEnteredState",
            "VTBundleGenerated"
          ],
          "type": "string"
        },
        "vrf": {
          "type": "number"
        }
      },
      "required": ["producer", "size_bytes", "slot", "type"],
      "type": "object"
    },
    "GeneratedVote": {
      "properties": {
        "id": {
          "type": "string"
        },
        "producer": {
          "type": "string"
        },
        "size_bytes": {
          "type": "number"
        },
        "slot": {
          "type": "number"
        },
        "type": {
          "enum": [
            "EBEnteredState",
            "EBGenerated",
            "IBEnteredState",
            "IBGenerated",
            "RBEnteredState",
            "RBGenerated",
            "VTBundleEnteredState",
            "VTBundleGenerated"
          ],
          "type": "string"
        },
        "votes": {
          "$ref": "#/definitions/Record<string,number>"
        }
      },
      "required": ["id", "producer", "size_bytes", "slot", "type", "votes"],
      "type": "object"
    },
    "HaskellCpuEvent": {
      "properties": {
        "cpu_time_s": {
          "type": "number"
        },
        "node": {
          "type": "string"
        },
        "task_label": {
          "type": "string"
        },
        "type": {
          "const": "Cpu",
          "type": "string"
        }
      },
      "required": ["cpu_time_s", "node", "task_label", "type"],
      "type": "object"
    },
    "HaskellEvent": {
      "anyOf": [
        {
          "$ref": "#/definitions/HaskellCpuEvent"
        },
        {
          "$ref": "#/definitions/GeneratedInputBlock"
        },
        {
          "$ref": "#/definitions/GeneratedEndorserBlock"
        },
        {
          "$ref": "#/definitions/GeneratedRankingBlock"
        },
        {
          "$ref": "#/definitions/GeneratedVote"
        },
        {
          "$ref": "#/definitions/EnteredStateBlock"
        },
        {
          "$ref": "#/definitions/HaskellNetworkEvent"
        }
      ]
    },
    "HaskellNetworkEvent": {
      "properties": {
        "id": {
          "type": "string"
        },
        "ids": {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "msg_size_bytes": {
          "type": "number"
        },
        "recipient": {
          "type": "string"
        },
        "sender": {
          "type": "string"
        },
        "sending_s": {
          "type": "number"
        },
        "type": {
          "enum": [
            "EBReceived",
            "EBSent",
            "IBReceived",
            "IBSent",
            "RBReceived",
            "RBSent",
            "VTBundleReceived",
            "VTBundleSent"
          ],
          "type": "string"
        }
      },
      "required": ["id", "recipient", "type"],
      "type": "object"
    },
    "Record<string,number>": {
      "type": "object"
    }
  },
  "description": "Haskell simulation trace format",
  "properties": {
    "message": {
      "$ref": "#/definitions/HaskellEvent"
    },
    "time_s": {
      "type": "number"
    }
  },
  "required": ["message", "time_s"],
  "type": "object"
}
