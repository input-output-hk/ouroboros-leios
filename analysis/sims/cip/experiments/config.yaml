
# Simulation parameters.
timestamp-resolution-ms: 0.1         
simulate-transactions: true                    
cleanup-policies:                        
- cleanup-expired-vote           

# Protocol parameters for Linear Leios.
leios-variant: linear-with-tx-references
linear-eb-propagation-criteria: eb-received
linear-vote-stage-length-slots: 15
linear-diffuse-stage-length-slots: 0
praos-fallback-enabled: true      
leios-stage-active-voting-slots: 1
leios-mempool-sampling-strategy: ordered-by-id
relay-strategy: request-from-first
treat-blocks-as-full: false                       
eb-diffusion-strategy: peer-order
eb-referenced-txs-max-size-bytes: 12000000
eb-size-bytes-constant: 240
eb-size-bytes-per-ib: 32

# A conservative upper bound based on empiricial data of empty Praos blocks on
# Cardano mainnet.
leios-header-diffusion-time-ms: 2000.0

# Scenario-specific parameters for transaction generation.
tx-start-time: 60                                               
tx-stop-time: 960
tx-generation-distribution:        
  distribution: constant               
  value: 10.0                             
tx-size-bytes-distribution:        
  distribution: constant      
  value: 1500              
tx-conflict-fraction: 0                   
tx-overcollateralization-factor-distribution:
  distribution: constant                   
  value: 0                             

#IGNORE## Assume a lazy approach where only the Blake3b hash is computed when the
#IGNORE## transaction is received. The phase 1 and phase 2 validation will be undertaken
#IGNORE## when the block is generated or validated. A more sophisticated simulation
#IGNORE## would track phase 1 & 2 validation whenever they occur and would not repeat
#IGNORE## that. Here we use the Blake3b benchmark of a 500 MB/s hash rate and apply it
#IGNORE## to a typical 2 kB transaction.
#IGNORE#tx-validation-cpu-time-ms: 0.004

tx-validation-cpu-time-ms: 0.2147

# Inherited from Cardano mainnet protocol parameters for Praos.
tx-max-size-bytes: 16384
rb-generation-probability: 0.05
rb-head-size-bytes: 1024
rb-body-max-size-bytes: 90112

# Worst case based on benchmark cluster "Forging: Slot start to announced".
rb-generation-cpu-time-ms: 71.02

# Based on `apply` statistics for empty blocks using `db-analyser` on blocks
# from the Cardano mainnet.
rb-head-validation-cpu-time-ms: 0.4438
eb-header-validation-cpu-time-ms: 0.4438

#IGNORE## Since only the transaction hashes were previously verified, the complete
#IGNORE## `apply`, including phase 1 & 2 validation, must occur when an RB or EB is
#IGNORE## generated. We base the values adopted upon empirical analysis of
#IGNORE## `db-analyser` results for Cardano mainnet blocks. We estimate the following
#IGNORE## regression formulae.
#IGNORE##
#IGNORE## Application time as a function of the total size of transactions:
#IGNORE##   `Apply CPU [ms]` ~ (1.965326 ms) + (0.180536 ms/kB) * `Txs size [kB]`
#IGNORE##
#IGNORE## Application time as a function of the total size of transactions and the
#IGNORE## Plutus execution steps:
#IGNORE##   `Apply CPU [ms]` ~ (1.7600 ms) + (0.1100 ms/kB) * `Txs size [kB]`
#IGNORE##                    + (0.7202 ms/Gstep) * `Txs execution units [Gstep]`
#IGNORE##   
#IGNORE#rb-body-legacy-praos-payload-validation-cpu-time-ms-constant: 1.965326
#IGNORE#rb-body-legacy-praos-payload-validation-cpu-time-ms-per-byte: 0.000180536
#IGNORE#eb-body-validation-cpu-time-ms-constant: 1.965326
#IGNORE#eb-body-validation-cpu-time-ms-per-byte: 0.000180536
   
rb-body-legacy-praos-payload-validation-cpu-time-ms-constant: 0.3539
rb-body-legacy-praos-payload-validation-cpu-time-ms-per-byte: 0.00002151
eb-body-validation-cpu-time-ms-constant: 0.3539
eb-body-validation-cpu-time-ms-per-byte: 0.00002151

# Based on analysis of wFA+LS sortition for realistic stake distribution similar
# to that of Cardano mainnet.
vote-generation-probability: 500.0
vote-threshold: 300

# Based on CDDL for votes, worst case for non-persistent voters.
vote-bundle-size-bytes-constant: 0
vote-bundle-size-bytes-per-eb: 164

# Worst case based on benchmarks from cryptography prototype.
vote-generation-cpu-time-ms-constant: 0.280
vote-generation-cpu-time-ms-per-tx: 0
vote-validation-cpu-time-ms: 2.9

# Vote diffusion settings.
vote-diffusion-strategy: peer-order
vote-diffusion-max-bodies-to-request: 1
vote-diffusion-max-headers-to-request: 100
vote-diffusion-max-window-size: 100

# Worst case based on CDDL for certificates and on empirical study of wFA+LS
# sortition.
cert-size-bytes-constant: 8000
cert-size-bytes-per-node: 0

# Worst case based on benchmarks from cryptography prototype.
cert-generation-cpu-time-ms-constant: 92.5
cert-generation-cpu-time-ms-per-node: 0
cert-validation-cpu-time-ms-constant: 157.2
cert-validation-cpu-time-ms-per-node: 0

