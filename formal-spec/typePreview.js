!function(){let e,t,n=null;const i=new Map;function o(o){t&&clearTimeout(t),n=o.target;n.getAttribute("data-original-href");const l=n.getAttribute("href");l&&(t=setTimeout((()=>{!async function(t,n){const[o,l]=n.split("#");if(!l)return;let s,a;const d=l.match(/^(B\d+)-L(\d+)$/);if(d)a=d[1],s=parseInt(d[2],10);else{if(!l.startsWith("L"))return;a="B1",s=parseInt(l.substring(1),10)}if(isNaN(s))return;const m=`${o||window.location.pathname}#${a}-${s}`;let u;if(i.has(m))u=i.get(m);else if(o&&o!==window.location.pathname.split("/").pop())try{const e=o.replace(".html","");u=await async function(e,t,n="",i="B1"){try{const o=await fetch(e);if(!o.ok)throw new Error(`Failed to fetch ${e}: ${o.status}`);const l=await o.text(),s=(new DOMParser).parseFromString(l,"text/html"),a=`${i}-LC${t}`,d=s.getElementById(a);if(!d){const e=s.getElementById(`LC${t}`);if(e){const i=e.closest(".code-content");if(i){const o=Array.from(i.querySelectorAll(".code-line")),l=o.indexOf(e);if(-1!==l){const{startIndex:e,endIndex:i}=c(o,l);return r(o.slice(e,i+1),t,e,n)}}}return null}const m=d.closest(".code-content");if(!m)return null;const u=Array.from(m.querySelectorAll(".code-line")),p=u.indexOf(d);if(-1===p)return null;const{startIndex:f,endIndex:h}=c(u,p);return r(u.slice(f,h+1),t,f,n,i)}catch(o){return console.error("Error fetching preview:",o),null}}(o,s,e,a),u&&i.set(m,u)}catch(p){return void console.error("Error fetching code preview:",p)}else{const e=`${a}-LC${s}`,t=document.getElementById(e);if(!t)return;const n=t.closest(".code-content");if(!n)return;const o=Array.from(n.querySelectorAll(".code-line")),l=o.indexOf(t);if(-1===l)return;const{startIndex:d,endIndex:p}=c(o,l);u=r(o.slice(d,p+1),s,d,document.title||window.location.pathname.split("/").pop().replace(".html",""),a),i.set(m,u)}if(!u)return;e.innerHTML="",e.appendChild(u),function(t){if(!t||!e)return;const n=t.getBoundingClientRect(),i=window.innerWidth,o=window.innerHeight;e.style.maxHeight="",e.style.maxWidth="",e.style.visibility="hidden",e.style.display="block";const l=e.offsetWidth,c=e.offsetHeight;let r=n.bottom+window.scrollY+5,s=n.left+window.scrollX;if(n.bottom+c>o&&(r=n.top+window.scrollY-c-5,r<window.scrollY)){r=window.scrollY+5;const t=o-10;e.style.maxHeight=`${t}px`}s+l>i&&(s=i-l+window.scrollX-5,s<window.scrollX&&(s=window.scrollX+5,e.style.maxWidth=i-10+"px"));e.style.top=`${r}px`,e.style.left=`${s}px`,e.style.visibility="visible"}(t),e.style.display="block"}(n,l)}),300))}function l(){t&&(clearTimeout(t),t=null)}function c(e,t){const n=e=>""===(e.textContent||"").trim(),i=e=>(e.innerHTML||"").includes("Comment");let o=Math.max(0,t-3),l=Math.min(e.length-1,t+3),c=t;for(;c>0;){if(c--,n(e[c])){c===t-1&&(o=c+1);break}if(i(e[c]))break;o=c}c=t;let r=0,s=!1;for(;c<e.length-1&&!s;){const t=e[c].textContent||"";for(const e of t)"("!==e&&"{"!==e&&"["!==e||r++,")"!==e&&"}"!==e&&"]"!==e||r--;if(c++,c<e.length&&r<=0&&(n(e[c])||i(e[c]))){s=!0,l=c-1;break}l=c}return o=Math.max(0,o),l=Math.min(e.length-1,l),{startIndex:o,endIndex:l}}function r(e,t,n,i="",o="B1"){const l=document.createElement("div");l.className="code-preview-container";const c=document.createElement("div");c.className="preview-heading";const r=document.createElement("span");r.className="module-name",r.textContent=i?`Definition in ${i}`:"Definition";const s=document.createElement("a");s.className="link-to-definition",s.textContent=`Line ${t}`,i&&i!==(document.title||"")?s.href=`${i}.html#${o}-L${t}`:s.href=`#${o}-L${t}`,c.appendChild(r),c.appendChild(s),l.appendChild(c);const a=document.createElement("div");a.className="preview-line-numbers";const d=document.createElement("div");d.className="preview-code-content",e.forEach(((e,i)=>{const o=n+i+1,l=document.createElement("span");l.className="preview-line-number",l.textContent=o,o===t&&l.classList.add("highlight"),a.appendChild(l);const c=document.createElement("div");c.className="preview-code-line",o===t&&c.classList.add("highlight");const r=document.createElement("div");r.style.whiteSpace="pre",r.innerHTML=e.innerHTML,c.appendChild(r),d.appendChild(c)}));const m=document.createElement("div");m.className="Agda";const u=document.createElement("div");return u.className="code-container",u.appendChild(a),u.appendChild(d),m.appendChild(u),l.appendChild(m),l}document.addEventListener("DOMContentLoaded",(function(){!function(){e=document.getElementById("type-preview-container"),e||(e=document.createElement("div"),e.id="type-preview-container",e.className="type-preview-container",e.style.display="none",document.body.appendChild(e));function i(){document.querySelectorAll(".type-hoverable").forEach((e=>{e.addEventListener("mouseenter",o),e.addEventListener("mouseleave",l),e.addEventListener("focus",o),e.addEventListener("blur",l)}))}i(),document.addEventListener("click",(function(i){"block"!==e.style.display||e.contains(i.target)||n?.contains(i.target)||function(){e&&(e.style.display="none");t&&(clearTimeout(t),t=null);n=null}()}))}()}))}();